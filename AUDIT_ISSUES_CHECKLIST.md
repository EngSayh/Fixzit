# ูุงุฆูุฉ ููุงู ุงูุฅุตูุงุญุงุช | Issues Checklist

## ๐ด ุญุฑุฌ - ูุฌุจ ุงูุฅุตูุงุญ ููุฑุงู | CRITICAL - Fix Immediately

- [ ] **JWT-001**: ุฅุฒุงูุฉ JWT_SECRET ุงูููุดููุฉ ูู `lib/auth.ts` ุงูุฃุณุทุฑ 100 ู 121
  - ุงูููู: `lib/auth.ts`
  - ุงูุญู: ุงุณุชุฎุฏุงู ููุท `process.env.JWT_SECRET` ูุน validation
  - ุงูุฃููููุฉ: ๐ด ุญุฑุฌุฉ
  - ุงูููุช ุงููุชููุน: 30 ุฏูููุฉ
  - ุงููุฎุงุทุฑ ุฅู ูู ุชูุญู: ุงุฎุชุฑุงู ูุงูู ูููุตุงุฏูุฉ

---

## โ๏ธ ุนุงูู - ูุฌุจ ุงูุฅุตูุงุญ ูุฐุง ุงูุฃุณุจูุน | HIGH - Fix This Week

- [ ] **DUP-001**: ุชูุญูุฏ ุฏุงูุฉ `getSessionUser`
  - ุงููููุงุช: `lib/auth-middleware.ts` ู `server/middleware/withAuthRbac.ts`
  - ุงูุญู: ุงุฎุชูุงุฑ ูุงุญุฏุฉ ูุญุฐู ุงูุฃุฎุฑูุ ุชุญุฏูุซ 41 ููู
  - ุงูุฃููููุฉ: โ๏ธ ุนุงููุฉ
  - ุงูููุช ุงููุชููุน: 2-3 ุณุงุนุงุช
  - ุงููููุงุช ุงููุชุฃุซุฑุฉ: 41 ููู

- [ ] **LOG-001**: ุงุณุชุจุฏุงู console.log ุจูุธุงู logging ุงุญุชุฑุงูู
  - ุงููููุงุช: 121 ููู (385+ ุงุณุชุฎุฏุงู)
  - ุงูุญู: ุชุทุจูู Winston ุฃู Pino
  - ุงูุฃููููุฉ: โ๏ธ ุนุงููุฉ
  - ุงูููุช ุงููุชููุน: 1-2 ููู
  - ุงููุงุฆุฏุฉ: ุฃูุงู ุฃูุถูุ ุชุชุจุน ุฃูุถู

- [ ] **OPT-001**: ูุฑุงุฌุนุฉ ุงุณุชุฎุฏุงู optional chaining ุนูู user objects
  - ุงููููุงุช: 21 ุญุงูุฉ ูู ูููุงุช ูุชุนุฏุฏุฉ
  - ุงูุญู: ูุญุต ุตุฑูุญ ุจุฏูุงู ูู `user?.`
  - ุงูุฃููููุฉ: โ๏ธ ุนุงููุฉ
  - ุงูููุช ุงููุชููุน: 3-4 ุณุงุนุงุช
  - ุงููุงุฆุฏุฉ: ุงูุชุดุงู ุฃุฎุทุงุก ููุทููุฉ

---

## ๐ก ูุชูุณุท - ูุฌุจ ุงูุฅุตูุงุญ ูุฐุง ุงูุดูุฑ | MEDIUM - Fix This Month

- [ ] **AUTH-001**: ุชูุญูุฏ ูุญูุตุงุช ุงููุตุงุฏูุฉ ุจุงุณุชุฎุฏุงู middleware
  - ุงููููุงุช: 44 ููู API
  - ุงูุญู: ุฅูุดุงุก middleware ููุญุฏ
  - ุงูุฃููููุฉ: ๐ก ูุชูุณุทุฉ
  - ุงูููุช ุงููุชููุน: 1 ููู
  - ุงููุงุฆุฏุฉ: ุชูููู ุงูุชูุฑุงุฑุ ุตูุงูุฉ ุฃุณูู

- [ ] **ENV-001**: ุฅุถุงูุฉ validation ูููุชุบูุฑุงุช ุงูุจูุฆูุฉ
  - ุงููููุงุช: 78 ููู (214 ุงุณุชุฎุฏุงู)
  - ุงูุญู: ุฅูุดุงุก ููู config ูุฑูุฒู ูุน validation
  - ุงูุฃููููุฉ: ๐ก ูุชูุณุทุฉ
  - ุงูููุช ุงููุชููุน: 4-6 ุณุงุนุงุช
  - ุงููุงุฆุฏุฉ: ูุดู ุณุฑูุน ูุน ุฑุณุงุฆู ูุงุถุญุฉ

- [ ] **CLEAN-001**: ุญุฐู ุงููููุงุช ุงูููุฑุฑุฉ ูู `_deprecated/`
  - ุงููููุงุช: 44+ ููู ูููุฐุฌ ูุฏูู
  - ุงูุญู: ุงูุชุฃูุฏ ูู ุนุฏู ุงูุงุณุชุฎุฏุงู ุซู ุงูุญุฐู
  - ุงูุฃููููุฉ: ๐ก ูุชูุณุทุฉ
  - ุงูููุช ุงููุชููุน: 2-3 ุณุงุนุงุช
  - ุงููุงุฆุฏุฉ: ุชูููู ุญุฌู ุงููุดุฑูุนุ ูุถูุญ ุฃูุซุฑ

- [ ] **ERR-001**: ูุฑุงุฌุนุฉ catch blocks ุงููุงุฑุบุฉ
  - ุงููููุงุช: ูุชุนุฏุฏุฉ (1953 ุณุทุฑ catch)
  - ุงูุญู: ุงูุชุฃูุฏ ูู handling ููุงุณุจ
  - ุงูุฃููููุฉ: ๐ก ูุชูุณุทุฉ
  - ุงูููุช ุงููุชููุน: 1 ููู
  - ุงููุงุฆุฏุฉ: debugging ุฃูุถู

---

## ๐ข ููุฎูุถ - ุชุญุณููุงุช ูุณุชูุจููุฉ | LOW - Future Improvements

- [ ] **TODO-001**: ุญู ุชุนูููุงุช TODO/FIXME
  - ุงูุนุฏุฏ: 45+ ุชุนููู
  - ุงูุฃููููุฉ: ๐ข ููุฎูุถุฉ
  - ุงูููุช ุงููุชููุน: ุญุณุจ ุงููููุฉ

- [ ] **DOC-001**: ุฅุถุงูุฉ JSDoc ููุฏูุงู ุงููููุฉ
  - ุงูุฃููููุฉ: ๐ข ููุฎูุถุฉ
  - ุงูููุช ุงููุชููุน: ูุณุชูุฑ
  - ุงููุงุฆุฏุฉ: documentation ุฃูุถู

- [ ] **TEST-001**: ุฒูุงุฏุฉ ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช
  - ุงูุฃููููุฉ: ๐ข ููุฎูุถุฉ
  - ุงูุชุบุทูุฉ ุงูุญุงููุฉ: ุฌูุฏุฉ
  - ุงููุฏู: ููุชุงุฒุฉ

---

## ๐ ุงูุชูุงุตูู ุงูููุณุนุฉ | Detailed Issues

### JWT-001: JWT Secret Exposure

**ุงูููุฏ ุงูุญุงูู (ุงูุฎุทุฃ):**
```typescript
// lib/auth.ts:100
// โ ูุญุชูู ุนูู ุณุฑ ุซุงุจุช (REDACTED) - ูุฌุจ ุฅุฒุงูุชู ููุฑุงู
if (process.env.NODE_ENV === 'production') {
  jwtSecret = 'REDACTED_SECRET_FOUND_IN_CODE';
  return jwtSecret;
}
```

**ุงูููุฏ ุงูููุชุฑุญ (ุงูุตุญูุญ):**
```typescript
// lib/auth.ts
if (process.env.NODE_ENV === 'production') {
  if (!process.env.JWT_SECRET) {
    throw new Error('JWT_SECRET must be set in production');
  }
  jwtSecret = process.env.JWT_SECRET;
  return jwtSecret;
}
```

**ุฎุทูุงุช ุงูุฅุตูุงุญ:**
1. ุฅุฒุงูุฉ ุงููููุฉ ุงูุซุงุจุชุฉ ูู ุงูููุฏ
2. ุฅุถุงูุฉ JWT_SECRET ุฅูู `.env` ู `.env.production`
3. ุชุญุฏูุซ deployment scripts ููุชุฃูุฏ ูู ูุฌูุฏ ุงููุชุบูุฑ
4. ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ ูู development ู production
5. ุชุฏููุฑ (rotate) ุงูู JWT_SECRET ุงูุญุงููุฉ ุจุนุฏ ุงููุดุฑ

---

### DUP-001: Duplicate getSessionUser

**ุงูููู ุงูุฃูู:** `lib/auth-middleware.ts`
```typescript
export interface AuthenticatedUser {
  id: string;
  email: string;
  name?: string;
  role: string;
  orgId: string;
}
```

**ุงูููู ุงูุซุงูู:** `server/middleware/withAuthRbac.ts`
```typescript
export type SessionUser = {
  id: string;
  role: Role;
  orgId: string;
  tenantId: string;
};
```

**ุงูุญู ุงูููุชุฑุญ:**
1. ุชูุญูุฏ ุงูููุน ูู ููู ูุดุชุฑู `types/auth.ts`
2. ุชุตุฏูุฑ ุฏุงูุฉ ูุงุญุฏุฉ ูู `lib/auth.ts`
3. ุชุญุฏูุซ ุฌููุน ุงูุงุณุชูุฑุงุฏุงุช (41 ููู)
4. ุญุฐู ุงูุฏุงูุฉ ุงูููุฑุฑุฉ

**ุงูููุน ุงูููุญุฏ ุงูููุชุฑุญ:**
```typescript
// types/auth.ts
export interface SessionUser {
  id: string;
  email: string;
  name?: string;
  role: string;
  orgId: string;
  tenantId: string;
}
```

---

### LOG-001: Logging System

**ุงููุดุงูู ุงูุญุงููุฉ:**
- ุงุณุชุฎุฏุงู console.log/error/warn ูุจุงุดุฑุฉ
- ุนุฏู ูุฌูุฏ log levels ููุญุฏุฉ
- ุตุนูุจุฉ ูู ุงูุจุญุซ ูุงูุชุตููุฉ
- ูุฏ ููุดู ูุนูููุงุช ุญุณุงุณุฉ ูู production

**ุงูุญู ุงูููุชุฑุญ:**
```typescript
// lib/logger.ts
import winston from 'winston';

const logger = winston.createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' }),
  ],
});

if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple(),
  }));
}

export default logger;
```

**ุงูุงุณุชุฎุฏุงู:**
```typescript
// ุจุฏูุงู ูู
console.log('User logged in:', userId);

// ุงุณุชุฎุฏู
logger.info('User logged in', { userId });
```

---

## ๐ ุชุชุจุน ุงูุชูุฏู | Progress Tracking

```
ุงูุชูุฏู ุงูุฅุฌูุงูู: [ 0 / 15 ] (0%)

๐ด ุญุฑุฌ    : [ 0 / 1  ] (0%)
โ๏ธ ุนุงูู    : [ 0 / 3  ] (0%)
๐ก ูุชูุณุท   : [ 0 / 4  ] (0%)
๐ข ููุฎูุถ   : [ 0 / 3  ] (0%)
๐ ุงุฎุชูุงุฑู : [ 0 / 4  ] (0%)
```

---

## ๐ฏ ุฃูุฏุงู ุงูุฃุณุจูุน | Weekly Goals

### ุงูุฃุณุจูุน 1
- [ ] ุฅุตูุงุญ JWT-001
- [ ] ุฅุตูุงุญ DUP-001
- [ ] ุจุฏุก LOG-001

### ุงูุฃุณุจูุน 2
- [ ] ุฅููุงู LOG-001
- [ ] ุฅุตูุงุญ OPT-001
- [ ] ุจุฏุก AUTH-001

### ุงูุฃุณุจูุน 3
- [ ] ุฅููุงู AUTH-001
- [ ] ุฅุตูุงุญ ENV-001
- [ ] ุจุฏุก CLEAN-001

### ุงูุฃุณุจูุน 4
- [ ] ุฅููุงู CLEAN-001
- [ ] ุฅุตูุงุญ ERR-001
- [ ] ูุฑุงุฌุนุฉ ููุงุฆูุฉ

---

## ๐ ููุงุญุธุงุช ูููุทูุฑูู | Developer Notes

### ูุจู ุงูุจุฏุก ุจุฃู ุฅุตูุงุญ:
1. โ ุฅูุดุงุก branch ุฌุฏูุฏ
2. โ ูุฑุงุกุฉ ุงูููุฏ ุงููุชุฃุซุฑ ุจุงููุงูู
3. โ ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุงูุญุงููุฉ
4. โ ุงูุชุฃูุฏ ูู ููู ุงูุชุฃุซูุฑ

### ุจุนุฏ ูู ุฅุตูุงุญ:
1. โ ูุชุงุจุฉ/ุชุญุฏูุซ ุงูุงุฎุชุจุงุฑุงุช
2. โ ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
3. โ ูุฑุงุฌุนุฉ ุงูููุฏ ุฐุงุชูุงู
4. โ ุชุญุฏูุซ ุงูุชูุซูู ุฅู ูุฒู

### ุนูุฏ ุงูุงูุชูุงุก ูู ุฌููุน ุงูุฅุตูุงุญุงุช:
1. โ ูุฑุงุฌุนุฉ ุดุงููุฉ ูููุธุงู
2. โ ุงุฎุชุจุงุฑ E2E ูุงูู
3. โ ูุฑุงุฌุนุฉ ุงูุฃูุงู ุงูููุงุฆูุฉ
4. โ ุชุญุฏูุซ CHANGELOG

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-10-09  
**ุงูุญุงูุฉ:** ูุงุฆูุฉ ุฌุงูุฒุฉ ููุชูููุฐ  
**ุงููุณุคูู:** ูุฑูู ุงูุชุทููุฑ
