# Backlog Audit

**Extracted At:** 28/12/2025 14:11 (Asia/Riyadh)
**Extracted By:** [AGENT-003-A]
**Source:** docs/PENDING_MASTER.md

## Executive Summary
- Total open items: 1186
- Quick wins (XS/S): 225
- Anomalies: 0

## Category Breakdown
| Category | Count |
|---|---:|
| Bugs | 99 |
| Efficiency | 20 |
| Logic Errors | 23 |
| Missing Tests | 367 |
| Next Steps | 677 |

## File Heat Map (Top 10)
| File | Count |
|---|---:|
| lib/graphql/index.ts | 5 |
| app/api/fm/finance/budgets/route.ts | 4 |
| components/fm/WorkOrdersViewNew.tsx | 2 |
| components/administration/UsersList.tsx | 2 |
| components/hr/EmployeesList.tsx | 2 |
| components/finance/InvoicesList.tsx | 2 |
| components/administration/AuditLogsList.tsx | 2 |
| decimal.ts | 2 |
| /route.ts | 2 |
| subscriptionSeatService.ts | 2 |

## Sprint Buckets
| Priority | Count |
|---|---:|
| P0 | 103 |
| P1 | 113 |
| P2 | 189 |
| P3 | 781 |

## Bugs
| Key | Title | Priority | Effort | Impact | Status | Location | SourceRef |
|---|---|---|---|---:|---|---|---|
| REF-441 | \| 1 \| **P0** \| Apply health-hints to additional 503 surfaces (AV scan downstream errors, tenant-config callers, FM report scan paths) and propagate traceId into logs. \| | P0 | XS | 10 | unknown | docs/PENDING_MASTER.md:11057 | ### ğŸ“‹ Planned Next Steps |
| REF-510 | \| 2 \| **P0** \| Add hard failure + structured logging to `lib/config/tenant.server.ts` so tenant load errors do not silently fall back to defaults \| 45m \| ğŸ”´ TODO \| | P0 | XS | 10 | pending | lib/config/tenant.server.ts | ### ğŸ“ Current Progress & Plan |
| BUG-1709 | \| BUG-1709 \| app/api/upload/scan/route.ts:44-92 \| Triggers AV scan on unvalidated keys; no org-bound prefix validation, enabling cross-tenant scans and leakage of scan outcomes. \| ğŸ”´ Open \| | P0 | S | 10 | pending | app/api/upload/scan/route.ts:44-92 | #### Bugs |
| BUG-1701 | \| BUG-1701 \| lib/graphql/index.ts:769-801 \| `workOrder` query lacks org filter; id-only lookup \| ğŸ”´ Open \| | P0 | S | 10 | pending | lib/graphql/index.ts:769-801 | #### Bugs |
| BUG-002 | \| Bugs \| BUG-002 GraphQL resolvers TODO (7) \| Open \| Implement or document stubs in `lib/graphql/index.ts`. \| | P0 | S | 10 | pending | lib/graphql/index.ts | ### ğŸ“‹ Enhancements for Production Readiness |
| REF-573 | Review 2 JSON.parse locations without try-catch â€” 30m | P0 | S | 10 | pending | JSON.parse | #### P1 â€” High Priority (Next 3 days) |
| EFF-004 | \| P2 \| EFF-004 \| Add rate limiting to PM routes (plans/[id]) \| Pending \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:7018 | ### ğŸ¯ Remaining Priority Items |
| REF-060 | Multi-select checkboxes with counts (e.g., "Open (12)") | P1 | S | 10 | pending | e.g | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| BUG-010 | \| BUG-010 \| PM routes missing tenant filter \| âœ… FALSE POSITIVE \| Routes already have `orgId` filter; grep missed camelCase \| | P1 | S | 10 | pending | app/api/pm/* | ### âœ… v65.23 Session Progress â€” P1 Priority Fixes |
| REF-864 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Return auth error before DB calls for dashboard/workOrder/properties/invoice. \| | P2 | ? | 10 | pending | docs/PENDING_MASTER.md:19036 | ### ğŸ”§ Enhancements & Production Readiness |
| BUG-FM-001 | \| 3 \| ğŸŸ  P1 \| BUG-FM-001: Add unitId to tenant filter \| 1h \| â³ Pending \| | P1 | S | 9 | pending | fm/utils/tenant.ts | ### ğŸ”„ Planned Next Steps |
| BUG-KYC-001 | \| 4 \| ğŸŸ  P1 \| BUG-KYC-001: Add RBAC guard to KYC submit \| 30m \| â³ Pending \| | P1 | S | 9 | pending | seller-central/kyc/submit | ### ğŸ”„ Planned Next Steps |
| REF-177 | Logic errors: avoid retrying QA reconnect while unauthenticated; add early return guard in AutoFix checks for missing session to prevent false degraded statuses. | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:8083 | ### Enhancements Needed for Production |
| REF-420 | \| Auth-infra \| Auth store failure â†’ 503 for routes with `getSessionOrError` \| P1 \| ğŸ”´ TODO \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:10856 | #### Missing Tests |
| BUG-001 | \| BUG-001 \| OTP 500 when bypass code not set \| `app/api/auth/otp/send/route.ts` \| Config issue - needs env var \| | P2 | XS | 9 | pending | app/api/auth/otp/send/route.ts | #### Identified Bugs |
| BUG-PAY-001 | \| BUG-PAY-001 \| `payments/tap/checkout/route.ts:251` \| localhost:3000 fallback \| ğŸŸ  P1 \| â³ Pending \| | P1 | S | 8 | pending | payments/tap/checkout/route.ts:251 | #### ğŸ› Identified Bugs |
| BUG-1708 | \| BUG-1708 \| app/api/upload/verify-metadata/route.ts:37-119 \| Accepts arbitrary bucket keys without tenant/org check; any authenticated user with a guessed key can read object metadata across tenants. \| ğŸ”´ Open \| | P3 | L | 8 | pending | app/api/upload/verify-metadata/route.ts:37-119 | #### Bugs |
| BUG-CART-001 | \| BUG-CART-001 \| `marketplace/cart/route.ts` \| Missing zodValidationError \| P1 \| NEW \| | P1 | S | 7 | pending | marketplace/cart/route.ts | ### ğŸ› Identified Bugs |
| REF-622 | \| 3 \| **P1** \| Fix 65 Unprotected request.json() \| 2h \| Crash prevention \| None \| | P1 | S | 7 | unknown | request.json | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| BUG-SETTLE-001 | \| P1 \| Fix BUG-SETTLE-001 (BankAccount type) \| 15m \| Agent \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:8583 | ### ğŸ¯ Planned Next Steps |
| BUG-ISSUES-001 | \| P1 \| Fix BUG-ISSUES-001 (duplicate logger) \| 5m \| Agent \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:8585 | ### ğŸ¯ Planned Next Steps |
| RTL-001 | \| P1 \| Fix RTL-001: Error page template \| 30min \| â€” \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:9932 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-779 | \| ğŸŸ¡ P1 \| Add try-catch to 8 routes without error handling \| 30 min \| See list below \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:18158 | ### ğŸ”² Planned Next Steps |
| P1-3 | \| ğŸŸ¡ P1-3 \| Add try-catch to 8 routes without error handling \| 30 min \| ğŸ”² \| None \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:19091 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-686 | Bugs/logic: auto-monitor unauthorized calls; OTP send and forgot password 500s; health monitoring without auth; error handling gaps. | P3 | ? | 7 | pending | docs/PENDING_MASTER.md:15925 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-970 | **Validation gaps**: GraphQL currently accepts broad inputs while REST uses Zod; reusing schemas closes bypass paths and aligns error payloadsâ€”applies to future GraphQL mutations (properties/invoices) too. | P2 | ? | 6 | pending | docs/PENDING_MASTER.md:22396 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| BUG-1706 | \| BUG-1706 \| app/api/aqar/packages/route.ts:102-124 \| Payments/packages allow user-id org fallback \| ğŸ”´ Open \| | P3 | S | 6 | pending | app/api/aqar/packages/route.ts:102-124 | #### Bugs |
| BUG-003 | \| BUG-003 \| ğŸŸ  High \| 20+ routes \| `.json().catch(() => ({}))` swallows parse errors \| ğŸ”´ TODO \| 2h \| | P3 | S | 6 | pending | lib/graphql/index.ts:936-1052 | #### A. Known Bugs by Severity |
| SILENT-HELP-JSON-001 | **SILENT-HELP-JSON-001 (Moderate)** â€” `app/api/help/escalate/route.ts`: Malformed JSON creates tickets with missing context and no logging. | P3 | S | 6 | pending | app/api/help/escalate/route.ts | ### 3) Bugs and Errors |
| DOC-101 | DOC-101 through DOC-110: Documentation gaps (JSDoc, OpenAPI, READMEs) | P2 | S | 5 | pending | docs/PENDING_MASTER.md:5281 | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| EFF-002 | \| Efficiency \| EFF-002 console statements (12) \| Open \| Swap `console.*` in `app/privacy/page.tsx`, `app/global-error.tsx`, `lib/startup-checks.ts` with structured logger. \| | P2 | S | 5 | pending | app/privacy/page.tsx | ### ğŸ“‹ Enhancements for Production Readiness |
| DOC-109 | DOC-109 â€” Missing error response documentation for API routes â€” P2, Effort: M | P2 | M | 5 | pending | docs/PENDING_MASTER.md:6071 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-245 | souq ads campaigns: unknown values assigned to enums (type errors), potential runtime validation gaps. | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:9410 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-438 | Tenant-config callers still need to handle thrown errors; ensure upstream APIs map to 503 or explicit tenant-missing. | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:11020 | ### ğŸ› ï¸ Enhancements for Production Readiness |
| AUTH-BUG-001 | \| AUTH-BUG-001 \| Bug \| ğŸŸ  Pending \| Runtime/console crash if neither secret is set (observed in SW logs). Mitigate by setting real secret everywhere. \| | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:23348 | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| REF-244 | issue-tracker routes: missing modules (`@/models/issue`, `@/lib/db`, `@/lib/auth`) and outdated `getServerSession` import; causes typecheck failures and potential runtime crashes. | P3 | S | 5 | pending | @/models/issue | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-344 | âœ… Created `lib/auth/safe-session.ts` with `getSessionOrError`/`getSessionOrNull` helpers | P3 | S | 5 | unknown | lib/auth/safe-session.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| BUG-1703 | \| BUG-1703 \| lib/graphql/index.ts:936-1052 \| `createWorkOrder` writes with userId fallback instead of required org \| ğŸ”´ Open \| | P3 | S | 5 | pending | lib/graphql/index.ts:936-1052 | #### Bugs |
| BUG-1704 | \| BUG-1704 \| app/api/souq/reviews/route.ts:61-108 \| POST falls back to user id; GET enforces org \| ğŸ”´ Open \| | P3 | S | 5 | pending | app/api/souq/reviews/route.ts:61-108 | #### Bugs |
| BUG-1705 | \| BUG-1705 \| app/api/aqar/listings/route.ts:99-138 \| orgId falls back to user.id \| ğŸ”´ Open \| | P3 | S | 5 | pending | app/api/aqar/listings/route.ts:99-138 | #### Bugs |
| BUG-1707 | \| BUG-1707 \| app/api/aqar/favorites/route.ts:61-138 \| Favorites stored with user-id fallback \| ğŸ”´ Open \| | P3 | S | 5 | pending | app/api/aqar/favorites/route.ts:61-138 | #### Bugs |
| BUG-005 | \| BUG-005 \| ğŸŸ¡ Medium \| `files/resumes/[file]/route.ts` \| Auth failure â†’ 401 (masks 503) \| ğŸ”´ TODO \| 30m \| | P3 | S | 5 | pending | files/resumes/[file]/route.ts | #### A. Known Bugs by Severity |
| REF-855 | \| Bugs/Logic \| Aqar listing creation stores `orgId = user.orgId \|\| user.id` \| ğŸ”´ Open \| app/api/aqar/listings/route.ts:99-138 â€” mixes org/user ids in listings collection. \| | P3 | S | 5 | pending | user.orgId | ### ğŸ”§ Enhancements & Production Readiness |
| BUG-004 | \| BUG-004 \| Global interval without cleanup \| lib/otp-store-redis.ts \| ğŸŸ¢ Low \| No graceful shutdown \| Store interval ID, export cleanup \| â³ TODO \| | P3 | S | 5 | pending | lib/otp-store-redis.ts | #### B) BUGS/LOGIC ERRORS |
| REF-1025 | \| 7 \| **API route error** \| Check Vercel logs for `/api/auth/*` \| â³ TODO \| | P3 | S | 5 | pending | /api/auth/* | #### ğŸ” Potential Root Causes |
| REF-358 | **Auth errors (401)**: Token missing/expired, invalid credentials, revoked session, UnauthorizedError | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10498 | ### ğŸ” Deep-Dive: Pattern Classification |
| BUG-006 | \| BUG-006 \| ğŸŸ  High \| 20+ routes \| `getSessionUser(...).catch(() => null)` masks auth infra failures as 401 \| ğŸ”´ TODO \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10843 | #### Identified Bugs |
| LOGIC-005 | \| LOGIC-005 \| 20+ upload/help/onboarding routes \| Auth failure treated as 401 (masks 503 infra errors) \| Apply `getSessionOrError` wrapper \| ğŸ”´ TODO \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10849 | #### Logic Errors |
| REF-455 | Error-rate visibility is missing; add counters/alerts per route group (auth/upload/help/OTP/AV) and structured logs (status, reason, correlation id). | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:11422 | ### 3) Bugs and Errors |
| INFRA-SENTRY | INFRA-SENTRY â†’ Q1 2026: Activate Sentry (needs DSN) | P3 | XS | 4 | pending | docs/PENDING_MASTER.md:2142 | ### 2025-12-21 23:55 (Asia/Riyadh) â€” SSOT Backlog Sync Complete |
| BUG-INVOICES-FILTERS-MISSING | \| 8 \| BUG-INVOICES-FILTERS-MISSING \| InvoicesList filters wired \| serializeFilters L170 \| | P3 | S | 4 | pending | components/finance/InvoicesList.tsx:111-116 | ### All Resolved Items (Final) |
| BUG-INVOICES-FILTERS-MISSING-LOCAL | BUG-INVOICES-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/finance/InvoicesList.tsx:111-116 | P3 | S | 4 | pending | components/finance/InvoicesList.tsx:111-116 | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| REF-390 | \| Bugs \| Release-gate environments missing \| Open \| Create GitHub environments `staging`, `production-approval`, `production` to silence workflow warnings. \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:10672 | ### ğŸ“‹ Enhancements for Production Readiness |
| REF-402 | âœ… Hardened SuperAdmin rotation to env-only credentials via `requireEnv` with no literal echoes; fails fast when envs are missing (`scripts/update-superadmin-credentials.ts:21-91`). | P3 | XS | 3 | pending | scripts/update-superadmin-credentials.ts:21-91 | ### ğŸ“ Current Progress |
| BUG-1527 | \| BUG-1527 \| ğŸŸ  High \| Souq fulfillment/pricing \| Still bypass shared rules (no `getSouqRuleConfig` usage), risking inconsistent return/fraud windows. \| ğŸ”´ TODO \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:10766 | #### Identified Bugs |
| REF-424 | Align and merge local changes on dirty upload/help/onboarding/settings files, then apply `getSessionOrError` to remove `getSessionUser(...).catch(() => null)` fallbacks. | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:10952 | ### ğŸš§ Planned Next Steps |
| REF-475 | Env enforcement: S3 guard now fails fast in prod; consider similar guards for other critical providers (email/SMS) if gaps surface. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:11658 | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| REF-482 | Env enforcement gaps: S3 now fails fast in production; similar guards should be considered for email/SMS providers to avoid silent fallbacks and misroutes. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:11706 | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| REF-920 | \| Bugs/Logic \| GH envs for release-gate \| Open \| Ensure GitHub environments `staging`, `production-approval`, `production` exist to silence workflow warnings. \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:21297 | ### ğŸ“‹ Enhancements & Production-Readiness Items (Open) |
| BUG-WO-FILTERS-MISSING | \| 5 \| BUG-WO-FILTERS-MISSING \| WorkOrdersViewNew filters wired \| serializeFilters L189 \| | P3 | S | 3 | pending | components/fm/WorkOrdersViewNew.tsx:149-153 | ### All Resolved Items (Final) |
| BUG-USERS-FILTERS-MISSING | \| 6 \| BUG-USERS-FILTERS-MISSING \| UsersList filters wired \| serializeFilters L127 \| | P3 | S | 3 | pending | components/administration/UsersList.tsx:107-113 | ### All Resolved Items (Final) |
| BUG-EMPLOYEES-FILTERS-MISSING | \| 7 \| BUG-EMPLOYEES-FILTERS-MISSING \| EmployeesList filters wired \| serializeFilters L137 \| | P3 | S | 3 | pending | components/hr/EmployeesList.tsx:112-116 | ### All Resolved Items (Final) |
| BUG-AUDITLOGS-FILTERS-MISSING | \| 9 \| BUG-AUDITLOGS-FILTERS-MISSING \| AuditLogsList filters wired \| serializeFilters L130 \| | P3 | S | 3 | pending | components/administration/AuditLogsList.tsx:108-114 | ### All Resolved Items (Final) |
| BUG-WO-FILTERS-MISSING-LOCAL | BUG-WO-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/fm/WorkOrdersViewNew.tsx:149-153 | P3 | S | 3 | pending | components/fm/WorkOrdersViewNew.tsx:149-153 | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-USERS-FILTERS-MISSING-LOCAL | BUG-USERS-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/administration/UsersList.tsx:107-113 | P3 | S | 3 | pending | components/administration/UsersList.tsx:107-113 | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-EMPLOYEES-FILTERS-MISSING-LOCAL | BUG-EMPLOYEES-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/hr/EmployeesList.tsx:112-116 | P3 | S | 3 | pending | components/hr/EmployeesList.tsx:112-116 | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-AUDITLOGS-FILTERS-MISSING-LOCAL | BUG-AUDITLOGS-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/administration/AuditLogsList.tsx:108-114 | P3 | S | 3 | pending | components/administration/AuditLogsList.tsx:108-114 | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| REF-694 | \| 5 \| Lint cleanup \| ğŸŸ¢ Low \| Remove or use `handleApiError` in `app/api/public/footer/[page]/route.ts`; rerun `pnpm lint`. \| | P3 | S | 3 | unknown | app/api/public/footer/[page]/route.ts | ### ğŸ¯ Current Progress & Planned Next Steps |
| REF-773 | \| Missing error boundaries \| `app/*/` \| UX \| 20 top-level routes lack error.tsx \| | P3 | S | 3 | pending | app/*/ | #### ğŸŸ¡ MEDIUM PRIORITY â€” Efficiency & Reliability |
| REF-952 | `lib/logger.ts:250` â€” Logger utility needs generic error handling | P3 | S | 3 | pending | lib/logger.ts:250 | #### ğŸŸ¡ Pattern Issue #2: TypeScript `any` Usage (28 instances) |
| ERR-BOUND | \| 4 \| **ERR-BOUND** \| Add missing error.tsx to 6 modules \| 1h \| Agent \| | P3 | S | 3 | pending | error.tsx | #### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-391 | \| Logic \| Playwright smoke timeout \| Open \| Diagnose E2E hang; run narrowed suite with debug/timeout flags; inspect Playwright hooks/setup. \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:10673 | ### ğŸ“‹ Enhancements for Production Readiness |
| REF-248 | **Validation typing gaps**: marketplace routes construct Zod errors from plain arrays; similar pattern across cart/rfq/vendor products/souq ads campaigns leads to TS errors and weak validation. | P3 | L | 3 | pending | docs/PENDING_MASTER.md:9423 | ### ğŸ” Deep-Dive Analysis (Similar/Identical Issue Patterns) |
| REF-005 | Monitor auto-assignment-engine for any runtime errors | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:333 | ### ğŸ¯ Next Steps |
| REF-085 | âœ… Prevents missing index errors during Sentry sourcemap uploads | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:5890 | ### 2025-12-15 10:15 (Asia/Riyadh) â€” Workflow MongoDB Index Guard Fix |
| REF-086 | Error: `ENOTFOUND` - DNS resolution failed for invalid/missing REDIS_URL | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:5921 | ### 2025-12-15 09:40 (Asia/Riyadh) â€” Production Redis Error Spam Fix |
| REF-092 | @ts-expect-error: 3 uses, 2 have justifications (1 needs docs) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6179 | ### 2025-12-14 00:00 (Asia/Riyadh) â€” Workspace-Wide Audit Complete + MASTER SSOT Created |
| BUG-011 | \| P3 \| BUG-011 \| Add .catch() to notification .then() chains \| Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7021 | ### ğŸ¯ Remaining Priority Items |
| REF-133 | \| **ESLint Errors** \| Not re-run (last recorded 0) \| â„¹ï¸ Pending \| Verify in next pass \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7291 | ### ğŸ“ Current Progress Summary |
| REF-236 | \| Gates \| `pnpm typecheck` âŒ (50+ TS errors); `pnpm lint` âŒ (135 errors) \| â³ Pending fixes \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9388 | ### ğŸ“ Progress & Planned Next Steps |
| REF-241 | Typecheck Pass 2 (aqar/marketplace): fix enum/nullable handling in aqar listing route; correct Zod error handling/unknown casting in marketplace cart/rfq/vendor products and souq ads campaigns; re-run `pnpm typecheck` until clean. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9397 | ### ğŸ“ Progress & Planned Next Steps |
| BUG-007 | \| BUG-007 \| ğŸŸ¡ Medium \| 9 uncommitted files \| Previous session changes not yet committed \| ğŸ”´ TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10844 | #### Identified Bugs |
| REF-553 | Check 4 similar ref patterns for type errors â€” 30m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13165 | #### P1 â€” High Priority (Next 3 days) |
| REF-601 | \| **Error Boundaries** \| âœ… 38/45 modules (84%) \| Missing only in minor routes \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14241 | #### ğŸŸ¢ Strengths Identified |
| REF-664 | \| Error Boundaries \| 84% \| 84% \| 95% \| ğŸŸ¡ Gap: 11% \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15666 | ### ğŸ“Š Production Readiness Score |
| REF-689 | \| **TypeScript Errors** \| 36 blocking \| Session middleware typings, missing model helper types, rate-limit helper missing \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15941 | ### ğŸ“ Current Progress Summary |
| REF-741 | \| ğŸŸ¢ P3 \| Error boundaries for deep subpages \| 2 hrs \| ~100 directories \| ğŸ”² Deferred \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17241 | ### ğŸ”² Planned Next Steps |
| REF-743 | \| Missing error boundaries \| ~100 \| ğŸŸ¢ Deferred \| Core routes covered (30) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17273 | #### ğŸŸ¡ MEDIUM PRIORITY â€” Validation & Quality |
| REF-746 | \| **Error Boundaries** \| 30 \| âœ… Core covered \| Some subpages missing \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17509 | ### ğŸ“ Current Progress Summary |
| REF-754 | \| ğŸŸ¢ P3 \| Error boundaries for subpages \| 2 hrs \| 25+ subpages \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17524 | ### ğŸ”² Planned Next Steps |
| REF-760 | \| Error boundary audit \| 30 core + 25 missing subpages \| âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17667 | #### Completed This Session |
| REF-763 | \| UX - Error Boundaries \| ğŸŸ¡ \| Core covered, subpages pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17698 | ### ğŸ¯ Production Readiness Checklist |
| REF-771 | \| ğŸŸ¢ P3 \| Add error boundaries to 20+ modules \| 2 hrs \| UX improvement \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17858 | ### ğŸ”² Planned Next Steps |
| REF-776 | \| Missing Error Boundary \| Risk \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17992 | #### Pattern 5: Missing Error Boundaries |
| REF-846 | \| 7 \| Add error boundaries (+8 dirs) \| 2 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18946 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-939 | \| **API Routes without try-catch** \| 20+ routes \| ğŸŸ¡ Error handling gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21677 | ### ğŸ“Š Codebase Metrics |
| REF-962 | \| TypeScript \| 0 errors (`pnpm typecheck`) \| âœ… \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22373 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-963 | \| ESLint \| 0 errors (`pnpm lint`) \| âœ… \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22374 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-967 | \| Bugs \| Validation parity gap \| ğŸ”² TODO \| Apply REST Zod schemas to GraphQL create/update work orders to block unsafe payloads. \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22386 | ### ğŸ”§ Enhancements & Production Readiness |

## Efficiency
| Key | Title | Priority | Effort | Impact | Status | Location | SourceRef |
|---|---|---|---|---:|---|---|---|
| REF-014 | \| db.collection() calls \| ğŸ“‹ LOGGED \| 37 calls in 25 API files bypass Mongoose. Estimated 24h. Needs delegation \| | P0 | S | 10 | pending | db.collection | ### âœ… P2 MEDIUM-TERM IMPROVEMENTS (AUDITED) |
| REF-807 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast for dashboard/workOrder/properties/invoice to avoid orgless scans. \| | P2 | ? | 8 | pending | docs/PENDING_MASTER.md:18600 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-834 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast for dashboard/workOrder/properties/invoice to avoid orgless scans. \| | P2 | ? | 8 | pending | docs/PENDING_MASTER.md:18757 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-854 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast before DB work for dashboard/workOrder/properties/invoice to prevent orgless scans. \| | P2 | ? | 8 | pending | docs/PENDING_MASTER.md:18998 | ### ğŸ”§ Enhancements & Production Readiness |
| PERF-002 | \| PERF-002 \| P1 \| Open \| 12h \| Cache headers review needed \| | P1 | M | 7 | in_progress | services/souq/fulfillment-service.ts | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| REF-381 | \| Normalize org once per GraphQL request and reuse \| ğŸ”² TODO \| Avoid repeated `Types.ObjectId.isValid` calls; set tenant/audit context once per request. \| | P2 | S | 7 | pending | Types.ObjectId.isValid | #### Efficiency Improvements |
| REF-966 | \| Efficiency \| Shared mapper/util module (ID, tenant, address, enum mapping) \| ğŸ”² TODO \| Extract helpers used across GraphQL to avoid duplication. \| | P2 | L | 7 | pending | docs/PENDING_MASTER.md:22384 | ### ğŸ”§ Enhancements & Production Readiness |
| EFF-001 | \| EFF-001 \| Rate Limiting \| 136 routes missing `enforceRateLimit` \| Abuse risk \| Prioritize superadmin, issues, PM routes \| | P2 | XS | 5 | pending | docs/PENDING_MASTER.md:7060 | #### Efficiency Improvements |
| GH-ENV | \| GH-ENV \| Create GitHub environments (staging, production-approval, production) \| ğŸŸ¡ HIGH \| 15min \| DevOps \| | P2 | XS | 5 | pending | docs/PENDING_MASTER.md:22978 | ### ğŸš€ Planned Next Steps |
| PERF-001 | \| 3 \| ğŸŸ¡ \| Refactor auto-repricer (PERF-001) to batch BuyBoxService calls + `bulkWrite` \| â³ Not Started \| | P2 | S | 5 | pending | services/souq/pricing/auto-repricer.ts | ### ğŸš§ Planned Next Steps |
| PERF-003 | \| PERF-003 \| N+1 in claim escalation \| services/souq/returns/claim-service.ts \| 100 claims = 100 round trips \| Use updateMany() \| â³ TODO \| | P2 | S | 5 | pending | services/souq/returns/claim-service.ts | #### D) PERFORMANCE ISSUES |
| PERF-004 | \| PERF-004 \| Sequential notifications \| app/api/admin/notifications/send/route.ts \| 1000Ã—3 = 3000 API calls \| Use batch APIs, queue with BullMQ \| â³ TODO \| | P2 | S | 5 | pending | app/api/admin/notifications/send/route.ts | #### D) PERFORMANCE ISSUES |
| REF-091 | **Missing .lean()** (10+ read-only queries) - Performance optimization | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:6173 | ### 2025-12-14 00:00 (Asia/Riyadh) â€” Workspace-Wide Audit Complete + MASTER SSOT Created |
| REF-333 | âœ… **Route Refactoring (P2)**: Extracted helpers from 2 large route files | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:10146 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-609 | **Performance monitoring**: Add APM spans to critical paths - 2h | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:14333 | #### P2 â€” Medium Priority (Next week) |
| REF-061 | `components/fm/WorkOrdersView.tsx` (refactoring in progress by other agent) | P3 | S | 3 | in_progress | components/fm/WorkOrdersView.tsx | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| P3-AQAR-FILTERS | \| P3-AQAR-FILTERS \| P3 \| In Progress \| M \| Aqar SearchFilters refactor \| | P3 | ? | 3 | in_progress | docs/PENDING_MASTER.md:2549 | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| REF-058 | \| **P3: Aqar/Souq** \| â³ PENDING \| 10h \| â€” \| â€” \| Refactor existing filters to use standards \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:3522 | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| REF-519 | \| 5 \| **P3** \| Refactor large files (5) \| 4h \| ğŸŸ¢ Backlog \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:12130 | #### ğŸ“‹ Planned Next Steps |
| REF-521 | \| 7 \| **P3** \| Performance benchmarking \| 5h \| ğŸŸ¢ Backlog \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:12132 | #### ğŸ“‹ Planned Next Steps |

## Logic Errors
| Key | Title | Priority | Effort | Impact | Status | Location | SourceRef |
|---|---|---|---|---:|---|---|---|
| P0-001 | \| P0-001 \| Security \| `assistant/query/route.ts:259` \| WorkOrder.find without orgId \| ğŸ”´ TODO \| Add tenant scoping \| | P0 | S | 10 | pending | assistant/query/route.ts:259 | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| P0-002 | \| P0-002 \| Security \| `pm/plans/route.ts:42,68,189` \| FMPMPlan.find without orgId \| ğŸ”´ TODO \| Add tenant scoping \| | P0 | S | 10 | pending | pm/plans/route.ts:42,68,189 | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| REF-219 | Add seller/vendor RBAC guard and vendor_id scoping to KYC submit + sellerKYCService. | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9096 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-231 | Apply RBAC/vendor ownership guard to Souq KYC submit route; align sellerKYCService with vendor_id scoping and staged approvals. | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9309 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-287 | Add seller/vendor RBAC guard and vendor_id scoping to Souq KYC submission route + service; align with marketplace role matrix. | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9624 | ### ğŸ“ Current Progress & Planned Next Steps |
| LOGIC-123 | \| LOGIC-123 \| Aqar writes \| Mixed orgId/userId persistence causes cross-tenant data and type drift \| ğŸ”´ Open \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:10638 | #### Logic Errors |
| LOGIC-001 | \| LOGIC-001 \| open \| deferred \| Business hours calendar Q1 2026 \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:2348 | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| REF-254 | Audit Souq KYC service for vendor ownership scoping across all steps and align route to pass vendorId explicitly if required. | P1 | L | 7 | unknown | docs/PENDING_MASTER.md:9446 | ### ğŸ“ Progress & Planned Next Steps |
| LOGIC-125 | \| LOGIC-125 \| app/api/upload/verify-metadata/route.ts:46-119 \| Uses org-aware rate limit keys but skips org-bound key enforcement, giving a false sense of tenant isolation while still exposing metadata. \| ğŸ”´ Open \| | P3 | S | 6 | pending | app/api/upload/verify-metadata/route.ts:46-119 | #### Logic Errors |
| REF-286 | Add unit-level tenant scoping (org_id + unit_id) across FM helpers and budgets queries; backfill data to persist `unitId`. | P3 | L | 6 | unknown | docs/PENDING_MASTER.md:9623 | ### ğŸ“ Current Progress & Planned Next Steps |
| LOGIC-124 | \| LOGIC-124 \| app/api/upload/scan-status/route.ts:83-210 \| Static token not namespaced to tenant and results not filtered by orgId, so a single leaked token exposes scan statuses across all keys. \| ğŸ”´ Open \| | P3 | L | 6 | pending | app/api/upload/scan-status/route.ts:83-210 | #### Logic Errors |
| DOC-105 | DOC-105 â€” Missing inline comments for ZATCA TLV encoding logic â€” P2, Effort: S | P2 | S | 5 | pending | docs/PENDING_MASTER.md:6057 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| LOGIC-126 | \| LOGIC-126 \| Large route files \| God-object anti-pattern with multiple responsibilities per route \| ğŸ”´ Open (P2 refactor) \| | P2 | L | 5 | pending | docs/PENDING_MASTER.md:10400 | #### Logic Errors |
| LOGIC-020 | \| LOGIC-020 \| Souq rule consumption \| Missing central getter in fulfillment/pricing flows means overrides/telemetry not applied. \| Refactor to call `getSouqRuleConfig(orgId)` everywhere and delete local thresholds. \| ğŸ”´ TODO \| | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:10772 | #### Logic Errors |
| AUTH-LOGIC-001 | \| AUTH-LOGIC-001 \| Logic \| ğŸŸ  Pending \| Align auth routes/services to consume `Config.auth.secret` where possible to avoid divergent env access. \| | P3 | XS | 5 | pending | Config.auth.secret | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| REF-100 | **Fallback Logic:** Falls back to AUTH_SECRET when NEXTAUTH_SECRET missing | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:6622 | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| REF-225 | **FM Unit Scoping:** Extend `buildTenantFilter` to include `unitId` | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9282 | ### ğŸ¯ Recommended Next Steps |
| REF-256 | Backfill FM budgets route with unitId scoping once shared tenant helper supports unit arrays; add compound index `{ orgId, unitId, department, updatedAt }`. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9448 | ### ğŸ“ Progress & Planned Next Steps |
| LOGIC-121 | \| LOGIC-121 \| GraphQL read resolvers \| No tenant/audit context set on read paths; inconsistent with mutation isolation \| ğŸ”´ Open \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10636 | #### Logic Errors |
| LOGIC-122 | \| LOGIC-122 \| Souq review flow \| Asymmetric org enforcement (GET strict, POST lax) leading to tenant drift \| ğŸ”´ Open \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10637 | #### Logic Errors |
| REF-202 | `app/api/fm/finance/budgets/route.ts:191-225,292-306` â€” Unit scoping present but index missing; risk of slow queries; ensure unitId required on POST responses. | P3 | S | 4 | pending | app/api/fm/finance/budgets/route.ts:191-225,292-306 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-203 | **Vendor scoping gap** â€” Route sets `vendorId: session.user.id` but does not enforce vendor membership; service vendor filter depends on provided vendorId. Aligning route+service is needed to prevent cross-seller submissions. | P3 | S | 3 | blocked | session.user.id | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| REF-322 | `search/route.ts` â†’ extracted to `_lib/permissions.ts`, `scoping.ts`, `entity-builders.ts` | P3 | S | 3 | unknown | search/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |

## Missing Tests
| Key | Title | Priority | Effort | Impact | Status | Location | SourceRef |
|---|---|---|---|---:|---|---|---|
| OTP-001 | \| 2 \| ğŸ”´ P0 \| OTP-001: Verify Taqnyat credentials on Vercel \| 30m \| â³ Pending \| | P0 | XS | 10 | blocked | lib/finance/tap-payments.ts | ### ğŸ”„ Planned Next Steps |
| REF-404 | \| 1 \| **P0** \| Wire Souq fulfillment/pricing and any remaining flows to `getSouqRuleConfig(orgId)`; add regression tests asserting override/base telemetry. \| â³ Not Started \| | P0 | XS | 10 | unknown | docs/PENDING_MASTER.md:10746 | ### ğŸš§ Planned Next Steps |
| SILENT-UPLOAD-AUTH-CLUSTER | \| SILENT-UPLOAD-AUTH-CLUSTER \| Reliability/Security \| app/api/upload/(presigned-url\|verify-metadata\|scan\|scan-status), app/api/settings/logo/route.ts, server/middleware/subscriptionCheck.ts \| `getSessionUser(...).catch(() => null)` converts auth datastore failures into 401 without telemetry; presign body parsing also falls back to `{}`. \| Outages appear as auth failures; missing orgId/authz misroutes uploads; no alerting. \| Create shared `getSessionUserWithTelemetry` that distinguishes auth vs infra and emits 503 + logs; replace inline catches and add tests for auth service failure and malformed body. \| | P0 | XS | 10 | pending | app/api/settings/logo/route.ts | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-691 | \| 1 \| Session middleware regressions in admin/support/user APIs \| ğŸ”´ Blocking \| Replace `NextMiddleware.user` usages with session/user derivation via `withAuthRbac`/`auth()` and update handlers in `app/api/admin/notifications/config\|test`, `app/api/admin/users/route.ts`, `app/api/support/impersonation/route.ts`, `app/api/user/preferences/route.ts`. \| | P0 | XS | 10 | unknown | app/api/admin/notifications/config\|test | ### ğŸ¯ Current Progress & Planned Next Steps |
| JSON-PARSE | \| 1 \| ğŸ”´ P0 \| Fix remaining 43 JSON-PARSE routes \| 3h \| ğŸ”„ In Progress \| | P0 | S | 10 | in_progress | request.json | ### ğŸ”„ Planned Next Steps |
| SEC-002 | Continue with SEC-002/BUG-001/TEST-* items | P0 | M | 10 | pending | /route.ts | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| REF-135 | \| Warning review \| ğŸ”¶ Logged \| Warnings observed: missing `ENCRYPTION_KEY` fallback in `tests/unit/security/encryption.test.ts`; `act()` warning from `tests/integration/dashboard-hr.integration.test.tsx`; seed reminder in `tests/scripts/seed-marketplace.test.ts` \| | P0 | M | 10 | pending | tests/unit/security/encryption.test.ts | ### âœ… v65.21 Session Progress â€” Test Health Sweep |
| REF-197 | Apply vendor RBAC guard and vendorId scoping directly in KYC submit route/service to mirror test expectations end-to-end. | P0 | M | 10 | unknown | docs/PENDING_MASTER.md:8778 | ### ğŸ”œ Planned Next Steps |
| REF-199 | Broaden regression tests: cross-tenant/unitId for budgets; KYC RBAC/vendor negatives; FM expenses response payload and org/unit assertions. | P0 | M | 10 | unknown | docs/PENDING_MASTER.md:8780 | ### ğŸ”œ Planned Next Steps |
| SEC-001 | \| SEC-001 \| `lib/auth/role-guards.ts` \| HR_ADMIN guard coverage gaps \| ğŸŸ  P1 \| â³ Pending \| | P0 | M | 10 | blocked | lib/auth/role-guards.ts | #### ğŸ› Identified Bugs |
| REF-234 | \| Scope \| Souq KYC RBAC+tests; FM budgets unit scope; typecheck/lint triage started \| âœ… In progress \| | P0 | M | 10 | in_progress | docs/PENDING_MASTER.md:9386 | ### ğŸ“ Progress & Planned Next Steps |
| REF-237 | Souq KYC submit: seller-only RBAC guard; company_info no longer auto-approves; vendorId passed into service; unit tests tightened and passing. | P0 | M | 10 | unknown | docs/PENDING_MASTER.md:9391 | ### ğŸ“ Progress & Planned Next Steps |
| REF-277 | **Test coverage gaps**: Current unit tests allow `[200,500]` in Souq KYC and lack unit-scope assertions in FM budgets, masking regressions in scoping and RBAC. | P0 | M | 10 | pending | docs/PENDING_MASTER.md:9581 | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| REF-288 | Add deterministic success paths and coverage for rate-limit, cross-tenant rejection, and vendor scoping in related tests. | P0 | M | 10 | unknown | docs/PENDING_MASTER.md:9625 | ### ğŸ“ Current Progress & Planned Next Steps |
| LOGIC-021 | \| LOGIC-021 \| Secrets guard scope \| `tests/unit/security/banned-literals.test.ts` ignores `docs/**`, leaving documented literals unsanitized. \| Add docs scrub task or broaden guard with a sanitized allowlist. \| ğŸ”´ TODO \| | P0 | M | 10 | pending | tests/unit/security/banned-literals.test.ts | #### Logic Errors |
| REF-458 | Standardize request body parsing on a safe parser that emits 400/422 with telemetry (replace `req.json().catch(() => ({}\|null))` in help escalation, Aqar packages/listings, FM budgets PATCH, projects test API, upload presign). | P0 | M | 10 | pending | req.json | ### ğŸš§ Planned Next Steps |
| REF-600 | \| Security Layer \| Implemented \| Missing \| Coverage \| Priority \| | P0 | M | 10 | pending | docs/PENDING_MASTER.md:14137 | #### ğŸ“Š API Route Security & Validation Coverage |
| REF-604 | \| **Testing** \| 80% \| 285 tests, good security coverage, API gaps in Marketplace/Assets \| | P0 | M | 10 | pending | docs/PENDING_MASTER.md:14304 | ### ğŸ“ˆ Production Readiness Scorecard |
| REF-762 | \| Security - Rate Limiting \| ğŸ”´ \| 14% coverage - needs work \| | P0 | M | 10 | pending | docs/PENDING_MASTER.md:17694 | ### ğŸ¯ Production Readiness Checklist |
| REF-947 | **Missing Tests:** Add negative/invalid-JSON tests for finance/HR routes; add payroll RBAC tests (HR-only); add lockfile guard to prevent SQL/Prisma deps; extend TAP payments tests to cover `lastChargeId` path and failure handling. | P0 | M | 10 | pending | docs/PENDING_MASTER.md:21844 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| TEST-IP | \| ğŸŸ¢ MEDIUM \| TEST-IP \| Add tests for `lib/security/ip-reputation.ts` \| 1h \| | P0 | M | 10 | unknown | lib/security/ip-reputation.ts | ### ğŸš€ Planned Next Steps |
| REF-497 | \| 3 \| **P1** \| Add ops telemetry: tenant-config load failures, trial-request persistence failures, auth-test-session 503s; alert on spikes. \| | P1 | XS | 10 | unknown | docs/PENDING_MASTER.md:11889 | ### ğŸ“‹ Planned Next Steps |
| REF-139 | `/api/billing/history` returns 401 instead of 400 when org context is missing (`tests/api/billing/history.route.test.ts`, `pnpm vitest run --bail 1 --reporter=dot`). | P1 | M | 10 | pending | /api/billing/history | ### ğŸ”§ Enhancements Needed for Production Readiness |
| SILENT-RESUME-DOWNLOAD-001 | \| SILENT-RESUME-DOWNLOAD-001 \| Reliability/Observability \| app/api/files/resumes/[file]/route.ts \| Auth retrieval and local file read both use `.catch(() => null)`, mapping infra errors to 401/404 with no logging. \| Resume downloads fail silently during auth store or filesystem/S3 issues; compliance download gaps go undetected. \| Log auth/storage errors, return 503 on IO failures, and add tests for auth provider outage and missing/locked files. \| | P1 | M | 10 | pending | /route.ts | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-446 | **Health hints coverage gap**: Only auth test session, trial-request, and upload scan config/policy failures emit health-hinted 503s. Apply helper to other infra-dependent paths (tenant-config consumers, AV scan downstream errors, FM report scan paths). | P2 | XS | 10 | pending | docs/PENDING_MASTER.md:11082 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| REF-534 | \| Missing Tests \| Tenancy/auth + malformed-body regressions (dirty files) \| app/about/page.tsx; app/api/hr/leaves/route.ts; app/api/hr/payroll/runs/route.ts; app/api/souq/ads/clicks/route.ts; app/api/webhooks/taqnyat/route.ts \| Add regression tests for org isolation/auth + 400-on-bad-json; rerun typecheck/lint/test after fixes. \| | P2 | M | 10 | pending | app/about/page.tsx | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-409 | \| Souq rule overrides \| Unit/integration tests for override vs base config across returns/claims/fulfillment/pricing; assert telemetry counters. \| P0 \| ğŸ”´ Missing \| | P0 | XS | 9 | pending | docs/PENDING_MASTER.md:10778 | #### Missing Tests |
| TEST-COVERAGE-GAP | \| 13 \| TEST-COVERAGE-GAP \| API coverage 253% \| 950 test files \| | P0 | M | 9 | pending | 101.9 | ### All Resolved Items (Final) |
| REF-449 | \| 1 \| **P0** \| Finish migrating remaining inline JSON fallbacks (help list/context, Aqar listings/packages, FM budgets, projects test API, remaining upload/onboarding routes). \| | P0 | M | 9 | unknown | docs/PENDING_MASTER.md:11103 | ### ğŸ“‹ Planned Next Steps |
| REF-562 | \| 1 \| **P0** \| Fix 20 failing tests (8 files) \| 2h \| CI blocker \| | P0 | M | 9 | blocked | docs/PENDING_MASTER.md:13231 | #### ğŸ”„ Planned Next Steps |
| REF-591 | \| 1 \| **P0** \| Fix 12 Test Failures \| 2h \| CI/CD stability \| None \| | P0 | M | 9 | unknown | docs/PENDING_MASTER.md:13656 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-617 | \| P0 \| Fix 9 test failures \| ğŸ”´ Pending \| 2h \| | P0 | M | 9 | pending | docs/PENDING_MASTER.md:14506 | ### ğŸ“‹ Remaining Work |
| REF-620 | \| 1 \| **P0** \| Fix 9 Test Failures \| 2h \| CI/CD stability \| None \| | P0 | M | 9 | unknown | docs/PENDING_MASTER.md:14552 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-631 | \| 1 \| **P0** \| Fix 9 Test Failures \| 2h \| CI/CD stability \| None \| | P0 | M | 9 | unknown | docs/PENDING_MASTER.md:14919 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-814 | \| ğŸ”´ P0 \| Run full test suite \| 10 min \| `pnpm test` to validate all changes \| | P0 | M | 9 | unknown | docs/PENDING_MASTER.md:18650 | ### ğŸ”² Planned Next Steps |
| REF-840 | \| 1 \| Run `pnpm typecheck && pnpm lint && pnpm test` \| 10 min \| ğŸ”´ P0 \| â³ Pending \| | P0 | M | 9 | pending | docs/PENDING_MASTER.md:18940 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-433 | \| 1 \| **P0** \| Roll shared JSON parser across remaining inline fallbacks (help list/context, Aqar listings/packages, FM budgets, projects test API, upload presign variants). \| | P0 | L | 9 | unknown | docs/PENDING_MASTER.md:11002 | ### ğŸ“‹ Planned Next Steps |
| REF-144 | \| P1 \| Add `enforceRateLimit` to superadmin + issues + tenant routes and backfill regression tests \| 1h \| Agent \| | P1 | M | 9 | unknown | docs/PENDING_MASTER.md:7342 | ### ğŸ¯ Planned Next Steps |
| REF-977 | Test coverage gap pattern: feature-flagged GraphQL surface still lacks unit/integration tests; apply the same coverage model used for REST work orders (pagination, filters, authorization) to prevent regressions when the flag is enabled. | P1 | M | 9 | pending | docs/PENDING_MASTER.md:22418 | ### Deep-Dive: Similar/Identical Patterns to Address |
| REF-427 | **Missing tests**: Need integration tests for resume download storage failure/403/503 paths; negative-path tests for auth infra failures on upload/help/onboarding/settings; parser failure tests on remaining upload variants. | P2 | XS | 9 | pending | docs/PENDING_MASTER.md:10960 | ### ğŸ§© Production-Readiness Enhancements |
| REF-426 | Add integration coverage for resume download storage failures and emit AV scanner health metrics/dashboards; wire alerts for auth infra failures (metric `auth_infra_failure`) and AV outages. | P2 | M | 9 | unknown | docs/PENDING_MASTER.md:10954 | ### ğŸš§ Planned Next Steps |
| REF-682 | **Missing Tests**: Add coverage for auth-gated monitoring start/backoff/alert posting, and for OTP/forgot-password happy/error paths. | P2 | M | 9 | pending | docs/PENDING_MASTER.md:15908 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-687 | Missing tests: auth-gated monitoring, error handling, OTP/forgot-password flows, QA reconnect/alert guard. | P2 | M | 9 | pending | docs/PENDING_MASTER.md:15926 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-995 | \| Auth/API \| Remaining routes (signup/refresh/session edge cases) beyond new OTP/post-login/forgot/reset coverage \| ğŸŸ¡ HIGH \| ğŸš§ In progress \| | P2 | M | 9 | in_progress | docs/PENDING_MASTER.md:22906 | #### Missing Tests (production readiness) |
| REF-348 | P1: Add priority module tests (Souq settlements/ads/seller-central, Admin notifications/billing, FM work-orders) | P1 | M | 8 | unknown | docs/PENDING_MASTER.md:10283 | ### ğŸ“ Current Progress & Planned Next Steps |
| LOGIC-127 | \| LOGIC-127 \| Test coverage gaps \| Critical paths untested (settlements, KYC, billing) \| ğŸ”´ Open (P1 tests) \| | P1 | M | 8 | pending | docs/PENDING_MASTER.md:10401 | #### Logic Errors |
| P1-2 | \| ğŸŸ¡ P1-2 \| Expand rate limiting (HR: 0/7, CRM: 0/4, Finance: 1/19) \| 2 hrs \| ğŸ”² \| None \| | P1 | M | 8 | unknown | 3.5 | ### ğŸ¯ PLANNED NEXT STEPS |
| TEST-005 | TEST-005: Aqar test coverage (in progress) | P2 | M | 8 | in_progress | decimal.ts | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| TEST-001 | \| P3 Pending \| 3 \| TEST-001 (Souq), TEST-004 (CRM routes), BUG-011 \| | P2 | M | 8 | pending | package-activation.ts | ### 2025-12-15 23:55 (Asia/Riyadh) â€” SSOT Sync Update + New Aqar Tests Discovery |
| REF-395 | \| 4 \| ğŸŸ¡ \| Raise API test coverage for auth/payments/marketplace beyond ~6.4% \| â³ Not Started \| | P2 | M | 8 | unknown | 6.4 | ### ğŸš§ Planned Next Steps |
| REF-499 | \| 5 \| **P2** \| Extend negative-path tests to remaining JSON-parse and auth-infra cases (billing quote, FM transitions, help escalate, upload presign). \| | P2 | M | 8 | unknown | docs/PENDING_MASTER.md:11891 | ### ğŸ“‹ Planned Next Steps |
| FIN-TEST-001 | \| FIN-TEST-001 \| Missing Tests \| Billing/Finance payments stack \| No coverage for billing/quote, payments/create, payments/tap/checkout, finance accounts/expenses/journals \| Regressions in auth/validation/parsing go undetected \| Add Vitest route tests mirroring billing/subscribe: auth fail, invalid JSON, validation errors, happy path \| | P2 | M | 8 | pending | docs/PENDING_MASTER.md:23298 | ### ğŸš€ Production-Readiness Enhancements (New) |
| REF-1006 | **Coverage gap**: Existing billing tests cover subscribe/upgrade/history only. Finance coverage is limited to payments/invoices happy paths; no tests for quote, Tap checkout, accounts/expenses/journals, or JSON-error/unauth flows. Add route tests before refactors to lock behavior. | P2 | M | 8 | pending | docs/PENDING_MASTER.md:23303 | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| REF-410 | \| Env guards \| Tests for AWS_REGION/AWS_S3_BUCKET fail-fast and rotation script env requirements. \| P1 \| ğŸ”´ Missing \| | P1 | XS | 7 | pending | docs/PENDING_MASTER.md:10779 | #### Missing Tests |
| REF-186 | \| P1 \| Fix 6 settlement test assertions \| 30min \| Update tests to match route \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:8418 | ### ğŸ¯ Recommended Next Steps |
| REF-191 | \| P1 \| Fix 6 failing settlement tests \| 30m \| Agent \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:8586 | ### ğŸ¯ Planned Next Steps |
| REF-205 | \| 5 \| ğŸŸ  P1 \| Add tests for 51 Souq routes \| 4h \| â³ Backlog \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:8906 | ### ğŸ”„ Planned Next Steps |
| TEST-SOUQ | \| TEST-SOUQ \| Souq Module \| Route coverage gap \| 51 routes \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:8947 | #### ğŸ§ª Missing Tests |
| TEST-ADMIN | \| TEST-ADMIN \| Admin Module \| Route coverage gap \| 26 routes \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:8948 | #### ğŸ§ª Missing Tests |
| TEST-FM | \| TEST-FM \| FM Module \| Route coverage gap \| 19 routes \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:8949 | #### ğŸ§ª Missing Tests |
| TEST-SOUQ-51 | \| TEST-SOUQ-51 \| Souq module \| 51 routes missing coverage \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:9202 | #### Missing Tests |
| TEST-ADMIN-26 | \| TEST-ADMIN-26 \| Admin module \| 26 routes missing coverage \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:9203 | #### Missing Tests |
| TEST-FM-19 | \| TEST-FM-19 \| FM module \| 19 routes missing coverage \| ğŸŸ  P1 \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:9204 | #### Missing Tests |
| REF-340 | `bc5f60662` - test(P1): add critical module tests - claims, users, budgets | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:10158 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-411 | \| Secrets gate in CI \| Ensure banned-literals test is wired into CI and extended token list verified. \| P1 \| ğŸ”´ Missing \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:10780 | #### Missing Tests |
| REF-417 | \| 2 \| **P1** \| Commit remaining uncommitted files (9 modified, 4 new test files) \| â³ Not Started \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:10826 | ### ğŸš§ Planned Next Steps |
| REF-418 | \| 3 \| **P1** \| Add missing module tests (Souq 51 gap, Admin 22 gap, FM 17 gap) \| â³ Not Started \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:10827 | ### ğŸš§ Planned Next Steps |
| P1-P2 | \| Module coverage \| 51 Souq routes, 22 Admin routes, 17 FM routes need tests \| P1-P2 \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:10857 | #### Missing Tests |
| P1-004 | \| P1-004 \| Testing \| Souq module \| 51 routes missing tests \| ğŸŸ  Backlog \| Add test files \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:11521 | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| REF-470 | \| 7 \| **P1** \| Add Souq module tests (51) \| 4h \| ğŸŸ  Backlog \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:11616 | ### ğŸ“‹ Planned Next Steps |
| REF-491 | \| 5 \| **P1** \| Add remaining Souq tests (~46 routes) \| 4h \| ğŸŸ  Planned \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:11847 | ### ğŸ“‹ Planned Next Steps |
| REF-506 | \| 2 \| **P1** \| Add remaining Souq tests (+46) \| 4h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12002 | ### ğŸ“‹ Planned Next Steps |
| REF-515 | \| 1 \| **P1** \| Souq module tests (+56) \| 6h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12126 | #### ğŸ“‹ Planned Next Steps |
| REF-516 | \| 2 \| **P1** \| Aqar module tests (+11) \| 2h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12127 | #### ğŸ“‹ Planned Next Steps |
| REF-524 | \| **P1** \| Souq tests (+56) \| 6h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12310 | ### ğŸ“‹ Updated Action Plan |
| REF-525 | \| **P1** \| Aqar tests (+13) \| 3h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12311 | ### ğŸ“‹ Updated Action Plan |
| REF-537 | \| 2 \| **P1** \| Tests \| Souq module coverage (+56 tests) \| 6h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12616 | ### ğŸ“‹ Deferred Items & Action Plan |
| REF-538 | \| 3 \| **P1** \| Tests \| Aqar module coverage (+13 tests) \| 3h \| ğŸ”´ TODO \| | P1 | M | 7 | pending | docs/PENDING_MASTER.md:12617 | ### ğŸ“‹ Deferred Items & Action Plan |
| P1-1 | \| ğŸŸ¡ P1-1 \| Add Zod validation to 59 remaining routes \| 4 hrs \| ğŸ”² \| None \| | P1 | M | 7 | pending | 3.5 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-917 | Pending P1: Add unit tests for 11 services without coverage; keep lint/typecheck/test gates green. | P1 | M | 7 | pending | docs/PENDING_MASTER.md:21287 | ### âœ… Current Progress & Next Steps |
| REF-925 | \| ğŸŸ¡ P1 \| Add tests for 11 services without coverage \| 4 hrs \| Test coverage \| | P1 | M | 7 | unknown | docs/PENDING_MASTER.md:21328 | ### ğŸ¯ Planned Next Steps |
| REF-949 | \| ğŸŸ§ MEDIUM \| Create tests for `escalation.service.ts` (170 LOC) \| 1 hr \| SLA compliance \| | P1 | M | 7 | pending | escalation.service.ts | ### ğŸ“‹ Planned Next Steps |
| P1-003 | \| P1-003 \| Reliability \| Multiple upload routes \| getSessionUser silent failures \| ğŸ”´ TODO \| Add telemetry wrapper \| | P1 | L | 7 | pending | docs/PENDING_MASTER.md:11520 | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| REF-474 | \| Missing Tests \| Souq rule overrides \| tests/unit/services/souq-rules-config.test.ts \| Verifies defaults and tenant override merge. \| | P2 | XS | 7 | pending | tests/unit/services/souq-rules-config.test.ts | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Production Readiness) |
| REF-481 | \| Missing Tests \| E2E coverage \| Playwright smoke (auth, checkout, returns/claims) \| Rerun and stabilize after recent config changes; add to CI as a short smoke. \| | P2 | XS | 7 | pending | docs/PENDING_MASTER.md:11701 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Production Readiness) |
| REF-695 | \| Missing Tests \| No coverage for admin notification config/test routes or support impersonation auth path \| ğŸŸ¡ Medium \| Add unit tests validating auth paths, rate limiting, and happy-path responses for these endpoints. \| | P2 | XS | 7 | pending | docs/PENDING_MASTER.md:15963 | ### ğŸš€ Enhancements & Gaps (Production Readiness) |
| REF-976 | Missing tests: GraphQL resolvers (context building, pagination, creation errors), tenant config DB-backed path, Souq ad click negative cases, and a rerun of Playwright suite after timeout. | P2 | XS | 7 | pending | docs/PENDING_MASTER.md:22413 | ### Enhancements / Production Readiness (Efficiency, Bugs, Logic, Missing Tests) |
| REF-170 | \| P2 \| Add test for AutoFixInitializer auth behavior \| 1h \| Backlog \| | P2 | M | 7 | unknown | docs/PENDING_MASTER.md:8044 | ### ğŸ¯ Recommended Next Steps |
| REF-178 | Missing tests: add client-side test covering AutoFixInitializer behavior for guest vs SUPER_ADMIN; add integration test ensuring no network calls fire when not authenticated. | P2 | M | 7 | pending | docs/PENDING_MASTER.md:8084 | ### Enhancements Needed for Production |
| REF-292 | Missing tests: add regression smoke to assert Playwright header has Dashboard link and SupportOrg fallback yields no boundary errors; unit test for Playwright PDP stub to ensure button renders without API fetch; extend smoke to assert product-card link href points to PDP stub. | P2 | M | 7 | pending | docs/PENDING_MASTER.md:9664 | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| REF-350 | P2: Add negative-path tests for auth infra failure scenarios | P2 | M | 7 | unknown | docs/PENDING_MASTER.md:10285 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-384 | \| GraphQL org enforcement \| Coverage for org-required + orgless rejection on queries/mutations \| ğŸ”² TODO \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:10643 | #### Missing Tests |
| REF-431 | Add coverage for resume download storage failures in integration tests and surface AV scan health in monitoring/dashboards. | P2 | M | 7 | unknown | docs/PENDING_MASTER.md:10978 | ### ğŸš§ Planned Next Steps |
| REF-437 | \| 5 \| **P2** \| Extend negative-path tests for new parser/auth helper coverage (malformed JSON, auth store failures, DLQ webhook failure). \| | P2 | M | 7 | unknown | docs/PENDING_MASTER.md:11006 | ### ğŸ“‹ Planned Next Steps |
| REF-640 | \| 5 \| Add GraphQL resolver tests \| 2h \| Test coverage \| Missing org-required guard tests \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:15317 | #### ğŸŸ¡ Remaining (P2) |
| REF-675 | Plan: enforce required org context for all Query resolvers, wrap reads with tenant/audit context, normalize org once, parallelize workOrders find/count; add unit tests for org-less requests, `createGraphQLHandler` disabled/deps-missing branches, and rate-limit wrapper in `app/api/graphql/route.ts`. | P2 | M | 7 | pending | app/api/graphql/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-808 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18606 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-809 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18607 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-810 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18608 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-835 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18763 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-836 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18764 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-837 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:18765 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-856 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add tests for org-required, context set/cleared, and orgless rejections. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19006 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-857 | \| Missing Tests \| Souq review creation org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and validate stored org matches tenant. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19007 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-858 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19008 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-865 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19042 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-866 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19043 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-867 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Assert writes fail without orgId and persist correct tenant org. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:19044 | ### ğŸ”§ Enhancements & Production Readiness |
| REF-968 | \| Missing Tests \| Integration (feature-flagged handler) \| ğŸ”² TODO \| Add handler tests for pagination cursors, auth failures, and error shapes. \| | P2 | M | 7 | pending | docs/PENDING_MASTER.md:22389 | ### ğŸ”§ Enhancements & Production Readiness |
| AUTH-TEST-002 | \| AUTH-TEST-002 \| Tests \| ğŸŸ¡ Pending \| Add unit/integration coverage for `resolveAuthSecret()` + `/api/health/auth` healthy state when either secret present. \| | P2 | M | 7 | pending | /api/health/auth | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| REF-399 | \| Auth/API \| Broaden coverage across 14 auth routes \| ğŸŸ¡ High \| â³ Pending \| | P2 | L | 7 | pending | docs/PENDING_MASTER.md:10720 | #### Missing Tests |
| REF-683 | **Auth flows failing together**: Both OTP send and forgot-password endpoints return 500, indicating a shared backend/config gap; fix once and add tests to prevent repeat failures across auth flows. | P3 | XS | 7 | pending | docs/PENDING_MASTER.md:15914 | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| REF-279 | Next: Re-run `pnpm test:e2e -- --project smoke --reporter=line` after cooldown; triage `tests/copilot/copilot.spec.ts` failures; consider extending Playwright-safe guard to other org guard hooks; align smoke selectors with new stubs. | P3 | M | 7 | unknown | tests/copilot/copilot.spec.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-353 | **Missing negative-path tests**: No tests for auth infra failures, DB outages, rate limit hits | P3 | M | 7 | pending | docs/PENDING_MASTER.md:10421 | #### Test Coverage Anti-Patterns Found |
| REF-373 | \| Scan token auth \| Tests ensuring token-based status/scan paths are tenant-namespaced and fail on org mismatch or missing token. \| ğŸ”² TODO \| | P3 | M | 7 | pending | docs/PENDING_MASTER.md:10592 | #### Missing Tests |
| REF-681 | Plan: gate auto-monitor startup on authenticated session (and SSR/feature flag), disable the constructor auto-start, add exponential backoff and dedupe, and only post QA alerts when auth/session present. Fix OTP and forgot-password handlers and add regression tests. | P3 | M | 7 | unknown | docs/PENDING_MASTER.md:15903 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-685 | Plan: gate auto-monitoring/health checks on authenticated session/SSR; make monitor init a no-op when logged out; fix OTP/forgot-password handlers and add tests. | P3 | M | 7 | unknown | docs/PENDING_MASTER.md:15921 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-965 | Planned next steps: Reuse REST Zod schemas for GraphQL inputs, add integration tests (pagination/auth/error payloads) under the feature flag, and extract shared mapping helpers (ID/tenant/address/status) to prevent drift. | P3 | M | 7 | unknown | docs/PENDING_MASTER.md:22378 | ### ğŸ“ Current Progress & Planned Next Steps |
| TEST-002 | TEST-002 (P2) â€” List component integration tests missing â€” sourceRef: analysis:testing-recommendations:2025-12-17 | P2 | M | 6 | pending | docs/PENDING_MASTER.md:3164 | ### 2025-12-17 23:18 (Asia/Riyadh) â€” Comprehensive Analysis + QA Gate Update |
| REF-352 | **Missing integration tests**: Settlement flows, KYC verification, billing benchmarks have no coverage | P2 | M | 6 | pending | docs/PENDING_MASTER.md:10420 | #### Test Coverage Anti-Patterns Found |
| REF-518 | \| 4 \| **P2** \| Finance module tests (+2) \| 30m \| ğŸŸ¡ TODO \| | P2 | M | 6 | pending | docs/PENDING_MASTER.md:12129 | #### ğŸ“‹ Planned Next Steps |
| REF-693 | \| 4 \| Rate limit helper missing \| ğŸŸ  High \| Export or replace `applyRateLimitBatch` usage in `app/api/billing/upgrade/route.ts` with existing helper; add coverage. \| | P2 | M | 6 | pending | app/api/billing/upgrade/route.ts | ### ğŸ¯ Current Progress & Planned Next Steps |
| REF-883 | **Missing Tests:** Add negative cases for invalid metadata (non-object, non-string keys), invalid transition status, empty comment text/attachments payloads, and regression tests asserting error response shape and HTTP status (400). | P2 | M | 6 | pending | docs/PENDING_MASTER.md:19503 | ### ğŸ› ï¸ Enhancements, Bugs, Logic, Missing Tests (Production Readiness) |
| TEST-001-007 | **TEST-001-007**: Add payment/billing test coverage (CRITICAL) | P2 | M | 6 | unknown | docs/PENDING_MASTER.md:23589 | ### ğŸ¯ Current Status & Next Steps (Top 5) |
| REF-120 | billing-history-missing-org-returns-401 â€” blocker: MongoDB SSOT sync unavailable; failing suite expects 400, got 401 (`tests/api/billing/history.route.test.ts:57-65`). | P3 | M | 6 | blocked | tests/api/billing/history.route.test.ts:57-65 | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| REF-122 | billing-history-missing-org-returns-401 â€” align route to return 400 without org and rerun full vitest. | P3 | M | 6 | pending | docs/PENDING_MASTER.md:7173 | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| REF-278 | Ongoing: Playwright smoke rerun required (previous runs timed out); copilot STRICT specs still failing in full test run (layout preservation, tenant isolation, intent routing). | P3 | M | 6 | unknown | docs/PENDING_MASTER.md:9589 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-372 | \| Upload metadata/scan \| Integration tests that reject keys outside the callerâ€™s org prefix and validate org-bound signing for scan/metadata/status routes. \| ğŸ”² TODO \| | P3 | M | 6 | pending | docs/PENDING_MASTER.md:10591 | #### Missing Tests |
| REF-946 | Next: regenerate lockfile without SQL/Prisma/knex/pg/mysql instrumentations; fix tenant scope to `{ org_id, unit_id }`; gate payroll to HR-only; add safe JSON parser across finance/HR routes; rerun `pnpm typecheck && pnpm lint && pnpm test` after fixes. | P3 | L | 6 | unknown | docs/PENDING_MASTER.md:21835 | ### ğŸ“ˆ Progress & Planned Next Steps |
| REF-535 | \| Missing Tests \| Config enforcement for hardcoded-sensitive values \| config/s3, Souq rule config, credential scripts \| Add unit tests that fail when default/fallback values are used in prod builds and when credential literals are present. \| | P2 | XS | 5 | pending | docs/PENDING_MASTER.md:12396 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-044 | Start dev server and sync BACKLOG_AUDIT.json to MongoDB via POST /api/issues/import | P2 | S | 5 | pending | BACKLOG_AUDIT.json | ### 2025-12-21 22:30 (Asia/Riyadh) â€” SSOT Backlog Sync + Code Review Update |
| REF-051 | Component test coverage gap: 7% (15/217 components tested) - deferred to Phase 4 | P2 | M | 5 | pending | docs/PENDING_MASTER.md:2983 | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| REF-052 | Test Coverage: ğŸŸ¡ NEEDS IMPROVEMENT (API: 24%, Component: 7%) | P2 | M | 5 | pending | docs/PENDING_MASTER.md:2993 | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| REF-054 | Test Coverage: ğŸŸ¡ NEEDS IMPROVEMENT (24% API coverage: 88/367 routes tested) | P2 | M | 5 | pending | docs/PENDING_MASTER.md:3229 | ### 2025-12-17 23:16 (Asia/Riyadh) â€” AI Improvement Analysis + Backlog Sync |
| REF-065 | Investigate `refresh.replay.test.ts` failure (P2, 2 hours) | P2 | M | 5 | pending | refresh.replay.test.ts | ### 2025-12-17 01:45 (Asia/Riyadh) â€” Superadmin Navigation Fix (P0 UX Critical) |
| TEST-004 | **TEST-004** â€” CRM module test coverage gaps | P2 | M | 5 | pending | subscriptionSeatService.ts | ### 2025-12-16 20:30 (Asia/Riyadh) â€” Backlog Status Review |
| REF-105 | Missing Tests: 6 | P2 | M | 5 | pending | docs/PENDING_MASTER.md:6781 | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| REF-131 | **Missing tests** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:7273 | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-140 | **Missing tests** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:7321 | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-141 | Souq coverage gaps remain on 44 routes (75 total); prioritize checkout, repricer, fulfillment edges. | P2 | M | 5 | pending | docs/PENDING_MASTER.md:7324 | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-145 | \| P2 \| Backfill CRM and Superadmin API tests; extend Souq critical paths \| 3h \| Agent \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:7343 | ### ğŸ¯ Planned Next Steps |
| REF-156 | \| P2 \| Create Superadmin route tests \| 2h \| Agent \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:7500 | ### ğŸ¯ Planned Next Steps |
| REF-157 | \| P2 \| Create CRM route tests \| 4h \| Backlog \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:7501 | ### ğŸ¯ Planned Next Steps |
| REF-165 | \| P2 \| Add Issue Tracker API tests \| 2h \| Cover stats/import routes \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:7963 | ### ğŸ¯ Recommended Next Steps |
| REF-181 | \| P2 \| Add tests for new Issue APIs \| 2h \| Cover stats/import routes \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:8237 | ### ğŸ¯ Recommended Next Steps |
| TEST-AQAR | \| TEST-AQAR \| Aqar Module \| Route coverage gap \| 14 routes \| ğŸŸ¡ P2 \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:8950 | #### ğŸ§ª Missing Tests |
| REF-210 | \| Module \| Test Files \| API Routes \| Coverage \| Gap \| Priority \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:9021 | ### ğŸ“ˆ Test Coverage by Module |
| REF-280 | Missing tests | P2 | M | 5 | pending | docs/PENDING_MASTER.md:9602 | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| REF-306 | \| 21. i18n completeness \| â³ Needs audit \| Translation coverage varies \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:9832 | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| REF-314 | \| P2 \| Add HR integration tests \| 2h \| â€” \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:9934 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-339 | `a29893220` - refactor(P2): extract helpers from large routes + P1 module tests | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:10157 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-343 | \| Scope \| Test coverage gap analysis + route size audit \| âœ… Analyzed \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:10272 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-347 | âœ… Analyzed test coverage gaps: Souq 51/75 missing, Admin 26/28 missing, FM 19/25 missing | P2 | M | 5 | pending | docs/PENDING_MASTER.md:10280 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-351 | \| Module \| Routes \| Tests \| Coverage \| Priority Missing Tests \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:10298 | #### Test Coverage Gaps by Module |
| REF-400 | \| Marketplace/Souq \| Settlements/seller flow coverage \| ğŸŸ¡ High \| â³ Pending \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:10721 | #### Missing Tests |
| REF-444 | \| 4 \| **P2** \| Run broader suites (`pnpm test` or focused API suites) to validate the wider surface beyond targeted vitest. \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:11060 | ### ğŸ“‹ Planned Next Steps |
| REF-452 | \| Module \| Routes \| Tests \| Coverage \| Gap \| Priority \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11267 | #### A. Coverage by Module |
| REF-460 | **Missing tests** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11464 | ### ğŸ§© Production-Readiness Enhancements |
| P2-002 | \| P2-002 \| Validation \| ~118 routes \| Missing Zod validation \| ğŸŸ¡ Backlog \| Add schemas \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11528 | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-003 | \| P2-003 \| Testing \| Aqar module \| 11 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11529 | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-004 | \| P2-004 \| Testing \| FM module \| 17 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11530 | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-005 | \| P2-005 \| Testing \| Admin module \| 23 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11531 | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| REF-461 | \| Module \| Routes \| Tests \| Coverage \| Gap \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11596 | #### Pattern 4: Test Coverage Gaps |
| P2-001 | \| P2-001 \| Testing \| Aqar module \| ~11 routes missing tests \| ğŸŸ¡ Backlog \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:11773 | #### ğŸŸ¡ P2 â€” Medium Priority (Backlog) |
| REF-492 | \| 6 \| **P2** \| Add Aqar module tests (~11 routes) \| 2h \| ğŸŸ¡ Backlog \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:11848 | ### ğŸ“‹ Planned Next Steps |
| REF-493 | \| 7 \| **P2** \| Add FM module tests (~17 routes) \| 3h \| ğŸŸ¡ Backlog \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:11849 | ### ğŸ“‹ Planned Next Steps |
| REF-507 | \| 3 \| **P2** \| Add Aqar module tests (+11) \| 2h \| ğŸŸ¡ Backlog \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:12003 | ### ğŸ“‹ Planned Next Steps |
| REF-508 | \| 4 \| **P2** \| Add FM module tests (+17) \| 3h \| ğŸŸ¡ Backlog \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:12004 | ### ğŸ“‹ Planned Next Steps |
| REF-513 | \| Module \| Routes \| Tests \| Coverage \| Gap \| Priority \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:12096 | #### ğŸ§ª Test Coverage Analysis |
| REF-517 | \| 3 \| **P2** \| FM module tests (+17) \| 3h \| ğŸŸ¡ TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:12128 | #### ğŸ“‹ Planned Next Steps |
| REF-526 | \| **P2** \| FM tests (+17) \| 3h \| ğŸŸ¡ TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:12312 | ### ğŸ“‹ Updated Action Plan |
| REF-540 | \| 5 \| **P2** \| Tests \| FM module coverage (+17 tests) \| 3h \| ğŸŸ¡ TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:12619 | ### ğŸ“‹ Deferred Items & Action Plan |
| REF-548 | \| 4 \| **P2** \| Add Souq module tests (21 dirs, ~75 routes) \| 8h \| In Progress \| | P2 | M | 5 | in_progress | docs/PENDING_MASTER.md:12921 | #### ğŸ”„ Planned Next Steps |
| REF-565 | \| 4 \| **P2** \| Add API tests for Souq (75 routes, 0 tests) \| 8h \| Coverage gap \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:13234 | #### ğŸ”„ Planned Next Steps |
| REF-603 | âŒ Onboarding flow: Partial coverage (needs integration tests) | P2 | M | 5 | pending | docs/PENDING_MASTER.md:14290 | ### ğŸ§ª Test Coverage Analysis |
| REF-716 | **P2**: Verify test imports in 2 potentially stale test files | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:16755 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-731 | \| ğŸŸ¡ P2 \| API tests: Aqar module (16 routes) \| 2 hrs \| Test coverage \| ğŸ”² TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:17022 | ### ğŸ”² Planned Next Steps |
| REF-732 | \| ğŸŸ¡ P2 \| API tests: HR module (7 routes) \| 1 hr \| Test coverage \| ğŸ”² TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:17023 | ### ğŸ”² Planned Next Steps |
| REF-770 | \| ğŸŸ¡ P2 \| Add missing service tests \| 3 hrs \| 11 services need tests \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:17857 | ### ğŸ”² Planned Next Steps |
| P2-1 | \| ğŸŸ¢ P2-1 \| P3-002 Hardcoded strings â†’ i18n \| 2 hrs \| ğŸ”² DEFERRED \| Optional \| | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:19092 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-876 | **Missing tests** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:19470 | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| P2-10 | \| ğŸŸ¢ P2-10 \| Increase rate limiting coverage (34% â†’ 60%) \| ğŸ”² TODO \| 2 hrs \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:19683 | ### ğŸ¯ REMAINING ITEMS |
| REF-889 | \| ğŸŸ¢ P2 \| Expand rate limit coverage to 50%+ \| 4 hrs \| ğŸ”² TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:19898 | ### ğŸ¯ Planned Next Steps |
| REF-890 | \| **Rate Limit Coverage** \| 121/352 (34%) \| âš ï¸ Needs improvement \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:20002 | ### ğŸ“ Current Progress & Status |
| REF-895 | \| ğŸŸ¢ P2 \| Add tests for 9 services without coverage \| 4 hrs \| ğŸ”² TODO \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:20023 | ### ğŸ¯ Planned Next Steps |
| REF-898 | \| **Rate limiting** \| âš ï¸ 34% coverage \| Needs improvement \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:20187 | ### ğŸ“Š Production Readiness Summary |
| REF-899 | **Merge** comprehensive type safety and test coverage improvements | P2 | M | 5 | unknown | docs/PENDING_MASTER.md:20267 | ### ğŸ¯ Planned Next Steps |
| REF-913 | Missing Tests: New coverage for checkout happy/quote/error; TAP client still needs additional negative/refund/webhook parsing cases; full Playwright still pending completion. | P2 | M | 5 | pending | docs/PENDING_MASTER.md:20823 | ### Enhancements (Production Readiness) |
| REF-928 | \| Module \| API Routes \| Test Files \| Coverage % \| Gap \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:21348 | ### ğŸ” Test Coverage Analysis by Module |
| REF-931 | \| Error handling coverage \| ğŸŸ¡ 10 routes missing \| No \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:21464 | ### ğŸ“‹ Production Readiness Checklist |
| REF-933 | \| Module \| API Routes \| Test Files \| Coverage Gap \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:21557 | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| REF-969 | \| Missing Tests \| Negative mutation cases \| ğŸ”² TODO \| Add invalid ID/vendor/status/priority tests mirroring REST coverage. \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22390 | ### ğŸ”§ Enhancements & Production Readiness |
| TEST-COV | \| ğŸŸ¢ MEDIUM \| TEST-COV \| Continue API route test coverage expansion \| 4h \| | P2 | M | 5 | unknown | 6.4 | ### ğŸš€ Planned Next Steps |
| REF-982 | Coverage Ratio: ~65% (needs verification) | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22536 | #### Pattern 3: Test Coverage Gaps |
| REF-985 | API routes: **352 total** (64% coverage gap) | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22621 | ### ğŸ“ˆ Current Progress |
| TEST-API-GAP | \| TEST-API-GAP \| 127 API routes without dedicated tests \| â³ Coverage gap \| | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22654 | #### Missing Tests |
| REF-988 | **Missing Tests (prod readiness)** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22712 | ### Comprehensive Enhancements / Bugs / Missing Tests (production focus) |
| REF-991 | **Missing Tests (prod readiness)** | P2 | M | 5 | pending | docs/PENDING_MASTER.md:22854 | ### Comprehensive Enhancements / Bugs / Missing Tests (production focus) |
| REF-1001 | Pending counts adjusted (-5 items) after test coverage; full recount pending for JSON-protection backlog. | P2 | M | 5 | pending | docs/PENDING_MASTER.md:23105 | ### ğŸ” Notes |
| REF-1009 | Missing Tests: | P2 | M | 5 | pending | docs/PENDING_MASTER.md:23322 | ### ğŸš€ Enhancements / Issues (Production Readiness) |
| REF-1026 | \| 5 \| Test across all pages \| 30m \| ğŸŸ¡ P2 \| âœ… Footer smoke + hydration check; broader regression pending \| | P2 | L | 5 | pending | docs/PENDING_MASTER.md:23833 | #### ğŸ“‹ ACTION PLAN: Theme Toggle |
| REF-439 | Health-hinted 503s used by auth test session, trial-request, and upload scan config/policy failures; helper tolerates missing `nextUrl`. | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:11049 | ### ğŸ“ Current Progress |
| REF-501 | Add tenant-config caller tests to ensure 503 or explicit tenant-missing is returned (no silent defaults). | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:11910 | ### ğŸ› ï¸ Enhancements for Production Readiness |
| REF-703 | \| `tests/e2e/auth.spec.ts` (multiple) \| Missing env vars \| âœ… Expected \| | P3 | XS | 5 | pending | tests/e2e/auth.spec.ts | #### 2. Skipped Tests (14 total) |
| REF-978 | Planned next steps: rerun Playwright with higher timeout; add unit/integration tests for GraphQL resolvers (context, pagination, creation validation) and tenant config DB path; add negative tests for Souq ad click signature/timestamp; align GraphQL creation validation with REST schema; document tenant offline fallback behavior. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:22424 | ### Progress & Planned Next Steps |
| REF-1010 | Progress: Config `resolveAuthSecret()` now aliases `AUTH_SECRET â†’ NEXTAUTH_SECRET` before validation; no additional crash paths found in auth routes/health checks/tests/scripts (all already use `NEXTAUTH_SECRET \|\| AUTH_SECRET` or throw with guidance). | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:23335 | ### Progress & Planned Next Steps |
| REF-220 | Normalize FM expenses tests to strict success expectations and assert orgId/unitId on inserts. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9097 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-232 | Normalize FM expenses tests to require deterministic 200/201 responses and assert response bodies; enforce orgId/unitId expectations on inserts. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9310 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-238 | FM budgets route: unitId scoping enforced via `resolveUnitScope` and `buildTenantFilter` unit support; tests passing. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9392 | ### ğŸ“ Progress & Planned Next Steps |
| REF-243 | Follow-ups: add KYC integration tests for document/bank verification and super-admin override; add FM budgets compound index `{ orgId, unitId, department, updatedAt: -1 }` and unitId persistence/rejection tests. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9399 | ### ğŸ“ Progress & Planned Next Steps |
| REF-252 | Tightened KYC unit tests: deterministic 200 expectations, non-seller negative case, service call assertions now match vendorId injection. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9441 | ### ğŸ“ Progress & Planned Next Steps |
| REF-253 | Re-ran budgets unit tests; suite green with existing tenant/unit-aware mocks. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:9442 | ### ğŸ“ Progress & Planned Next Steps |
| REF-326 | `safe-session.test.ts` (11) - Auth infra failure scenarios | P3 | M | 5 | unknown | safe-session.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-334 | `auth/otp/send` (1091 lines) â†’ extracted to `lib/auth/otp/test-users.ts` + `lib/auth/otp/helpers.ts` | P3 | M | 5 | unknown | auth/otp/send | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-357 | Next steps: Stage and commit remaining uncommitted files from previous sessions; update PENDING_MASTER with route fix summary; consider adding negative-path tests for auth infra failure scenarios. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:10450 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-369 | Next steps: Add tenant-bound S3 key validation + shared helper for upload routes, namespace scan tokens per org, backfill regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:10566 | ### ğŸ“ Current Progress & Planned Next Steps |
| BUG-1710 | \| BUG-1710 \| app/api/upload/scan-status/route.ts:106-209 \| Status lookup bypasses org scoping (token and session paths) despite comments claiming tenant verification; returns latest status for any key. \| ğŸ”´ Open \| | P3 | M | 5 | pending | app/api/upload/scan-status/route.ts:106-209 | #### Bugs |
| REF-380 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:10612 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-385 | \| Souq review POST \| Test enforcing session orgId and stored org consistency \| ğŸ”² TODO \| | P3 | M | 5 | pending | docs/PENDING_MASTER.md:10644 | #### Missing Tests |
| REF-386 | \| Aqar listing/package/favorites \| Tests failing when orgId absent and asserting correct tenant org persisted \| ğŸ”² TODO \| | P3 | M | 5 | pending | docs/PENDING_MASTER.md:10645 | #### Missing Tests |
| REF-414 | â³ To run after pending changes: `pnpm typecheck && pnpm lint && pnpm test` (feat/marketplace-api-tests), `pnpm test:e2e` (Playwright smoke for auth/checkout/returns/claims). | P3 | M | 5 | pending | docs/PENDING_MASTER.md:10791 | ### ğŸ§ª Verification |
| REF-459 | Add observability and guardrails for AV scanning: surface scanner outages, short-circuit processing, and add a health metric/test in FM reports worker. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:11452 | ### ğŸš§ Planned Next Steps |
| SOUQ-CLAIM-DBERR-001 | \| SOUQ-CLAIM-DBERR-001 \| Correctness \| `app/api/souq/claims/[id]/route.ts` \| Order/user lookups use `.catch(() => null)` and return 404 on any DB error. \| Operational errors become false "not found", hiding outages and blocking incident triage. \| Surface 500 on DB errors; keep 404 only for true missing documents; add tests for Mongo failure paths. \| | P3 | M | 5 | pending | app/api/souq/claims/[id]/route.ts | ### âš ï¸ Enhancements / Bugs / Test Gaps (Production Readiness) |
| REF-806 | Next steps: Enforce orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:18593 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-833 | Next steps: Enforce orgId + tenant/audit context on GraphQL resolvers, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:18750 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-853 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar routes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:18991 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-863 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 5 | unknown | docs/PENDING_MASTER.md:19029 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-909 | Update test expectations for TENANT role filter (test needs fixing, not code) | P3 | M | 5 | pending | docs/PENDING_MASTER.md:20630 | ### ğŸš€ Production Readiness Assessment |
| REF-805 | Progress: Master Pending Report updated with latest orgId audit; cataloged user-id fallbacks and missing tenant context across GraphQL, Souq, and Aqar flows. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:18592 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-832 | Progress: Master Pending Report refreshed with latest orgId audit; cataloged cross-module user-id fallbacks and missing tenant context on GraphQL reads/writes. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:18749 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-862 | Progress: Master Pending Report updated with latest orgId audit; risks cataloged across GraphQL read/write paths and Souq/Aqar routes using user-id fallbacks. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:19028 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-904 | \| `decimal.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | P3 | S | 4 | pending | decimal.ts | #### C. Missing Tests (Production Readiness) |
| REF-908 | \| `subscriptionSeatService.ts` \| server/services/ \| ğŸŸ¢ LOW \| 0 \| ğŸ”² Pending \| | P3 | S | 4 | pending | subscriptionSeatService.ts | #### C. Missing Tests (Production Readiness) |
| REF-004 | \| 939af4644 \| fix(test): Add missing connectToDatabase mock to claims-refund-processor test \| 1 \| | P3 | M | 4 | pending | docs/PENDING_MASTER.md:237 | ### ğŸ“ COMMITS THIS SESSION (6 commits) |
| TEST-003 | **TEST-003** â€” Finance module tests missing | P3 | M | 4 | pending | docs/PENDING_MASTER.md:5633 | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| REF-213 | \| Scope \| Souq KYC submit tests; FM finance expenses tests \| âœ… Updated \| | P3 | M | 4 | unknown | docs/PENDING_MASTER.md:9085 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-217 | Flagged FM expenses happy-path assertions tolerating 400/500 status and conditional bodies (tests/unit/api/fm/finance/expenses.test.ts:195-201,305-351). | P3 | M | 4 | unknown | tests/unit/api/fm/finance/expenses.test.ts:195-201 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-229 | \| Scope \| Souq KYC submit tests; FM finance expenses tests \| âœ… In progress \| | P3 | M | 4 | in_progress | docs/PENDING_MASTER.md:9299 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-235 | \| Commands \| `pnpm vitest run tests/unit/api/souq/seller-central/kyc-submit.test.ts`, `pnpm vitest run tests/unit/api/fm/finance/budgets.test.ts` \| âœ… Passed \| | P3 | M | 4 | unknown | pnpm vitest run tests/unit/api/souq/seller-central/kyc-submit.test.ts | ### ğŸ“ Progress & Planned Next Steps |
| REF-285 | \| Tests \| `tests/unit/api/fm/finance/budgets.test.ts`, `tests/unit/api/souq/seller-central/kyc-submit.test.ts` \| âœ… Read \| | P3 | M | 4 | unknown | tests/unit/api/fm/finance/budgets.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-398 | \| Payments/TAP \| Unit + webhook tests for `lib/finance/tap-payments.ts`, `lib/finance/checkout.ts` \| ğŸ”´ Critical \| â³ Pending \| | P3 | M | 4 | pending | lib/finance/tap-payments.ts | #### Missing Tests |
| REF-532 | Branch: `feat/marketplace-api-tests`; working tree already dirty from prior sessions (`app/about/page.tsx`, `app/api/hr/leaves/route.ts`, `app/api/hr/payroll/runs/route.ts`, `app/api/souq/ads/clicks/route.ts`, `app/api/webhooks/taqnyat/route.ts`). | P3 | M | 4 | unknown | feat/marketplace-api-tests | ### ğŸ“ Current Progress & Next Steps |
| REF-871 | \| `pricing.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| ğŸ”² Needs unit tests \| | P3 | M | 4 | pending | pricing.ts | #### E. Missing Tests (Production Readiness) |
| REF-882 | Add focused tests around invalid metadata/comment payloads and validation error shaping before shipping. | P3 | M | 4 | unknown | docs/PENDING_MASTER.md:19491 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-935 | \| **Finance** \| 19 routes \| 3 tests \| ğŸŸ¡ 84% gap \| | P3 | M | 4 | pending | docs/PENDING_MASTER.md:21560 | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| REF-992 | Typecheck currently failing at `lib/finance/checkout.ts:171` (ITapInfo missing `chargeId`); lint unchanged; tests above passing. | P3 | M | 4 | pending | lib/finance/checkout.ts:171 | ### Progress (current session) |
| REF-293 | Playwright-only branches still sparse across dashboard modules; system page needed Arabic H1, finance/HR already covered â€” audit remaining `/dashboard/**` pages for PLAYWRIGHT_TESTS hooks to prevent future RTL smoke gaps. | P3 | L | 4 | pending | /dashboard/** | ### ğŸ” Deep-Dive: Similar Issue Clusters |
| REF-328 | `settings.route.test.ts` (17) - Souq repricer settings | P3 | XS | 3 | unknown | settings.route.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-478 | SuperAdmin rotation script is now env-only (username/password required), credential echo removed, and banned-literal guard test in place; rotation ready once secrets are set. | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:11689 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-486 | PR #549: `docs/pending-v59` â€” Souq rules-config + 5 new tests | P3 | XS | 3 | pending | docs/pending-v59 | #### âœ… Current State |
| REF-533 | Next: parameterize residual hardcoded credentials/config, centralize Souq rule windows, enforce env-driven storage config, then run `pnpm typecheck && pnpm lint && pnpm test`. | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:12386 | ### ğŸ“ Current Progress & Next Steps |
| REF-981 | FM work-orders tests: Missing `requireFmAbility` mock configuration | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:22498 | ### ğŸ” Test Failure Analysis |
| AGENT-001-A | Commit changes with `[AGENT-001-A]` token | P3 | M | 3 | pending | agent/AGENT-001-A/souq/settlements-tests | ### ğŸ¯ NEXT STEPS |
| REF-015 | Fix vendor-products.route.test.ts mock isolation âœ… | P3 | M | 3 | unknown | vendor-products.route.test.ts | ### ğŸ¯ Next Steps |
| REF-016 | Fix 7 mongoose mock test files âœ… | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:843 | ### ğŸ¯ Next Steps |
| REF-020 | Run full test suite to verify timer isolation fix works âœ… (314s, all pass) | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:894 | ### ğŸ¯ Next Steps |
| REF-050 | Tests: ğŸŸ¢ Aggregate tests 6/6 passing (full suite pending) | P3 | M | 3 | pending | docs/PENDING_MASTER.md:2915 | ### 2025-12-17 23:46 (Asia/Riyadh) â€” Critical System Fixes (100% Execution - No Deferral) |
| REF-077 | â³ Tests: Unit tests pending for cart/orders routes | P3 | M | 3 | pending | docs/PENDING_MASTER.md:5619 | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| REF-101 | Test 2: Validates production runtime error when both missing | P3 | M | 3 | pending | docs/PENDING_MASTER.md:6627 | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| REF-108 | \| **Latest Commit** \| `53800eee4` \| âœ… Pushed \| Sync-indexes fix pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:7032 | ### ğŸ“ Current Progress Summary |
| REF-110 | \| ID \| Module \| Routes \| Tests \| Gap \| Priority \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:7080 | #### Missing Tests |
| REF-116 | \| P3 \| Increase HR module test coverage \| Backlog \| 6 routes need tests \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:7150 | ### ğŸ¯ Planned Next Steps |
| REF-117 | \| P3 \| Increase Souq module test coverage \| Backlog \| 49 routes need tests \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:7151 | ### ğŸ¯ Planned Next Steps |
| REF-151 | \| P3 \| Support \| 3/8 routes (5 gap) \| 3h \| Add ticket flow tests \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:7476 | ### ğŸ“‹ Missing Tests (Priority List) |
| REF-152 | \| P3 \| Admin \| 9/28 routes (19 gap) \| 10h \| Add admin action tests \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:7477 | ### ğŸ“‹ Missing Tests (Priority List) |
| REF-158 | \| P3 \| Expand Souq test coverage \| 22h \| Backlog \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:7502 | ### ğŸ¯ Planned Next Steps |
| REF-159 | \| **Latest Commit** \| pending \| âœ… Ready \| triage fixes \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:7528 | ### ğŸ“ Progress Summary (v65.19) |
| REF-166 | \| P3 \| Add admin route tests \| 10h \| Full coverage backlog \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:7964 | ### ğŸ¯ Recommended Next Steps |
| REF-175 | Capture OTP send failure evidence (response JSON + server logs) and triage root cause; add regression test once repro is known. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8077 | ### Next Steps |
| REF-176 | Run lint + targeted vitest for QA routes after UI confirmation to ensure no regressions. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8078 | ### Next Steps |
| COVERAGE-001 | \| P3 \| COVERAGE-001 \| 10+ admin routes missing tests \| Various \| Backlog \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:8186 | ### ğŸ› Identified Issues (Prioritized) |
| REF-183 | \| P3 \| Add admin route tests \| 4h \| 10+ routes need coverage \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8239 | ### ğŸ¯ Recommended Next Steps |
| REF-188 | \| P3 \| Expand Souq test coverage \| 4h \| +51 routes need tests \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8420 | ### ğŸ¯ Recommended Next Steps |
| REF-189 | \| Module \| Routes \| Tests \| Gap \| Priority \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:8544 | ### ğŸ“‹ Missing Tests |
| REF-193 | \| P3 \| Expand Souq test coverage (+51 routes) \| 6h \| Backlog \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8588 | ### ğŸ¯ Planned Next Steps |
| REF-196 | \| **Latest Commit** \| TBD \| âœ… In Progress \| +23 test files \| | P3 | M | 3 | in_progress | docs/PENDING_MASTER.md:8694 | ### ğŸ“ Current Progress Summary |
| REF-200 | Rerun wider vitest set (budgets + FM suites) and update PENDING_MASTER with outcomes. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:8781 | ### ğŸ”œ Planned Next Steps |
| REF-214 | \| Tests \| 14 passing (`pnpm vitest tests/unit/api/souq/seller-central/kyc-submit.test.ts`) \| âœ… Executed \| | P3 | M | 3 | unknown | pnpm vitest tests/unit/api/souq/seller-central/kyc-submit.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-216 | Tightened KYC submit happy-path expectations to require 200 + `nextStep` (tests/unit/api/souq/seller-central/kyc-submit.test.ts:145-238); run validated. | P3 | M | 3 | unknown | tests/unit/api/souq/seller-central/kyc-submit.test.ts:145-238 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-227 | Flagged parallel lenient status assertions in FM expenses tests to close false-negative gaps. | P3 | M | 3 | pending | docs/PENDING_MASTER.md:9293 | ### ğŸ“ Summary |
| REF-250 | \| Scope \| Souq seller KYC submit route + service; FM budgets unit tests \| âœ… Updated \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9434 | ### ğŸ“ Progress & Planned Next Steps |
| REF-255 | Extend integration tests to cover KYC document/bank verification paths and super-admin header override behavior. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9447 | ### ğŸ“ Progress & Planned Next Steps |
| REF-261 | \| Tests \| Not run (doc-only change) \| â– N/A \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9481 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-266 | Run targeted suites (`vitest` for FM budgets and Souq KYC) on next code change touching those areas. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9491 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-270 | \| Tests \| Not executed (static analysis) \| âœ… N/A \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9553 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-273 | Add deterministic tests for FM budgets unit scoping (including multi-unit selection) and Souq KYC vendor guard. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9560 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-290 | In Progress: Smoke suite rerun (pnpm test:e2e -- --project smoke) â€” attempts timed out; Copilot STRICT specs still failing in full `pnpm test` run (see console for copilot.spec failures). | P3 | M | 3 | in_progress | copilot.spec | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-296 | \| Tests \| 3,185 passing (323 files) \| âœ… All pass \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9679 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-298 | \| Test Files \| 285 files \| âœ… Scanned \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9682 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-309 | `admin/notifications/test/route.ts` (1) â€” needs logging | P3 | M | 3 | pending | admin/notifications/test/route.ts | #### PATTERN 2: SILENT-CATCH (Error Masking) |
| REF-318 | \| Tests \| 3,185 passing (323 files) \| âœ… All pass \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:9986 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-327 | `campaigns.route.test.ts` (17) - Souq ads campaigns | P3 | M | 3 | unknown | campaigns.route.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-329 | `vendors.route.test.ts` (18) - FM marketplace vendors | P3 | M | 3 | unknown | vendors.route.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-332 | \| Tests \| 3,130 passing (319 files) \| âœ… All pass \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:10142 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-336 | Souq: `kyc-submit.test.ts` (17), `claims.route.test.ts` (22) | P3 | M | 3 | unknown | kyc-submit.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-337 | Admin: `benchmark.test.ts` (10), `users.route.test.ts` (18) | P3 | M | 3 | unknown | benchmark.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-338 | FM: `expenses.test.ts` (12), `budgets.test.ts` (18) | P3 | M | 3 | unknown | expenses.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-342 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm vitest run` \| âœ… All pass (2970 tests) \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:10271 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-346 | âœ… Committed 12 commits (utility files, tests, API fixes, services, docs) | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:10278 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-356 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm vitest run` \| âœ… All pass \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:10445 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-360 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm test` (models âœ…, Playwright e2e timed out; dev servers killed) \| âš ï¸ Partial \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:10515 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-361 | \| Typecheck/Lint/Tests \| typecheck âœ…; lint âœ…; test:models âœ…; test:e2e â³ Timed out (scripts/run-playwright.sh) \| â³ Needs rerun or skip flag \| | P3 | M | 3 | pending | scripts/run-playwright.sh | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-367 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:10563 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-378 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:10609 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-387 | E2E stability: rerun `pnpm playwright test tests/e2e/smoke --reporter=list --workers=1 --timeout=120000` (or enable `DEBUG=pw:api`) to surface hang; review `scripts/run-playwright.sh` for blocking setup. | P3 | M | 3 | unknown | pnpm playwright test tests/e2e/smoke --reporter=list --workers=1 --timeout=120000 | ### â­ï¸ Planned Next Steps |
| REF-388 | Tests: backfill the 11 service/unit gaps; keep lint/typecheck/test gates green after changes. | P3 | M | 3 | pending | docs/PENDING_MASTER.md:10663 | ### â­ï¸ Planned Next Steps |
| REF-421 | \| Module \| Routes \| Estimated Tests \| Gap \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:10903 | #### Pattern 3: Test Coverage Gaps |
| REF-453 | \| **Latest Commit** \| `d7c82f309` \| `<uncommitted>` \| ğŸ”„ Pending \| +8 files \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:11391 | ### ğŸ“ Current Progress Summary |
| REF-483 | \| **Latest Commit** \| `6e3bb4b05` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:11717 | ### ğŸ“ Current Progress Summary |
| REF-502 | \| **Latest Commit** \| `37bd93d69` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:11928 | ### ğŸ“ Current Progress Summary |
| REF-509 | \| 5 \| **P3** \| E2E Playwright tests \| 15h \| ğŸŸ¢ Backlog \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:12005 | ### ğŸ“‹ Planned Next Steps |
| REF-511 | \| **Latest Commit** \| `5b7e425ac` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:12067 | ### ğŸ“ Current Progress Summary |
| REF-520 | \| 6 \| **P3** \| E2E Playwright tests \| 15h \| ğŸŸ¢ Backlog \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:12131 | #### ğŸ“‹ Planned Next Steps |
| REF-523 | \| **Latest Commit** \| `4cc4726f3` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:12253 | ### ğŸ“ Current Progress Summary |
| REF-528 | Verification: `pnpm typecheck`, `pnpm lint`, `pnpm test:ci` all passing (full vitest suite). Playwright e2e not rerun this pass (previous attempts hit timeout). | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:12356 | ### ğŸ“ Current Progress & Next Steps |
| REF-550 | Fix 20 failing tests (8 files) â€” 2h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13160 | #### P0 â€” Critical (Next Session) |
| REF-554 | Add Souq module tests (21 subdirectories) â€” 8h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13166 | #### P1 â€” High Priority (Next 3 days) |
| REF-556 | Add Aqar API tests â€” 3h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13170 | #### P2 â€” Medium Priority (Next week) |
| REF-557 | Add FM API tests â€” 4h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13171 | #### P2 â€” Medium Priority (Next week) |
| REF-569 | Fix 20 failing tests (8 files) â€” 2h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13432 | #### P0 â€” Critical (Next 24h) |
| REF-572 | Add API tests for Souq module (75 routes) â€” 8h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13437 | #### P1 â€” High Priority (Next 3 days) |
| REF-575 | Add API tests for Aqar (16 routes) â€” 3h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13442 | #### P2 â€” Medium Priority (Next week) |
| REF-576 | Add API tests for FM (25 routes) â€” 4h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:13443 | #### P2 â€” Medium Priority (Next week) |
| REF-582 | Commit pending test files | P3 | M | 3 | pending | docs/PENDING_MASTER.md:13593 | #### Immediate (This Session) |
| REF-594 | \| 3 \| `tests/server/api/counters.contract.test.ts` \| 1 \| Missing mock export \| | P3 | M | 3 | pending | tests/server/api/counters.contract.test.ts | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| REF-595 | \| 7 \| `tests/unit/api/health/health.test.ts` \| 5 \| Rate limit mock missing \| | P3 | M | 3 | pending | tests/unit/api/health/health.test.ts | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| REF-596 | \| 8 \| `tests/unit/api/marketplace/search/route.test.ts` \| 4+ \| Missing `getClientIP` mock \| | P3 | M | 3 | pending | tests/unit/api/marketplace/search/route.test.ts | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| REF-602 | âŒ Assets routes: 1 test (needs 4 more) | P3 | M | 3 | pending | docs/PENDING_MASTER.md:14288 | ### ğŸ§ª Test Coverage Analysis |
| REF-607 | **Add API tests for Assets & CMS** (6 tests) - 2h | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:14331 | #### P2 â€” Medium Priority (Next week) |
| REF-626 | \| **Test Suite** \| â€” \| 275/284 pass \| ğŸŸ¡ 9 Failures \| Needs Fix \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:14894 | ### ğŸ“ Current Progress Summary |
| REF-667 | \| **Latest Commit** \| `717df925c` \| Pending \| ğŸŸ¡ Ready \| +1 commit \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:15710 | ### ğŸ“ Current Progress Summary |
| REF-676 | Verification pending: rerun `pnpm typecheck && pnpm lint && pnpm test` after implementing changes. | P3 | M | 3 | pending | docs/PENDING_MASTER.md:15885 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-722 | \| Module \| API Routes \| Test Files \| Gap \| Priority \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:16963 | #### ğŸ§ª Test Coverage Gaps (Critical) |
| REF-755 | \| ğŸŸ¢ P3 \| Remaining service tests \| 3 hrs \| 5 services \| ğŸ”² TODO \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:17525 | ### ğŸ”² Planned Next Steps |
| REF-761 | \| Service test gap analysis \| 5 services need tests \| âœ… \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:17668 | #### Completed This Session |
| REF-766 | \| **Services Without Tests** \| 11 \| ğŸŸ¡ Gap \| See details below \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:17846 | ### ğŸ“ Current Progress Summary |
| REF-772 | \| Missing service tests \| `server/services/**` \| Testing \| 11 services lack unit tests \| | P3 | M | 3 | pending | server/services/** | #### ğŸŸ¡ MEDIUM PRIORITY â€” Efficiency & Reliability |
| REF-789 | \| 6 \| Add tests for 6 services \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18342 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-792 | \| Service \| Critical Functions \| Test Gap \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18443 | #### Pattern 5: Services Without Unit Tests |
| REF-804 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18590 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-827 | Tests: Not yet run | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:18731 | ### ğŸ“‹ Verification Checklist |
| REF-828 | PR: Ready to merge after tests pass | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:18734 | ### ğŸ“‹ Verification Checklist |
| REF-831 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18747 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-845 | \| 6 \| Add tests for 6 services \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18945 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-848 | \| Tests \| Not run (pending) \| â³ \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18960 | ## ğŸ—“ï¸ 2025-12-12T20:01+03:00 â€” Security Backlog v28.0 |
| REF-851 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:18988 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-861 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:19026 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-873 | \| Latest Command \| `pnpm typecheck` \| âœ… 0 errors (clean) \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:19449 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-875 | \| Tests \| Not run this session \| â¸ï¸ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:19451 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-878 | \| Latest Command \| `pnpm typecheck` \| âŒ 2 errors (TS/Zod) \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:19486 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-880 | \| Tests \| Not run this session \| â¸ï¸ Pending \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:19488 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-881 | Next: fix Zod record signature in transition route, widen error path typing in work-order creation, then rerun `pnpm typecheck && pnpm lint && pnpm test`. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:19490 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-912 | Re-ran `pnpm test:e2e` with extended timeout; suite still timed out (Copilot isolation flow still running). Typecheck/lint remain clean; models tests already green. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:20816 | ### Progress & Planned Next Steps |
| REF-914 | Verification: `pnpm typecheck` âœ…, `pnpm lint` âœ…, `pnpm test:models` âœ…, `pnpm test:e2e` âš ï¸ timed out (~10m, Copilot suite still running). | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:20834 | ### Progress & Planned Next Steps |
| REF-919 | Planned actions: Re-run `pnpm lint && pnpm test` after upcoming changes; keep staging release-gate ready. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:21289 | ### âœ… Current Progress & Next Steps |
| REF-934 | \| **Souq** \| 75 routes \| 0 tests \| âŒ Critical gap \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:21559 | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| REF-936 | \| **FM** \| 25 routes \| 3 tests \| ğŸŸ¡ 88% gap \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:21561 | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| REF-937 | \| **HR** \| 7 routes \| 1 test \| ğŸŸ¡ 86% gap \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:21562 | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| REF-942 | \| ğŸŸ¡ MEDIUM \| Add tests for ip-reputation.ts \| Testing \| 30 min \| ğŸ”² TODO \| | P3 | M | 3 | pending | ip-reputation.ts | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-964 | \| Tests \| `pnpm vitest run tests/unit/lib/graphql/index.test.ts` \| âœ… Targeted \| | P3 | M | 3 | unknown | pnpm vitest run tests/unit/lib/graphql/index.test.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-974 | Verification this session: `pnpm typecheck` âœ…, `pnpm lint` âœ…, `pnpm test:models` âœ…, `pnpm test:e2e` âš ï¸ timed out (~10m). Next: rerun Playwright with higher timeout/CI gate to confirm full pass. | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:22404 | ### Progress & Planned Next Steps |
| TEST-FIX | \| ğŸŸ¡ HIGH \| TEST-FIX \| Fix 21 failing tests in new test files \| 2h \| | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:22470 | ### ğŸš€ Planned Next Steps |
| REF-980 | \| `tests/api/hr/employees/` \| (directory created) \| - \| â³ Pending \| | P3 | M | 3 | pending | tests/api/hr/employees/ | ### ğŸ“‹ New Test Files Added |
| TEST-TAQNYAT | \| ğŸŸ¢ MEDIUM \| TEST-TAQNYAT \| Add tests for `lib/sms-providers/taqnyat.ts` \| 1h \| | P3 | M | 3 | unknown | lib/sms-providers/taqnyat.ts | ### ğŸš€ Planned Next Steps |
| REF-996 | \| Marketplace/Souq \| Settlements seller lifecycle beyond new escrow/payout tests \| ğŸŸ¡ HIGH \| â³ TODO \| | P3 | M | 3 | pending | docs/PENDING_MASTER.md:22907 | #### Missing Tests (production readiness) |
| REF-1017 | **Testing Gaps**: 45 | P3 | M | 3 | pending | docs/PENDING_MASTER.md:23583 | ### ğŸ“ˆ Progress Summary |
| REF-1029 | Test file references | P3 | M | 3 | unknown | docs/PENDING_MASTER.md:24110 | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |

## Next Steps
| Key | Title | Priority | Effort | Impact | Status | Location | SourceRef |
|---|---|---|---|---:|---|---|---|
| REF-434 | \| 2 \| **P0** \| Apply auth infra-aware helper to onboarding/upload/settings logo/subscription-adjacent routes to distinguish 503 vs 401. \| | P0 | XS | 10 | unknown | docs/PENDING_MASTER.md:11003 | ### ğŸ“‹ Planned Next Steps |
| REF-450 | \| 2 \| **P0** \| Apply auth infra-aware helper to onboarding, settings logo, and remaining upload/subscription-adjacent routes; ensure 503 on auth-store outages. \| | P0 | XS | 10 | unknown | docs/PENDING_MASTER.md:11104 | ### ğŸ“‹ Planned Next Steps |
| REF-496 | \| 2 \| **P0** \| Add auth helper that distinguishes infra failure (503) vs auth failure (401) for routes using `getSessionUser(...).catch(() => null)` (onboarding/help/upload/settings). \| | P0 | XS | 10 | unknown | docs/PENDING_MASTER.md:11888 | ### ğŸ“‹ Planned Next Steps |
| REF-099 | \| timingSafeEqual missing globally \| CodeRabbit \| Already implemented in `server/security/health-token.ts:25` and `lib/security/verify-secret-header.ts:29` \| | P0 | S | 10 | pending | server/security/health-token.ts:25 | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| REF-218 | Reconfirmed route gaps: missing seller RBAC/vendor guard in KYC submit (app/api/souq/seller-central/kyc/submit/route.ts:15-78); org-only FM budget filters (app/api/fm/finance/budgets/route.ts:119-129,200-207). | P0 | S | 10 | pending | app/api/souq/seller-central/kyc/submit/route.ts:15-78 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-375 | \| Branch \| `fix/graphql-resolver-todos` \| âœ… Active \| | P0 | S | 10 | unknown | fix/graphql-resolver-todos | ### ğŸ“ Current Progress & Planned Next Steps |
| P0-003 | \| P0-003 \| Security \| `vendors/route.ts:214,218` \| Vendor.find/countDocuments missing orgId \| âš ï¸ Verify \| Check if scoped elsewhere \| | P0 | S | 10 | pending | vendors/route.ts:214,218 | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| REF-490 | \| 4 \| **P0** \| Fix `tenant.server.ts` silent fallback \| 45m \| ğŸ”´ TODO \| | P0 | S | 10 | pending | tenant.server.ts | ### ğŸ“‹ Planned Next Steps |
| REF-089 | **Critical gap:** 51 lib modules without documentation (includes auth, security, middleware) | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:6085 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-211 | RBAC: 119/352 routes (34%) | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9068 | ### âœ… QA Gate Checklist |
| REF-223 | **RBAC/tenant guard gap** â€” KYC submit route lacks seller/vendor RBAC; service lookup is org-only, enabling cross-seller submission. | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:9123 | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| REF-258 | **RBAC gaps on sensitive routes**: Souq KYC submit lacked seller-role guard similar to past marketplace payout/reviews routes. Pattern: routes relying solely on `auth()` without `hasAnyRole`/RBAC context allow unauthorized mutations. | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:9468 | ### ğŸ” Deep-Dive Analysis (Similar/Identical Issue Patterns) |
| REF-272 | Confirmed Souq KYC route uses RBAC (vendor-only) and service enforces vendor ownership + `in_review` status progression. | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9557 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-275 | Gate super-admin cross-tenant FM budgets listing (currently empty filter when tenantId is cross marker). | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9562 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-276 | **Super Admin cross-tenant gap**: For FM budgets, cross-tenant marker yields `{}` query; without explicit tenant+unit selection, a Super Admin could list all budgets. Requires explicit gating or tenant selection. | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:9580 | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| REF-299 | \| RBAC Guards \| 147 usages \| âœ… Verified \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9683 | ### ğŸ“ Current Progress & Planned Next Steps |
| TEN-001 | \| P0 \| Fix TEN-001/002/005: Critical orgId fallbacks \| 1h \| â€” \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:9929 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-405 | \| 2 \| **P0** \| Implement per-tenant admin UI for rule management with audit logging of edits/overrides. \| â³ Not Started \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:10747 | ### ğŸš§ Planned Next Steps |
| REF-416 | \| 1 \| **P0** \| Apply auth infra-aware helper to 20+ routes with `getSessionUser(...).catch(() => null)` \| â³ Not Started \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:10825 | ### ğŸš§ Planned Next Steps |
| REF-464 | \| 1 \| **P0** \| Add orgId to assistant/query routes \| 30m \| ğŸ”´ TODO \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:11610 | ### ğŸ“‹ Planned Next Steps |
| REF-465 | \| 2 \| **P0** \| Add orgId to pm/plans routes \| 30m \| ğŸ”´ TODO \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:11611 | ### ğŸ“‹ Planned Next Steps |
| REF-494 | \| **Security** \| 98% \| orgId âœ…, rate limiting âœ…, 2 silent-fail fixes pending \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:11857 | ### ğŸ“ˆ Production Readiness Scorecard (v61.0) |
| REF-648 | \| **Security (XSS)** \| 95% \| 1 file needs review \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:15442 | ### ğŸ“Š Production Readiness Score |
| REF-759 | \| Codebase security scan \| Identified rate limiting gaps \| âœ… \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:17666 | #### Completed This Session |
| REF-764 | \| GraphQL Security Gaps \| 1 \| 0 \| -1 \| | P0 | ? | 10 | pending | docs/PENDING_MASTER.md:17812 | ### ğŸ“ˆ Updated Metrics |
| REF-813 | \| ğŸ”´ P0 \| Commit staged changes \| 5 min \| ~10 files with security improvements \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:18649 | ### ğŸ”² Planned Next Steps |
| REF-943 | \| ğŸŸ¢ LOW \| Review dangerouslySetInnerHTML usages \| Security \| 30 min \| ğŸ”² BACKLOG \| | P0 | ? | 10 | unknown | docs/PENDING_MASTER.md:21691 | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-436 | \| 4 \| **P1** \| Add alerts/dashboards for tenant_config_load_failure, trial_request_persist_failure/DLQ sends, and auth store outage (503) events. \| | P1 | XS | 10 | unknown | docs/PENDING_MASTER.md:11005 | ### ğŸ“‹ Planned Next Steps |
| REF-442 | \| 2 \| **P1** \| Add dashboards/alerts for `tenant_config_load_failure`, `trial_request_persist_failure`, DLQ failures, and auth-store 503 spikes. \| | P1 | XS | 10 | unknown | docs/PENDING_MASTER.md:11058 | ### ğŸ“‹ Planned Next Steps |
| REF-451 | \| 3 \| **P1** \| Add alerts/dashboards for `tenant_config_load_failure`, `trial_request_persist_failure`, DLQ send/file write failures, and auth-store 503 events. \| | P1 | XS | 10 | unknown | docs/PENDING_MASTER.md:11105 | ### ğŸ“‹ Planned Next Steps |
| EFF-003 | \| EFF-003 \| `app/api/fm/finance/budgets/route.ts:135-143` \| Missing compound index \| Add `{ orgId, unitId, department }` \| ğŸŸ  P1 \| | P1 | S | 10 | pending | app/api/fm/finance/budgets/route.ts:135-143 | #### ğŸš€ Efficiency Improvements |
| REF-311 | \| P1 \| Create lib/auth/tenant-utils.ts \| 30min \| â€” \| | P1 | S | 10 | unknown | lib/auth/tenant-utils.ts | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| DOC-102 | DOC-102 â€” Missing JSDoc for 51 lib utility modules (auth, payments, storage, middleware) â€” P1, Effort: M | P1 | M | 10 | pending | docs/PENDING_MASTER.md:6044 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-727 | \| ğŸ”´ P1 \| Rate limiting: Payments (4 routes) \| 15 min \| Critical security \| ğŸ”² TODO \| | P1 | ? | 10 | pending | docs/PENDING_MASTER.md:17017 | ### ğŸ”² Planned Next Steps |
| REF-505 | \| 1 \| **P0** \| Merge PR #549 (v59.0 rules-config) \| 5m \| ğŸ”„ Ready \| | P0 | XS | 9 | unknown | v59.0 | ### ğŸ“‹ Planned Next Steps |
| P0-2 | \| ğŸ”´ P0-2 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ \| DevOps access \| | P0 | XS | 9 | blocked | fix/graphql-resolver-todos | ### ğŸ¯ PLANNED NEXT STEPS |
| P0-1 | \| ğŸ”´ P0-1 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ \| DevOps access \| | P0 | XS | 9 | unknown | docs/PENDING_MASTER.md:19722 | ### ğŸ¯ Planned Next Steps |
| REF-892 | \| ğŸ”´ P0 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ DevOps \| | P0 | XS | 9 | unknown | docs/PENDING_MASTER.md:20018 | ### ğŸ¯ Planned Next Steps |
| REF-113 | \| P0 \| Commit sync-indexes.ts fix \| Agent \| Path alias â†’ relative import \| | P0 | S | 9 | unknown | sync-indexes.ts | ### ğŸ¯ Planned Next Steps |
| REF-246 | issue-tracker model virtuals: `age`/`isStale` typings missing, effort/priority enums mismatched in model methods (P0/L not allowed by types). | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:9413 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-406 | \| 3 \| **P0** \| Extend secrets monitor token list (URL-encoded/password variants) and integrate gate into CI; scrub docs containing live literals. \| â³ Not Started \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:10748 | ### ğŸš§ Planned Next Steps |
| REF-468 | \| 5 \| **P0** \| Commit & push current changes \| 10m \| ğŸ”„ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:11614 | ### ğŸ“‹ Planned Next Steps |
| REF-469 | \| 6 \| **P0** \| Merge PRs #549, #550 \| 20m \| ğŸ”„ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:11615 | ### ğŸ“‹ Planned Next Steps |
| REF-488 | \| 1 \| **P0** \| Review and merge PR #549 \| 10m \| ğŸ”„ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:11843 | ### ğŸ“‹ Planned Next Steps |
| REF-489 | \| 2 \| **P0** \| Review and merge PR #550 \| 10m \| ğŸ”„ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:11844 | ### ğŸ“‹ Planned Next Steps |
| REF-592 | \| 2 \| **P0** \| Close 9 Stale PRs (#539-547) \| 15m \| Repository cleanup \| None \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:13657 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-621 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:14553 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-632 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:14920 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-643 | \| 1 \| **P0** \| Verify Vercel deployment succeeds \| 5m \| Build stability \| Awaiting Vercel \| | P0 | ? | 9 | blocked | docs/PENDING_MASTER.md:15396 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-644 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:15397 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-652 | \| 1 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:15487 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-653 | \| 2 \| **P0** \| Create PR for current branch \| 5m \| Merge readiness \| Close stale PRs \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:15488 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-712 | **P0**: Review GraphQL TODO stubs - Decide if full implementation needed or remove | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:16750 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-726 | \| ğŸ”´ P0 \| Close stale draft PRs (539-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:17016 | ### ğŸ”² Planned Next Steps |
| REF-738 | \| ğŸ”´ P0 \| Commit & push P1 rate limiting \| 5 min \| 44 routes protected \| ğŸ”² TODO \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:17237 | ### ğŸ”² Planned Next Steps |
| REF-739 | \| ğŸ”´ P0 \| Close stale draft PRs (539-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:17239 | ### ğŸ”² Planned Next Steps |
| REF-749 | \| ğŸ”´ P0 \| Close stale draft PRs (540-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:17519 | ### ğŸ”² Planned Next Steps |
| REF-784 | \| 1 \| Commit 22 uncommitted files \| 5 min \| ğŸ”´ P0 \| â³ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:18337 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-785 | \| 2 \| Push to remote \| 2 min \| ğŸ”´ P0 \| â³ Ready \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:18338 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-797 | \| ğŸ”´ P0 \| Commit 22 files \| 5 min \| Stage and commit all changes \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:18552 | ### ğŸ”² Planned Next Steps |
| REF-798 | \| ğŸ”´ P0 \| Push to origin \| 2 min \| Update remote branch \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:18553 | ### ğŸ”² Planned Next Steps |
| REF-841 | \| 2 \| Commit staged changes \| 5 min \| ğŸ”´ P0 \| â³ Pending \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:18941 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-886 | \| ğŸ”´ P0 \| Push local commit `70fab2816` \| 1 min \| â³ Pending \| | P0 | ? | 9 | pending | docs/PENDING_MASTER.md:19893 | ### ğŸ¯ Planned Next Steps |
| REF-924 | \| ğŸ”´ P0 \| Merge PR #541 after review approval \| 5 min \| Unblock deployment \| | P0 | ? | 9 | unknown | docs/PENDING_MASTER.md:21325 | ### ğŸ¯ Planned Next Steps |
| REF-412 | \| Playwright smoke \| Auth/checkout/returns/claims after rule UI + config rollout. \| P1 \| ğŸ”´ Pending \| | P1 | XS | 9 | pending | docs/PENDING_MASTER.md:10781 | #### Missing Tests |
| REF-312 | \| P1 \| Add HR module RBAC guards \| 1h \| â€” \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:9931 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-408 | \| 5 \| **P1** \| Run Playwright smoke/e2e (auth/checkout/returns/claims) after above changes. \| â³ Not Started \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:10750 | ### ğŸš§ Planned Next Steps |
| REF-498 | \| 4 \| **P1** \| Add DLQ/failover or queue write for trial-request ingestion to avoid drops during DB outages. \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:11890 | ### ğŸ“‹ Planned Next Steps |
| REF-633 | \| 3 \| **P1** \| Add Rate Limiting to 44 Routes \| 1h \| Security \| None \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:14921 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-654 | \| 4 \| **P1** \| Verify careers page XSS safety \| 15m \| Security \| None \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:15490 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-701 | \| 3 \| P1 \| Add rate limiting to 40 routes \| 2h \| Security \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:16163 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-705 | \| 1 \| P1 \| Add rate limiting to remaining 40 routes \| 2h \| High (security) \| | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:16441 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-713 | **P1**: Add rate limiting to auth routes (12 routes) - Prevent brute force | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:16751 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-715 | **P1**: Add rate limiting to finance routes (10 routes) - Protect sensitive data | P1 | ? | 9 | unknown | docs/PENDING_MASTER.md:16753 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-728 | \| ğŸ”´ P1 \| Rate limiting: Auth (12 routes) \| 30 min \| Critical security \| ğŸ”² TODO \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:17018 | ### ğŸ”² Planned Next Steps |
| REF-788 | \| 5 \| Fix GraphQL orgId isolation \| 2 hrs \| ğŸ”´ P1 \| ğŸ”² TODO \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:18341 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-887 | \| ğŸŸ¡ P1 \| Add rate limiting to 6 auth routes \| 1 hr \| ğŸ”² TODO \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:19895 | ### ğŸ¯ Planned Next Steps |
| REF-894 | \| ğŸŸ¡ P1 \| Add rate limiting to auth routes \| 1 hr \| ğŸ”² TODO \| | P1 | ? | 9 | pending | docs/PENDING_MASTER.md:20021 | ### ğŸ¯ Planned Next Steps |
| REF-476 | Identified additional silent-failure points (vendor apply submissions, upload/auth/session cluster, OTP org resolution, resume download, FM report AV scan) not covered in the last audit. | P3 | ? | 9 | unknown | docs/PENDING_MASTER.md:11666 | ### ğŸ“ Current Progress & Next Steps |
| REF-714 | **P1**: Add rate limiting to payments routes (4 routes) - Critical for billing | P1 | ? | 8 | unknown | docs/PENDING_MASTER.md:16752 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-768 | \| ğŸŸ¡ P1 \| Add Zod validation to Finance GET routes \| 1 hr \| 8 routes need schemas \| | P1 | ? | 8 | unknown | docs/PENDING_MASTER.md:17855 | ### ğŸ”² Planned Next Steps |
| REF-778 | \| ğŸŸ¡ P1 \| Expand rate limiting to 215 remaining routes \| 4 hrs \| Focus: HR, CRM, Finance modules \| | P1 | ? | 8 | unknown | docs/PENDING_MASTER.md:18157 | ### ğŸ”² Planned Next Steps |
| REF-815 | \| ğŸŸ¡ P1 \| Expand rate limiting to remaining 215 routes \| 4 hrs \| Focus: HR (0%), CRM (0%), Finance (1/19) \| | P1 | ? | 8 | unknown | docs/PENDING_MASTER.md:18652 | ### ğŸ”² Planned Next Steps |
| REF-349 | P2: Split large route files (auth/otp/send 1091 lines, payments/tap/webhook 815 lines) | P2 | ? | 8 | unknown | docs/PENDING_MASTER.md:10284 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-419 | \| 4 \| **P2** \| Split large route files (>400 lines): auth/otp/send, payments/tap/webhook, search \| â³ Not Started \| | P2 | ? | 8 | unknown | docs/PENDING_MASTER.md:10828 | ### ğŸš§ Planned Next Steps |
| REF-128 | \| P1 \| Smoke `pnpm run build` with CI defaults \| Agent \| Ensure cache/env changes are neutral \| | P1 | XS | 7 | unknown | docs/PENDING_MASTER.md:7260 | ### ğŸ¯ Planned Next Steps |
| REF-407 | \| 4 \| **P1** \| Align env samples/docs to require AWS_REGION/AWS_S3_BUCKET + SUPERADMIN_* and document fail-fast rotation behavior. \| â³ Not Started \| | P1 | XS | 7 | unknown | docs/PENDING_MASTER.md:10749 | ### ğŸš§ Planned Next Steps |
| P1-002 | \| P1-002 \| Reliability \| vendor/apply/route.ts \| Silent DB failure on apply \| ğŸ”´ TODO \| Return 503 on failure \| | P1 | S | 7 | pending | vendor/apply/route.ts | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| REF-547 | \| 3 \| ~~**P1**~~ \| ~~Add rate limiting to 3 legacy routes~~ \| ~~30m~~ \| âœ… Verified v54.0 \| | P1 | S | 7 | unknown | v54.0 | #### ğŸ”„ Planned Next Steps |
| REF-888 | \| ğŸŸ¡ P1 \| Add DOMPurify to 8 dangerouslySetInnerHTML (2 are JSON.stringify - safe) \| 1 hr \| ğŸ”² TODO \| | P1 | S | 7 | pending | JSON.stringify | ### ğŸ¯ Planned Next Steps |
| A11Y-ALT-001 | \| A11Y-ALT-001 \| Images missing alt text \| 38 \| WCAG non-compliance \| â¸ï¸ False Positive \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:1730 | ### ğŸŸ  P1 - High Priority Quality Issues |
| UX-001 | UX-001 (P1) â€” 6 list components missing mobile CardList views â€” sourceRef: code-review:mobile-ux-audit:2025-12-17 | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:3160 | ### 2025-12-17 23:18 (Asia/Riyadh) â€” Comprehensive Analysis + QA Gate Update |
| REF-127 | \| P1 \| Run `pnpm run lint && pnpm run typecheck` \| Agent \| Validate workflow edits locally \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:7259 | ### ğŸ¯ Planned Next Steps |
| REF-154 | \| P1 \| Add rate limiting to Superadmin routes \| 30m \| Agent \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:7498 | ### ğŸ¯ Planned Next Steps |
| REF-155 | \| P1 \| Add rate limiting to Issues API routes \| 30m \| Agent \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:7499 | ### ğŸ¯ Planned Next Steps |
| REF-164 | \| P1 \| Deploy current changes \| 5m \| Verify production stability \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:7962 | ### ğŸ¯ Recommended Next Steps |
| REF-169 | \| P1 \| Deploy and verify console is clean \| 5m \| Pending deploy \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:8043 | ### ğŸ¯ Recommended Next Steps |
| REF-435 | \| 3 \| **P1** \| Keep `lint:json-fallbacks --strict` in CI and add allowlist only where absolutely necessary. \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:11004 | ### ğŸ“‹ Planned Next Steps |
| REF-443 | \| 3 \| **P1** \| Keep `lint:json-fallbacks --strict` enforced; add allowlist only if absolutely needed. \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:11059 | ### ğŸ“‹ Planned Next Steps |
| REF-466 | \| 3 \| **P1** \| Create safeParseJSON utility \| 1h \| ğŸ”´ TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:11612 | ### ğŸ“‹ Planned Next Steps |
| REF-467 | \| 4 \| **P1** \| Fix vendor/apply silent failure \| 30m \| ğŸ”´ TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:11613 | ### ğŸ“‹ Planned Next Steps |
| REF-536 | \| 1 \| **P1** \| Validation \| Add Zod schemas to 10 routes \| 2h \| ğŸ”´ TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:12615 | ### ğŸ“‹ Deferred Items & Action Plan |
| REF-563 | \| 2 \| **P1** \| Close 10 stale draft PRs \| 15m \| Repo hygiene \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:13232 | #### ğŸ”„ Planned Next Steps |
| REF-599 | \| P1 \| Add Zod to remaining 191 routes \| ğŸŸ¡ Pending \| 8h \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:14005 | ### ğŸ“‹ Remaining P0-P1 Tasks |
| REF-645 | \| 3 \| **P1** \| Create/Update PR for current branch \| 5m \| Merge readiness \| Close stale PRs \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:15398 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-670 | \| 1 \| P1 \| Close 6 stale PRs (#539-544) \| 10m \| Cleanup \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:15830 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-671 | \| 2 \| P1 \| Create PR for current branch \| 5m \| Merge readiness \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:15831 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-699 | \| 1 \| P1 \| Close 6 stale PRs (#539-544) \| 10m \| Cleanup \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:16161 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-700 | \| 2 \| P1 \| Create PR for current branch \| 5m \| Merge readiness \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:16162 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-729 | \| ğŸ”´ P1 \| Rate limiting: Aqar (15 routes) \| 30 min \| High traffic module \| ğŸ”² TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:17019 | ### ğŸ”² Planned Next Steps |
| REF-750 | \| ğŸŸ¡ P1 \| Rate limiting: Souq module \| 2 hrs \| 69 routes need protection \| ğŸ”² TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:17520 | ### ğŸ”² Planned Next Steps |
| REF-751 | \| ğŸŸ¡ P1 \| Rate limiting: FM module \| 1 hr \| 19 routes need protection \| ğŸ”² TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:17521 | ### ğŸ”² Planned Next Steps |
| REF-752 | \| ğŸŸ¡ P1 \| Rate limiting: Admin module \| 1 hr \| 14 routes need protection \| ğŸ”² TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:17522 | ### ğŸ”² Planned Next Steps |
| REF-769 | \| ğŸŸ¡ P1 \| Add rate limiting to Souq module \| 2 hrs \| 55+ routes unprotected \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:17856 | ### ğŸ”² Planned Next Steps |
| REF-780 | \| ğŸŸ¡ P1 \| Expand Zod validation to 240 remaining routes \| 6 hrs \| Focus: mutation routes \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:18159 | ### ğŸ”² Planned Next Steps |
| REF-799 | \| ğŸŸ¡ P1 \| Merge PR \| 5 min \| Ready for review \| | P1 | ? | 7 | unknown | docs/PENDING_MASTER.md:18554 | ### ğŸ”² Planned Next Steps |
| REF-800 | \| ğŸŸ¡ P1 \| Expand rate limiting to HR/CRM \| 2 hrs \| 100% gap in HR, CRM modules \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:18555 | ### ğŸ”² Planned Next Steps |
| REF-893 | \| ğŸŸ¡ P1 \| Add DOMPurify to 8 dangerouslySetInnerHTML \| 2 hrs \| ğŸ”² TODO \| | P1 | ? | 7 | pending | docs/PENDING_MASTER.md:20020 | ### ğŸ¯ Planned Next Steps |
| REF-206 | \| 6 \| ğŸŸ¡ P2 \| Add RBAC to 233 routes (352 - 119 covered) \| 8h \| â³ Backlog \| | P2 | ? | 7 | unknown | docs/PENDING_MASTER.md:8907 | ### ğŸ”„ Planned Next Steps |
| REF-539 | \| 4 \| **P2** \| Auth \| Add API key to 3 cron routes \| 1h \| ğŸŸ¡ TODO \| | P2 | ? | 7 | pending | docs/PENDING_MASTER.md:12618 | ### ğŸ“‹ Deferred Items & Action Plan |
| REF-647 | \| 6 \| **P2** \| GraphQL org guard enforcement \| 1h \| Tenant isolation \| â€” \| | P2 | ? | 7 | unknown | docs/PENDING_MASTER.md:15401 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-656 | \| 6 \| **P2** \| GraphQL org guard enforcement \| 1h \| Tenant isolation \| â€” \| | P2 | ? | 7 | unknown | docs/PENDING_MASTER.md:15492 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-672 | \| 4 \| P2 \| Verify careers page XSS safety \| 15m \| Security \| | P2 | ? | 7 | unknown | docs/PENDING_MASTER.md:15833 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-702 | \| 5 \| P2 \| Verify careers page XSS safety \| 15m \| Security \| | P2 | ? | 7 | unknown | docs/PENDING_MASTER.md:16165 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-730 | \| ğŸŸ¡ P2 \| Rate limiting: Finance (11 routes) \| 30 min \| Financial data \| ğŸ”² TODO \| | P2 | ? | 7 | pending | docs/PENDING_MASTER.md:17020 | ### ğŸ”² Planned Next Steps |
| REF-844 | \| 5 \| Fix GraphQL orgId isolation \| 2 hrs \| ğŸ”´ P2 \| ğŸ”² TODO \| | P2 | ? | 7 | pending | docs/PENDING_MASTER.md:18944 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-447 | **Alerting gap**: Metrics exist (`tenant_config_load_failure`, `trial_request_persist_failure`, DLQ failures, `auth_infra_failure`) but dashboards/alerts are missing; risk of silent degradation. | P3 | XS | 7 | pending | docs/PENDING_MASTER.md:11083 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| REF-111 | `app/api/pm/plans/route.ts:43` â€” `FMPMPlan.find(query)` needs org_id injection | P3 | S | 7 | pending | app/api/pm/plans/route.ts:43 | #### 2. Tenant Isolation Gaps |
| REF-137 | Add `enforceRateLimit` to superadmin auth/session routes (`app/api/superadmin/login/route.ts`, `.../logout/route.ts`, `.../session/route.ts`) and tenant provisioning (`app/api/tenants/route.ts`) to close admin-surface gaps. | P3 | S | 7 | pending | app/api/superadmin/login/route.ts | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-208 | \| `app/api/tenants/route.ts` \| ğŸ”´ Needs review - should require auth \| | P3 | S | 7 | pending | app/api/tenants/route.ts | #### Pattern 2: Routes Without Auth Check (10 locations) |
| REF-222 | `app/api/fm/finance/budgets/route.ts:119-129` â€” org-only `buildTenantFilter`; missing `unitId`. | P3 | S | 7 | pending | app/api/fm/finance/budgets/route.ts:119-129 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-684 | `POST /api/auth/otp/send` returning 500; `POST /api/auth/forgot-password` returning 500 (password reset stub warning). | P3 | S | 7 | unknown | POST /api/auth/otp/send | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-072 | **Validation:** Rate limiting, authentication, permissions, missing tenant scope | P3 | ? | 7 | pending | docs/PENDING_MASTER.md:5231 | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| REF-291 | Next: Re-run smoke after server cooldown; address Copilot STRICT layout/tenant isolation failures; keep PLAYWRIGHT flags set in pipeline; ensure marketplace cart flow stays green after stubs. | P3 | ? | 7 | unknown | docs/PENDING_MASTER.md:9658 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-428 | **Observability gaps**: AV scan availability is not reported to dashboards; auth infra failures counted only in logs. Add metrics (`auth_infra_failure`, `av_scan_unavailable`) and alerts to catch outages early. | P3 | ? | 7 | pending | docs/PENDING_MASTER.md:10965 | ### ğŸ” Deep-Dive Analysis |
| REF-678 | **Tenant context missing uniformly on reads**: Unlike Mutations, no Query resolver wraps DB access with tenant/audit context, so isolation plugins are skipped everywhere on reads. Apply the same context setup/teardown pattern used in mutations to all read paths. | P3 | ? | 7 | pending | docs/PENDING_MASTER.md:15896 | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| REF-972 | Finished wiring all GraphQL resolver TODOs: auth context extraction (session/bearer), `me` user lookup, work order list/detail pagination, dashboard stats via shared query helpers, and creation with SLA/audit/tenant context. | P3 | ? | 7 | unknown | docs/PENDING_MASTER.md:22402 | ### Progress & Planned Next Steps |
| GQL-002 | \| GQL-002 \| Incomplete \| 2 resolvers \| TODO stubs in property/invoice \| 30m \| | P3 | S | 6 | pending | lib/graphql/index.ts | #### Medium Priority (P2) |
| REF-945 | Identified tenancy scope regression (tenant filter uses `tenant_id = user.id`), HR payroll role bleed to Finance, and 18 finance/HR routes using raw `req.json()`. | P3 | S | 6 | unknown | user.id | ### ğŸ“ˆ Progress & Planned Next Steps |
| REF-953 | **Details:** `// TODO: Fetch from database when multi-tenant is implemented` | P3 | S | 6 | pending | // TODO: Fetch from database when multi-tenant is implemented | #### Issue #2: Multi-tenant TODO |
| REF-121 | None (DB sync blocked; create `billing-history-missing-org-returns-401` when Mongo available). | P3 | ? | 6 | blocked | docs/PENDING_MASTER.md:7170 | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| REF-368 | Progress: Located Master Pending Report; reviewed upload scan/status/verify-metadata flows and safe-session adoption for tenant isolation; no code changes yet (documentation-only). | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:10565 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-382 | \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail before DB work for dashboard/workOrder/properties/invoice to prevent orgless scans. \| | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:10620 | #### Efficiency Improvements |
| REF-659 | `invoice` - ğŸŸ¡ Has org guard but TODO stub | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:15540 | #### Category 3: GraphQL Tenant Isolation Gaps |
| REF-677 | **Isolation \| Missing tenant/audit context on reads**: workOrders, workOrder, dashboardStats, organization, property/properties, and invoice resolvers do not set tenant/audit context, bypassing tenant isolation on read paths. | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:15889 | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| REF-971 | **Soft-delete/tenant guards**: Previously missing in GraphQL; now applied. Any new resolvers should inherit the guard helper to match REST isolation (FM/finance models especially). | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:22397 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| REF-1004 | Billing/finance routes reviewed for parsing/auth gaps; payment create/auth ordering issue identified. | P3 | ? | 6 | pending | docs/PENDING_MASTER.md:23285 | ### ğŸ“Œ Progress & Planned Next Steps |
| DOC-104 | DOC-104 â€” Missing function-level JSDoc for superadmin issues CRUD endpoints â€” P2, Effort: XS | P2 | XS | 5 | pending | docs/PENDING_MASTER.md:6054 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-029 | \| CI Fast Lane \| `--changed` flag + local `ai/` folder conflicts with `ai` npm package \| ğŸŸ  P2 - needs rename \| | P2 | S | 5 | pending | ai/ | ### ğŸ“Š CI Failure Analysis |
| DOC-106 | DOC-106 â€” Missing README for backlog tracker feature â€” P2, Effort: S | P2 | S | 5 | pending | docs/PENDING_MASTER.md:6061 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-129 | \| P2 \| Add fork-safe Mongo guard to `build-sourcemaps.yml` \| Agent \| Mirror Agent Governor gating \| | P2 | S | 5 | unknown | build-sourcemaps.yml | ### ğŸ¯ Planned Next Steps |
| DOC-108 | DOC-108 â€” Missing API endpoint documentation in OpenAPI spec â€” P2, Effort: M | P2 | M | 5 | pending | docs/PENDING_MASTER.md:6067 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-103 | DOC-103 â€” Missing JSDoc for 124 Mongoose model schemas (server/models) â€” P2, Effort: L | P2 | L | 5 | pending | docs/PENDING_MASTER.md:6049 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-063 | \| F2 (Aggregate wrapper) \| P2 \| âœ… CREATED \| 1 \| Pending \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:4118 | ### 2025-12-17 22:15 (Asia/Riyadh) â€” F5 Impersonation System Complete (100% Directive Fulfilled) |
| REF-114 | \| P2 \| Add rate limiting to superadmin routes \| Agent \| 3 routes \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:7148 | ### ğŸ¯ Planned Next Steps |
| REF-115 | \| P2 \| Add rate limiting to issues routes \| Agent \| 4 routes \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:7149 | ### ğŸ¯ Planned Next Steps |
| REF-150 | \| P2 \| Souq \| 31/75 routes (44 gap) \| 22h \| Focus on critical paths \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:7474 | ### ğŸ“‹ Missing Tests (Priority List) |
| REF-187 | \| P2 \| Review localhost fallbacks \| 15min \| Production URLs \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:8419 | ### ğŸ¯ Recommended Next Steps |
| REF-192 | \| P2 \| Add parseBodySafe to 2 remaining routes \| 20m \| Agent \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:8587 | ### ğŸ¯ Planned Next Steps |
| REF-313 | \| P2 \| Add logging to notification catch blocks \| 30min \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:9933 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-471 | \| 8 \| **P2** \| Split large route files \| 5h \| ğŸŸ¡ Backlog \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:11617 | ### ğŸ“‹ Planned Next Steps |
| REF-549 | \| 5 \| **P2** \| Check similar ref patterns (4 other components) \| 30m \| Potential issues \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:12922 | #### ğŸ”„ Planned Next Steps |
| REF-564 | \| 3 \| **P2** \| Add rate limiting to 9 remaining routes \| 30m \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:13233 | #### ğŸ”„ Planned Next Steps |
| REF-593 | \| 3 \| **P2** \| Add Zod validation to 231 routes \| 6h \| Input validation \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:13658 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-598 | \| Missing Zod Validation \| 231 routes \| P2 \| 6h \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:13817 | ### ğŸ¯ Summary of Findings |
| REF-623 | \| 4 \| **P2** \| Add Zod validation to 232 routes \| 6h \| Input validation \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:14555 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-625 | \| Missing Zod Validation \| 232 routes \| P2 \| 6h \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:14758 | ### ğŸ¯ Summary of Findings |
| REF-634 | \| 5 \| **P2** \| Add Zod validation to 231 routes \| 6h \| Input validation \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:14923 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-646 | \| 5 \| **P2** \| Add Zod validation to 236 routes \| 4h \| Input validation \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:15400 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-655 | \| 5 \| **P2** \| Add Zod validation to 236 routes \| 4h \| Input validation \| â€” \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:15491 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-706 | \| 3 \| P2 \| Add Zod validation to 20% more routes \| 4h \| Medium (reliability) \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:16443 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-753 | \| ğŸŸ¡ P2 \| Zod validation expansion \| 4 hrs \| 241 routes need schemas \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:17523 | ### ğŸ”² Planned Next Steps |
| REF-781 | \| ğŸŸ¢ P2 \| i18n hardcoded strings cleanup \| 2 hrs \| Optional \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:18160 | ### ğŸ”² Planned Next Steps |
| REF-786 | \| 3 \| Add Zod to 52 remaining routes \| 4-6 hrs \| ğŸŸ¡ P2 \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:18339 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-787 | \| 4 \| Add try-catch to 8 routes \| 1 hr \| ğŸŸ¡ P2 \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:18340 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-816 | \| ğŸŸ¢ P2 \| Hardcoded strings â†’ i18n \| 2 hrs \| Deferred (optional) \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:18654 | ### ğŸ”² Planned Next Steps |
| REF-817 | \| ğŸŸ¢ P2 \| Remove unused exports \| 1 hr \| Deferred (optional) \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:18655 | ### ğŸ”² Planned Next Steps |
| REF-842 | \| 3 \| Add Zod validation to 52 routes \| 4-6 hrs \| ğŸ”´ P2 \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:18942 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-843 | \| 4 \| Add try-catch to 5 routes \| 1 hr \| ğŸ”´ P2 \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:18943 | ### ğŸ“‹ PLANNED NEXT STEPS |
| P2-2 | \| ğŸŸ¢ P2-2 \| P3-004 Unused exports cleanup \| 1 hr \| ğŸ”² DEFERRED \| Optional \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:19093 | ### ğŸ¯ PLANNED NEXT STEPS |
| P2-11 | \| ğŸŸ¢ P2-11 \| Audit 21 console statements \| ğŸ”² TODO \| 30 min \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:19684 | ### ğŸ¯ REMAINING ITEMS |
| REF-896 | \| ğŸŸ¢ P2 \| Audit unprotected async void operations \| 1 hr \| ğŸ”² TODO \| | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:20024 | ### ğŸ¯ Planned Next Steps |
| P2-3 | \| ğŸŸ¢ P2-3 \| Replace 13 console statements with logger \| 1 hr \| ğŸ”² Not started \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:20713 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-918 | Pending P2: Replace remaining 12 console usages with `logger` calls. | P2 | ? | 5 | pending | docs/PENDING_MASTER.md:21288 | ### âœ… Current Progress & Next Steps |
| REF-926 | \| ğŸŸ¢ P2 \| Replace 12 console statements with structured logging \| 1 hr \| Code quality \| | P2 | ? | 5 | unknown | docs/PENDING_MASTER.md:21329 | ### ğŸ¯ Planned Next Steps |
| CONFIG-002 | **CONFIG-002 â€” NEXTAUTH_SECRET missing in Vercel production** | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:6670 | ### 2025-12-14 00:02 (Asia/Riyadh) â€” ğŸš¨ P0 PRODUCTION OUTAGE: NEXTAUTH_SECRET Missing |
| REF-362 | Next steps: Configure per-org scan tokens in env (or disable token-required) and rerun Playwright (`SKIP_PLAYWRIGHT=true` if intentionally skipped) to confirm gates; ensure clients always supply tenant-prefixed keys (matches presign output). | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:10520 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-423 | Identified remaining silent-auth and parse-fallback hotspots across upload/help/onboarding/settings routes that are still dirty in the workspace, preventing safe edits without overwriting in-progress changes. | P3 | XS | 5 | in_progress | docs/PENDING_MASTER.md:10948 | ### ğŸ“ Current Progress |
| REF-429 | Roll the telemetry-aware session helper to remaining upload/help/onboarding/settings routes still showing silent auth fallbacks in git status. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:10976 | ### ğŸš§ Planned Next Steps |
| REF-457 | Replace inline `getSessionUser(...).catch(() => null)` usage in upload/help/onboarding/settings/subscription/resume routes with a shared helper that logs infra failures and returns 503, preserving 401 for real auth denials. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:11449 | ### ğŸš§ Planned Next Steps |
| REF-472 | Centralized Souq fraud/return rule windows with tenant overrides; returns + claims investigation now consume the shared config. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:11641 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-479 | Souq fraud/return rule windows centralized with tenant overrides; returns and claims flows are wired to the shared config. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:11690 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-500 | Defaulting to `DEFAULT_TENANT_CONFIG` on load failure previously masked tenant issues; now throws, but callers must handle and surface appropriate 503/tenant-missing responses. | P3 | XS | 5 | pending | docs/PENDING_MASTER.md:11904 | ### ğŸ› ï¸ Enhancements for Production Readiness |
| REF-527 | Centralized Souq fraud/return windows in shared config with tenant overrides + services wired to the shared getter. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:12354 | ### ğŸ“ Current Progress & Next Steps |
| REF-973 | Tenant config now loads from `organizations`/`tenants` collections with cache + default fallback; still serves defaults if DB unreachable. | P3 | XS | 5 | unknown | docs/PENDING_MASTER.md:22403 | ### Progress & Planned Next Steps |
| REF-064 | When superadmin clicks these links â†’ middleware detects missing `orgId` â†’ redirects to `/login` | P3 | S | 5 | pending | /login | ### 2025-12-17 01:45 (Asia/Riyadh) â€” Superadmin Navigation Fix (P0 UX Critical) |
| REF-075 | **Vulnerability:** `Product.find({ _id: { $in: productIds } })` missing orgId filter | P3 | S | 5 | pending | Product.find | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| REF-076 | **Vulnerability:** `SouqListing.find({ _id: { $in: listingObjectIds } })` missing orgId filter | P3 | S | 5 | pending | SouqListing.find | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| REF-148 | \| `app/api/superadmin/logout/route.ts` \| Auth \| LOW \| Keep open \| | P3 | S | 5 | pending | app/api/superadmin/logout/route.ts | #### 1. Routes Without Rate Limiting (16 found) |
| REF-207 | \| `app/api/properties/route.ts` \| ğŸ”´ Needs review - should require auth \| | P3 | S | 5 | pending | app/api/properties/route.ts | #### Pattern 2: Routes Without Auth Check (10 locations) |
| REF-209 | \| `app/api/work-orders/route.ts` \| ğŸ”´ Needs review - should require auth \| | P3 | S | 5 | pending | app/api/work-orders/route.ts | #### Pattern 2: Routes Without Auth Check (10 locations) |
| REF-376 | \| Commands \| `node tools/memory-selfcheck.js`, `pnpm lint:inventory-org` \| âœ… Passed \| | P3 | S | 5 | unknown | node tools/memory-selfcheck.js | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-639 | Both resolvers require `ctx.orgId` (returns empty/null if missing) | P3 | S | 5 | pending | ctx.orgId | #### Fix 3: GraphQL TODO Stubs Implementation |
| REF-679 | Confirmed auto-monitor/health checks running while logged out, spamming `/api/help/articles`, `/api/notifications`, `/api/qa/health`, `/api/qa/reconnect`, `/api/qa/alert` with 401/403 responses. | P3 | S | 5 | unknown | /api/help/articles | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-906 | \| `onboardingEntities.ts` \| server/services/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | P3 | S | 5 | pending | onboardingEntities.ts | #### C. Missing Tests (Production Readiness) |
| REF-954 | Fix tenant scope for `Role.TENANT` to require `{ org_id, unit_id }` (no `tenant_id === user.id`) in `domain/fm/fm.behavior.ts`. | P3 | S | 5 | unknown | domain/fm/fm.behavior.ts | ### 2) Planned Next Steps (Severity-Ordered) |
| REF-1022 | \| 4 \| **Taqnyat service outage** \| Check status.taqnyat.sa \| â³ TODO \| | P3 | S | 5 | pending | status.taqnyat.sa | #### ğŸ” Potential Root Causes |
| REF-345 | âœ… Applied auth-infra-aware helper to 29 occurrences across 25 routes | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:10277 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-377 | \| Scope \| OrgId isolation across GraphQL + Souq/Aqar write paths \| âœ… In review \| | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:10608 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-379 | Progress: Located Master Pending Report and refreshed orgId audit notes; mapped user-id fallbacks and missing tenant/audit context across GraphQL queries/mutations and Souq/Aqar write routes. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:10611 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-688 | Auto-monitor pattern reused across components triggering unauthenticated loops; needs centralized guard. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:15930 | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| REF-803 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:18589 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-830 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:18746 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-850 | \| Scope \| OrgId isolation across GraphQL + Souq + Aqar writes \| âœ… In review \| | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:18987 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-852 | Progress: Master Pending Report located and updated with orgId audit; expanded review across GraphQL queries/mutations and Souq/Aqar routes that fall back to user ids. | P3 | L | 5 | pending | docs/PENDING_MASTER.md:18990 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-860 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | P3 | L | 5 | unknown | docs/PENDING_MASTER.md:19025 | ### ğŸ“ Current Progress & Planned Next Steps |
| AUTH-OPS-002 | \| AUTH-OPS-002 \| DevOps \| ğŸŸ  Pending \| Enforce identical secrets across Vercel/preview/local; add secret checks in CI/CD; rotate placeholders. \| | P3 | L | 5 | pending | docs/PENDING_MASTER.md:23349 | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| REF-056 | **Features**: Quick chips (Open, Urgent, Overdue, Due Today), URL sync, Sort dropdown, Row click | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:3473 | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| REF-066 | **Root Cause:** Missing `orgId` filters on CrmLead and CrmActivity operations | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:4339 | ### 2025-12-17 00:30 (Asia/Riyadh) â€” CRM Tenant Scope Security Fix (SEC-CRM-001) |
| REF-068 | **Legacy Repair:** Unscoped docs (missing orgId) auto-repaired on update; prevents silent query misses | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:4906 | ### 2025-12-16 19:29 (Asia/Riyadh) â€” Backlog Import: Tenant Scoping + Schema-Safe Issue Documents |
| CRM-TENANT-001 | **CRM-TENANT-001** â€” CRM contacts endpoint missing orgId filter | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:5143 | ### 2025-12-16 18:35 (Asia/Riyadh) â€” CRM Tenant Scope + API Test Fixes (P0 Security) |
| REF-071 | **Rationale:** CRM routes use `resolveUser` which returns null for both missing auth and insufficient role â†’ 401 | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:5168 | ### 2025-12-16 18:35 (Asia/Riyadh) â€” CRM Tenant Scope + API Test Fixes (P0 Security) |
| REF-087 | Return 403 if orgId missing or invalid | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:6001 | ### 2025-12-14 19:15 (Asia/Riyadh) â€” Tenant-Isolation Fixes (Aqar + Issue Tracker) |
| REF-136 | \| Tenant/rate-limit audit \| ğŸ”¶ Pending \| Same 16 rate-limit gaps flagged in prior session (see enhancements) \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:7304 | ### âœ… v65.21 Session Progress â€” Test Health Sweep |
| REF-198 | Extend FM tenant helpers and expenses/budgets APIs to enforce unitId consistently; add compound index `{ orgId, unitId, department, updatedAt }`. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:8779 | ### ğŸ”œ Planned Next Steps |
| REF-221 | Extend FM tenant helpers to emit unitId and backfill index `{ orgId, unitId, department, updatedAt }`. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9098 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-271 | Confirmed FM budgets GET/POST enforce orgId + unitId via `resolveUnitScope` and `buildTenantFilter` (unit-aware). | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9556 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-274 | Add compound index `{ orgId: 1, unitId: 1, department: 1, updatedAt: -1 }` to budgets collection to avoid scans. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9561 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-321 | Returns 503 on organization lookup DB failure | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:9996 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-370 | \| Early reject unscoped S3 keys \| ğŸ”² TODO \| Validate/org-bind keys before hitting S3/DB in upload scan/verify routes to cut needless calls and noisy logs. \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:10573 | #### Efficiency Improvements |
| REF-480 | Next: rerun Playwright smoke to validate auth/checkout/returns, extend banned-literal list if new tokens appear, and ensure deployment pipelines inject AWS + SuperAdmin secrets before rotation. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:11692 | ### ğŸ“ Current Progress & Planned Next Steps |
| GQL-001 | \| GQL-001 \| Tenant Isolation \| 3 resolvers \| GraphQL Query org guard gaps \| 1h \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:15419 | #### Medium Priority (P2) |
| REF-658 | `properties` - ğŸŸ¡ Has org guard but TODO stub | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:15539 | #### Category 3: GraphQL Tenant Isolation Gaps |
| REF-674 | Identified GraphQL Query resolver gaps: orgId fallback to userId, missing tenant/audit context on reads, sequential DB calls in workOrders. | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:15883 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-680 | OTP send and forgot-password flows returning 500; password reset also logs a â€œstubâ€ warning in the console. | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:15902 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-958 | **ğŸ”´ New Tenant scope uses tenant_id=userId (no org/unit enforcement)** | P3 | ? | 5 | unknown | docs/PENDING_MASTER.md:22256 | #### ğŸ”´ Multi-Tenancy & Data Scoping |
| SEC-005 | \| SEC-005 \| Rate limiting gaps \| auth/otp routes \| âœ… FALSE POSITIVE \| - \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:23001 | #### ğŸ›¡ï¸ Security Items |
| EFF-005 | \| EFF-005 \| Hooks in wrong directories \| lib/fm/use*.ts, components/**/use*.tsx \| Inconsistent organization \| Move to hooks/ directory \| â³ TODO \| | P3 | ? | 5 | pending | docs/PENDING_MASTER.md:23432 | #### A) EFFICIENCY IMPROVEMENTS |
| REF-134 | \| **Production Readiness** \| Baseline 99.8% \| ğŸ”¶ Blocked \| Pending billing/history fix + rerun \| | P3 | S | 4 | blocked | 99.8 | ### ğŸ“ Current Progress Summary |
| REF-138 | Review webhook/open routes (`app/api/payments/callback/route.ts`, `app/api/healthcheck/route.ts`) for explicit allowlist rationale and document exceptions. | P3 | S | 4 | pending | app/api/payments/callback/route.ts | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-194 | `app/api/payments/tap/checkout/route.ts` - NEEDS FIX | P3 | S | 4 | pending | app/api/payments/tap/checkout/route.ts | #### Pattern: Hardcoded localhost URLs |
| REF-283 | \| Routes \| `app/api/fm/finance/budgets/route.ts`, `app/api/souq/seller-central/kyc/submit/route.ts` \| âœ… Parsed \| | P3 | S | 4 | unknown | app/api/fm/finance/budgets/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-289 | `services/souq/seller-kyc-service.ts:262-282` â€” `seller.kycStatus.status` set to `"approved"` after company_info before document/bank verification; prematurely activates seller. Action: keep status `"pending"`/`"in_review"` until documents and bank details verified. | P3 | S | 4 | pending | services/souq/seller-kyc-service.ts:262-282 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-335 | `payments/tap/webhook` (815 lines) â†’ extracted to `lib/finance/tap-webhook/handlers.ts` + `persistence.ts` | P3 | S | 4 | unknown | payments/tap/webhook | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-692 | \| 2 \| Missing model helper types (`EmployeeMutable`, `EmployeeDocLike`, `UserMutable`, `HydratedDocument`) \| ğŸ”´ Blocking \| Restore declarations (likely from `types/mongoose-encrypted.d.ts` removal) or adjust imports in `server/models/hr.models.ts` and `server/models/User.ts`; re-run `pnpm typecheck`. \| | P3 | S | 4 | pending | types/mongoose-encrypted.d.ts | ### ğŸ¯ Current Progress & Planned Next Steps |
| REF-905 | \| `provision.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | P3 | S | 4 | pending | provision.ts | #### C. Missing Tests (Production Readiness) |
| REF-994 | \| Payments/TAP \| tap-payments.ts core gateway + checkout.ts validation \| ğŸ”´ CRITICAL \| â³ TODO \| | P3 | S | 4 | pending | tap-payments.ts | #### Missing Tests (production readiness) |
| P3-SOUQ-PRODUCTS | \| P3-SOUQ-PRODUCTS \| P3 \| In Progress \| M \| Souq Products migration \| | P3 | XL | 4 | in_progress | docs/PENDING_MASTER.md:2550 | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| REF-012 | \| \| ZATCA_VAT_NUMBER \| â³ Pending (user action) \| | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:442 | ### âœ… SECRETS STATUS (GitHub Actions) |
| REF-049 | Expanded Invoice statusStyles to include PENDING and SENT | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:2743 | ### 2025-12-18 08:31 (Asia/Riyadh) â€” FIX-001 Re-application + Parallel Agent Type Cleanup |
| REF-195 | One instance in payments needs NEXT_PUBLIC_BASE_URL to be required | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:8606 | #### Pattern: Env Var Fallbacks |
| REF-268 | \| Scope \| FM Finance budgets API + Souq Seller KYC submit \| âœ… Re-validated \| | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:9551 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-282 | \| Scope \| FM Finance budgets API + Souq Seller KYC submit \| âœ… Reviewed \| | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:9617 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-366 | \| Scope \| Upload scan/metadata tenancy and token gating \| âœ… Reviewed \| | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:10562 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-425 | Extend `parseBodySafe`/`parseBody` to remaining upload variants (`scan`, `scan-status`, `verify-metadata`, presign siblings) and keep `lint:json-fallbacks` clean. | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:10953 | ### ğŸš§ Planned Next Steps |
| REF-430 | Extend safe parser adoption to remaining upload/scan/verify-metadata routes and ensure CI `lint:json-fallbacks` stays clean. | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:10977 | ### ğŸš§ Planned Next Steps |
| REF-638 | **`invoice` resolver** (was TODO at line ~987): | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:15274 | #### Fix 3: GraphQL TODO Stubs Implementation |
| REF-662 | `properties`, `invoice` - ğŸŸ¡ Have guards but TODO stubs | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:15615 | #### Pattern 2: GraphQL Org/Tenant Fallback (Consistent Risk) |
| REF-822 | \| Finance \| 19 \| 1 \| 95% gap \| | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:18719 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-955 | Restrict HR payroll routes to HR roles (optionally Corporate Admin per SoT) and remove Finance role access. | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:22236 | ### 2) Planned Next Steps (Severity-Ordered) |
| REF-957 | **ğŸ”´ New HR payroll role bleed to Finance** | P3 | ? | 4 | unknown | docs/PENDING_MASTER.md:22242 | #### ğŸ”´ Security & RBAC |
| REF-997 | \| Billing \| subscriptionBillingService recurring charges \| ğŸ”´ CRITICAL \| â³ TODO \| | P3 | ? | 4 | pending | docs/PENDING_MASTER.md:22908 | #### Missing Tests (production readiness) |
| REF-009 | \| **ZATCA** \| â³ Pending user configuration \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:416 | ### âœ… PAYMENT PROVIDER UPDATE |
| REF-033 | \| Redis Not Configured \| Missing REDIS_URL/REDIS_KEY in CI \| Add CI secrets for Redis \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:1419 | ### ğŸ”´ Pre-Existing Issues on main (Not Introduced by This PR) |
| REF-080 | Consider setting up triggers for Issue Tracker sync automation | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:5725 | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| DOC-107 | DOC-107 â€” Missing TypeScript interface documentation for BacklogIssue types â€” P3, Effort: XS | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:6064 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-110 | DOC-110 â€” Missing deployment checklist for backlog tracker â€” P3, Effort: XS | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:6075 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-132 | `build-sourcemaps.yml:53-56` still attempts Mongo index creation with a localhost fallback; on forks, this can fail due to missing Mongo. Recommend adding `if: ${{ env.MONGODB_URI != '' }}` and removing the localhost fallback. | P3 | XS | 3 | pending | build-sourcemaps.yml:53-56 | ### ğŸ” Deep-Dive Analysis of Similar Issues |
| REF-171 | \| P3 \| Configure OTP env var or disable bypass \| 5m \| Needs owner action \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:8045 | ### ğŸ¯ Recommended Next Steps |
| REF-392 | Workflow diagnostics confirmed as environment setup gaps (staging / production-approval / production) rather than code defects. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:10690 | ### ğŸ“ Current Progress |
| REF-396 | \| 5 \| ğŸŸ¡ \| Create GitHub environments (`staging`, `production-approval`, `production`) to clear workflow gates \| â³ Not Started \| | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:10699 | ### ğŸš§ Planned Next Steps |
| REF-401 | **Workflow env gaps**: release-gate environments missing; creating `staging`, `production-approval`, `production` resolves all workflow warnings without code changes. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:10727 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| REF-413 | **Env Readiness Enforcement** â€” `lib/config/constants.ts:24-47` now throws on missing AWS_REGION/AWS_S3_BUCKET, but env sample/docs still show optional S3 fields; add documentation gating to prevent regressions. | P3 | XS | 3 | pending | lib/config/constants.ts:24-47 | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| REF-473 | Next: rerun Playwright e2e when runtime allows; extend banned-literal list if new sensitive tokens appear; ensure pipelines set AWS envs and SuperAdmin secrets before rotation. | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:11643 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-529 | Next: evaluate existing dirty app/api changes (user-owned) before merging; optionally rerun Playwright once environment stabilizes. | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:12357 | ### ğŸ“ Current Progress & Next Steps |
| REF-530 | Env enforcement drift: S3 config now throws in production when missing; ensure deployment pipelines set AWS_REGION/AWS_S3_BUCKET explicitly. `validateAwsConfig` guard prevents silent fallbacks. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:12371 | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| REF-707 | \| 4 \| P3 \| Document rate limit configurations \| 1h \| Low (maintainability) \| | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:16444 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-916 | \| SMS/OTP \| â³ Needs env vars \| **Yes** \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:21093 | ### ğŸ“‹ PRODUCTION READINESS CHECKLIST |
| REF-930 | \| SMS/OTP \| ğŸŸ¡ Needs env vars \| Yes (login) \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:21463 | ### ğŸ“‹ Production Readiness Checklist |
| REF-998 | **Environment setup gaps**: release-gate and related workflows reference missing GitHub environments; same fix (create envs) resolves all three workflow warnings. | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:22914 | ### Deep-Dive: Similar Issues Found Elsewhere |
| REF-1019 | \| 1 \| **Taqnyat API credentials missing/invalid** \| Check Vercel env vars \| â³ TODO \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:23750 | #### ğŸ” Potential Root Causes |
| GH-ENVS | \| 5 \| **GH-ENVS** \| Create GitHub Environments \| DevOps \| â³ Pending \| | P3 | XS | 3 | pending | docs/PENDING_MASTER.md:23852 | #### ğŸŸ¡ HIGH â€” DevOps Actions |
| REF-1028 | Environment variable documentation | P3 | XS | 3 | unknown | docs/PENDING_MASTER.md:24109 | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| REF-008 | Await Codex review gate (AGENTS.md Section 14) | P3 | S | 3 | unknown | AGENTS.md | ### ğŸ¯ Next Steps |
| REF-021 | Address remaining PR review comments (design-tokens.css question) | P3 | S | 3 | unknown | design-tokens.css | ### ğŸ¯ Next Steps |
| REF-032 | \| Missing i18n Keys \| 218 translation keys missing in en.json/ar.json \| Add translations \| | P3 | S | 3 | pending | en.json/ar.json | ### ğŸ”´ Pre-Existing Issues on main (Not Introduced by This PR) |
| REF-057 | **LeaveRequestsList.tsx** (527 lines, NEW): Status, Leave Type, Period + Quick stats (Pending/Approved/Total Days) + Pending/Upcoming chips | P3 | S | 3 | pending | LeaveRequestsList.tsx | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| REF-062 | PR creation: Open PR for `feat/superadmin-branding` â†’ `main` | P3 | S | 3 | pending | feat/superadmin-branding | ### 2025-12-17 21:50 â€” P0 SSRF Hardening + Test Fixes + Multi-Agent Coordination âœ… MERGE-READY |
| REF-094 | Code quality verified: 0 console.log, 0 TODO/FIXME, all dangerouslySetInnerHTML safe | P3 | S | 3 | pending | console.log | ### 2025-12-15 v65.20 â€” Aqar Test Coverage Complete + Code Quality 100% |
| REF-097 | Branch `docs/pending-v60` deleted locally and remotely | P3 | S | 3 | pending | docs/pending-v60 | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| REF-106 | `docs/BACKLOG_AUDIT.json` â€” v2.5 format with 10 pending issues | P3 | S | 3 | pending | docs/BACKLOG_AUDIT.json | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| REF-109 | \| Update PENDING_MASTER \| âœ… In Progress \| Adding v65.22 entry \| | P3 | S | 3 | in_progress | v65.22 | ### âœ… v65.22 Session Progress |
| REF-123 | \| Missing tracked model caused module-not-found for Issue APIs \| Build breaker \| Keep Issue/IssueEvent models co-located and enforced via import check script in CI (`scripts/verify-api.ts` or new guard) \| | P3 | S | 3 | pending | scripts/verify-api.ts | #### Identified Bugs |
| REF-125 | Hardened PR Agent to ignore bots, require repo PR context, and skip when `OPENAI_KEY` missing (`.github/workflows/pr_agent.yml:20-47`). | P3 | S | 3 | pending | .github/workflows/pr_agent.yml:20-47 | ### âœ… Session Progress â€” Workflow lint + fork safety |
| REF-147 | \| `app/api/healthcheck/route.ts` \| System \| LOW \| Keep open for monitoring \| | P3 | S | 3 | pending | app/api/healthcheck/route.ts | #### 1. Routes Without Rate Limiting (16 found) |
| REF-201 | `app/api/souq/seller-central/kyc/submit/route.ts:17-100` â€” Route still sets vendorId to user.id; needs explicit vendor guard + vendorId propagation from session. | P3 | S | 3 | pending | app/api/souq/seller-central/kyc/submit/route.ts:17-100 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-263 | Reaffirmed alignment to Final Fixizit System Prompt v3.1 and AGENTS.md invariants. | P3 | S | 3 | unknown | v3.1 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-284 | \| Services \| `services/souq/seller-kyc-service.ts` \| âœ… Parsed \| | P3 | S | 3 | unknown | services/souq/seller-kyc-service.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-308 | `work-orders/presign/route.ts` (1) â€” needs fix | P3 | S | 3 | pending | work-orders/presign/route.ts | #### PATTERN 2: SILENT-CATCH (Error Masking) |
| REF-319 | \| `.catch(() => null)` \| 0 remaining in `app/api/` \| âœ… Eliminated \| | P3 | S | 3 | unknown | app/api/ | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-323 | `admin/notifications/send/route.ts` â†’ extracted to `_lib/channel-handlers.ts`, `recipient-resolver.ts` | P3 | S | 3 | unknown | admin/notifications/send/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-324 | `souq/orders/route.ts` â†’ extracted to `_lib/order-lifecycle.ts`, `order-validation.ts` | P3 | S | 3 | unknown | souq/orders/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-325 | `fm/work-orders/[id]/transition/route.ts` â†’ extracted to `_lib/fsm-transitions.ts`, `transition-context.ts` | P3 | S | 3 | unknown | fm/work-orders/[id]/transition/route.ts | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-543 | #539: `docs(pending): Update PENDING_MASTER v17.0 - PayTabsâ†’TAP cleanup` | P3 | S | 3 | pending | v17.0 | ### ğŸ“‹ Repository Cleanup |
| REF-568 | `app/api/souq/products/route.ts` â€” E-commerce, needs protection | P3 | S | 3 | pending | app/api/souq/products/route.ts | #### Pattern 1: Missing Rate Limiting in Legacy Routes |
| REF-581 | \| #539 \| PayTabsâ†’TAP cleanup \| `docs/pending-report-update` \| Draft \| Close (superseded) \| | P3 | S | 3 | pending | docs/pending-report-update | ### ğŸ“‹ Open Pull Requests (6 Stale Drafts) |
| REF-708 | \| 5 \| P3 \| Create PR for v39.0 changes \| 15m \| â€” \| | P3 | S | 3 | unknown | v39.0 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-710 | \| `app/aqar/filters/page.tsx` \| 121 \| `JSON.parse(raw)` \| ğŸŸ¡ Medium - Client-side, needs try/catch \| | P3 | S | 3 | pending | app/aqar/filters/page.tsx | #### 2. Unsafe JSON.parse Patterns |
| REF-723 | \| `copilot/chat/route.ts` \| 117 \| Medium \| Needs try-catch \| | P3 | S | 3 | pending | copilot/chat/route.ts | #### âš ï¸ JSON.parse Safety Audit |
| REF-724 | \| `projects/route.ts` \| 72 \| Medium \| Needs try-catch \| | P3 | S | 3 | pending | projects/route.ts | #### âš ï¸ JSON.parse Safety Audit |
| REF-870 | \| `properties/route.ts` \| ğŸ”² VERIFY \| Re-export or needs wrapper \| | P3 | S | 3 | pending | properties/route.ts | #### C. Routes Without Try-Catch (8 Total) |
| REF-897 | `app/api/projects/route.ts:72` (needs verification) | P3 | S | 3 | pending | app/api/projects/route.ts:72 | #### Pattern 3: JSON.parse Without Protection in Webhooks |
| REF-902 | \| `pricingInsights.ts` \| lib/aqar/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | P3 | S | 3 | pending | pricingInsights.ts | #### C. Missing Tests (Production Readiness) |
| REF-903 | \| `recommendation.ts` \| lib/aqar/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | P3 | S | 3 | pending | recommendation.ts | #### C. Missing Tests (Production Readiness) |
| REF-907 | \| `onboardingKpi.service.ts` \| server/services/ \| ğŸŸ¢ LOW \| 0 \| ğŸ”² Pending \| | P3 | S | 3 | pending | onboardingKpi.service.ts | #### C. Missing Tests (Production Readiness) |
| REF-929 | `app/api/fm/` â€” Needs verification | P3 | S | 3 | pending | app/api/fm/ | #### Pattern 1: Missing Error Handling in Work Orders API |
| ENH-LP-007 | \| ğŸŸ¡ MEDIUM \| ENH-LP-007: Sentry.setContext() for FM/Souq \| Observability \| 30 min \| âš ï¸ PARTIAL \| | P3 | S | 3 | unknown | Sentry.setContext | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-944 | Confirmed new stack drift: SQL/Prisma instrumentation pulled via `@sentry/opentelemetry` and `@prisma/instrumentation` in `pnpm-lock.yaml`. | P3 | S | 3 | unknown | @sentry/opentelemetry | ### ğŸ“ˆ Progress & Planned Next Steps |
| REF-956 | Reconcile `docs/CATEGORIZED_TASKS_LIST.md` status with context anchors (either revive or update anchors to point to `docs/PENDING_MASTER.md`). | P3 | S | 3 | unknown | docs/CATEGORIZED_TASKS_LIST.md | ### 2) Planned Next Steps (Severity-Ordered) |
| AUDIT-LOG | \| 5 \| **AUDIT-LOG** \| Fix 9 non-null assertions in server/audit-log.ts \| 30m \| Agent \| | P3 | S | 3 | unknown | server/audit-log.ts | #### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-030 | \| CI Full Suite \| Depends on above fixes \| â³ PENDING CI \| | P3 | M | 3 | blocked | docs/PENDING_MASTER.md:1212 | ### ğŸ“Š CI Failure Analysis |
| REF-124 | **Missing dependency parity across issue routes**: `app/api/issues/import/route.ts` and `app/api/issues/[id]/route.ts` both rely on `IssueEvent`. Without the model tracked (as seen in the Vercel failure for `@/server/models/Issue`), imports hard-fail at build time. The new `server/models/IssueEvent.ts` removes this class of break; add a CI guard to detect unresolved server model imports in `app/api/issues/**`. | P3 | L | 3 | pending | app/api/issues/import/route.ts | ### ğŸ” Deep-Dive Analysis: Similar Issues |
| REF-242 | Lint cleanup: remove console/any/unused vars across issue-tracker, app/api/issues/route.ts, and app/marketplace/page.tsx; re-run `pnpm lint`. | P3 | L | 3 | unknown | app/api/issues/route.ts | ### ğŸ“ Progress & Planned Next Steps |
| REF-302 | âœ… **Deep-dive analysis** on similar patterns across codebase | P3 | L | 3 | unknown | docs/PENDING_MASTER.md:9689 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-531 | Ran repo-wide `rg -n "hardcod"` sweep across app/lib/scripts/docs to re-confirm remaining hardcoded risks; no new code changes applied. | P3 | L | 3 | unknown | docs/PENDING_MASTER.md:12384 | ### ğŸ“ Current Progress & Next Steps |
| REF-544 | #540: `docs(pending): Update PENDING_MASTER v18.0 â€” System-Wide Scan` | P3 | L | 3 | pending | v18.0 | ### ğŸ“‹ Repository Cleanup |
| REF-612 | **O1**: Generate OpenAPI specs for all routes - 4h | P3 | L | 3 | unknown | docs/PENDING_MASTER.md:14338 | #### P3 â€” Nice to Have |
| REF-001 | Create PR for review | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:122 | ### ğŸ¯ NEXT STEPS |
| REF-002 | After Codex approval, deploy to production | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:123 | ### ğŸ¯ NEXT STEPS |
| REF-003 | Verify production login flow works (after rate limit resets) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:124 | ### ğŸ¯ NEXT STEPS |
| REF-006 | Verify system-automated work orders create correctly with null assignedBy | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:334 | ### ğŸ¯ Next Steps |
| REF-007 | \| Open PRs \| âœ… None \| `gh pr list --state open` \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:352 | ### âœ… VERIFICATION EVIDENCE |
| REF-010 | \| **ZATCA** \| ZATCA_API_KEY \| â³ Pending (user action) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:440 | ### âœ… SECRETS STATUS (GitHub Actions) |
| REF-011 | \| \| ZATCA_SELLER_NAME \| â³ Pending (user action) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:441 | ### âœ… SECRETS STATUS (GitHub Actions) |
| REF-013 | \| \| ZATCA_SELLER_ADDRESS \| â³ Pending (user action) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:443 | ### âœ… SECRETS STATUS (GitHub Actions) |
| REF-017 | Push fixes (e7c3c5d9c) âœ… | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:844 | ### ğŸ¯ Next Steps |
| REF-018 | Address remaining PR #601 review comments | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:846 | ### ğŸ¯ Next Steps |
| REF-019 | Merge PR #601 after all CI checks pass | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:847 | ### ğŸ¯ Next Steps |
| REF-022 | Merge PR #601 after CI passes | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:896 | ### ğŸ¯ Next Steps |
| REF-023 | \| OOM \| CI-Sharded typecheck \| Memory limit on runner \| ğŸ”´ NEEDS INVESTIGATION \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:970 | ### ğŸ“Š CI STATUS ANALYSIS (Post-Push) |
| REF-024 | \| 11 \| Announce completion \| â³ Pending CI results \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:990 | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| REF-025 | \| 12 \| NOTIFY Eng. Sultan \| â³ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:991 | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| REF-026 | \| 13 \| Wait for Codex APPROVED \| â³ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:992 | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| REF-027 | \| â³ Vercel \| AWAITING \| Needs project access \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:1044 | ### ğŸ“Š CI STATUS (Post-Fixes) |
| REF-028 | \| 12 \| Notify Eng. Sultan \| â³ Pending Codex \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1084 | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| REF-031 | \| Fixzit Quality Gates \| âŒ FAIL \| Pre-existing: 218 missing i18n keys \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1408 | ### ğŸ“Š CI Status (Post-Fix) |
| DOCS-TODO-001 | DOCS-TODO-001: Documented 17 TODOs with categories and priorities | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1789 | ### Implementation Phases - âœ… ALL COMPLETE |
| REF-034 | \| ğŸ”´ Open \| **0** \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1847 | ## ğŸ¯ Backlog Status |
| REF-035 | \| ğŸ”´ Open \| **0** \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1920 | ## ğŸ‰ BACKLOG COMPLETE |
| NAV-MISSING-001 | \| 1 \| NAV-MISSING-001 \| Add 6 missing pages to Superadmin nav \| commit 937ed48a7 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1927 | ### All Resolved Items (Final) |
| REF-036 | \| Backlog \| âœ… 0 open \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1956 | ### Quality Gates (Final) |
| REF-037 | \| ğŸ”´ Open \| 0 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:1987 | ### 2025-12-21 15:00 (Asia/Riyadh) â€” ALL DEFERRED ITEMS RESOLVED |
| REF-038 | \| ğŸ”´ Open \| 0 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2004 | ### 2025-12-21 17:30 (Asia/Riyadh) â€” SSOT Backlog Sync Post-FEATURE-002 |
| FEATURE-001 | \| FEATURE-001 \| Q1 2026 \| SSE - ADR-001 decision pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2021 | ### 2025-12-21 17:30 (Asia/Riyadh) â€” SSOT Backlog Sync Post-FEATURE-002 |
| REF-039 | ğŸ”´ Open: 0 items | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2058 | ### 2025-12-21 17:00 (Asia/Riyadh) â€” FEATURE-002 Completed (Bulk Operations UI) |
| REF-040 | ğŸ”´ Open: 0 items | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2077 | ### 2025-12-21 14:30 (Asia/Riyadh) â€” Final SSOT Sync + Quality Gates Verified |
| REF-041 | ğŸ”´ Open: 0 items | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2135 | ### 2025-12-21 23:55 (Asia/Riyadh) â€” SSOT Backlog Sync Complete |
| REF-042 | \| Open \| 0 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2292 | ### 2025-12-22 09:45 (Asia/Riyadh) â€” SSOT Final Verification |
| REF-043 | \| Open \| 0 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2321 | ### 2025-12-22 08:00 (Asia/Riyadh) â€” SSOT Backlog Sync Verification |
| FEATURE-002 | \| FEATURE-002 \| open \| deferred \| Post-MVP Q2 2026 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2347 | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| COMP-001 | \| COMP-001 \| open \| deferred \| ZATCA Phase 2 deadline Q2 2026 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2349 | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| REF-045 | \| ID \| Area \| Evidence \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2446 | ### PARTIAL (P1) - Exists but incomplete |
| REF-046 | \| Open PRs \| 0 âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2608 | ### 2025-12-20 12:55 (Asia/Riyadh) â€” Production Readiness: ADRs + Deployment Prep |
| REF-047 | \| Open PRs \| 0 âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2662 | ### 2025-12-20 11:45 (Asia/Riyadh) â€” Production Readiness Session: Security + Test Coverage |
| REF-048 | \| Dependabot Alerts \| 0 open âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:2663 | ### 2025-12-20 11:45 (Asia/Riyadh) â€” Production Readiness Session: Security + Test Coverage |
| BLOCKER-001 | **BLOCKER-001:** Vercel build failing (webpack "Module not found") - Needs investigation | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:2910 | ### 2025-12-17 23:46 (Asia/Riyadh) â€” Critical System Fixes (100% Execution - No Deferral) |
| REF-053 | âš ï¸ DB sync pending (MongoDB offline - blocked) | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:3061 | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| REF-055 | None (backlog items already captured; import pending) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:3284 | ### 2025-12-17 23:02 (Asia/Riyadh) â€” Code Review Update |
| REF-059 | **Compact Encoding**: `filters=status:["open"],priority:["high"]` (not verbose JSON) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:3612 | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| REF-067 | `statusHistory` â†’ tracks status changes from 'open' baseline | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:4848 | ### 2025-12-16 19:29 (Asia/Riyadh) â€” Backlog Import: Tenant Scoping + Schema-Safe Issue Documents |
| REF-069 | **Commit:** pending-push (2 files changed) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:4944 | ### 2025-12-16 19:10 (Asia/Riyadh) â€” GitHub Actions Workflow Fixes + Problems Panel Audit (68 Diagnostics) |
| REF-070 | **Commit:** pending-push | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:4951 | ### 2025-12-16 19:10 (Asia/Riyadh) â€” GitHub Actions Workflow Fixes + Problems Panel Audit (68 Diagnostics) |
| REF-073 | **BACKLOG_AUDIT:** Refreshed with 12 evidence-backed open items | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:5300 | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| REF-074 | Start API server for DB import | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:5349 | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| REF-078 | Rotate API keys in MongoDB Atlas (public key: qefjbwzu) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:5723 | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| REF-079 | Document trigger/function development workflow if needed | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:5724 | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| REF-081 | **State**: OPEN - Large divergence from main (89 files, +1786/-890 lines) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:5744 | ### 2025-12-16 16:30 (Asia/Riyadh) â€” BUILD-TS-001 Resolution + PR Pipeline Cleanup |
| REF-082 | Monitor for TypeScript regressions in queue infrastructure | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:5764 | ### 2025-12-16 16:30 (Asia/Riyadh) â€” BUILD-TS-001 Resolution + PR Pipeline Cleanup |
| REF-083 | Status: **OPEN** (blocker for all PRs) | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:5827 | ### 2025-12-16 08:00 (Asia/Riyadh) â€” PR Copilot Batch + ESLint Build Fix |
| REF-084 | Risk: Missing required indexes before build/deploy could cause runtime failures | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:5857 | ### 2025-12-15 10:15 (Asia/Riyadh) â€” Workflow MongoDB Index Guard Fix |
| REF-088 | **Gap from threshold:** 35 percentage points | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6036 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-090 | **API discoverability:** OpenAPI spec missing new endpoints | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6087 | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| REF-093 | TODO/FIXME: 0 found in API routes | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6302 | ### 2025-12-15 v65.20 â€” Aqar Test Coverage Complete + Code Quality 100% |
| REF-095 | \| Total Open \| 13 \| 10 \| -3 âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6483 | ### 2025-12-15 23:48 (Asia/Riyadh) â€” TEST-SAFE-FETCH Implementation Complete |
| REF-096 | \| Total Open \| 13 \| 11 \| -2 âœ… \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6526 | ### 2025-12-15 22:30 (Asia/Riyadh) â€” SSOT Backlog Sync + Verification Audit |
| REF-098 | **0 open PRs remaining** | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6557 | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| REF-102 | \| Pending \| 9 \| 8 \| -1 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6646 | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| REF-103 | \| Total Open \| 9 (was 8) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6691 | ### 2025-12-14 00:02 (Asia/Riyadh) â€” ğŸš¨ P0 PRODUCTION OUTAGE: NEXTAUTH_SECRET Missing |
| REF-104 | \| Total Pending \| 10 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6773 | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| REF-107 | None (no new issues beyond PENDING_MASTER open items) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:6838 | ### 2025-12-13 23:10 (Asia/Riyadh) â€” SSOT Correction (no DB sync) |
| REF-112 | \| Priority \| Task \| Owner \| Notes \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7143 | ### ğŸ¯ Planned Next Steps |
| REF-118 | add-rate-limiting-to-superadmin-routes â€” pending limiter hardening. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7163 | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| REF-119 | add-rate-limiting-to-issues-api-routes â€” pending limiter hardening. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7164 | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| REF-126 | \| Priority \| Task \| Owner \| Notes \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7257 | ### ğŸ¯ Planned Next Steps |
| REF-130 | \| P3 \| Add actionlint/workflow validation job \| Backlog \| Prevent future schema warnings \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7262 | ### ğŸ¯ Planned Next Steps |
| REF-142 | Support/Admin gaps (5 and 19 routes respectively); add impersonation and admin action flows to raise confidence. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7325 | ### ğŸ”§ Enhancements Needed for Production Readiness |
| REF-143 | \| Priority \| Task \| Effort \| Owner \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7339 | ### ğŸ¯ Planned Next Steps |
| REF-146 | \| Rate Limiting Audit \| ğŸ”¶ 16 gaps \| See enhancement list below \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7372 | ### âœ… v65.20 Session Progress â€” Deep-Dive Audit |
| REF-149 | \| Priority \| Module \| Gap \| Effort \| Recommendation \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7471 | ### ğŸ“‹ Missing Tests (Priority List) |
| REF-153 | \| Priority \| Task \| Effort \| Owner \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7496 | ### ğŸ¯ Planned Next Steps |
| REF-160 | \| **TODO/FIXME (API)** \| 0 \| âœ… Clean \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7596 | ### ğŸ“ Session Summary |
| REF-161 | \| TODO/FIXME in API \| 0 \| âœ… \| Clean codebase \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7633 | ### ğŸ“Š Code Quality Summary |
| REF-162 | \| TODO/FIXME in API \| 0 \| âœ… \| Clean \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:7871 | #### 1. Code Quality Metrics |
| REF-163 | \| Priority \| Task \| Effort \| Rationale \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7960 | ### ğŸ¯ Recommended Next Steps |
| REF-167 | \| P3 \| Review 5 silent empty catches \| 30m \| Ensure intentional \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:7965 | ### ğŸ¯ Recommended Next Steps |
| REF-168 | \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8041 | ### ğŸ¯ Recommended Next Steps |
| REF-172 | Located Master Pending Report (this file) and avoided duplicates. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:8070 | ### Progress |
| REF-173 | Ongoing: OTP send endpoint returning 500 needs reproduction details; awaiting response payload/logs to isolate root cause. | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:8073 | ### Progress |
| REF-174 | Verify in-browser (logged out + logged in non-super-admin) that no auto-monitor network chatter occurs; confirm only SUPER_ADMIN can start monitoring/SystemVerifier actions. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8076 | ### Next Steps |
| REF-179 | \| TODO/FIXME in API \| 0 \| âœ… Clean \| None needed \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:8137 | #### 2. Code Quality Metrics |
| REF-180 | \| Priority \| Task \| Effort \| Rationale \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8235 | ### ğŸ¯ Recommended Next Steps |
| REF-182 | \| P3 \| Review 50 empty catches \| 1h \| Ensure intentional fallbacks \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8238 | ### ğŸ¯ Recommended Next Steps |
| REF-184 | \| Area \| Routes Verified \| Missing Scope \| Notes \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:8334 | #### 4. Tenant Isolation Verification |
| REF-185 | \| Priority \| Task \| Effort \| Rationale \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8416 | ### ğŸ¯ Recommended Next Steps |
| REF-190 | \| Priority \| Task \| Effort \| Owner \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8581 | ### ğŸ¯ Planned Next Steps |
| REF-204 | \| # \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:8900 | ### ğŸ”„ Planned Next Steps |
| REF-212 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9083 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-215 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9087 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-224 | **Sprint 1 Continuation:** Apply `parseBodySafe` to remaining 44 routes (batch by module) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9280 | ### ğŸ¯ Recommended Next Steps |
| REF-226 | **KYC Workflow:** Fix premature approval pattern in seller-kyc-service | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9283 | ### ğŸ¯ Recommended Next Steps |
| REF-228 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9297 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-230 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None found \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9301 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-233 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9384 | ### ğŸ“ Progress & Planned Next Steps |
| REF-239 | Typecheck/lint triage: identified failing files (aqar listings, issues API, marketplace ads/cart/rfq/vendor products, issue-tracker app/models/scripts). | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9393 | ### ğŸ“ Progress & Planned Next Steps |
| REF-240 | Typecheck Pass 1 (issue-tracker & issues API): fix imports/types, null guards, getServerSession wiring, virtual typings, missing deps; re-run `pnpm typecheck`. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9396 | ### ğŸ“ Progress & Planned Next Steps |
| REF-247 | issue-tracker scripts: implicit any parameters and missing commander import break CLI typing and may fail at runtime. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9414 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-249 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9432 | ### ğŸ“ Progress & Planned Next Steps |
| REF-251 | \| Typecheck/Lint \| Not run this session \| â³ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9436 | ### ğŸ“ Progress & Planned Next Steps |
| REF-257 | KYC company_info step previously set status to approved; corrected to pending/documents. Ensure approval only happens in verifyDocument/approveKYC paths. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9460 | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| REF-259 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9478 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-260 | \| Scope \| Copilot instruction hardening + coordination guardrails \| âœ… Updated \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9480 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-262 | \| TypeScript \| Not run (doc-only change) \| â– N/A \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9482 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-264 | Socialize the updated instructions with all agents; ensure new guidance is honored in upcoming changes. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9489 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-265 | If any ambiguity arises during concurrent edits, record assumptions and coordination notes directly in this report before proceeding. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9490 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-267 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9549 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-269 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None found \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9552 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-281 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9615 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-294 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9675 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-295 | \| Commit \| `855c000e3` (HEAD) \| âœ… Pushed \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9678 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-297 | \| API Routes \| 371 files \| âœ… Scanned \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9681 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-300 | âœ… **Scanned entire codebase** for 23 priority action categories | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9686 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-301 | âœ… **Identified 19 remaining issues** requiring attention (5 ğŸ”´, 8 ğŸŸ , 6 ğŸŸ¡) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9687 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-303 | \| 9. Index verification \| â³ Needs DB review \| Requires mongosh verification \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9820 | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| REF-304 | \| 13. N+1 queries \| â³ Needs review \| Flag in list endpoints \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9824 | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| REF-305 | \| 14. Bundle size \| â³ Needs build analysis \| Run `next build --analyze` \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9825 | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| REF-307 | \| 22. Accessibility \| â³ Needs audit \| a11y review needed \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:9833 | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| REF-310 | \| Priority \| Action \| Est. Effort \| Assignee \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9926 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-315 | \| P3 \| Type safety improvements \| 1h \| â€” \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9935 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-316 | \| P3 \| Index verification (DB review) \| 1h \| â€” \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9936 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-317 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9983 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-320 | Returns 503 on optional module import failure | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:9993 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-330 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10138 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-331 | \| Commits \| `bc5f60662` (HEAD) \| âœ… Pushed \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10141 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-341 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10268 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-354 | **No E2E for critical flows**: Settlements, payouts, KYC approval missing end-to-end validation | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10422 | #### Test Coverage Anti-Patterns Found |
| REF-355 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10442 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-359 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10512 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-363 | \| Area \| Gap \| Status \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10543 | #### Missing Tests |
| REF-364 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10558 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-365 | \| Commands \| None (docs-only review) \| âš ï¸ Not run \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10561 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-371 | \| Area \| Gap \| Status \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10589 | #### Missing Tests |
| REF-374 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10604 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-383 | \| Area \| Gap \| Status \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10641 | #### Missing Tests |
| REF-389 | Logging: replace remaining console usages with `logger` for observability and PII safety. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10664 | ### â­ï¸ Planned Next Steps |
| REF-393 | \| # \| Priority \| Task \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10693 | ### ğŸš§ Planned Next Steps |
| REF-394 | \| 1 \| ğŸ”´ \| Add guarded JSON parsing to the remaining 66 API routes (`parseBodyOrNull` + 400 fallback) \| â³ Not Started \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10695 | ### ğŸš§ Planned Next Steps |
| REF-397 | \| Area \| Gap \| Priority \| Status \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10717 | #### Missing Tests |
| REF-403 | \| # \| Priority \| Task \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10744 | ### ğŸš§ Planned Next Steps |
| REF-415 | \| # \| Priority \| Task \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:10823 | ### ğŸš§ Planned Next Steps |
| REF-422 | Located Master Pending Report (no duplicates) and reviewed prior hardening work (safe session/parser rollouts). | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:10947 | ### ğŸ“ Current Progress |
| REF-432 | \| # \| Priority \| Task \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11000 | ### ğŸ“‹ Planned Next Steps |
| REF-440 | \| # \| Priority \| Task \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11055 | ### ğŸ“‹ Planned Next Steps |
| REF-445 | None new; primary gap is missing health-hints/alerts on other 503 surfaces and absent dashboards for emitted metrics. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11070 | ### ğŸ› ï¸ Enhancements for Production Readiness |
| REF-448 | \| # \| Priority \| Task \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11101 | ### ğŸ“‹ Planned Next Steps |
| REF-454 | \| **Open PRs** \| 2 \| 2 \| ğŸ”„ Active \| #549, #550 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11399 | ### ğŸ“ Current Progress Summary |
| REF-456 | Located and updated the Master Pending Report (no duplicate file); documented fresh findings from repo-wide ripgrep of silent handlers (`catch(() => null\|{}\|undefined\|false)`). | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11444 | ### ğŸ“ Current Progress |
| P3-003 | \| P3-003 \| Documentation \| OpenAPI \| Spec needs updating \| ğŸŸ¢ Backlog \| Sync with routes \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11539 | #### ğŸŸ¢ P3 â€” Low Priority (Nice to Have) |
| REF-462 | \| **Total Gap** \| â€” \| â€” \| â€” \| **102** \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11602 | #### Pattern 4: Test Coverage Gaps |
| REF-463 | \| # \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11608 | ### ğŸ“‹ Planned Next Steps |
| REF-477 | No commands executed (documentation-only update). | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11667 | ### ğŸ“ Current Progress & Next Steps |
| REF-484 | \| **Open PRs** \| 1 \| **2** \| ğŸ”„ Active \| #549, #550 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11724 | ### ğŸ“ Current Progress Summary |
| REF-485 | **Open PRs**: | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11734 | #### âœ… Current State |
| REF-487 | \| # \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11841 | ### ğŸ“‹ Planned Next Steps |
| REF-495 | \| # \| Priority \| Task \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11885 | ### ğŸ“‹ Planned Next Steps |
| REF-503 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| #549 active \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:11935 | ### ğŸ“ Current Progress Summary |
| REF-504 | \| # \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:11999 | ### ğŸ“‹ Planned Next Steps |
| REF-512 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| #548 active \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:12074 | ### ğŸ“ Current Progress Summary |
| REF-514 | \| # \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:12124 | #### ğŸ“‹ Planned Next Steps |
| REF-522 | \| **Code Quality** \| 100% \| âœ… \| 17 justified disables, 0 TODO/FIXME \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:12217 | ### ğŸ“ˆ Production Readiness Scorecard v58.0 |
| REF-541 | \| 8 \| **P3** \| A11y \| Add missing img alt attrs (5) \| 30m \| ğŸŸ¢ Backlog \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:12622 | ### ğŸ“‹ Deferred Items & Action Plan |
| REF-542 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| Stable \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:12643 | ### ğŸ“ Current Progress Summary |
| REF-545 | \| **Open PRs (Stale Drafts)** \| 10 \| 10 \| ğŸ”´ Cleanup Needed \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:12893 | ### ğŸ“ Current Progress Summary |
| REF-546 | \| # \| Priority \| Task \| Effort \| Blocker \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:12916 | #### ğŸ”„ Planned Next Steps |
| REF-551 | Close 9 stale draft PRs (#539-547) â€” 15m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13161 | #### P0 â€” Critical (Next Session) |
| REF-552 | Add rate limiting to 3 legacy routes â€” 30m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13162 | #### P0 â€” Critical (Next Session) |
| REF-555 | Merge PR #548 after approval | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13167 | #### P1 â€” High Priority (Next 3 days) |
| REF-558 | Review similar dynamic require patterns â€” 30m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13172 | #### P2 â€” Medium Priority (Next week) |
| REF-559 | \| **Open PRs (Stale Drafts)** \| 6 \| 10 \| ğŸ”´ Cleanup Needed \| +4 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13208 | ### ğŸ“ Current Progress Summary |
| REF-560 | \| **TODO/FIXME in Code** \| 0 \| 0 \| âœ… Clean \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13209 | ### ğŸ“ Current Progress Summary |
| REF-561 | \| # \| Priority \| Task \| Effort \| Blocker \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:13229 | #### ğŸ”„ Planned Next Steps |
| REF-566 | \| 5 \| **P3** \| Review 17 eslint-disable usages \| 1h \| Debt audit \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13235 | #### ğŸ”„ Planned Next Steps |
| REF-567 | \| âœ… TODO/FIXME markers \| 0 found \| Clean codebase \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13341 | #### ğŸŸ¢ Category 5: Verified Production-Ready |
| REF-570 | Close 9 stale draft PRs â€” 15m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13433 | #### P0 â€” Critical (Next 24h) |
| REF-571 | Add rate limiting to 3 legacy routes â€” 30m | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13434 | #### P0 â€” Critical (Next 24h) |
| REF-574 | Merge PR #548 after approval | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13439 | #### P1 â€” High Priority (Next 3 days) |
| REF-577 | Audit 8 `no-explicit-any` eslint-disable usages â€” 1h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13444 | #### P2 â€” Medium Priority (Next week) |
| REF-578 | Add request ID correlation | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13448 | #### P3 â€” Nice to Have |
| REF-579 | Add APM spans for critical paths | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13449 | #### P3 â€” Nice to Have |
| REF-580 | \| **No TODO/FIXME in API routes** \| âœ… Clean \| Zero technical debt markers \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13542 | #### âœ… Strengths Identified |
| REF-583 | Push changes to remote | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13594 | #### Immediate (This Session) |
| REF-584 | Close 6 stale draft PRs (#539-544) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13597 | #### P2 â€” Low Priority (Next Week) |
| REF-585 | Add Zod validation to remaining routes | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13598 | #### P2 â€” Low Priority (Next Week) |
| REF-586 | Add request ID correlation | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13603 | #### P3 â€” Nice to Have |
| REF-587 | Add APM spans for critical paths | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13604 | #### P3 â€” Nice to Have |
| REF-588 | Add audit logging for sensitive operations | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13605 | #### P3 â€” Nice to Have |
| REF-589 | \| **Open PRs (Stale)** \| 6 \| 9 \| ğŸ”´ Needs Cleanup \| +3 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13636 | ### ğŸ“ Current Progress Summary |
| REF-590 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:13654 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-597 | \| **Stale PRs** \| 6 \| 9 \| ğŸ”´ Needs cleanup \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:13805 | ### ğŸ“Š Production Readiness Score |
| REF-605 | **Add Zod validation to remaining 191 routes** - 8h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14329 | #### P2 â€” Medium Priority (Next week) |
| REF-606 | **Add rate limiting to Assets, CMS, Others** (90 routes) - 4h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14330 | #### P2 â€” Medium Priority (Next week) |
| REF-608 | **Query optimization**: Identify and fix N+1 queries - 3h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14332 | #### P2 â€” Medium Priority (Next week) |
| REF-610 | **E3**: Centralize session guard helper - 2h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14336 | #### P3 â€” Nice to Have |
| REF-611 | **E4**: Create shared rate limit helper with decorators - 1h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14337 | #### P3 â€” Nice to Have |
| REF-613 | **O2**: Add Sentry APM spans - 3h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14339 | #### P3 â€” Nice to Have |
| REF-614 | **O3**: Request ID correlation - 2h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14340 | #### P3 â€” Nice to Have |
| REF-615 | **O4**: Comprehensive audit logging - 4h | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14341 | #### P3 â€” Nice to Have |
| REF-616 | \| Metric \| Current \| Target \| Gap \| ETA \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14427 | ### ğŸ¯ Key Metrics Summary |
| REF-618 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸ”´ Needs Cleanup \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14531 | ### ğŸ“ Current Progress Summary |
| REF-619 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14550 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-624 | \| **Stale PRs** \| 6 \| 6 \| ğŸ”´ Needs cleanup \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14745 | ### ğŸ“Š Production Readiness Score |
| REF-627 | \| **Zod Validation** \| 33% \| 34% (121/352) \| ğŸŸ¡ Needs Work \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14896 | ### ğŸ“ Current Progress Summary |
| REF-628 | \| **Rate Limiting** \| 100% \| 87% (308/352) \| ğŸŸ¡ 44 Missing \| Regression \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14897 | ### ğŸ“ Current Progress Summary |
| REF-629 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸ”´ Cleanup \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14898 | ### ğŸ“ Current Progress Summary |
| REF-630 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:14917 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-635 | \| 6 \| **P3** \| Remove 29 TODO/FIXME comments \| 1h \| Code cleanup \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:14924 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-636 | \| **Stale PRs** \| 6 \| 6 \| ğŸ”´ Needs cleanup \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15160 | ### ğŸ“Š Production Readiness Score |
| REF-637 | **`properties` resolver** (was TODO at line ~943): | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15258 | #### Fix 3: GraphQL TODO Stubs Implementation |
| REF-641 | \| **GraphQL Completeness** \| 80% \| **100%** \| All TODO stubs implemented \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15332 | ### ğŸ“Š Production Readiness Score |
| REF-642 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:15394 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| VAL-001 | \| VAL-001 \| Input Validation \| 236 routes \| Missing Zod validation schemas \| 4h \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15418 | #### Medium Priority (P2) |
| PR-001 | \| PR-001 \| Stale PRs \| 6 \| ğŸŸ¡ Needs cleanup \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15428 | #### Low Priority (P3) - Technical Debt |
| REF-649 | \| **Routes With Zod Validation** \| ~116/352 (33%) \| ~116/352 (33%) \| ğŸŸ¡ Needs Work \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15463 | ### ğŸ“ Current Progress Summary |
| REF-650 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸŸ¡ Cleanup Needed \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15465 | ### ğŸ“ Current Progress Summary |
| REF-651 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:15485 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-657 | \| 7 \| **P3** \| Remove GraphQL TODO stubs \| 30m \| Code cleanup \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15493 | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| REF-660 | \| Area \| Current \| Target \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15569 | #### Category 5: Missing Test Coverage |
| REF-661 | `createGraphQLHandler` disabled/deps-missing branches | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15581 | #### Category 5: Missing Test Coverage |
| REF-663 | \| **Input Validation (Zod)** \| 33% \| 33% \| 80% \| ğŸŸ¡ Gap: 47% \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15665 | ### ğŸ“Š Production Readiness Score |
| REF-665 | \| JSON Parse Safety \| 80% \| 80% \| 100% \| ğŸŸ¡ Gap: 20% \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15669 | ### ğŸ“Š Production Readiness Score |
| REF-666 | \| 01:25 \| GraphQL review \| TODO stubs identified \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15695 | ### ğŸ“ Session Activity Log |
| REF-668 | \| **Open PRs** \| 6 \| 6 \| ğŸŸ¡ Stale \| Cleanup needed \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15720 | ### ğŸ“ Current Progress Summary |
| REF-669 | \| # \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:15828 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-673 | \| 5 \| P3 \| Add Zod validation to remaining routes \| 2h \| Robustness \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:15834 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-690 | \| # \| Item \| Status \| Planned Next Step \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:15948 | ### ğŸ¯ Current Progress & Planned Next Steps |
| REF-696 | \| **Routes Needing Rate Limiting** \| 40 \| 40 \| ğŸŸ¡ Pending \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15989 | ### ğŸ“ Current Progress Summary |
| REF-697 | \| **Open PRs** \| Unknown \| 6 \| ğŸŸ¡ Stale \| Cleanup needed \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:15992 | ### ğŸ“ Current Progress Summary |
| REF-698 | \| # \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:16159 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-704 | \| # \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:16439 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-709 | \| **Routes With Rate Limiting** \| 147/352 (42%) \| ğŸŸ¡ In Progress \| â€” \| | P3 | ? | 3 | in_progress | docs/PENDING_MASTER.md:16531 | ### ğŸ“ Current Progress Summary |
| REF-711 | \| Rate Limiting \| 69% \| 42% (recalculated) \| ğŸ”´ Needs work \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:16736 | ### ğŸ“Š Production Readiness Score Update |
| REF-717 | **P3**: Add rate limiting to remaining modules (marketplace, copilot, ats) | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:16756 | ### ğŸ“‹ Next Steps (Priority Order) |
| REF-718 | \| **Rate-Limited Routes** \| 139/352 (39%) \| ğŸŸ¡ In Progress \| +44 this branch \| | P3 | ? | 3 | in_progress | docs/PENDING_MASTER.md:16927 | ### ğŸ“ Current Progress Summary |
| REF-719 | \| **Unprotected Routes** \| 213/352 (61%) \| ğŸ”´ Needs Work \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:16928 | ### ğŸ“ Current Progress Summary |
| REF-720 | \| **Open Draft PRs** \| 6 \| ğŸŸ¡ Cleanup needed \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:16930 | ### ğŸ“ Current Progress Summary |
| REF-721 | \| **TODO/FIXME Comments** \| 29 \| ğŸŸ¡ Review needed \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:16931 | ### ğŸ“ Current Progress Summary |
| REF-725 | \| Priority \| Task \| Effort \| Impact \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17013 | ### ğŸ”² Planned Next Steps |
| REF-733 | \| ğŸŸ¢ P3 \| Rate limiting: PM, Vendors, Metrics \| 30 min \| Low priority \| ğŸ”² Deferred \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17024 | ### ğŸ”² Planned Next Steps |
| REF-734 | \| ğŸŸ¢ P3 \| Review 29 TODO/FIXME comments \| 1 hr \| Code quality \| ğŸ”² Deferred \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17025 | ### ğŸ”² Planned Next Steps |
| REF-735 | \| Module \| Total \| Protected \| Gap \| Priority \| Action \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17033 | #### ğŸ”´ HIGH PRIORITY â€” Rate Limiting Gaps (213 routes remaining) |
| REF-736 | \| TODO/FIXME comments \| 29 \| ğŸŸ¡ Review \| May contain valid work items \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17094 | #### ğŸŸ¢ LOW PRIORITY â€” Code Quality |
| REF-737 | \| Priority \| Task \| Effort \| Impact \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17235 | ### ğŸ”² Planned Next Steps |
| REF-740 | \| ğŸŸ¢ P3 \| Rate limiting: crud-factory pattern \| 2 hrs \| ~20 routes \| ğŸ”² Deferred \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17240 | ### ğŸ”² Planned Next Steps |
| REF-742 | \| Module \| Total \| Protected \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17249 | #### ğŸ”´ HIGH PRIORITY â€” Rate Limiting Gaps (86 routes remaining) |
| REF-744 | \| **Rate-Limited Routes** \| 51/352 (14%) \| ğŸ”´ Gap \| 301 unprotected \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17507 | ### ğŸ“ Current Progress Summary |
| REF-745 | \| **Zod-Validated Routes** \| 111/352 (32%) \| ğŸŸ¡ Needs work \| 241 remaining \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17508 | ### ğŸ“ Current Progress Summary |
| REF-747 | \| **Open PRs** \| 5 (all draft) \| ğŸŸ¡ Cleanup needed \| â€” \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17510 | ### ğŸ“ Current Progress Summary |
| REF-748 | \| Priority \| Task \| Effort \| Impact \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17516 | ### ğŸ”² Planned Next Steps |
| REF-756 | \| Module \| Total Routes \| Protected \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17533 | #### ğŸ”´ HIGH PRIORITY â€” Security & Rate Limiting Gaps |
| REF-757 | \| Souq, FM \| Mostly missing \| ğŸ”´ Add immediately \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17597 | #### Pattern 1: Rate Limiting Implementation |
| REF-758 | Various aggregation pipelines missing $limit stage | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17620 | #### Pattern 2: Unbounded Database Queries |
| REF-765 | \| **Zod-Validated Routes** \| 119/352 (34%) \| ğŸŸ¡ Needs work \| 233 remaining \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17843 | ### ğŸ“ Current Progress Summary |
| REF-767 | \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:17852 | ### ğŸ”² Planned Next Steps |
| REF-774 | \| Module \| Total Routes \| Protected \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17896 | #### Rate Limiting Coverage |
| REF-775 | \| Module \| Total Routes \| Validated \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:17909 | #### Zod Validation Coverage |
| REF-777 | \| Priority \| Task \| Effort \| Notes \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18154 | ### ğŸ”² Planned Next Steps |
| REF-782 | \| Module \| Routes \| Rate-Limited \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18181 | #### Rate Limiting Gaps by Module |
| REF-783 | \| # \| Task \| Effort \| Priority \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18335 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-790 | \| 7 \| Expand rate limiting to 60% \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18343 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-791 | \| Service/Module \| Path \| Lines \| Priority \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18370 | #### C. Missing Tests (Production Readiness) |
| REF-793 | \| Category \| Current \| Target \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18454 | ### ğŸ“Š SUMMARY METRICS |
| REF-794 | Missing email: `toContain("Invalid input")` | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18509 | #### 3. `tests/unit/api/auth/forgot-password.test.ts` |
| REF-795 | PR: Ready to commit and merge | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18531 | #### Verification Gates |
| REF-796 | \| Priority \| Task \| Effort \| Notes \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18550 | ### ğŸ”² Planned Next Steps |
| REF-801 | Missing required field: `"Invalid input: expected X, received undefined"` | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18575 | #### Pattern: Zod Validation Error Messages |
| REF-802 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18585 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-811 | \| **Uncommitted Changes** \| ~10 files (staged + unstaged) \| âš ï¸ Pending commit \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18631 | ### ğŸ“ Current Progress & Session Summary |
| REF-812 | \| Priority \| Task \| Effort \| Notes \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18647 | ### ğŸ”² Planned Next Steps |
| REF-818 | \| Area \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18681 | #### C. Missing Tests |
| REF-819 | \| Module \| Routes \| Rate-Limited \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18715 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-820 | \| HR \| 7 \| 0 \| 100% gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18717 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-821 | \| CRM \| 4 \| 0 \| 100% gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18718 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-823 | \| Souq \| 75 \| 3 \| 96% gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18720 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-824 | \| Aqar \| 25 \| 4 \| 84% gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18721 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-825 | \| Admin \| 15 \| 9 \| 40% gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18722 | #### Pattern 3: Rate Limit Gaps by Module |
| REF-826 | Lint: Not yet run | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18730 | ### ğŸ“‹ Verification Checklist |
| REF-829 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18742 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-838 | \| Category \| Current \| Target \| Gap \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18810 | #### Security Coverage |
| REF-839 | \| # \| Task \| Time Est. \| Priority \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18938 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-847 | \| 8 \| Expand rate limiting to 60% \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:18947 | ### ğŸ“‹ PLANNED NEXT STEPS |
| REF-849 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:18983 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-859 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:19021 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-868 | \| **Rate-Limited Routes** \| 117/352 (33%) \| âš ï¸ Needs expansion \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:19064 | ### ğŸ“ Current Progress & Session Summary |
| REF-869 | \| Priority \| Task \| Effort \| Status \| Blocker \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:19085 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-872 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:19446 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-874 | \| Lint \| Not run this session \| â¸ï¸ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:19450 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-877 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:19483 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-879 | \| Lint \| Not run this session \| â¸ï¸ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:19487 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-884 | \| Priority \| Task \| Effort \| Status \| Blocker \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:19720 | ### ğŸ¯ Planned Next Steps |
| REF-885 | \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:19891 | ### ğŸ¯ Planned Next Steps |
| REF-891 | \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:20016 | ### ğŸ¯ Planned Next Steps |
| REF-900 | **Deploy** to staging for E2E validation | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:20268 | ### ğŸ¯ Planned Next Steps |
| REF-901 | \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:20316 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-910 | Investigate Playwright timeout issues (unrelated to production code) | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:20632 | ### ğŸš€ Production Readiness Assessment |
| REF-911 | \| Priority \| Task \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:20706 | ### ğŸ¯ PLANNED NEXT STEPS |
| REF-915 | \| Priority \| Task \| Effort \| Blocker \| | P3 | ? | 3 | blocked | docs/PENDING_MASTER.md:20873 | ### ğŸ¯ Planned Next Steps |
| REF-921 | Type safety in Mongoose hooks: Repeated `as any` usage stems from missing hook generics; centralizing hook type helpers will eliminate all 13 instances and reduce runtime casting risks. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21303 | ### ğŸ” Deep-Dive: Similar Issue Patterns |
| REF-922 | \| **PR #541** \| ğŸŸ¡ OPEN \| Mergeable, changes requested \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21315 | ### ğŸ“Œ Current Progress Summary |
| REF-923 | \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:21323 | ### ğŸ¯ Planned Next Steps |
| REF-927 | \| **TODO/FIXME** \| 7 \| ğŸŸ¡ \| Low priority, in GraphQL stubs \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21341 | ### ğŸ“Š Codebase Metrics (Fresh Scan) |
| REF-932 | \| **TODO/FIXME** \| 7 remaining \| ğŸŸ¡ Low priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21550 | ### ğŸ“Š Current Codebase Metrics |
| SENTRY-001 | \| SENTRY-001 \| Add Sentry context to FM/Souq modules \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21591 | #### Priority 3: Infrastructure |
| REF-938 | \| ğŸŸ¡ MEDIUM \| Add Sentry context to FM/Souq modules \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21652 | ### ğŸ¯ Outstanding Items (Unchanged from Previous Report) |
| REF-940 | \| Priority \| Task \| Category \| Effort \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:21683 | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-941 | \| ğŸ”´ HIGH \| Add try-catch to critical API routes \| Reliability \| 2 hrs \| ğŸ”² TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21686 | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-948 | \| Priority \| Task \| Effort \| Impact \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:21872 | ### ğŸ“‹ Planned Next Steps |
| REF-950 | \| ğŸŸ¨ LOW \| Remove 7 TODO comments in lib/graphql \| 1-2 hrs \| Code cleanup \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21878 | ### ğŸ“‹ Planned Next Steps |
| REF-951 | \| TODO/FIXME \| 7 \| âœ… Low - well maintained \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:21890 | #### ğŸ“ˆ Metrics Overview |
| TODO-001 | \| TODO-001 \| Cleanup \| ğŸŸ© Minor \| â³ Open \| 7 TODO comments in lib/graphql \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22027 | ### ğŸ“ Issues Register Update |
| REF-959 | **ğŸ”´ New SQL/Prisma instrumentation present in lockfile** | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22264 | #### ğŸ”´ Stack/Architecture Violations |
| REF-960 | **ğŸŸ¡ New Task source drift (CATEGORIZED_TASKS_LIST deprecated)** | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22278 | #### ğŸŸ¢ Cleanup & Governance |
| REF-961 | \| Metric \| Value \| Status \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22369 | ### ğŸ“ Current Progress & Planned Next Steps |
| REF-975 | Souq ad click handler hardened: timestamp parsed once to number before signature verification to satisfy type guard and avoid silent coercion issues. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22405 | ### Progress & Planned Next Steps |
| REF-979 | \| Priority \| ID \| Task \| Effort \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22467 | ### ğŸš€ Planned Next Steps |
| REF-983 | \| **TOTAL PENDING** \| **36** \| No change from last session \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22551 | ### ğŸ“Š Issue Count Summary |
| REF-984 | \| Total Pending \| 40 \| 36 \| -4 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22609 | ### ğŸ“Š Issue Count Update |
| REF-986 | \| Priority \| ID \| Task \| Effort \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22631 | ### ğŸš€ Planned Next Steps |
| E2E-TIMEOUT | \| ğŸŸ¢ MEDIUM \| E2E-TIMEOUT \| Rerun Playwright with extended timeout \| 30min \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22638 | ### ğŸš€ Planned Next Steps |
| REF-987 | \| **TOTAL PENDING** \| **40** \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22681 | ### ğŸ“Š Status Summary |
| REF-989 | \| Total Pending \| 50 \| 41 \| -9 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22786 | ### ğŸ“Š Issue Count Update |
| REF-990 | \| Total Pending \| 57 \| 50 \| -7 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22817 | ### ğŸ“Š Issue Count Update |
| REF-993 | \| Area \| Gap \| Priority \| Status \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:22903 | #### Missing Tests (production readiness) |
| REF-999 | \| ID \| Task \| Priority \| Effort \| Owner \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:22976 | ### ğŸš€ Planned Next Steps |
| REF-1000 | \| Total Open Issues \| 57 \| 57 \| 0 (no change) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23038 | ### ğŸ“Š Session Status Changes |
| REF-1002 | \| # \| ID \| Task \| Effort \| Owner \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23182 | #### ğŸ¯ Planned Next Steps (Priority Order) |
| RATE-LIMIT | \| 6 \| **RATE-LIMIT** \| Apply rate limiting to public marketplace APIs \| 2h \| Agent \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23189 | #### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-1003 | Master Pending Report located and updated as the single source of truth (no duplicate files created). | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23284 | ### ğŸ“Œ Progress & Planned Next Steps |
| REF-1005 | Next steps: | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23286 | ### ğŸ“Œ Progress & Planned Next Steps |
| REF-1007 | Progress: Scoped review of OTP/webhook + PM plan APIs to capture production-readiness gaps; no code changes or commands executed in this session. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23308 | ### ğŸ“ˆ Progress & Planned Next Steps |
| REF-1008 | Next steps: | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23309 | ### ğŸ“ˆ Progress & Planned Next Steps |
| REF-1011 | Progress: Master report updated (single source of truth) â€” no duplicate files created. | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23336 | ### Progress & Planned Next Steps |
| REF-1012 | Next steps: | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23337 | ### Progress & Planned Next Steps |
| REF-1013 | **Monitoring assets unvalidated** (Grafana alerts/dashboards) mirror the missing gate issue seen with translation/ts-prune; add a generic lint/validate step to avoid silent drift. | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23391 | ### Deep-Dive: Similar Issues Patterning |
| REF-1014 | \| **Open PRs** \| 2 \| #540 (this), #539 (PayTabs cleanup) \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23405 | ### ğŸ“ˆ Current Progress |
| REF-1015 | \| # \| ID \| Task \| Priority \| Owner \| Effort \| | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:23411 | ### ğŸ¯ Planned Next Steps (Priority Order) |
| REF-1016 | \| ID \| Component \| File \| Lines \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23447 | #### C) MISSING TESTS (Production Readiness) |
| REF-1018 | \| ID \| Component/Function \| File \| Gap \| Priority \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23629 | #### Missing Tests |
| REF-1020 | \| 2 \| **Sender ID not registered with CITC** \| Verify sender name with Taqnyat \| â³ TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23751 | #### ğŸ” Potential Root Causes |
| REF-1021 | \| 3 \| **Phone number format incorrect** \| Should be `966XXXXXXXXX` (no +/00) \| â³ TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23752 | #### ğŸ” Potential Root Causes |
| REF-1023 | \| 5 \| **Rate limiting hit** \| Check Taqnyat dashboard \| â³ TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23754 | #### ğŸ” Potential Root Causes |
| REF-1024 | \| 6 \| **OTP not being stored** \| Check Redis/memory store \| â³ TODO \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23755 | #### ğŸ” Potential Root Causes |
| GH-QUOTA | \| 4 \| **GH-QUOTA** \| Resolve GitHub Actions quota \| DevOps \| â³ Pending \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:23851 | #### ğŸŸ¡ HIGH â€” DevOps Actions |
| REF-1027 | Comments and documentation references | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:24108 | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| REF-1030 | Schema/type definitions | P3 | ? | 3 | unknown | docs/PENDING_MASTER.md:24111 | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| REF-1031 | \| Open PRs \| 0 \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:24158 | ### âœ… VERIFICATION RESULTS |
| REF-1032 | \| **Open PRs** \| 1 (#537) \| 1 (#537) \| Ready for merge \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:24173 | ### ğŸ“Š PROGRESS SINCE LAST UPDATE |
| PR-537 | \| 1 \| **PR-537** \| Merge PayTabs cleanup docs PR \| User \| â³ Open \| 1m \| `gh pr merge 537 --squash --delete-branch` \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:24184 | #### ğŸ”´ REQUIRED â€” Blocking Items |
| REF-1033 | \| **Open PRs** \| 1 (#537) \| 1 (#537) \| No change \| | P3 | ? | 3 | pending | docs/PENDING_MASTER.md:24280 | ### ğŸ“Š PROGRESS SINCE LAST UPDATE |

## Open Questions
| Key | Title | Missing | SourceRef |
|---|---|---|---|
| AGENT-001-A | Commit changes with `[AGENT-001-A]` token | action | ### ğŸ¯ NEXT STEPS |
| create-pr-for-review-next-steps-docs-pending-master-md-122 | Create PR for review | effort | ### ğŸ¯ NEXT STEPS |
| after-codex-approval-deploy-to-production-next-steps-docs-pending-master-md-123 | After Codex approval, deploy to production | action, effort | ### ğŸ¯ NEXT STEPS |
| verify-production-login-flow-works-after-rate-limit-resets-next-steps-docs-pending-master-md-124 | Verify production login flow works (after rate limit resets) | effort | ### ğŸ¯ NEXT STEPS |
| 939af4644-fix-test-add-missing-connecttodatabase-mock-to-claims-refund-processor-test-1-missing-tests-docs-pending-master-md-237 | \| 939af4644 \| fix(test): Add missing connectToDatabase mock to claims-refund-processor test \| 1 \| | action | ### ğŸ“ COMMITS THIS SESSION (6 commits) |
| monitor-auto-assignment-engine-for-any-runtime-errors-bugs-docs-pending-master-md-333 | Monitor auto-assignment-engine for any runtime errors | action, effort | ### ğŸ¯ Next Steps |
| verify-system-automated-work-orders-create-correctly-with-null-assignedby-next-steps-docs-pending-master-md-334 | Verify system-automated work orders create correctly with null assignedBy | effort | ### ğŸ¯ Next Steps |
| open-prs-none-gh-pr-list-state-open-next-steps-docs-pending-master-md-352 | \| Open PRs \| âœ… None \| `gh pr list --state open` \| | action, effort | ### âœ… VERIFICATION EVIDENCE |
| await-codex-review-gate-agents-md-section-14-next-steps-agents-md | Await Codex review gate (AGENTS.md Section 14) | action | ### ğŸ¯ Next Steps |
| zatca-pending-user-configuration-next-steps-docs-pending-master-md-416 | \| **ZATCA** \| â³ Pending user configuration \| | action | ### âœ… PAYMENT PROVIDER UPDATE |
| zatca-zatca-api-key-pending-user-action-next-steps-docs-pending-master-md-440 | \| **ZATCA** \| ZATCA_API_KEY \| â³ Pending (user action) \| | action, effort | ### âœ… SECRETS STATUS (GitHub Actions) |
| zatca-seller-name-pending-user-action-next-steps-docs-pending-master-md-441 | \| \| ZATCA_SELLER_NAME \| â³ Pending (user action) \| | action, effort | ### âœ… SECRETS STATUS (GitHub Actions) |
| zatca-vat-number-pending-user-action-next-steps-docs-pending-master-md-442 | \| \| ZATCA_VAT_NUMBER \| â³ Pending (user action) \| | action, effort | ### âœ… SECRETS STATUS (GitHub Actions) |
| zatca-seller-address-pending-user-action-next-steps-docs-pending-master-md-443 | \| \| ZATCA_SELLER_ADDRESS \| â³ Pending (user action) \| | action, effort | ### âœ… SECRETS STATUS (GitHub Actions) |
| db-collection-calls-logged-37-calls-in-25-api-files-bypass-mongoose-estimated-24h-needs-delegation-efficiency-db-collection | \| db.collection() calls \| ğŸ“‹ LOGGED \| 37 calls in 25 API files bypass Mongoose. Estimated 24h. Needs delegation \| | action | ### âœ… P2 MEDIUM-TERM IMPROVEMENTS (AUDITED) |
| push-fixes-e7c3c5d9c-next-steps-docs-pending-master-md-844 | Push fixes (e7c3c5d9c) âœ… | action, effort | ### ğŸ¯ Next Steps |
| address-remaining-pr-601-review-comments-next-steps-docs-pending-master-md-846 | Address remaining PR #601 review comments | effort | ### ğŸ¯ Next Steps |
| merge-pr-601-after-all-ci-checks-pass-next-steps-docs-pending-master-md-847 | Merge PR #601 after all CI checks pass | action, effort | ### ğŸ¯ Next Steps |
| merge-pr-601-after-ci-passes-next-steps-docs-pending-master-md-896 | Merge PR #601 after CI passes | action, effort | ### ğŸ¯ Next Steps |
| oom-ci-sharded-typecheck-memory-limit-on-runner-needs-investigation-next-steps-docs-pending-master-md-970 | \| OOM \| CI-Sharded typecheck \| Memory limit on runner \| ğŸ”´ NEEDS INVESTIGATION \| | action, effort | ### ğŸ“Š CI STATUS ANALYSIS (Post-Push) |
| 11-announce-completion-pending-ci-results-next-steps-docs-pending-master-md-990 | \| 11 \| Announce completion \| â³ Pending CI results \| | action, effort | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| 12-notify-eng-sultan-pending-next-steps-docs-pending-master-md-991 | \| 12 \| NOTIFY Eng. Sultan \| â³ Pending \| | action, effort | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| 13-wait-for-codex-approved-pending-next-steps-docs-pending-master-md-992 | \| 13 \| Wait for Codex APPROVED \| â³ Pending \| | action, effort | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| vercel-awaiting-needs-project-access-next-steps-docs-pending-master-md-1044 | \| â³ Vercel \| AWAITING \| Needs project access \| | action, effort | ### ğŸ“Š CI STATUS (Post-Fixes) |
| 12-notify-eng-sultan-pending-codex-next-steps-docs-pending-master-md-1084 | \| 12 \| Notify Eng. Sultan \| â³ Pending Codex \| | action, effort | ### ğŸ“‹ AGENTS.md Compliance (Section 4.3 Post-Task Checklist) |
| ci-fast-lane-changed-flag-local-ai-folder-conflicts-with-ai-npm-package-p2-needs-rename-next-steps-ai | \| CI Fast Lane \| `--changed` flag + local `ai/` folder conflicts with `ai` npm package \| ğŸŸ  P2 - needs rename \| | action | ### ğŸ“Š CI Failure Analysis |
| ci-full-suite-depends-on-above-fixes-pending-ci-next-steps-docs-pending-master-md-1212 | \| CI Full Suite \| Depends on above fixes \| â³ PENDING CI \| | action | ### ğŸ“Š CI Failure Analysis |
| fixzit-quality-gates-fail-pre-existing-218-missing-i18n-keys-next-steps-docs-pending-master-md-1408 | \| Fixzit Quality Gates \| âŒ FAIL \| Pre-existing: 218 missing i18n keys \| | action, effort | ### ğŸ“Š CI Status (Post-Fix) |
| missing-i18n-keys-218-translation-keys-missing-in-en-json-ar-json-add-translations-next-steps-en-json-ar-json | \| Missing i18n Keys \| 218 translation keys missing in en.json/ar.json \| Add translations \| | action | ### ğŸ”´ Pre-Existing Issues on main (Not Introduced by This PR) |
| redis-not-configured-missing-redis-url-redis-key-in-ci-add-ci-secrets-for-redis-next-steps-docs-pending-master-md-1419 | \| Redis Not Configured \| Missing REDIS_URL/REDIS_KEY in CI \| Add CI secrets for Redis \| | action | ### ğŸ”´ Pre-Existing Issues on main (Not Introduced by This PR) |
| A11Y-ALT-001 | \| A11Y-ALT-001 \| Images missing alt text \| 38 \| WCAG non-compliance \| â¸ï¸ False Positive \| | action, effort | ### ğŸŸ  P1 - High Priority Quality Issues |
| DOCS-TODO-001 | DOCS-TODO-001: Documented 17 TODOs with categories and priorities | action, effort | ### Implementation Phases - âœ… ALL COMPLETE |
| open-0-next-steps-docs-pending-master-md-1847 | \| ğŸ”´ Open \| **0** \| | action, effort | ## ğŸ¯ Backlog Status |
| open-0-next-steps-docs-pending-master-md-1920 | \| ğŸ”´ Open \| **0** \| | action, effort | ## ğŸ‰ BACKLOG COMPLETE |
| NAV-MISSING-001 | \| 1 \| NAV-MISSING-001 \| Add 6 missing pages to Superadmin nav \| commit 937ed48a7 \| | action, effort | ### All Resolved Items (Final) |
| BUG-USERS-FILTERS-MISSING | \| 6 \| BUG-USERS-FILTERS-MISSING \| UsersList filters wired \| serializeFilters L127 \| | action | ### All Resolved Items (Final) |
| BUG-EMPLOYEES-FILTERS-MISSING | \| 7 \| BUG-EMPLOYEES-FILTERS-MISSING \| EmployeesList filters wired \| serializeFilters L137 \| | action | ### All Resolved Items (Final) |
| BUG-INVOICES-FILTERS-MISSING | \| 8 \| BUG-INVOICES-FILTERS-MISSING \| InvoicesList filters wired \| serializeFilters L170 \| | action | ### All Resolved Items (Final) |
| BUG-AUDITLOGS-FILTERS-MISSING | \| 9 \| BUG-AUDITLOGS-FILTERS-MISSING \| AuditLogsList filters wired \| serializeFilters L130 \| | action | ### All Resolved Items (Final) |
| TEST-COVERAGE-GAP | \| 13 \| TEST-COVERAGE-GAP \| API coverage 253% \| 950 test files \| | action | ### All Resolved Items (Final) |
| backlog-0-open-next-steps-docs-pending-master-md-1956 | \| Backlog \| âœ… 0 open \| | action, effort | ### Quality Gates (Final) |
| open-0-next-steps-docs-pending-master-md-1987 | \| ğŸ”´ Open \| 0 \| | action, effort | ### 2025-12-21 15:00 (Asia/Riyadh) â€” ALL DEFERRED ITEMS RESOLVED |
| open-0-next-steps-docs-pending-master-md-2004 | \| ğŸ”´ Open \| 0 \| | action, effort | ### 2025-12-21 17:30 (Asia/Riyadh) â€” SSOT Backlog Sync Post-FEATURE-002 |
| FEATURE-001 | \| FEATURE-001 \| Q1 2026 \| SSE - ADR-001 decision pending \| | action, effort | ### 2025-12-21 17:30 (Asia/Riyadh) â€” SSOT Backlog Sync Post-FEATURE-002 |
| open-0-items-next-steps-docs-pending-master-md-2058 | ğŸ”´ Open: 0 items | action, effort | ### 2025-12-21 17:00 (Asia/Riyadh) â€” FEATURE-002 Completed (Bulk Operations UI) |
| open-0-items-next-steps-docs-pending-master-md-2077 | ğŸ”´ Open: 0 items | action, effort | ### 2025-12-21 14:30 (Asia/Riyadh) â€” Final SSOT Sync + Quality Gates Verified |
| open-0-items-next-steps-docs-pending-master-md-2135 | ğŸ”´ Open: 0 items | action, effort | ### 2025-12-21 23:55 (Asia/Riyadh) â€” SSOT Backlog Sync Complete |
| INFRA-SENTRY | INFRA-SENTRY â†’ Q1 2026: Activate Sentry (needs DSN) | action | ### 2025-12-21 23:55 (Asia/Riyadh) â€” SSOT Backlog Sync Complete |
| open-0-next-steps-docs-pending-master-md-2292 | \| Open \| 0 \| | action, effort | ### 2025-12-22 09:45 (Asia/Riyadh) â€” SSOT Final Verification |
| open-0-next-steps-docs-pending-master-md-2321 | \| Open \| 0 \| | action, effort | ### 2025-12-22 08:00 (Asia/Riyadh) â€” SSOT Backlog Sync Verification |
| FEATURE-002 | \| FEATURE-002 \| open \| deferred \| Post-MVP Q2 2026 \| | action, effort | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| LOGIC-001 | \| LOGIC-001 \| open \| deferred \| Business hours calendar Q1 2026 \| | action, effort | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| COMP-001 | \| COMP-001 \| open \| deferred \| ZATCA Phase 2 deadline Q2 2026 \| | action, effort | ### 2025-12-21 23:15 (Asia/Riyadh) â€” BACKLOG_AUDIT.json Final Sync |
| start-dev-server-and-sync-backlog-audit-json-to-mongodb-via-post-api-issues-import-missing-tests-backlog-audit-json | Start dev server and sync BACKLOG_AUDIT.json to MongoDB via POST /api/issues/import | action | ### 2025-12-21 22:30 (Asia/Riyadh) â€” SSOT Backlog Sync + Code Review Update |
| id-area-evidence-gap-next-steps-docs-pending-master-md-2446 | \| ID \| Area \| Evidence \| Gap \| | action, effort | ### PARTIAL (P1) - Exists but incomplete |
| PERF-002 | \| PERF-002 \| P1 \| Open \| 12h \| Cache headers review needed \| | action | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| P3-AQAR-FILTERS | \| P3-AQAR-FILTERS \| P3 \| In Progress \| M \| Aqar SearchFilters refactor \| | action, effort | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| P3-SOUQ-PRODUCTS | \| P3-SOUQ-PRODUCTS \| P3 \| In Progress \| M \| Souq Products migration \| | action | ### 2025-12-21 16:00 (Asia/Riyadh) â€” SSOT Viewer + Backlog Reconciliation |
| open-prs-0-next-steps-docs-pending-master-md-2608 | \| Open PRs \| 0 âœ… \| | action, effort | ### 2025-12-20 12:55 (Asia/Riyadh) â€” Production Readiness: ADRs + Deployment Prep |
| open-prs-0-next-steps-docs-pending-master-md-2662 | \| Open PRs \| 0 âœ… \| | action, effort | ### 2025-12-20 11:45 (Asia/Riyadh) â€” Production Readiness Session: Security + Test Coverage |
| dependabot-alerts-0-open-next-steps-docs-pending-master-md-2663 | \| Dependabot Alerts \| 0 open âœ… \| | action, effort | ### 2025-12-20 11:45 (Asia/Riyadh) â€” Production Readiness Session: Security + Test Coverage |
| expanded-invoice-statusstyles-to-include-pending-and-sent-next-steps-docs-pending-master-md-2743 | Expanded Invoice statusStyles to include PENDING and SENT | action, effort | ### 2025-12-18 08:31 (Asia/Riyadh) â€” FIX-001 Re-application + Parallel Agent Type Cleanup |
| BLOCKER-001 | **BLOCKER-001:** Vercel build failing (webpack "Module not found") - Needs investigation | action, effort | ### 2025-12-17 23:46 (Asia/Riyadh) â€” Critical System Fixes (100% Execution - No Deferral) |
| tests-aggregate-tests-6-6-passing-full-suite-pending-missing-tests-docs-pending-master-md-2915 | Tests: ğŸŸ¢ Aggregate tests 6/6 passing (full suite pending) | action | ### 2025-12-17 23:46 (Asia/Riyadh) â€” Critical System Fixes (100% Execution - No Deferral) |
| component-test-coverage-gap-7-15-217-components-tested-deferred-to-phase-4-missing-tests-docs-pending-master-md-2983 | Component test coverage gap: 7% (15/217 components tested) - deferred to Phase 4 | action | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| test-coverage-needs-improvement-api-24-component-7-missing-tests-docs-pending-master-md-2993 | Test Coverage: ğŸŸ¡ NEEDS IMPROVEMENT (API: 24%, Component: 7%) | action | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| db-sync-pending-mongodb-offline-blocked-next-steps-docs-pending-master-md-3061 | âš ï¸ DB sync pending (MongoDB offline - blocked) | action, effort | ### 2025-12-17 23:43 (Asia/Riyadh) â€” AI Improvement Analysis Complete + SSOT Backlog Sync |
| BUG-WO-FILTERS-MISSING-LOCAL | BUG-WO-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/fm/WorkOrdersViewNew.tsx:149-153 | action | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-USERS-FILTERS-MISSING-LOCAL | BUG-USERS-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/administration/UsersList.tsx:107-113 | action | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-EMPLOYEES-FILTERS-MISSING-LOCAL | BUG-EMPLOYEES-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/hr/EmployeesList.tsx:112-116 | action | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-INVOICES-FILTERS-MISSING-LOCAL | BUG-INVOICES-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/finance/InvoicesList.tsx:111-116 | action | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| BUG-AUDITLOGS-FILTERS-MISSING-LOCAL | BUG-AUDITLOGS-FILTERS-MISSING-LOCAL â€” sourceRef: code-review:components/administration/AuditLogsList.tsx:108-114 | action | ### 2025-12-17 23:41 (Asia/Riyadh) â€” Code Review Update |
| UX-001 | UX-001 (P1) â€” 6 list components missing mobile CardList views â€” sourceRef: code-review:mobile-ux-audit:2025-12-17 | action, effort | ### 2025-12-17 23:18 (Asia/Riyadh) â€” Comprehensive Analysis + QA Gate Update |
| TEST-002 | TEST-002 (P2) â€” List component integration tests missing â€” sourceRef: analysis:testing-recommendations:2025-12-17 | action | ### 2025-12-17 23:18 (Asia/Riyadh) â€” Comprehensive Analysis + QA Gate Update |
| test-coverage-needs-improvement-24-api-coverage-88-367-routes-tested-missing-tests-docs-pending-master-md-3229 | Test Coverage: ğŸŸ¡ NEEDS IMPROVEMENT (24% API coverage: 88/367 routes tested) | action | ### 2025-12-17 23:16 (Asia/Riyadh) â€” AI Improvement Analysis + Backlog Sync |
| none-backlog-items-already-captured-import-pending-next-steps-docs-pending-master-md-3284 | None (backlog items already captured; import pending) | action, effort | ### 2025-12-17 23:02 (Asia/Riyadh) â€” Code Review Update |
| features-quick-chips-open-urgent-overdue-due-today-url-sync-sort-dropdown-row-click-next-steps-docs-pending-master-md-3473 | **Features**: Quick chips (Open, Urgent, Overdue, Due Today), URL sync, Sort dropdown, Row click | action, effort | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| leaverequestslist-tsx-527-lines-new-status-leave-type-period-quick-stats-pending-approved-total-days-pending-upcoming-chips-next-steps-leaverequestslist-tsx | **LeaveRequestsList.tsx** (527 lines, NEW): Status, Leave Type, Period + Quick stats (Pending/Approved/Total Days) + Pending/Upcoming chips | action | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| p3-aqar-souq-pending-10h-refactor-existing-filters-to-use-standards-efficiency-docs-pending-master-md-3522 | \| **P3: Aqar/Souq** \| â³ PENDING \| 10h \| â€” \| â€” \| Refactor existing filters to use standards \| | action, effort | ### 2025-12-17 23:30 â€” P2 COMPLETE: All Module Migrations + Mobile CardList âœ… 100% DELIVERED |
| compact-encoding-filters-status-open-priority-high-not-verbose-json-next-steps-docs-pending-master-md-3612 | **Compact Encoding**: `filters=status:["open"],priority:["high"]` (not verbose JSON) | action, effort | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| multi-select-checkboxes-with-counts-e-g-open-12-bugs-e-g | Multi-select checkboxes with counts (e.g., "Open (12)") | action | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| components-fm-workordersview-tsx-refactoring-in-progress-by-other-agent-efficiency-components-fm-workordersview-tsx | `components/fm/WorkOrdersView.tsx` (refactoring in progress by other agent) | action | ### 2025-12-17 22:00 â€” P1 FOUNDATION COMPLETE: Design Tokens + Table System + Filter Components âœ… 100% DELIVERED |
| pr-creation-open-pr-for-feat-superadmin-branding-main-next-steps-feat-superadmin-branding | PR creation: Open PR for `feat/superadmin-branding` â†’ `main` | action | ### 2025-12-17 21:50 â€” P0 SSRF Hardening + Test Fixes + Multi-Agent Coordination âœ… MERGE-READY |
| f2-aggregate-wrapper-p2-created-1-pending-next-steps-docs-pending-master-md-4118 | \| F2 (Aggregate wrapper) \| P2 \| âœ… CREATED \| 1 \| Pending \| | action, effort | ### 2025-12-17 22:15 (Asia/Riyadh) â€” F5 Impersonation System Complete (100% Directive Fulfilled) |
| when-superadmin-clicks-these-links-middleware-detects-missing-orgid-redirects-to-login-next-steps-login | When superadmin clicks these links â†’ middleware detects missing `orgId` â†’ redirects to `/login` | action | ### 2025-12-17 01:45 (Asia/Riyadh) â€” Superadmin Navigation Fix (P0 UX Critical) |
| root-cause-missing-orgid-filters-on-crmlead-and-crmactivity-operations-next-steps-docs-pending-master-md-4339 | **Root Cause:** Missing `orgId` filters on CrmLead and CrmActivity operations | action, effort | ### 2025-12-17 00:30 (Asia/Riyadh) â€” CRM Tenant Scope Security Fix (SEC-CRM-001) |
| statushistory-tracks-status-changes-from-open-baseline-next-steps-docs-pending-master-md-4848 | `statusHistory` â†’ tracks status changes from 'open' baseline | action, effort | ### 2025-12-16 19:29 (Asia/Riyadh) â€” Backlog Import: Tenant Scoping + Schema-Safe Issue Documents |
| legacy-repair-unscoped-docs-missing-orgid-auto-repaired-on-update-prevents-silent-query-misses-next-steps-docs-pending-master-md-4906 | **Legacy Repair:** Unscoped docs (missing orgId) auto-repaired on update; prevents silent query misses | action, effort | ### 2025-12-16 19:29 (Asia/Riyadh) â€” Backlog Import: Tenant Scoping + Schema-Safe Issue Documents |
| commit-pending-push-2-files-changed-next-steps-docs-pending-master-md-4944 | **Commit:** pending-push (2 files changed) | action, effort | ### 2025-12-16 19:10 (Asia/Riyadh) â€” GitHub Actions Workflow Fixes + Problems Panel Audit (68 Diagnostics) |
| commit-pending-push-next-steps-docs-pending-master-md-4951 | **Commit:** pending-push | action, effort | ### 2025-12-16 19:10 (Asia/Riyadh) â€” GitHub Actions Workflow Fixes + Problems Panel Audit (68 Diagnostics) |
| CRM-TENANT-001 | **CRM-TENANT-001** â€” CRM contacts endpoint missing orgId filter | action, effort | ### 2025-12-16 18:35 (Asia/Riyadh) â€” CRM Tenant Scope + API Test Fixes (P0 Security) |
| rationale-crm-routes-use-resolveuser-which-returns-null-for-both-missing-auth-and-insufficient-role-401-next-steps-docs-pending-master-md-5168 | **Rationale:** CRM routes use `resolveUser` which returns null for both missing auth and insufficient role â†’ 401 | action, effort | ### 2025-12-16 18:35 (Asia/Riyadh) â€” CRM Tenant Scope + API Test Fixes (P0 Security) |
| validation-rate-limiting-authentication-permissions-missing-tenant-scope-next-steps-docs-pending-master-md-5231 | **Validation:** Rate limiting, authentication, permissions, missing tenant scope | action, effort | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| DOC-101 | DOC-101 through DOC-110: Documentation gaps (JSDoc, OpenAPI, READMEs) | action | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| TEST-005 | TEST-005: Aqar test coverage (in progress) | action | ### 2025-12-17 00:05 (Asia/Riyadh) â€” TEST-002/003/004 Complete: HR/CRM/Finance Test Suite |
| backlog-audit-refreshed-with-12-evidence-backed-open-items-next-steps-docs-pending-master-md-5300 | **BACKLOG_AUDIT:** Refreshed with 12 evidence-backed open items | action, effort | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| start-api-server-for-db-import-next-steps-docs-pending-master-md-5349 | Start API server for DB import | action, effort | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| SEC-002 | Continue with SEC-002/BUG-001/TEST-* items | action | ### 2025-12-16 23:30 (Asia/Riyadh) â€” DB Sync Status + PERF-001 Resolution |
| vulnerability-product-find-id-in-productids-missing-orgid-filter-next-steps-product-find | **Vulnerability:** `Product.find({ _id: { $in: productIds } })` missing orgId filter | action | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| vulnerability-souqlisting-find-id-in-listingobjectids-missing-orgid-filter-next-steps-souqlisting-find | **Vulnerability:** `SouqListing.find({ _id: { $in: listingObjectIds } })` missing orgId filter | action | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| tests-unit-tests-pending-for-cart-orders-routes-missing-tests-docs-pending-master-md-5619 | â³ Tests: Unit tests pending for cart/orders routes | action | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| TEST-003 | **TEST-003** â€” Finance module tests missing | action | ### 2025-12-16 21:45 (Asia/Riyadh) â€” P1 Security & Config Fixes Complete |
| TEST-004 | **TEST-004** â€” CRM module test coverage gaps | action | ### 2025-12-16 20:30 (Asia/Riyadh) â€” Backlog Status Review |
| rotate-api-keys-in-mongodb-atlas-public-key-qefjbwzu-next-steps-docs-pending-master-md-5723 | Rotate API keys in MongoDB Atlas (public key: qefjbwzu) | action, effort | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| document-trigger-function-development-workflow-if-needed-next-steps-docs-pending-master-md-5724 | Document trigger/function development workflow if needed | effort | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| consider-setting-up-triggers-for-issue-tracker-sync-automation-next-steps-docs-pending-master-md-5725 | Consider setting up triggers for Issue Tracker sync automation | action | ### 2025-12-16 17:00 (Asia/Riyadh) â€” MongoDB Atlas App Services Export |
| state-open-large-divergence-from-main-89-files-1786-890-lines-next-steps-docs-pending-master-md-5744 | **State**: OPEN - Large divergence from main (89 files, +1786/-890 lines) | action, effort | ### 2025-12-16 16:30 (Asia/Riyadh) â€” BUILD-TS-001 Resolution + PR Pipeline Cleanup |
| monitor-for-typescript-regressions-in-queue-infrastructure-next-steps-docs-pending-master-md-5764 | Monitor for TypeScript regressions in queue infrastructure | action, effort | ### 2025-12-16 16:30 (Asia/Riyadh) â€” BUILD-TS-001 Resolution + PR Pipeline Cleanup |
| status-open-blocker-for-all-prs-next-steps-docs-pending-master-md-5827 | Status: **OPEN** (blocker for all PRs) | action, effort | ### 2025-12-16 08:00 (Asia/Riyadh) â€” PR Copilot Batch + ESLint Build Fix |
| risk-missing-required-indexes-before-build-deploy-could-cause-runtime-failures-next-steps-docs-pending-master-md-5857 | Risk: Missing required indexes before build/deploy could cause runtime failures | action, effort | ### 2025-12-15 10:15 (Asia/Riyadh) â€” Workflow MongoDB Index Guard Fix |
| prevents-missing-index-errors-during-sentry-sourcemap-uploads-bugs-docs-pending-master-md-5890 | âœ… Prevents missing index errors during Sentry sourcemap uploads | action, effort | ### 2025-12-15 10:15 (Asia/Riyadh) â€” Workflow MongoDB Index Guard Fix |
| error-enotfound-dns-resolution-failed-for-invalid-missing-redis-url-bugs-docs-pending-master-md-5921 | Error: `ENOTFOUND` - DNS resolution failed for invalid/missing REDIS_URL | action, effort | ### 2025-12-15 09:40 (Asia/Riyadh) â€” Production Redis Error Spam Fix |
| return-403-if-orgid-missing-or-invalid-next-steps-docs-pending-master-md-6001 | Return 403 if orgId missing or invalid | action, effort | ### 2025-12-14 19:15 (Asia/Riyadh) â€” Tenant-Isolation Fixes (Aqar + Issue Tracker) |
| gap-from-threshold-35-percentage-points-next-steps-docs-pending-master-md-6036 | **Gap from threshold:** 35 percentage points | action, effort | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-102 | DOC-102 â€” Missing JSDoc for 51 lib utility modules (auth, payments, storage, middleware) â€” P1, Effort: M | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-103 | DOC-103 â€” Missing JSDoc for 124 Mongoose model schemas (server/models) â€” P2, Effort: L | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-104 | DOC-104 â€” Missing function-level JSDoc for superadmin issues CRUD endpoints â€” P2, Effort: XS | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-105 | DOC-105 â€” Missing inline comments for ZATCA TLV encoding logic â€” P2, Effort: S | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-106 | DOC-106 â€” Missing README for backlog tracker feature â€” P2, Effort: S | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-107 | DOC-107 â€” Missing TypeScript interface documentation for BacklogIssue types â€” P3, Effort: XS | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-108 | DOC-108 â€” Missing API endpoint documentation in OpenAPI spec â€” P2, Effort: M | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-109 | DOC-109 â€” Missing error response documentation for API routes â€” P2, Effort: M | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| DOC-110 | DOC-110 â€” Missing deployment checklist for backlog tracker â€” P3, Effort: XS | action | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| critical-gap-51-lib-modules-without-documentation-includes-auth-security-middleware-next-steps-docs-pending-master-md-6085 | **Critical gap:** 51 lib modules without documentation (includes auth, security, middleware) | action, effort | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| api-discoverability-openapi-spec-missing-new-endpoints-next-steps-docs-pending-master-md-6087 | **API discoverability:** OpenAPI spec missing new endpoints | action, effort | ### 2025-12-14 18:30 (Asia/Riyadh) â€” Documentation Coverage Audit |
| missing-lean-10-read-only-queries-performance-optimization-efficiency-docs-pending-master-md-6173 | **Missing .lean()** (10+ read-only queries) - Performance optimization | action, effort | ### 2025-12-14 00:00 (Asia/Riyadh) â€” Workspace-Wide Audit Complete + MASTER SSOT Created |
| ts-expect-error-3-uses-2-have-justifications-1-needs-docs-bugs-docs-pending-master-md-6179 | @ts-expect-error: 3 uses, 2 have justifications (1 needs docs) | action, effort | ### 2025-12-14 00:00 (Asia/Riyadh) â€” Workspace-Wide Audit Complete + MASTER SSOT Created |
| todo-fixme-0-found-in-api-routes-next-steps-docs-pending-master-md-6302 | TODO/FIXME: 0 found in API routes | action, effort | ### 2025-12-15 v65.20 â€” Aqar Test Coverage Complete + Code Quality 100% |
| code-quality-verified-0-console-log-0-todo-fixme-all-dangerouslysetinnerhtml-safe-next-steps-console-log | Code quality verified: 0 console.log, 0 TODO/FIXME, all dangerouslySetInnerHTML safe | action | ### 2025-12-15 v65.20 â€” Aqar Test Coverage Complete + Code Quality 100% |
| TEST-001 | \| P3 Pending \| 3 \| TEST-001 (Souq), TEST-004 (CRM routes), BUG-011 \| | action | ### 2025-12-15 23:55 (Asia/Riyadh) â€” SSOT Sync Update + New Aqar Tests Discovery |
| total-open-13-10-3-next-steps-docs-pending-master-md-6483 | \| Total Open \| 13 \| 10 \| -3 âœ… \| | action, effort | ### 2025-12-15 23:48 (Asia/Riyadh) â€” TEST-SAFE-FETCH Implementation Complete |
| total-open-13-11-2-next-steps-docs-pending-master-md-6526 | \| Total Open \| 13 \| 11 \| -2 âœ… \| | action, effort | ### 2025-12-15 22:30 (Asia/Riyadh) â€” SSOT Backlog Sync + Verification Audit |
| branch-docs-pending-v60-deleted-locally-and-remotely-next-steps-docs-pending-v60 | Branch `docs/pending-v60` deleted locally and remotely | action | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| 0-open-prs-remaining-next-steps-docs-pending-master-md-6557 | **0 open PRs remaining** | action, effort | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| timingsafeequal-missing-globally-coderabbit-already-implemented-in-server-security-health-token-ts-25-and-lib-security-verify-secret-header-ts-29-next-steps-server-security-health-token-ts-25 | \| timingSafeEqual missing globally \| CodeRabbit \| Already implemented in `server/security/health-token.ts:25` and `lib/security/verify-secret-header.ts:29` \| | action | ### 2025-12-15 18:45 (Asia/Riyadh) â€” PR Batch Processing Complete + Review Analysis |
| fallback-logic-falls-back-to-auth-secret-when-nextauth-secret-missing-logic-errors-docs-pending-master-md-6622 | **Fallback Logic:** Falls back to AUTH_SECRET when NEXTAUTH_SECRET missing | action, effort | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| test-2-validates-production-runtime-error-when-both-missing-missing-tests-docs-pending-master-md-6627 | Test 2: Validates production runtime error when both missing | action | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| pending-9-8-1-next-steps-docs-pending-master-md-6646 | \| Pending \| 9 \| 8 \| -1 \| | action, effort | ### 2025-12-14 00:20 (Asia/Riyadh) â€” v65.29 P0 Resolution: CONFIG-002 NEXTAUTH_SECRET Fixed |
| CONFIG-002 | **CONFIG-002 â€” NEXTAUTH_SECRET missing in Vercel production** | action | ### 2025-12-14 00:02 (Asia/Riyadh) â€” ğŸš¨ P0 PRODUCTION OUTAGE: NEXTAUTH_SECRET Missing |
| total-open-9-was-8-next-steps-docs-pending-master-md-6691 | \| Total Open \| 9 (was 8) \| | action, effort | ### 2025-12-14 00:02 (Asia/Riyadh) â€” ğŸš¨ P0 PRODUCTION OUTAGE: NEXTAUTH_SECRET Missing |
| total-pending-10-next-steps-docs-pending-master-md-6773 | \| Total Pending \| 10 \| | action, effort | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| missing-tests-6-missing-tests-docs-pending-master-md-6781 | Missing Tests: 6 | action | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| docs-backlog-audit-json-v2-5-format-with-10-pending-issues-next-steps-docs-backlog-audit-json | `docs/BACKLOG_AUDIT.json` â€” v2.5 format with 10 pending issues | action | ### 2025-12-14 00:00 (Asia/Riyadh) â€” v65.26 Backlog Extractor v2.5 Sync |
| none-no-new-issues-beyond-pending-master-open-items-next-steps-docs-pending-master-md-6838 | None (no new issues beyond PENDING_MASTER open items) | action, effort | ### 2025-12-13 23:10 (Asia/Riyadh) â€” SSOT Correction (no DB sync) |
| BUG-010 | \| BUG-010 \| PM routes missing tenant filter \| âœ… FALSE POSITIVE \| Routes already have `orgId` filter; grep missed camelCase \| | action | ### âœ… v65.23 Session Progress â€” P1 Priority Fixes |
| EFF-004 | \| P2 \| EFF-004 \| Add rate limiting to PM routes (plans/[id]) \| Pending \| | action, effort | ### ğŸ¯ Remaining Priority Items |
| BUG-011 | \| P3 \| BUG-011 \| Add .catch() to notification .then() chains \| Pending \| | action, effort | ### ğŸ¯ Remaining Priority Items |
| latest-commit-53800eee4-pushed-sync-indexes-fix-pending-missing-tests-docs-pending-master-md-7032 | \| **Latest Commit** \| `53800eee4` \| âœ… Pushed \| Sync-indexes fix pending \| | action | ### ğŸ“ Current Progress Summary |
| update-pending-master-in-progress-adding-v65-22-entry-next-steps-v65-22 | \| Update PENDING_MASTER \| âœ… In Progress \| Adding v65.22 entry \| | action | ### âœ… v65.22 Session Progress |
| EFF-001 | \| EFF-001 \| Rate Limiting \| 136 routes missing `enforceRateLimit` \| Abuse risk \| Prioritize superadmin, issues, PM routes \| | action | #### Efficiency Improvements |
| id-module-routes-tests-gap-priority-missing-tests-docs-pending-master-md-7080 | \| ID \| Module \| Routes \| Tests \| Gap \| Priority \| | action | #### Missing Tests |
| app-api-pm-plans-route-ts-43-fmpmplan-find-query-needs-org-id-injection-next-steps-app-api-pm-plans-route-ts-43 | `app/api/pm/plans/route.ts:43` â€” `FMPMPlan.find(query)` needs org_id injection | action | #### 2. Tenant Isolation Gaps |
| priority-task-owner-notes-next-steps-docs-pending-master-md-7143 | \| Priority \| Task \| Owner \| Notes \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p0-commit-sync-indexes-ts-fix-agent-path-alias-relative-import-next-steps-sync-indexes-ts | \| P0 \| Commit sync-indexes.ts fix \| Agent \| Path alias â†’ relative import \| | action | ### ğŸ¯ Planned Next Steps |
| p2-add-rate-limiting-to-superadmin-routes-agent-3-routes-next-steps-docs-pending-master-md-7148 | \| P2 \| Add rate limiting to superadmin routes \| Agent \| 3 routes \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p2-add-rate-limiting-to-issues-routes-agent-4-routes-next-steps-docs-pending-master-md-7149 | \| P2 \| Add rate limiting to issues routes \| Agent \| 4 routes \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p3-increase-hr-module-test-coverage-backlog-6-routes-need-tests-missing-tests-docs-pending-master-md-7150 | \| P3 \| Increase HR module test coverage \| Backlog \| 6 routes need tests \| | action | ### ğŸ¯ Planned Next Steps |
| p3-increase-souq-module-test-coverage-backlog-49-routes-need-tests-missing-tests-docs-pending-master-md-7151 | \| P3 \| Increase Souq module test coverage \| Backlog \| 49 routes need tests \| | action | ### ğŸ¯ Planned Next Steps |
| add-rate-limiting-to-superadmin-routes-pending-limiter-hardening-next-steps-docs-pending-master-md-7163 | add-rate-limiting-to-superadmin-routes â€” pending limiter hardening. | effort | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| add-rate-limiting-to-issues-api-routes-pending-limiter-hardening-next-steps-docs-pending-master-md-7164 | add-rate-limiting-to-issues-api-routes â€” pending limiter hardening. | effort | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| billing-history-missing-org-returns-401-blocker-mongodb-ssot-sync-unavailable-failing-suite-expects-400-got-401-tests-api-billing-history-route-test-ts-57-65-missing-tests-tests-api-billing-history-route-test-ts-57-65 | billing-history-missing-org-returns-401 â€” blocker: MongoDB SSOT sync unavailable; failing suite expects 400, got 401 (`tests/api/billing/history.route.test.ts:57-65`). | action | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| none-db-sync-blocked-create-billing-history-missing-org-returns-401-when-mongo-available-next-steps-docs-pending-master-md-7170 | None (DB sync blocked; create `billing-history-missing-org-returns-401` when Mongo available). | action, effort | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| billing-history-missing-org-returns-401-align-route-to-return-400-without-org-and-rerun-full-vitest-missing-tests-docs-pending-master-md-7173 | billing-history-missing-org-returns-401 â€” align route to return 400 without org and rerun full vitest. | action | ### 2025-12-14 22:25 (Asia/Riyadh) â€” Code Review Update |
| missing-tracked-model-caused-module-not-found-for-issue-apis-build-breaker-keep-issue-issueevent-models-co-located-and-enforced-via-import-check-script-in-ci-scripts-verify-api-ts-or-new-guard-next-steps-scripts-verify-api-ts | \| Missing tracked model caused module-not-found for Issue APIs \| Build breaker \| Keep Issue/IssueEvent models co-located and enforced via import check script in CI (`scripts/verify-api.ts` or new guard) \| | action | #### Identified Bugs |
| missing-dependency-parity-across-issue-routes-app-api-issues-import-route-ts-and-app-api-issues-id-route-ts-both-rely-on-issueevent-without-the-model-tracked-as-seen-in-the-vercel-failure-for-server-models-issue-imports-hard-fail-at-build-time-the-new-server-models-issueevent-ts-removes-this-class-of-break-add-a-ci-guard-to-detect-unresolved-server-model-imports-in-app-api-issues-next-steps-app-api-issues-import-route-ts | **Missing dependency parity across issue routes**: `app/api/issues/import/route.ts` and `app/api/issues/[id]/route.ts` both rely on `IssueEvent`. Without the model tracked (as seen in the Vercel failure for `@/server/models/Issue`), imports hard-fail at build time. The new `server/models/IssueEvent.ts` removes this class of break; add a CI guard to detect unresolved server model imports in `app/api/issues/**`. | action | ### ğŸ” Deep-Dive Analysis: Similar Issues |
| hardened-pr-agent-to-ignore-bots-require-repo-pr-context-and-skip-when-openai-key-missing-github-workflows-pr-agent-yml-20-47-next-steps-github-workflows-pr-agent-yml-20-47 | Hardened PR Agent to ignore bots, require repo PR context, and skip when `OPENAI_KEY` missing (`.github/workflows/pr_agent.yml:20-47`). | action | ### âœ… Session Progress â€” Workflow lint + fork safety |
| priority-task-owner-notes-next-steps-docs-pending-master-md-7257 | \| Priority \| Task \| Owner \| Notes \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-run-pnpm-run-lint-pnpm-run-typecheck-agent-validate-workflow-edits-locally-next-steps-docs-pending-master-md-7259 | \| P1 \| Run `pnpm run lint && pnpm run typecheck` \| Agent \| Validate workflow edits locally \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-smoke-pnpm-run-build-with-ci-defaults-agent-ensure-cache-env-changes-are-neutral-next-steps-docs-pending-master-md-7260 | \| P1 \| Smoke `pnpm run build` with CI defaults \| Agent \| Ensure cache/env changes are neutral \| | action | ### ğŸ¯ Planned Next Steps |
| p2-add-fork-safe-mongo-guard-to-build-sourcemaps-yml-agent-mirror-agent-governor-gating-next-steps-build-sourcemaps-yml | \| P2 \| Add fork-safe Mongo guard to `build-sourcemaps.yml` \| Agent \| Mirror Agent Governor gating \| | action | ### ğŸ¯ Planned Next Steps |
| p3-add-actionlint-workflow-validation-job-backlog-prevent-future-schema-warnings-next-steps-docs-pending-master-md-7262 | \| P3 \| Add actionlint/workflow validation job \| Backlog \| Prevent future schema warnings \| | action, effort | ### ğŸ¯ Planned Next Steps |
| missing-tests-missing-tests-docs-pending-master-md-7273 | **Missing tests** | action | ### ğŸ”§ Enhancements Needed for Production Readiness |
| build-sourcemaps-yml-53-56-still-attempts-mongo-index-creation-with-a-localhost-fallback-on-forks-this-can-fail-due-to-missing-mongo-recommend-adding-if-env-mongodb-uri-and-removing-the-localhost-fallback-next-steps-build-sourcemaps-yml-53-56 | `build-sourcemaps.yml:53-56` still attempts Mongo index creation with a localhost fallback; on forks, this can fail due to missing Mongo. Recommend adding `if: ${{ env.MONGODB_URI != '' }}` and removing the localhost fallback. | action | ### ğŸ” Deep-Dive Analysis of Similar Issues |
| eslint-errors-not-re-run-last-recorded-0-pending-verify-in-next-pass-bugs-docs-pending-master-md-7291 | \| **ESLint Errors** \| Not re-run (last recorded 0) \| â„¹ï¸ Pending \| Verify in next pass \| | action, effort | ### ğŸ“ Current Progress Summary |
| production-readiness-baseline-99-8-blocked-pending-billing-history-fix-rerun-next-steps-99-8 | \| **Production Readiness** \| Baseline 99.8% \| ğŸ”¶ Blocked \| Pending billing/history fix + rerun \| | action | ### ğŸ“ Current Progress Summary |
| warning-review-logged-warnings-observed-missing-encryption-key-fallback-in-tests-unit-security-encryption-test-ts-act-warning-from-tests-integration-dashboard-hr-integration-test-tsx-seed-reminder-in-tests-scripts-seed-marketplace-test-ts-missing-tests-tests-unit-security-encryption-test-ts | \| Warning review \| ğŸ”¶ Logged \| Warnings observed: missing `ENCRYPTION_KEY` fallback in `tests/unit/security/encryption.test.ts`; `act()` warning from `tests/integration/dashboard-hr.integration.test.tsx`; seed reminder in `tests/scripts/seed-marketplace.test.ts` \| | action | ### âœ… v65.21 Session Progress â€” Test Health Sweep |
| tenant-rate-limit-audit-pending-same-16-rate-limit-gaps-flagged-in-prior-session-see-enhancements-next-steps-docs-pending-master-md-7304 | \| Tenant/rate-limit audit \| ğŸ”¶ Pending \| Same 16 rate-limit gaps flagged in prior session (see enhancements) \| | action, effort | ### âœ… v65.21 Session Progress â€” Test Health Sweep |
| review-webhook-open-routes-app-api-payments-callback-route-ts-app-api-healthcheck-route-ts-for-explicit-allowlist-rationale-and-document-exceptions-next-steps-app-api-payments-callback-route-ts | Review webhook/open routes (`app/api/payments/callback/route.ts`, `app/api/healthcheck/route.ts`) for explicit allowlist rationale and document exceptions. | action | ### ğŸ”§ Enhancements Needed for Production Readiness |
| api-billing-history-returns-401-instead-of-400-when-org-context-is-missing-tests-api-billing-history-route-test-ts-pnpm-vitest-run-bail-1-reporter-dot-missing-tests-api-billing-history | `/api/billing/history` returns 401 instead of 400 when org context is missing (`tests/api/billing/history.route.test.ts`, `pnpm vitest run --bail 1 --reporter=dot`). | action | ### ğŸ”§ Enhancements Needed for Production Readiness |
| missing-tests-missing-tests-docs-pending-master-md-7321 | **Missing tests** | action | ### ğŸ”§ Enhancements Needed for Production Readiness |
| souq-coverage-gaps-remain-on-44-routes-75-total-prioritize-checkout-repricer-fulfillment-edges-missing-tests-docs-pending-master-md-7324 | Souq coverage gaps remain on 44 routes (75 total); prioritize checkout, repricer, fulfillment edges. | action | ### ğŸ”§ Enhancements Needed for Production Readiness |
| support-admin-gaps-5-and-19-routes-respectively-add-impersonation-and-admin-action-flows-to-raise-confidence-next-steps-docs-pending-master-md-7325 | Support/Admin gaps (5 and 19 routes respectively); add impersonation and admin action flows to raise confidence. | action, effort | ### ğŸ”§ Enhancements Needed for Production Readiness |
| priority-task-effort-owner-next-steps-docs-pending-master-md-7339 | \| Priority \| Task \| Effort \| Owner \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-enforceratelimit-to-superadmin-issues-tenant-routes-and-backfill-regression-tests-1h-agent-missing-tests-docs-pending-master-md-7342 | \| P1 \| Add `enforceRateLimit` to superadmin + issues + tenant routes and backfill regression tests \| 1h \| Agent \| | action | ### ğŸ¯ Planned Next Steps |
| p2-backfill-crm-and-superadmin-api-tests-extend-souq-critical-paths-3h-agent-missing-tests-docs-pending-master-md-7343 | \| P2 \| Backfill CRM and Superadmin API tests; extend Souq critical paths \| 3h \| Agent \| | action | ### ğŸ¯ Planned Next Steps |
| rate-limiting-audit-16-gaps-see-enhancement-list-below-next-steps-docs-pending-master-md-7372 | \| Rate Limiting Audit \| ğŸ”¶ 16 gaps \| See enhancement list below \| | action, effort | ### âœ… v65.20 Session Progress â€” Deep-Dive Audit |
| app-api-healthcheck-route-ts-system-low-keep-open-for-monitoring-next-steps-app-api-healthcheck-route-ts | \| `app/api/healthcheck/route.ts` \| System \| LOW \| Keep open for monitoring \| | action | #### 1. Routes Without Rate Limiting (16 found) |
| app-api-superadmin-logout-route-ts-auth-low-keep-open-next-steps-app-api-superadmin-logout-route-ts | \| `app/api/superadmin/logout/route.ts` \| Auth \| LOW \| Keep open \| | action | #### 1. Routes Without Rate Limiting (16 found) |
| priority-module-gap-effort-recommendation-next-steps-docs-pending-master-md-7471 | \| Priority \| Module \| Gap \| Effort \| Recommendation \| | action, effort | ### ğŸ“‹ Missing Tests (Priority List) |
| p2-souq-31-75-routes-44-gap-22h-focus-on-critical-paths-next-steps-docs-pending-master-md-7474 | \| P2 \| Souq \| 31/75 routes (44 gap) \| 22h \| Focus on critical paths \| | action, effort | ### ğŸ“‹ Missing Tests (Priority List) |
| p3-support-3-8-routes-5-gap-3h-add-ticket-flow-tests-missing-tests-docs-pending-master-md-7476 | \| P3 \| Support \| 3/8 routes (5 gap) \| 3h \| Add ticket flow tests \| | action | ### ğŸ“‹ Missing Tests (Priority List) |
| p3-admin-9-28-routes-19-gap-10h-add-admin-action-tests-missing-tests-docs-pending-master-md-7477 | \| P3 \| Admin \| 9/28 routes (19 gap) \| 10h \| Add admin action tests \| | action | ### ğŸ“‹ Missing Tests (Priority List) |
| priority-task-effort-owner-next-steps-docs-pending-master-md-7496 | \| Priority \| Task \| Effort \| Owner \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-rate-limiting-to-superadmin-routes-30m-agent-next-steps-docs-pending-master-md-7498 | \| P1 \| Add rate limiting to Superadmin routes \| 30m \| Agent \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-rate-limiting-to-issues-api-routes-30m-agent-next-steps-docs-pending-master-md-7499 | \| P1 \| Add rate limiting to Issues API routes \| 30m \| Agent \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p2-create-superadmin-route-tests-2h-agent-missing-tests-docs-pending-master-md-7500 | \| P2 \| Create Superadmin route tests \| 2h \| Agent \| | action | ### ğŸ¯ Planned Next Steps |
| p2-create-crm-route-tests-4h-backlog-missing-tests-docs-pending-master-md-7501 | \| P2 \| Create CRM route tests \| 4h \| Backlog \| | action | ### ğŸ¯ Planned Next Steps |
| p3-expand-souq-test-coverage-22h-backlog-missing-tests-docs-pending-master-md-7502 | \| P3 \| Expand Souq test coverage \| 22h \| Backlog \| | action | ### ğŸ¯ Planned Next Steps |
| latest-commit-pending-ready-triage-fixes-missing-tests-docs-pending-master-md-7528 | \| **Latest Commit** \| pending \| âœ… Ready \| triage fixes \| | action | ### ğŸ“ Progress Summary (v65.19) |
| todo-fixme-api-0-clean-next-steps-docs-pending-master-md-7596 | \| **TODO/FIXME (API)** \| 0 \| âœ… Clean \| | action, effort | ### ğŸ“ Session Summary |
| todo-fixme-in-api-0-clean-codebase-next-steps-docs-pending-master-md-7633 | \| TODO/FIXME in API \| 0 \| âœ… \| Clean codebase \| | action, effort | ### ğŸ“Š Code Quality Summary |
| todo-fixme-in-api-0-clean-next-steps-docs-pending-master-md-7871 | \| TODO/FIXME in API \| 0 \| âœ… \| Clean \| | action, effort | #### 1. Code Quality Metrics |
| BUG-001 | \| BUG-001 \| OTP 500 when bypass code not set \| `app/api/auth/otp/send/route.ts` \| Config issue - needs env var \| | action | #### Identified Bugs |
| priority-task-effort-rationale-next-steps-docs-pending-master-md-7960 | \| Priority \| Task \| Effort \| Rationale \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p1-deploy-current-changes-5m-verify-production-stability-next-steps-docs-pending-master-md-7962 | \| P1 \| Deploy current changes \| 5m \| Verify production stability \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p2-add-issue-tracker-api-tests-2h-cover-stats-import-routes-missing-tests-docs-pending-master-md-7963 | \| P2 \| Add Issue Tracker API tests \| 2h \| Cover stats/import routes \| | action | ### ğŸ¯ Recommended Next Steps |
| p3-add-admin-route-tests-10h-full-coverage-backlog-missing-tests-docs-pending-master-md-7964 | \| P3 \| Add admin route tests \| 10h \| Full coverage backlog \| | action | ### ğŸ¯ Recommended Next Steps |
| p3-review-5-silent-empty-catches-30m-ensure-intentional-next-steps-docs-pending-master-md-7965 | \| P3 \| Review 5 silent empty catches \| 30m \| Ensure intentional \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| priority-task-effort-status-next-steps-docs-pending-master-md-8041 | \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p1-deploy-and-verify-console-is-clean-5m-pending-deploy-next-steps-docs-pending-master-md-8043 | \| P1 \| Deploy and verify console is clean \| 5m \| Pending deploy \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p2-add-test-for-autofixinitializer-auth-behavior-1h-backlog-missing-tests-docs-pending-master-md-8044 | \| P2 \| Add test for AutoFixInitializer auth behavior \| 1h \| Backlog \| | action | ### ğŸ¯ Recommended Next Steps |
| p3-configure-otp-env-var-or-disable-bypass-5m-needs-owner-action-next-steps-docs-pending-master-md-8045 | \| P3 \| Configure OTP env var or disable bypass \| 5m \| Needs owner action \| | action | ### ğŸ¯ Recommended Next Steps |
| located-master-pending-report-this-file-and-avoided-duplicates-next-steps-docs-pending-master-md-8070 | Located Master Pending Report (this file) and avoided duplicates. | action, effort | ### Progress |
| ongoing-otp-send-endpoint-returning-500-needs-reproduction-details-awaiting-response-payload-logs-to-isolate-root-cause-next-steps-docs-pending-master-md-8073 | Ongoing: OTP send endpoint returning 500 needs reproduction details; awaiting response payload/logs to isolate root cause. | action, effort | ### Progress |
| verify-in-browser-logged-out-logged-in-non-super-admin-that-no-auto-monitor-network-chatter-occurs-confirm-only-super-admin-can-start-monitoring-systemverifier-actions-next-steps-docs-pending-master-md-8076 | Verify in-browser (logged out + logged in non-super-admin) that no auto-monitor network chatter occurs; confirm only SUPER_ADMIN can start monitoring/SystemVerifier actions. | effort | ### Next Steps |
| capture-otp-send-failure-evidence-response-json-server-logs-and-triage-root-cause-add-regression-test-once-repro-is-known-missing-tests-docs-pending-master-md-8077 | Capture OTP send failure evidence (response JSON + server logs) and triage root cause; add regression test once repro is known. | action | ### Next Steps |
| logic-errors-avoid-retrying-qa-reconnect-while-unauthenticated-add-early-return-guard-in-autofix-checks-for-missing-session-to-prevent-false-degraded-statuses-bugs-docs-pending-master-md-8083 | Logic errors: avoid retrying QA reconnect while unauthenticated; add early return guard in AutoFix checks for missing session to prevent false degraded statuses. | action, effort | ### Enhancements Needed for Production |
| missing-tests-add-client-side-test-covering-autofixinitializer-behavior-for-guest-vs-super-admin-add-integration-test-ensuring-no-network-calls-fire-when-not-authenticated-missing-tests-docs-pending-master-md-8084 | Missing tests: add client-side test covering AutoFixInitializer behavior for guest vs SUPER_ADMIN; add integration test ensuring no network calls fire when not authenticated. | action | ### Enhancements Needed for Production |
| todo-fixme-in-api-0-clean-none-needed-next-steps-docs-pending-master-md-8137 | \| TODO/FIXME in API \| 0 \| âœ… Clean \| None needed \| | action, effort | #### 2. Code Quality Metrics |
| COVERAGE-001 | \| P3 \| COVERAGE-001 \| 10+ admin routes missing tests \| Various \| Backlog \| | action | ### ğŸ› Identified Issues (Prioritized) |
| priority-task-effort-rationale-next-steps-docs-pending-master-md-8235 | \| Priority \| Task \| Effort \| Rationale \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p2-add-tests-for-new-issue-apis-2h-cover-stats-import-routes-missing-tests-docs-pending-master-md-8237 | \| P2 \| Add tests for new Issue APIs \| 2h \| Cover stats/import routes \| | action | ### ğŸ¯ Recommended Next Steps |
| p3-review-50-empty-catches-1h-ensure-intentional-fallbacks-next-steps-docs-pending-master-md-8238 | \| P3 \| Review 50 empty catches \| 1h \| Ensure intentional fallbacks \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p3-add-admin-route-tests-4h-10-routes-need-coverage-missing-tests-docs-pending-master-md-8239 | \| P3 \| Add admin route tests \| 4h \| 10+ routes need coverage \| | action | ### ğŸ¯ Recommended Next Steps |
| area-routes-verified-missing-scope-notes-next-steps-docs-pending-master-md-8334 | \| Area \| Routes Verified \| Missing Scope \| Notes \| | action, effort | #### 4. Tenant Isolation Verification |
| priority-task-effort-rationale-next-steps-docs-pending-master-md-8416 | \| Priority \| Task \| Effort \| Rationale \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p1-fix-6-settlement-test-assertions-30min-update-tests-to-match-route-missing-tests-docs-pending-master-md-8418 | \| P1 \| Fix 6 settlement test assertions \| 30min \| Update tests to match route \| | action | ### ğŸ¯ Recommended Next Steps |
| p2-review-localhost-fallbacks-15min-production-urls-next-steps-docs-pending-master-md-8419 | \| P2 \| Review localhost fallbacks \| 15min \| Production URLs \| | action, effort | ### ğŸ¯ Recommended Next Steps |
| p3-expand-souq-test-coverage-4h-51-routes-need-tests-missing-tests-docs-pending-master-md-8420 | \| P3 \| Expand Souq test coverage \| 4h \| +51 routes need tests \| | action | ### ğŸ¯ Recommended Next Steps |
| BUG-CART-001 | \| BUG-CART-001 \| `marketplace/cart/route.ts` \| Missing zodValidationError \| P1 \| NEW \| | action | ### ğŸ› Identified Bugs |
| module-routes-tests-gap-priority-missing-tests-docs-pending-master-md-8544 | \| Module \| Routes \| Tests \| Gap \| Priority \| | action | ### ğŸ“‹ Missing Tests |
| priority-task-effort-owner-next-steps-docs-pending-master-md-8581 | \| Priority \| Task \| Effort \| Owner \| | action, effort | ### ğŸ¯ Planned Next Steps |
| BUG-SETTLE-001 | \| P1 \| Fix BUG-SETTLE-001 (BankAccount type) \| 15m \| Agent \| | action, effort | ### ğŸ¯ Planned Next Steps |
| BUG-ISSUES-001 | \| P1 \| Fix BUG-ISSUES-001 (duplicate logger) \| 5m \| Agent \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-fix-6-failing-settlement-tests-30m-agent-missing-tests-docs-pending-master-md-8586 | \| P1 \| Fix 6 failing settlement tests \| 30m \| Agent \| | action | ### ğŸ¯ Planned Next Steps |
| p2-add-parsebodysafe-to-2-remaining-routes-20m-agent-next-steps-docs-pending-master-md-8587 | \| P2 \| Add parseBodySafe to 2 remaining routes \| 20m \| Agent \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p3-expand-souq-test-coverage-51-routes-6h-backlog-missing-tests-docs-pending-master-md-8588 | \| P3 \| Expand Souq test coverage (+51 routes) \| 6h \| Backlog \| | action | ### ğŸ¯ Planned Next Steps |
| app-api-payments-tap-checkout-route-ts-needs-fix-next-steps-app-api-payments-tap-checkout-route-ts | `app/api/payments/tap/checkout/route.ts` - NEEDS FIX | action | #### Pattern: Hardcoded localhost URLs |
| one-instance-in-payments-needs-next-public-base-url-to-be-required-next-steps-docs-pending-master-md-8606 | One instance in payments needs NEXT_PUBLIC_BASE_URL to be required | action, effort | #### Pattern: Env Var Fallbacks |
| latest-commit-tbd-in-progress-23-test-files-missing-tests-docs-pending-master-md-8694 | \| **Latest Commit** \| TBD \| âœ… In Progress \| +23 test files \| | action | ### ğŸ“ Current Progress Summary |
| apply-vendor-rbac-guard-and-vendorid-scoping-directly-in-kyc-submit-route-service-to-mirror-test-expectations-end-to-end-missing-tests-docs-pending-master-md-8778 | Apply vendor RBAC guard and vendorId scoping directly in KYC submit route/service to mirror test expectations end-to-end. | action | ### ğŸ”œ Planned Next Steps |
| extend-fm-tenant-helpers-and-expenses-budgets-apis-to-enforce-unitid-consistently-add-compound-index-orgid-unitid-department-updatedat-next-steps-docs-pending-master-md-8779 | Extend FM tenant helpers and expenses/budgets APIs to enforce unitId consistently; add compound index `{ orgId, unitId, department, updatedAt }`. | action, effort | ### ğŸ”œ Planned Next Steps |
| broaden-regression-tests-cross-tenant-unitid-for-budgets-kyc-rbac-vendor-negatives-fm-expenses-response-payload-and-org-unit-assertions-missing-tests-docs-pending-master-md-8780 | Broaden regression tests: cross-tenant/unitId for budgets; KYC RBAC/vendor negatives; FM expenses response payload and org/unit assertions. | action | ### ğŸ”œ Planned Next Steps |
| rerun-wider-vitest-set-budgets-fm-suites-and-update-pending-master-with-outcomes-missing-tests-docs-pending-master-md-8781 | Rerun wider vitest set (budgets + FM suites) and update PENDING_MASTER with outcomes. | action | ### ğŸ”œ Planned Next Steps |
| app-api-souq-seller-central-kyc-submit-route-ts-17-100-route-still-sets-vendorid-to-user-id-needs-explicit-vendor-guard-vendorid-propagation-from-session-next-steps-app-api-souq-seller-central-kyc-submit-route-ts-17-100 | `app/api/souq/seller-central/kyc/submit/route.ts:17-100` â€” Route still sets vendorId to user.id; needs explicit vendor guard + vendorId propagation from session. | action | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| app-api-fm-finance-budgets-route-ts-191-225-292-306-unit-scoping-present-but-index-missing-risk-of-slow-queries-ensure-unitid-required-on-post-responses-logic-errors-app-api-fm-finance-budgets-route-ts-191-225-292-306 | `app/api/fm/finance/budgets/route.ts:191-225,292-306` â€” Unit scoping present but index missing; risk of slow queries; ensure unitId required on POST responses. | action | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| vendor-scoping-gap-route-sets-vendorid-session-user-id-but-does-not-enforce-vendor-membership-service-vendor-filter-depends-on-provided-vendorid-aligning-route-service-is-needed-to-prevent-cross-seller-submissions-logic-errors-session-user-id | **Vendor scoping gap** â€” Route sets `vendorId: session.user.id` but does not enforce vendor membership; service vendor filter depends on provided vendorId. Aligning route+service is needed to prevent cross-seller submissions. | action | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| priority-task-effort-status-next-steps-docs-pending-master-md-8900 | \| # \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ”„ Planned Next Steps |
| JSON-PARSE | \| 1 \| ğŸ”´ P0 \| Fix remaining 43 JSON-PARSE routes \| 3h \| ğŸ”„ In Progress \| | action | ### ğŸ”„ Planned Next Steps |
| OTP-001 | \| 2 \| ğŸ”´ P0 \| OTP-001: Verify Taqnyat credentials on Vercel \| 30m \| â³ Pending \| | action | ### ğŸ”„ Planned Next Steps |
| BUG-FM-001 | \| 3 \| ğŸŸ  P1 \| BUG-FM-001: Add unitId to tenant filter \| 1h \| â³ Pending \| | action | ### ğŸ”„ Planned Next Steps |
| BUG-KYC-001 | \| 4 \| ğŸŸ  P1 \| BUG-KYC-001: Add RBAC guard to KYC submit \| 30m \| â³ Pending \| | action | ### ğŸ”„ Planned Next Steps |
| 5-p1-add-tests-for-51-souq-routes-4h-backlog-missing-tests-docs-pending-master-md-8906 | \| 5 \| ğŸŸ  P1 \| Add tests for 51 Souq routes \| 4h \| â³ Backlog \| | action | ### ğŸ”„ Planned Next Steps |
| 6-p2-add-rbac-to-233-routes-352-119-covered-8h-backlog-next-steps-docs-pending-master-md-8907 | \| 6 \| ğŸŸ¡ P2 \| Add RBAC to 233 routes (352 - 119 covered) \| 8h \| â³ Backlog \| | action, effort | ### ğŸ”„ Planned Next Steps |
| EFF-003 | \| EFF-003 \| `app/api/fm/finance/budgets/route.ts:135-143` \| Missing compound index \| Add `{ orgId, unitId, department }` \| ğŸŸ  P1 \| | action | #### ğŸš€ Efficiency Improvements |
| SEC-001 | \| SEC-001 \| `lib/auth/role-guards.ts` \| HR_ADMIN guard coverage gaps \| ğŸŸ  P1 \| â³ Pending \| | action | #### ğŸ› Identified Bugs |
| BUG-PAY-001 | \| BUG-PAY-001 \| `payments/tap/checkout/route.ts:251` \| localhost:3000 fallback \| ğŸŸ  P1 \| â³ Pending \| | action | #### ğŸ› Identified Bugs |
| TEST-SOUQ | \| TEST-SOUQ \| Souq Module \| Route coverage gap \| 51 routes \| ğŸŸ  P1 \| | action | #### ğŸ§ª Missing Tests |
| TEST-ADMIN | \| TEST-ADMIN \| Admin Module \| Route coverage gap \| 26 routes \| ğŸŸ  P1 \| | action | #### ğŸ§ª Missing Tests |
| TEST-FM | \| TEST-FM \| FM Module \| Route coverage gap \| 19 routes \| ğŸŸ  P1 \| | action | #### ğŸ§ª Missing Tests |
| TEST-AQAR | \| TEST-AQAR \| Aqar Module \| Route coverage gap \| 14 routes \| ğŸŸ¡ P2 \| | action | #### ğŸ§ª Missing Tests |
| app-api-properties-route-ts-needs-review-should-require-auth-next-steps-app-api-properties-route-ts | \| `app/api/properties/route.ts` \| ğŸ”´ Needs review - should require auth \| | action | #### Pattern 2: Routes Without Auth Check (10 locations) |
| app-api-tenants-route-ts-needs-review-should-require-auth-next-steps-app-api-tenants-route-ts | \| `app/api/tenants/route.ts` \| ğŸ”´ Needs review - should require auth \| | action | #### Pattern 2: Routes Without Auth Check (10 locations) |
| app-api-work-orders-route-ts-needs-review-should-require-auth-next-steps-app-api-work-orders-route-ts | \| `app/api/work-orders/route.ts` \| ğŸ”´ Needs review - should require auth \| | action | #### Pattern 2: Routes Without Auth Check (10 locations) |
| module-test-files-api-routes-coverage-gap-priority-missing-tests-docs-pending-master-md-9021 | \| Module \| Test Files \| API Routes \| Coverage \| Gap \| Priority \| | action | ### ğŸ“ˆ Test Coverage by Module |
| rbac-119-352-routes-34-next-steps-docs-pending-master-md-9068 | RBAC: 119/352 routes (34%) | action, effort | ### âœ… QA Gate Checklist |
| metric-value-status-next-steps-docs-pending-master-md-9083 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-souq-kyc-submit-tests-fm-finance-expenses-tests-updated-missing-tests-docs-pending-master-md-9085 | \| Scope \| Souq KYC submit tests; FM finance expenses tests \| âœ… Updated \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-14-passing-pnpm-vitest-tests-unit-api-souq-seller-central-kyc-submit-test-ts-executed-missing-tests-pnpm-vitest-tests-unit-api-souq-seller-central-kyc-submit-test-ts | \| Tests \| 14 passing (`pnpm vitest tests/unit/api/souq/seller-central/kyc-submit.test.ts`) \| âœ… Executed \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| forbidden-deps-prisma-sql-stack-none-next-steps-docs-pending-master-md-9087 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tightened-kyc-submit-happy-path-expectations-to-require-200-nextstep-tests-unit-api-souq-seller-central-kyc-submit-test-ts-145-238-run-validated-missing-tests-tests-unit-api-souq-seller-central-kyc-submit-test-ts-145-238 | Tightened KYC submit happy-path expectations to require 200 + `nextStep` (tests/unit/api/souq/seller-central/kyc-submit.test.ts:145-238); run validated. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| flagged-fm-expenses-happy-path-assertions-tolerating-400-500-status-and-conditional-bodies-tests-unit-api-fm-finance-expenses-test-ts-195-201-305-351-missing-tests-tests-unit-api-fm-finance-expenses-test-ts-195-201 | Flagged FM expenses happy-path assertions tolerating 400/500 status and conditional bodies (tests/unit/api/fm/finance/expenses.test.ts:195-201,305-351). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| reconfirmed-route-gaps-missing-seller-rbac-vendor-guard-in-kyc-submit-app-api-souq-seller-central-kyc-submit-route-ts-15-78-org-only-fm-budget-filters-app-api-fm-finance-budgets-route-ts-119-129-200-207-next-steps-app-api-souq-seller-central-kyc-submit-route-ts-15-78 | Reconfirmed route gaps: missing seller RBAC/vendor guard in KYC submit (app/api/souq/seller-central/kyc/submit/route.ts:15-78); org-only FM budget filters (app/api/fm/finance/budgets/route.ts:119-129,200-207). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| add-seller-vendor-rbac-guard-and-vendor-id-scoping-to-kyc-submit-sellerkycservice-logic-errors-docs-pending-master-md-9096 | Add seller/vendor RBAC guard and vendor_id scoping to KYC submit + sellerKYCService. | effort | ### ğŸ“ Current Progress & Planned Next Steps |
| normalize-fm-expenses-tests-to-strict-success-expectations-and-assert-orgid-unitid-on-inserts-missing-tests-docs-pending-master-md-9097 | Normalize FM expenses tests to strict success expectations and assert orgId/unitId on inserts. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| extend-fm-tenant-helpers-to-emit-unitid-and-backfill-index-orgid-unitid-department-updatedat-next-steps-docs-pending-master-md-9098 | Extend FM tenant helpers to emit unitId and backfill index `{ orgId, unitId, department, updatedAt }`. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| app-api-fm-finance-budgets-route-ts-119-129-org-only-buildtenantfilter-missing-unitid-next-steps-app-api-fm-finance-budgets-route-ts-119-129 | `app/api/fm/finance/budgets/route.ts:119-129` â€” org-only `buildTenantFilter`; missing `unitId`. | action | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| rbac-tenant-guard-gap-kyc-submit-route-lacks-seller-vendor-rbac-service-lookup-is-org-only-enabling-cross-seller-submission-next-steps-docs-pending-master-md-9123 | **RBAC/tenant guard gap** â€” KYC submit route lacks seller/vendor RBAC; service lookup is org-only, enabling cross-seller submission. | action, effort | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| TEST-SOUQ-51 | \| TEST-SOUQ-51 \| Souq module \| 51 routes missing coverage \| ğŸŸ  P1 \| | action | #### Missing Tests |
| TEST-ADMIN-26 | \| TEST-ADMIN-26 \| Admin module \| 26 routes missing coverage \| ğŸŸ  P1 \| | action | #### Missing Tests |
| TEST-FM-19 | \| TEST-FM-19 \| FM module \| 19 routes missing coverage \| ğŸŸ  P1 \| | action | #### Missing Tests |
| sprint-1-continuation-apply-parsebodysafe-to-remaining-44-routes-batch-by-module-next-steps-docs-pending-master-md-9280 | **Sprint 1 Continuation:** Apply `parseBodySafe` to remaining 44 routes (batch by module) | action, effort | ### ğŸ¯ Recommended Next Steps |
| fm-unit-scoping-extend-buildtenantfilter-to-include-unitid-logic-errors-docs-pending-master-md-9282 | **FM Unit Scoping:** Extend `buildTenantFilter` to include `unitId` | action, effort | ### ğŸ¯ Recommended Next Steps |
| kyc-workflow-fix-premature-approval-pattern-in-seller-kyc-service-next-steps-docs-pending-master-md-9283 | **KYC Workflow:** Fix premature approval pattern in seller-kyc-service | action, effort | ### ğŸ¯ Recommended Next Steps |
| flagged-parallel-lenient-status-assertions-in-fm-expenses-tests-to-close-false-negative-gaps-missing-tests-docs-pending-master-md-9293 | Flagged parallel lenient status assertions in FM expenses tests to close false-negative gaps. | action | ### ğŸ“ Summary |
| metric-value-status-next-steps-docs-pending-master-md-9297 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-souq-kyc-submit-tests-fm-finance-expenses-tests-in-progress-missing-tests-docs-pending-master-md-9299 | \| Scope \| Souq KYC submit tests; FM finance expenses tests \| âœ… In progress \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| forbidden-deps-prisma-sql-stack-none-found-next-steps-docs-pending-master-md-9301 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None found \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| apply-rbac-vendor-ownership-guard-to-souq-kyc-submit-route-align-sellerkycservice-with-vendor-id-scoping-and-staged-approvals-logic-errors-docs-pending-master-md-9309 | Apply RBAC/vendor ownership guard to Souq KYC submit route; align sellerKYCService with vendor_id scoping and staged approvals. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| normalize-fm-expenses-tests-to-require-deterministic-200-201-responses-and-assert-response-bodies-enforce-orgid-unitid-expectations-on-inserts-missing-tests-docs-pending-master-md-9310 | Normalize FM expenses tests to require deterministic 200/201 responses and assert response bodies; enforce orgId/unitId expectations on inserts. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| metric-value-status-next-steps-docs-pending-master-md-9384 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| scope-souq-kyc-rbac-tests-fm-budgets-unit-scope-typecheck-lint-triage-started-in-progress-missing-tests-docs-pending-master-md-9386 | \| Scope \| Souq KYC RBAC+tests; FM budgets unit scope; typecheck/lint triage started \| âœ… In progress \| | action | ### ğŸ“ Progress & Planned Next Steps |
| commands-pnpm-vitest-run-tests-unit-api-souq-seller-central-kyc-submit-test-ts-pnpm-vitest-run-tests-unit-api-fm-finance-budgets-test-ts-passed-missing-tests-pnpm-vitest-run-tests-unit-api-souq-seller-central-kyc-submit-test-ts | \| Commands \| `pnpm vitest run tests/unit/api/souq/seller-central/kyc-submit.test.ts`, `pnpm vitest run tests/unit/api/fm/finance/budgets.test.ts` \| âœ… Passed \| | action | ### ğŸ“ Progress & Planned Next Steps |
| gates-pnpm-typecheck-50-ts-errors-pnpm-lint-135-errors-pending-fixes-bugs-docs-pending-master-md-9388 | \| Gates \| `pnpm typecheck` âŒ (50+ TS errors); `pnpm lint` âŒ (135 errors) \| â³ Pending fixes \| | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| souq-kyc-submit-seller-only-rbac-guard-company-info-no-longer-auto-approves-vendorid-passed-into-service-unit-tests-tightened-and-passing-missing-tests-docs-pending-master-md-9391 | Souq KYC submit: seller-only RBAC guard; company_info no longer auto-approves; vendorId passed into service; unit tests tightened and passing. | action | ### ğŸ“ Progress & Planned Next Steps |
| fm-budgets-route-unitid-scoping-enforced-via-resolveunitscope-and-buildtenantfilter-unit-support-tests-passing-missing-tests-docs-pending-master-md-9392 | FM budgets route: unitId scoping enforced via `resolveUnitScope` and `buildTenantFilter` unit support; tests passing. | action | ### ğŸ“ Progress & Planned Next Steps |
| typecheck-lint-triage-identified-failing-files-aqar-listings-issues-api-marketplace-ads-cart-rfq-vendor-products-issue-tracker-app-models-scripts-next-steps-docs-pending-master-md-9393 | Typecheck/lint triage: identified failing files (aqar listings, issues API, marketplace ads/cart/rfq/vendor products, issue-tracker app/models/scripts). | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| typecheck-pass-1-issue-tracker-issues-api-fix-imports-types-null-guards-getserversession-wiring-virtual-typings-missing-deps-re-run-pnpm-typecheck-next-steps-docs-pending-master-md-9396 | Typecheck Pass 1 (issue-tracker & issues API): fix imports/types, null guards, getServerSession wiring, virtual typings, missing deps; re-run `pnpm typecheck`. | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| typecheck-pass-2-aqar-marketplace-fix-enum-nullable-handling-in-aqar-listing-route-correct-zod-error-handling-unknown-casting-in-marketplace-cart-rfq-vendor-products-and-souq-ads-campaigns-re-run-pnpm-typecheck-until-clean-bugs-docs-pending-master-md-9397 | Typecheck Pass 2 (aqar/marketplace): fix enum/nullable handling in aqar listing route; correct Zod error handling/unknown casting in marketplace cart/rfq/vendor products and souq ads campaigns; re-run `pnpm typecheck` until clean. | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| lint-cleanup-remove-console-any-unused-vars-across-issue-tracker-app-api-issues-route-ts-and-app-marketplace-page-tsx-re-run-pnpm-lint-next-steps-app-api-issues-route-ts | Lint cleanup: remove console/any/unused vars across issue-tracker, app/api/issues/route.ts, and app/marketplace/page.tsx; re-run `pnpm lint`. | action | ### ğŸ“ Progress & Planned Next Steps |
| follow-ups-add-kyc-integration-tests-for-document-bank-verification-and-super-admin-override-add-fm-budgets-compound-index-orgid-unitid-department-updatedat-1-and-unitid-persistence-rejection-tests-missing-tests-docs-pending-master-md-9399 | Follow-ups: add KYC integration tests for document/bank verification and super-admin override; add FM budgets compound index `{ orgId, unitId, department, updatedAt: -1 }` and unitId persistence/rejection tests. | action | ### ğŸ“ Progress & Planned Next Steps |
| issue-tracker-routes-missing-modules-models-issue-lib-db-lib-auth-and-outdated-getserversession-import-causes-typecheck-failures-and-potential-runtime-crashes-bugs-models-issue | issue-tracker routes: missing modules (`@/models/issue`, `@/lib/db`, `@/lib/auth`) and outdated `getServerSession` import; causes typecheck failures and potential runtime crashes. | action | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| souq-ads-campaigns-unknown-values-assigned-to-enums-type-errors-potential-runtime-validation-gaps-bugs-docs-pending-master-md-9410 | souq ads campaigns: unknown values assigned to enums (type errors), potential runtime validation gaps. | action, effort | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| issue-tracker-model-virtuals-age-isstale-typings-missing-effort-priority-enums-mismatched-in-model-methods-p0-l-not-allowed-by-types-next-steps-docs-pending-master-md-9413 | issue-tracker model virtuals: `age`/`isStale` typings missing, effort/priority enums mismatched in model methods (P0/L not allowed by types). | action, effort | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| issue-tracker-scripts-implicit-any-parameters-and-missing-commander-import-break-cli-typing-and-may-fail-at-runtime-next-steps-docs-pending-master-md-9414 | issue-tracker scripts: implicit any parameters and missing commander import break CLI typing and may fail at runtime. | action, effort | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| validation-typing-gaps-marketplace-routes-construct-zod-errors-from-plain-arrays-similar-pattern-across-cart-rfq-vendor-products-souq-ads-campaigns-leads-to-ts-errors-and-weak-validation-bugs-docs-pending-master-md-9423 | **Validation typing gaps**: marketplace routes construct Zod errors from plain arrays; similar pattern across cart/rfq/vendor products/souq ads campaigns leads to TS errors and weak validation. | action | ### ğŸ” Deep-Dive Analysis (Similar/Identical Issue Patterns) |
| metric-value-status-next-steps-docs-pending-master-md-9432 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| scope-souq-seller-kyc-submit-route-service-fm-budgets-unit-tests-updated-missing-tests-docs-pending-master-md-9434 | \| Scope \| Souq seller KYC submit route + service; FM budgets unit tests \| âœ… Updated \| | action | ### ğŸ“ Progress & Planned Next Steps |
| typecheck-lint-not-run-this-session-pending-next-steps-docs-pending-master-md-9436 | \| Typecheck/Lint \| Not run this session \| â³ Pending \| | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| tightened-kyc-unit-tests-deterministic-200-expectations-non-seller-negative-case-service-call-assertions-now-match-vendorid-injection-missing-tests-docs-pending-master-md-9441 | Tightened KYC unit tests: deterministic 200 expectations, non-seller negative case, service call assertions now match vendorId injection. | action | ### ğŸ“ Progress & Planned Next Steps |
| re-ran-budgets-unit-tests-suite-green-with-existing-tenant-unit-aware-mocks-missing-tests-docs-pending-master-md-9442 | Re-ran budgets unit tests; suite green with existing tenant/unit-aware mocks. | action | ### ğŸ“ Progress & Planned Next Steps |
| audit-souq-kyc-service-for-vendor-ownership-scoping-across-all-steps-and-align-route-to-pass-vendorid-explicitly-if-required-logic-errors-docs-pending-master-md-9446 | Audit Souq KYC service for vendor ownership scoping across all steps and align route to pass vendorId explicitly if required. | action | ### ğŸ“ Progress & Planned Next Steps |
| extend-integration-tests-to-cover-kyc-document-bank-verification-paths-and-super-admin-header-override-behavior-missing-tests-docs-pending-master-md-9447 | Extend integration tests to cover KYC document/bank verification paths and super-admin header override behavior. | action | ### ğŸ“ Progress & Planned Next Steps |
| backfill-fm-budgets-route-with-unitid-scoping-once-shared-tenant-helper-supports-unit-arrays-add-compound-index-orgid-unitid-department-updatedat-logic-errors-docs-pending-master-md-9448 | Backfill FM budgets route with unitId scoping once shared tenant helper supports unit arrays; add compound index `{ orgId, unitId, department, updatedAt }`. | action, effort | ### ğŸ“ Progress & Planned Next Steps |
| kyc-company-info-step-previously-set-status-to-approved-corrected-to-pending-documents-ensure-approval-only-happens-in-verifydocument-approvekyc-paths-next-steps-docs-pending-master-md-9460 | KYC company_info step previously set status to approved; corrected to pending/documents. Ensure approval only happens in verifyDocument/approveKYC paths. | action, effort | ### ğŸ› ï¸ Enhancements Needed for Production Readiness |
| rbac-gaps-on-sensitive-routes-souq-kyc-submit-lacked-seller-role-guard-similar-to-past-marketplace-payout-reviews-routes-pattern-routes-relying-solely-on-auth-without-hasanyrole-rbac-context-allow-unauthorized-mutations-next-steps-docs-pending-master-md-9468 | **RBAC gaps on sensitive routes**: Souq KYC submit lacked seller-role guard similar to past marketplace payout/reviews routes. Pattern: routes relying solely on `auth()` without `hasAnyRole`/RBAC context allow unauthorized mutations. | action, effort | ### ğŸ” Deep-Dive Analysis (Similar/Identical Issue Patterns) |
| metric-value-status-next-steps-docs-pending-master-md-9478 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-copilot-instruction-hardening-coordination-guardrails-updated-next-steps-docs-pending-master-md-9480 | \| Scope \| Copilot instruction hardening + coordination guardrails \| âœ… Updated \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-not-run-doc-only-change-n-a-missing-tests-docs-pending-master-md-9481 | \| Tests \| Not run (doc-only change) \| â– N/A \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typescript-not-run-doc-only-change-n-a-next-steps-docs-pending-master-md-9482 | \| TypeScript \| Not run (doc-only change) \| â– N/A \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| reaffirmed-alignment-to-final-fixizit-system-prompt-v3-1-and-agents-md-invariants-next-steps-v3-1 | Reaffirmed alignment to Final Fixizit System Prompt v3.1 and AGENTS.md invariants. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| socialize-the-updated-instructions-with-all-agents-ensure-new-guidance-is-honored-in-upcoming-changes-next-steps-docs-pending-master-md-9489 | Socialize the updated instructions with all agents; ensure new guidance is honored in upcoming changes. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| if-any-ambiguity-arises-during-concurrent-edits-record-assumptions-and-coordination-notes-directly-in-this-report-before-proceeding-next-steps-docs-pending-master-md-9490 | If any ambiguity arises during concurrent edits, record assumptions and coordination notes directly in this report before proceeding. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| metric-value-status-next-steps-docs-pending-master-md-9549 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-fm-finance-budgets-api-souq-seller-kyc-submit-re-validated-next-steps-docs-pending-master-md-9551 | \| Scope \| FM Finance budgets API + Souq Seller KYC submit \| âœ… Re-validated \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| forbidden-deps-prisma-sql-stack-none-found-next-steps-docs-pending-master-md-9552 | \| Forbidden deps \| Prisma/SQL stack \| âœ… None found \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-not-executed-static-analysis-n-a-missing-tests-docs-pending-master-md-9553 | \| Tests \| Not executed (static analysis) \| âœ… N/A \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| confirmed-fm-budgets-get-post-enforce-orgid-unitid-via-resolveunitscope-and-buildtenantfilter-unit-aware-next-steps-docs-pending-master-md-9556 | Confirmed FM budgets GET/POST enforce orgId + unitId via `resolveUnitScope` and `buildTenantFilter` (unit-aware). | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| confirmed-souq-kyc-route-uses-rbac-vendor-only-and-service-enforces-vendor-ownership-in-review-status-progression-next-steps-docs-pending-master-md-9557 | Confirmed Souq KYC route uses RBAC (vendor-only) and service enforces vendor ownership + `in_review` status progression. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| add-compound-index-orgid-1-unitid-1-department-1-updatedat-1-to-budgets-collection-to-avoid-scans-next-steps-docs-pending-master-md-9561 | Add compound index `{ orgId: 1, unitId: 1, department: 1, updatedAt: -1 }` to budgets collection to avoid scans. | effort | ### ğŸ“ Current Progress & Planned Next Steps |
| gate-super-admin-cross-tenant-fm-budgets-listing-currently-empty-filter-when-tenantid-is-cross-marker-next-steps-docs-pending-master-md-9562 | Gate super-admin cross-tenant FM budgets listing (currently empty filter when tenantId is cross marker). | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| super-admin-cross-tenant-gap-for-fm-budgets-cross-tenant-marker-yields-query-without-explicit-tenant-unit-selection-a-super-admin-could-list-all-budgets-requires-explicit-gating-or-tenant-selection-next-steps-docs-pending-master-md-9580 | **Super Admin cross-tenant gap**: For FM budgets, cross-tenant marker yields `{}` query; without explicit tenant+unit selection, a Super Admin could list all budgets. Requires explicit gating or tenant selection. | action, effort | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| test-coverage-gaps-current-unit-tests-allow-200-500-in-souq-kyc-and-lack-unit-scope-assertions-in-fm-budgets-masking-regressions-in-scoping-and-rbac-missing-tests-docs-pending-master-md-9581 | **Test coverage gaps**: Current unit tests allow `[200,500]` in Souq KYC and lack unit-scope assertions in FM budgets, masking regressions in scoping and RBAC. | action | ### ğŸ” Deep-Dive Analysis (Similar Issues) |
| ongoing-playwright-smoke-rerun-required-previous-runs-timed-out-copilot-strict-specs-still-failing-in-full-test-run-layout-preservation-tenant-isolation-intent-routing-missing-tests-docs-pending-master-md-9589 | Ongoing: Playwright smoke rerun required (previous runs timed out); copilot STRICT specs still failing in full test run (layout preservation, tenant isolation, intent routing). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-re-run-pnpm-test-e2e-project-smoke-reporter-line-after-cooldown-triage-tests-copilot-copilot-spec-ts-failures-consider-extending-playwright-safe-guard-to-other-org-guard-hooks-align-smoke-selectors-with-new-stubs-missing-tests-tests-copilot-copilot-spec-ts | Next: Re-run `pnpm test:e2e -- --project smoke --reporter=line` after cooldown; triage `tests/copilot/copilot.spec.ts` failures; consider extending Playwright-safe guard to other org guard hooks; align smoke selectors with new stubs. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-missing-tests-docs-pending-master-md-9602 | Missing tests | action | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| metric-value-status-next-steps-docs-pending-master-md-9615 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-fm-finance-budgets-api-souq-seller-kyc-submit-reviewed-next-steps-docs-pending-master-md-9617 | \| Scope \| FM Finance budgets API + Souq Seller KYC submit \| âœ… Reviewed \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| routes-app-api-fm-finance-budgets-route-ts-app-api-souq-seller-central-kyc-submit-route-ts-parsed-next-steps-app-api-fm-finance-budgets-route-ts | \| Routes \| `app/api/fm/finance/budgets/route.ts`, `app/api/souq/seller-central/kyc/submit/route.ts` \| âœ… Parsed \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| services-services-souq-seller-kyc-service-ts-parsed-next-steps-services-souq-seller-kyc-service-ts | \| Services \| `services/souq/seller-kyc-service.ts` \| âœ… Parsed \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-tests-unit-api-fm-finance-budgets-test-ts-tests-unit-api-souq-seller-central-kyc-submit-test-ts-read-missing-tests-tests-unit-api-fm-finance-budgets-test-ts | \| Tests \| `tests/unit/api/fm/finance/budgets.test.ts`, `tests/unit/api/souq/seller-central/kyc-submit.test.ts` \| âœ… Read \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| add-seller-vendor-rbac-guard-and-vendor-id-scoping-to-souq-kyc-submission-route-service-align-with-marketplace-role-matrix-logic-errors-docs-pending-master-md-9624 | Add seller/vendor RBAC guard and vendor_id scoping to Souq KYC submission route + service; align with marketplace role matrix. | effort | ### ğŸ“ Current Progress & Planned Next Steps |
| in-progress-smoke-suite-rerun-pnpm-test-e2e-project-smoke-attempts-timed-out-copilot-strict-specs-still-failing-in-full-pnpm-test-run-see-console-for-copilot-spec-failures-missing-tests-copilot-spec | In Progress: Smoke suite rerun (pnpm test:e2e -- --project smoke) â€” attempts timed out; Copilot STRICT specs still failing in full `pnpm test` run (see console for copilot.spec failures). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-re-run-smoke-after-server-cooldown-address-copilot-strict-layout-tenant-isolation-failures-keep-playwright-flags-set-in-pipeline-ensure-marketplace-cart-flow-stays-green-after-stubs-next-steps-docs-pending-master-md-9658 | Next: Re-run smoke after server cooldown; address Copilot STRICT layout/tenant isolation failures; keep PLAYWRIGHT flags set in pipeline; ensure marketplace cart flow stays green after stubs. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-add-regression-smoke-to-assert-playwright-header-has-dashboard-link-and-supportorg-fallback-yields-no-boundary-errors-unit-test-for-playwright-pdp-stub-to-ensure-button-renders-without-api-fetch-extend-smoke-to-assert-product-card-link-href-points-to-pdp-stub-missing-tests-docs-pending-master-md-9664 | Missing tests: add regression smoke to assert Playwright header has Dashboard link and SupportOrg fallback yields no boundary errors; unit test for Playwright PDP stub to ensure button renders without API fetch; extend smoke to assert product-card link href points to PDP stub. | action | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| playwright-only-branches-still-sparse-across-dashboard-modules-system-page-needed-arabic-h1-finance-hr-already-covered-audit-remaining-dashboard-pages-for-playwright-tests-hooks-to-prevent-future-rtl-smoke-gaps-missing-tests-dashboard | Playwright-only branches still sparse across dashboard modules; system page needed Arabic H1, finance/HR already covered â€” audit remaining `/dashboard/**` pages for PLAYWRIGHT_TESTS hooks to prevent future RTL smoke gaps. | action | ### ğŸ” Deep-Dive: Similar Issue Clusters |
| metric-value-status-next-steps-docs-pending-master-md-9675 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commit-855c000e3-head-pushed-next-steps-docs-pending-master-md-9678 | \| Commit \| `855c000e3` (HEAD) \| âœ… Pushed \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-3-185-passing-323-files-all-pass-missing-tests-docs-pending-master-md-9679 | \| Tests \| 3,185 passing (323 files) \| âœ… All pass \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| api-routes-371-files-scanned-next-steps-docs-pending-master-md-9681 | \| API Routes \| 371 files \| âœ… Scanned \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| test-files-285-files-scanned-missing-tests-docs-pending-master-md-9682 | \| Test Files \| 285 files \| âœ… Scanned \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| rbac-guards-147-usages-verified-next-steps-docs-pending-master-md-9683 | \| RBAC Guards \| 147 usages \| âœ… Verified \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scanned-entire-codebase-for-23-priority-action-categories-next-steps-docs-pending-master-md-9686 | âœ… **Scanned entire codebase** for 23 priority action categories | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| identified-19-remaining-issues-requiring-attention-5-8-6-next-steps-docs-pending-master-md-9687 | âœ… **Identified 19 remaining issues** requiring attention (5 ğŸ”´, 8 ğŸŸ , 6 ğŸŸ¡) | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| deep-dive-analysis-on-similar-patterns-across-codebase-next-steps-docs-pending-master-md-9689 | âœ… **Deep-dive analysis** on similar patterns across codebase | action | ### ğŸ“ Current Progress & Planned Next Steps |
| 9-index-verification-needs-db-review-requires-mongosh-verification-next-steps-docs-pending-master-md-9820 | \| 9. Index verification \| â³ Needs DB review \| Requires mongosh verification \| | action, effort | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| 13-n-1-queries-needs-review-flag-in-list-endpoints-next-steps-docs-pending-master-md-9824 | \| 13. N+1 queries \| â³ Needs review \| Flag in list endpoints \| | action, effort | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| 14-bundle-size-needs-build-analysis-run-next-build-analyze-next-steps-docs-pending-master-md-9825 | \| 14. Bundle size \| â³ Needs build analysis \| Run `next build --analyze` \| | action, effort | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| 21-i18n-completeness-needs-audit-translation-coverage-varies-missing-tests-docs-pending-master-md-9832 | \| 21. i18n completeness \| â³ Needs audit \| Translation coverage varies \| | action | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| 22-accessibility-needs-audit-a11y-review-needed-next-steps-docs-pending-master-md-9833 | \| 22. Accessibility \| â³ Needs audit \| a11y review needed \| | action, effort | #### ğŸ“Š CATEGORY 7-23: Additional Audit Categories |
| work-orders-presign-route-ts-1-needs-fix-next-steps-work-orders-presign-route-ts | `work-orders/presign/route.ts` (1) â€” needs fix | action | #### PATTERN 2: SILENT-CATCH (Error Masking) |
| admin-notifications-test-route-ts-1-needs-logging-missing-tests-admin-notifications-test-route-ts | `admin/notifications/test/route.ts` (1) â€” needs logging | action | #### PATTERN 2: SILENT-CATCH (Error Masking) |
| priority-action-est-effort-assignee-next-steps-docs-pending-master-md-9926 | \| Priority \| Action \| Est. Effort \| Assignee \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| TEN-001 | \| P0 \| Fix TEN-001/002/005: Critical orgId fallbacks \| 1h \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p1-create-lib-auth-tenant-utils-ts-30min-next-steps-lib-auth-tenant-utils-ts | \| P1 \| Create lib/auth/tenant-utils.ts \| 30min \| â€” \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p1-add-hr-module-rbac-guards-1h-next-steps-docs-pending-master-md-9931 | \| P1 \| Add HR module RBAC guards \| 1h \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| RTL-001 | \| P1 \| Fix RTL-001: Error page template \| 30min \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p2-add-logging-to-notification-catch-blocks-30min-next-steps-docs-pending-master-md-9933 | \| P2 \| Add logging to notification catch blocks \| 30min \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p2-add-hr-integration-tests-2h-missing-tests-docs-pending-master-md-9934 | \| P2 \| Add HR integration tests \| 2h \| â€” \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p3-type-safety-improvements-1h-next-steps-docs-pending-master-md-9935 | \| P3 \| Type safety improvements \| 1h \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| p3-index-verification-db-review-1h-next-steps-docs-pending-master-md-9936 | \| P3 \| Index verification (DB review) \| 1h \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| metric-value-status-next-steps-docs-pending-master-md-9983 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-3-185-passing-323-files-all-pass-missing-tests-docs-pending-master-md-9986 | \| Tests \| 3,185 passing (323 files) \| âœ… All pass \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| catch-null-0-remaining-in-app-api-eliminated-next-steps-app-api | \| `.catch(() => null)` \| 0 remaining in `app/api/` \| âœ… Eliminated \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| returns-503-on-optional-module-import-failure-next-steps-docs-pending-master-md-9993 | Returns 503 on optional module import failure | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| returns-503-on-organization-lookup-db-failure-next-steps-docs-pending-master-md-9996 | Returns 503 on organization lookup DB failure | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| search-route-ts-extracted-to-lib-permissions-ts-scoping-ts-entity-builders-ts-logic-errors-search-route-ts | `search/route.ts` â†’ extracted to `_lib/permissions.ts`, `scoping.ts`, `entity-builders.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| admin-notifications-send-route-ts-extracted-to-lib-channel-handlers-ts-recipient-resolver-ts-next-steps-admin-notifications-send-route-ts | `admin/notifications/send/route.ts` â†’ extracted to `_lib/channel-handlers.ts`, `recipient-resolver.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| souq-orders-route-ts-extracted-to-lib-order-lifecycle-ts-order-validation-ts-next-steps-souq-orders-route-ts | `souq/orders/route.ts` â†’ extracted to `_lib/order-lifecycle.ts`, `order-validation.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| fm-work-orders-id-transition-route-ts-extracted-to-lib-fsm-transitions-ts-transition-context-ts-next-steps-fm-work-orders-id-transition-route-ts | `fm/work-orders/[id]/transition/route.ts` â†’ extracted to `_lib/fsm-transitions.ts`, `transition-context.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| safe-session-test-ts-11-auth-infra-failure-scenarios-missing-tests-safe-session-test-ts | `safe-session.test.ts` (11) - Auth infra failure scenarios | action | ### ğŸ“ Current Progress & Planned Next Steps |
| campaigns-route-test-ts-17-souq-ads-campaigns-missing-tests-campaigns-route-test-ts | `campaigns.route.test.ts` (17) - Souq ads campaigns | action | ### ğŸ“ Current Progress & Planned Next Steps |
| settings-route-test-ts-17-souq-repricer-settings-missing-tests-settings-route-test-ts | `settings.route.test.ts` (17) - Souq repricer settings | action | ### ğŸ“ Current Progress & Planned Next Steps |
| vendors-route-test-ts-18-fm-marketplace-vendors-missing-tests-vendors-route-test-ts | `vendors.route.test.ts` (18) - FM marketplace vendors | action | ### ğŸ“ Current Progress & Planned Next Steps |
| metric-value-status-next-steps-docs-pending-master-md-10138 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commits-bc5f60662-head-pushed-next-steps-docs-pending-master-md-10141 | \| Commits \| `bc5f60662` (HEAD) \| âœ… Pushed \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-3-130-passing-319-files-all-pass-missing-tests-docs-pending-master-md-10142 | \| Tests \| 3,130 passing (319 files) \| âœ… All pass \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| route-refactoring-p2-extracted-helpers-from-2-large-route-files-efficiency-docs-pending-master-md-10146 | âœ… **Route Refactoring (P2)**: Extracted helpers from 2 large route files | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| auth-otp-send-1091-lines-extracted-to-lib-auth-otp-test-users-ts-lib-auth-otp-helpers-ts-missing-tests-auth-otp-send | `auth/otp/send` (1091 lines) â†’ extracted to `lib/auth/otp/test-users.ts` + `lib/auth/otp/helpers.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| payments-tap-webhook-815-lines-extracted-to-lib-finance-tap-webhook-handlers-ts-persistence-ts-next-steps-payments-tap-webhook | `payments/tap/webhook` (815 lines) â†’ extracted to `lib/finance/tap-webhook/handlers.ts` + `persistence.ts` | action | ### ğŸ“ Current Progress & Planned Next Steps |
| souq-kyc-submit-test-ts-17-claims-route-test-ts-22-missing-tests-kyc-submit-test-ts | Souq: `kyc-submit.test.ts` (17), `claims.route.test.ts` (22) | action | ### ğŸ“ Current Progress & Planned Next Steps |
| admin-benchmark-test-ts-10-users-route-test-ts-18-missing-tests-benchmark-test-ts | Admin: `benchmark.test.ts` (10), `users.route.test.ts` (18) | action | ### ğŸ“ Current Progress & Planned Next Steps |
| fm-expenses-test-ts-12-budgets-test-ts-18-missing-tests-expenses-test-ts | FM: `expenses.test.ts` (12), `budgets.test.ts` (18) | action | ### ğŸ“ Current Progress & Planned Next Steps |
| a29893220-refactor-p2-extract-helpers-from-large-routes-p1-module-tests-missing-tests-docs-pending-master-md-10157 | `a29893220` - refactor(P2): extract helpers from large routes + P1 module tests | action | ### ğŸ“ Current Progress & Planned Next Steps |
| bc5f60662-test-p1-add-critical-module-tests-claims-users-budgets-missing-tests-docs-pending-master-md-10158 | `bc5f60662` - test(P1): add critical module tests - claims, users, budgets | action | ### ğŸ“ Current Progress & Planned Next Steps |
| metric-value-status-next-steps-docs-pending-master-md-10268 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commands-pnpm-typecheck-pnpm-lint-pnpm-vitest-run-all-pass-2970-tests-missing-tests-docs-pending-master-md-10271 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm vitest run` \| âœ… All pass (2970 tests) \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-test-coverage-gap-analysis-route-size-audit-analyzed-missing-tests-docs-pending-master-md-10272 | \| Scope \| Test coverage gap analysis + route size audit \| âœ… Analyzed \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| created-lib-auth-safe-session-ts-with-getsessionorerror-getsessionornull-helpers-bugs-lib-auth-safe-session-ts | âœ… Created `lib/auth/safe-session.ts` with `getSessionOrError`/`getSessionOrNull` helpers | action | ### ğŸ“ Current Progress & Planned Next Steps |
| applied-auth-infra-aware-helper-to-29-occurrences-across-25-routes-next-steps-docs-pending-master-md-10277 | âœ… Applied auth-infra-aware helper to 29 occurrences across 25 routes | action | ### ğŸ“ Current Progress & Planned Next Steps |
| committed-12-commits-utility-files-tests-api-fixes-services-docs-missing-tests-docs-pending-master-md-10278 | âœ… Committed 12 commits (utility files, tests, API fixes, services, docs) | action | ### ğŸ“ Current Progress & Planned Next Steps |
| analyzed-test-coverage-gaps-souq-51-75-missing-admin-26-28-missing-fm-19-25-missing-missing-tests-docs-pending-master-md-10280 | âœ… Analyzed test coverage gaps: Souq 51/75 missing, Admin 26/28 missing, FM 19/25 missing | action | ### ğŸ“ Current Progress & Planned Next Steps |
| p1-add-priority-module-tests-souq-settlements-ads-seller-central-admin-notifications-billing-fm-work-orders-missing-tests-docs-pending-master-md-10283 | P1: Add priority module tests (Souq settlements/ads/seller-central, Admin notifications/billing, FM work-orders) | action | ### ğŸ“ Current Progress & Planned Next Steps |
| p2-split-large-route-files-auth-otp-send-1091-lines-payments-tap-webhook-815-lines-next-steps-docs-pending-master-md-10284 | P2: Split large route files (auth/otp/send 1091 lines, payments/tap/webhook 815 lines) | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| p2-add-negative-path-tests-for-auth-infra-failure-scenarios-missing-tests-docs-pending-master-md-10285 | P2: Add negative-path tests for auth infra failure scenarios | action | ### ğŸ“ Current Progress & Planned Next Steps |
| module-routes-tests-coverage-priority-missing-tests-missing-tests-docs-pending-master-md-10298 | \| Module \| Routes \| Tests \| Coverage \| Priority Missing Tests \| | action | #### Test Coverage Gaps by Module |
| LOGIC-126 | \| LOGIC-126 \| Large route files \| God-object anti-pattern with multiple responsibilities per route \| ğŸ”´ Open (P2 refactor) \| | action | #### Logic Errors |
| LOGIC-127 | \| LOGIC-127 \| Test coverage gaps \| Critical paths untested (settlements, KYC, billing) \| ğŸ”´ Open (P1 tests) \| | action | #### Logic Errors |
| missing-integration-tests-settlement-flows-kyc-verification-billing-benchmarks-have-no-coverage-missing-tests-docs-pending-master-md-10420 | **Missing integration tests**: Settlement flows, KYC verification, billing benchmarks have no coverage | action | #### Test Coverage Anti-Patterns Found |
| missing-negative-path-tests-no-tests-for-auth-infra-failures-db-outages-rate-limit-hits-missing-tests-docs-pending-master-md-10421 | **Missing negative-path tests**: No tests for auth infra failures, DB outages, rate limit hits | action | #### Test Coverage Anti-Patterns Found |
| no-e2e-for-critical-flows-settlements-payouts-kyc-approval-missing-end-to-end-validation-next-steps-docs-pending-master-md-10422 | **No E2E for critical flows**: Settlements, payouts, KYC approval missing end-to-end validation | action, effort | #### Test Coverage Anti-Patterns Found |
| metric-value-status-next-steps-docs-pending-master-md-10442 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commands-pnpm-typecheck-pnpm-lint-pnpm-vitest-run-all-pass-missing-tests-docs-pending-master-md-10445 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm vitest run` \| âœ… All pass \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-stage-and-commit-remaining-uncommitted-files-from-previous-sessions-update-pending-master-with-route-fix-summary-consider-adding-negative-path-tests-for-auth-infra-failure-scenarios-missing-tests-docs-pending-master-md-10450 | Next steps: Stage and commit remaining uncommitted files from previous sessions; update PENDING_MASTER with route fix summary; consider adding negative-path tests for auth infra failure scenarios. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| auth-errors-401-token-missing-expired-invalid-credentials-revoked-session-unauthorizederror-bugs-docs-pending-master-md-10498 | **Auth errors (401)**: Token missing/expired, invalid credentials, revoked session, UnauthorizedError | action, effort | ### ğŸ” Deep-Dive: Pattern Classification |
| metric-value-status-next-steps-docs-pending-master-md-10512 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commands-pnpm-typecheck-pnpm-lint-pnpm-test-models-playwright-e2e-timed-out-dev-servers-killed-partial-missing-tests-docs-pending-master-md-10515 | \| Commands \| `pnpm typecheck`, `pnpm lint`, `pnpm test` (models âœ…, Playwright e2e timed out; dev servers killed) \| âš ï¸ Partial \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-typecheck-lint-test-models-test-e2e-timed-out-scripts-run-playwright-sh-needs-rerun-or-skip-flag-missing-tests-scripts-run-playwright-sh | \| Typecheck/Lint/Tests \| typecheck âœ…; lint âœ…; test:models âœ…; test:e2e â³ Timed out (scripts/run-playwright.sh) \| â³ Needs rerun or skip flag \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-configure-per-org-scan-tokens-in-env-or-disable-token-required-and-rerun-playwright-skip-playwright-true-if-intentionally-skipped-to-confirm-gates-ensure-clients-always-supply-tenant-prefixed-keys-matches-presign-output-next-steps-docs-pending-master-md-10520 | Next steps: Configure per-org scan tokens in env (or disable token-required) and rerun Playwright (`SKIP_PLAYWRIGHT=true` if intentionally skipped) to confirm gates; ensure clients always supply tenant-prefixed keys (matches presign output). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| area-gap-status-next-steps-docs-pending-master-md-10543 | \| Area \| Gap \| Status \| | action, effort | #### Missing Tests |
| metric-value-status-next-steps-docs-pending-master-md-10558 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| commands-none-docs-only-review-not-run-next-steps-docs-pending-master-md-10561 | \| Commands \| None (docs-only review) \| âš ï¸ Not run \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-upload-scan-metadata-tenancy-and-token-gating-reviewed-next-steps-docs-pending-master-md-10562 | \| Scope \| Upload scan/metadata tenancy and token gating \| âœ… Reviewed \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-10563 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-located-master-pending-report-reviewed-upload-scan-status-verify-metadata-flows-and-safe-session-adoption-for-tenant-isolation-no-code-changes-yet-documentation-only-next-steps-docs-pending-master-md-10565 | Progress: Located Master Pending Report; reviewed upload scan/status/verify-metadata flows and safe-session adoption for tenant isolation; no code changes yet (documentation-only). | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-add-tenant-bound-s3-key-validation-shared-helper-for-upload-routes-namespace-scan-tokens-per-org-backfill-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-10566 | Next steps: Add tenant-bound S3 key validation + shared helper for upload routes, namespace scan tokens per org, backfill regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| early-reject-unscoped-s3-keys-todo-validate-org-bind-keys-before-hitting-s3-db-in-upload-scan-verify-routes-to-cut-needless-calls-and-noisy-logs-next-steps-docs-pending-master-md-10573 | \| Early reject unscoped S3 keys \| ğŸ”² TODO \| Validate/org-bind keys before hitting S3/DB in upload scan/verify routes to cut needless calls and noisy logs. \| | action, effort | #### Efficiency Improvements |
| BUG-1708 | \| BUG-1708 \| app/api/upload/verify-metadata/route.ts:37-119 \| Accepts arbitrary bucket keys without tenant/org check; any authenticated user with a guessed key can read object metadata across tenants. \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1709 | \| BUG-1709 \| app/api/upload/scan/route.ts:44-92 \| Triggers AV scan on unvalidated keys; no org-bound prefix validation, enabling cross-tenant scans and leakage of scan outcomes. \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1710 | \| BUG-1710 \| app/api/upload/scan-status/route.ts:106-209 \| Status lookup bypasses org scoping (token and session paths) despite comments claiming tenant verification; returns latest status for any key. \| ğŸ”´ Open \| | action | #### Bugs |
| LOGIC-124 | \| LOGIC-124 \| app/api/upload/scan-status/route.ts:83-210 \| Static token not namespaced to tenant and results not filtered by orgId, so a single leaked token exposes scan statuses across all keys. \| ğŸ”´ Open \| | action | #### Logic Errors |
| LOGIC-125 | \| LOGIC-125 \| app/api/upload/verify-metadata/route.ts:46-119 \| Uses org-aware rate limit keys but skips org-bound key enforcement, giving a false sense of tenant isolation while still exposing metadata. \| ğŸ”´ Open \| | action | #### Logic Errors |
| area-gap-status-next-steps-docs-pending-master-md-10589 | \| Area \| Gap \| Status \| | action, effort | #### Missing Tests |
| upload-metadata-scan-integration-tests-that-reject-keys-outside-the-caller-s-org-prefix-and-validate-org-bound-signing-for-scan-metadata-status-routes-todo-missing-tests-docs-pending-master-md-10591 | \| Upload metadata/scan \| Integration tests that reject keys outside the callerâ€™s org prefix and validate org-bound signing for scan/metadata/status routes. \| ğŸ”² TODO \| | action | #### Missing Tests |
| scan-token-auth-tests-ensuring-token-based-status-scan-paths-are-tenant-namespaced-and-fail-on-org-mismatch-or-missing-token-todo-missing-tests-docs-pending-master-md-10592 | \| Scan token auth \| Tests ensuring token-based status/scan paths are tenant-namespaced and fail on org mismatch or missing token. \| ğŸ”² TODO \| | action | #### Missing Tests |
| metric-value-status-next-steps-docs-pending-master-md-10604 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| branch-fix-graphql-resolver-todos-active-next-steps-fix-graphql-resolver-todos | \| Branch \| `fix/graphql-resolver-todos` \| âœ… Active \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| commands-node-tools-memory-selfcheck-js-pnpm-lint-inventory-org-passed-next-steps-node-tools-memory-selfcheck-js | \| Commands \| `node tools/memory-selfcheck.js`, `pnpm lint:inventory-org` \| âœ… Passed \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-orgid-isolation-across-graphql-souq-aqar-write-paths-in-review-next-steps-docs-pending-master-md-10608 | \| Scope \| OrgId isolation across GraphQL + Souq/Aqar write paths \| âœ… In review \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-10609 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-located-master-pending-report-and-refreshed-orgid-audit-notes-mapped-user-id-fallbacks-and-missing-tenant-audit-context-across-graphql-queries-mutations-and-souq-aqar-write-routes-next-steps-docs-pending-master-md-10611 | Progress: Located Master Pending Report and refreshed orgId audit notes; mapped user-id fallbacks and missing tenant/audit context across GraphQL queries/mutations and Souq/Aqar write routes. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-enforce-required-orgid-tenant-audit-context-on-graphql-reads-writes-remove-user-id-fallbacks-in-souq-aqar-writes-add-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-10612 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| normalize-org-once-per-graphql-request-and-reuse-todo-avoid-repeated-types-objectid-isvalid-calls-set-tenant-audit-context-once-per-request-efficiency-types-objectid-isvalid | \| Normalize org once per GraphQL request and reuse \| ğŸ”² TODO \| Avoid repeated `Types.ObjectId.isValid` calls; set tenant/audit context once per request. \| | action | #### Efficiency Improvements |
| short-circuit-graphql-reads-when-orgid-missing-todo-fail-before-db-work-for-dashboard-workorder-properties-invoice-to-prevent-orgless-scans-next-steps-docs-pending-master-md-10620 | \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail before DB work for dashboard/workOrder/properties/invoice to prevent orgless scans. \| | action, effort | #### Efficiency Improvements |
| BUG-1701 | \| BUG-1701 \| lib/graphql/index.ts:769-801 \| `workOrder` query lacks org filter; id-only lookup \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1703 | \| BUG-1703 \| lib/graphql/index.ts:936-1052 \| `createWorkOrder` writes with userId fallback instead of required org \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1704 | \| BUG-1704 \| app/api/souq/reviews/route.ts:61-108 \| POST falls back to user id; GET enforces org \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1705 | \| BUG-1705 \| app/api/aqar/listings/route.ts:99-138 \| orgId falls back to user.id \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1706 | \| BUG-1706 \| app/api/aqar/packages/route.ts:102-124 \| Payments/packages allow user-id org fallback \| ğŸ”´ Open \| | action | #### Bugs |
| BUG-1707 | \| BUG-1707 \| app/api/aqar/favorites/route.ts:61-138 \| Favorites stored with user-id fallback \| ğŸ”´ Open \| | action | #### Bugs |
| LOGIC-121 | \| LOGIC-121 \| GraphQL read resolvers \| No tenant/audit context set on read paths; inconsistent with mutation isolation \| ğŸ”´ Open \| | action, effort | #### Logic Errors |
| LOGIC-122 | \| LOGIC-122 \| Souq review flow \| Asymmetric org enforcement (GET strict, POST lax) leading to tenant drift \| ğŸ”´ Open \| | action, effort | #### Logic Errors |
| LOGIC-123 | \| LOGIC-123 \| Aqar writes \| Mixed orgId/userId persistence causes cross-tenant data and type drift \| ğŸ”´ Open \| | action, effort | #### Logic Errors |
| area-gap-status-next-steps-docs-pending-master-md-10641 | \| Area \| Gap \| Status \| | action, effort | #### Missing Tests |
| graphql-org-enforcement-coverage-for-org-required-orgless-rejection-on-queries-mutations-todo-missing-tests-docs-pending-master-md-10643 | \| GraphQL org enforcement \| Coverage for org-required + orgless rejection on queries/mutations \| ğŸ”² TODO \| | action | #### Missing Tests |
| souq-review-post-test-enforcing-session-orgid-and-stored-org-consistency-todo-missing-tests-docs-pending-master-md-10644 | \| Souq review POST \| Test enforcing session orgId and stored org consistency \| ğŸ”² TODO \| | action | #### Missing Tests |
| aqar-listing-package-favorites-tests-failing-when-orgid-absent-and-asserting-correct-tenant-org-persisted-todo-missing-tests-docs-pending-master-md-10645 | \| Aqar listing/package/favorites \| Tests failing when orgId absent and asserting correct tenant org persisted \| ğŸ”² TODO \| | action | #### Missing Tests |
| e2e-stability-rerun-pnpm-playwright-test-tests-e2e-smoke-reporter-list-workers-1-timeout-120000-or-enable-debug-pw-api-to-surface-hang-review-scripts-run-playwright-sh-for-blocking-setup-missing-tests-pnpm-playwright-test-tests-e2e-smoke-reporter-list-workers-1-timeout-120000 | E2E stability: rerun `pnpm playwright test tests/e2e/smoke --reporter=list --workers=1 --timeout=120000` (or enable `DEBUG=pw:api`) to surface hang; review `scripts/run-playwright.sh` for blocking setup. | action | ### â­ï¸ Planned Next Steps |
| tests-backfill-the-11-service-unit-gaps-keep-lint-typecheck-test-gates-green-after-changes-missing-tests-docs-pending-master-md-10663 | Tests: backfill the 11 service/unit gaps; keep lint/typecheck/test gates green after changes. | action | ### â­ï¸ Planned Next Steps |
| logging-replace-remaining-console-usages-with-logger-for-observability-and-pii-safety-next-steps-docs-pending-master-md-10664 | Logging: replace remaining console usages with `logger` for observability and PII safety. | action, effort | ### â­ï¸ Planned Next Steps |
| EFF-002 | \| Efficiency \| EFF-002 console statements (12) \| Open \| Swap `console.*` in `app/privacy/page.tsx`, `app/global-error.tsx`, `lib/startup-checks.ts` with structured logger. \| | action | ### ğŸ“‹ Enhancements for Production Readiness |
| BUG-002 | \| Bugs \| BUG-002 GraphQL resolvers TODO (7) \| Open \| Implement or document stubs in `lib/graphql/index.ts`. \| | action | ### ğŸ“‹ Enhancements for Production Readiness |
| bugs-release-gate-environments-missing-open-create-github-environments-staging-production-approval-production-to-silence-workflow-warnings-bugs-docs-pending-master-md-10672 | \| Bugs \| Release-gate environments missing \| Open \| Create GitHub environments `staging`, `production-approval`, `production` to silence workflow warnings. \| | action | ### ğŸ“‹ Enhancements for Production Readiness |
| logic-playwright-smoke-timeout-open-diagnose-e2e-hang-run-narrowed-suite-with-debug-timeout-flags-inspect-playwright-hooks-setup-bugs-docs-pending-master-md-10673 | \| Logic \| Playwright smoke timeout \| Open \| Diagnose E2E hang; run narrowed suite with debug/timeout flags; inspect Playwright hooks/setup. \| | action | ### ğŸ“‹ Enhancements for Production Readiness |
| workflow-diagnostics-confirmed-as-environment-setup-gaps-staging-production-approval-production-rather-than-code-defects-next-steps-docs-pending-master-md-10690 | Workflow diagnostics confirmed as environment setup gaps (staging / production-approval / production) rather than code defects. | action | ### ğŸ“ Current Progress |
| priority-task-status-next-steps-docs-pending-master-md-10693 | \| # \| Priority \| Task \| Status \| | action, effort | ### ğŸš§ Planned Next Steps |
| 1-add-guarded-json-parsing-to-the-remaining-66-api-routes-parsebodyornull-400-fallback-not-started-next-steps-docs-pending-master-md-10695 | \| 1 \| ğŸ”´ \| Add guarded JSON parsing to the remaining 66 API routes (`parseBodyOrNull` + 400 fallback) \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| PERF-001 | \| 3 \| ğŸŸ¡ \| Refactor auto-repricer (PERF-001) to batch BuyBoxService calls + `bulkWrite` \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 4-raise-api-test-coverage-for-auth-payments-marketplace-beyond-6-4-not-started-missing-tests-6-4 | \| 4 \| ğŸŸ¡ \| Raise API test coverage for auth/payments/marketplace beyond ~6.4% \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 5-create-github-environments-staging-production-approval-production-to-clear-workflow-gates-not-started-next-steps-docs-pending-master-md-10699 | \| 5 \| ğŸŸ¡ \| Create GitHub environments (`staging`, `production-approval`, `production`) to clear workflow gates \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| area-gap-priority-status-next-steps-docs-pending-master-md-10717 | \| Area \| Gap \| Priority \| Status \| | action, effort | #### Missing Tests |
| payments-tap-unit-webhook-tests-for-lib-finance-tap-payments-ts-lib-finance-checkout-ts-critical-pending-missing-tests-lib-finance-tap-payments-ts | \| Payments/TAP \| Unit + webhook tests for `lib/finance/tap-payments.ts`, `lib/finance/checkout.ts` \| ğŸ”´ Critical \| â³ Pending \| | action | #### Missing Tests |
| auth-api-broaden-coverage-across-14-auth-routes-high-pending-missing-tests-docs-pending-master-md-10720 | \| Auth/API \| Broaden coverage across 14 auth routes \| ğŸŸ¡ High \| â³ Pending \| | action | #### Missing Tests |
| marketplace-souq-settlements-seller-flow-coverage-high-pending-missing-tests-docs-pending-master-md-10721 | \| Marketplace/Souq \| Settlements/seller flow coverage \| ğŸŸ¡ High \| â³ Pending \| | action | #### Missing Tests |
| workflow-env-gaps-release-gate-environments-missing-creating-staging-production-approval-production-resolves-all-workflow-warnings-without-code-changes-next-steps-docs-pending-master-md-10727 | **Workflow env gaps**: release-gate environments missing; creating `staging`, `production-approval`, `production` resolves all workflow warnings without code changes. | action | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| hardened-superadmin-rotation-to-env-only-credentials-via-requireenv-with-no-literal-echoes-fails-fast-when-envs-are-missing-scripts-update-superadmin-credentials-ts-21-91-bugs-scripts-update-superadmin-credentials-ts-21-91 | âœ… Hardened SuperAdmin rotation to env-only credentials via `requireEnv` with no literal echoes; fails fast when envs are missing (`scripts/update-superadmin-credentials.ts:21-91`). | action | ### ğŸ“ Current Progress |
| priority-task-status-next-steps-docs-pending-master-md-10744 | \| # \| Priority \| Task \| Status \| | action, effort | ### ğŸš§ Planned Next Steps |
| 1-p0-wire-souq-fulfillment-pricing-and-any-remaining-flows-to-getsouqruleconfig-orgid-add-regression-tests-asserting-override-base-telemetry-not-started-missing-tests-docs-pending-master-md-10746 | \| 1 \| **P0** \| Wire Souq fulfillment/pricing and any remaining flows to `getSouqRuleConfig(orgId)`; add regression tests asserting override/base telemetry. \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 2-p0-implement-per-tenant-admin-ui-for-rule-management-with-audit-logging-of-edits-overrides-not-started-next-steps-docs-pending-master-md-10747 | \| 2 \| **P0** \| Implement per-tenant admin UI for rule management with audit logging of edits/overrides. \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| 3-p0-extend-secrets-monitor-token-list-url-encoded-password-variants-and-integrate-gate-into-ci-scrub-docs-containing-live-literals-not-started-next-steps-docs-pending-master-md-10748 | \| 3 \| **P0** \| Extend secrets monitor token list (URL-encoded/password variants) and integrate gate into CI; scrub docs containing live literals. \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| 4-p1-align-env-samples-docs-to-require-aws-region-aws-s3-bucket-superadmin-and-document-fail-fast-rotation-behavior-not-started-next-steps-docs-pending-master-md-10749 | \| 4 \| **P1** \| Align env samples/docs to require AWS_REGION/AWS_S3_BUCKET + SUPERADMIN_* and document fail-fast rotation behavior. \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 5-p1-run-playwright-smoke-e2e-auth-checkout-returns-claims-after-above-changes-not-started-next-steps-docs-pending-master-md-10750 | \| 5 \| **P1** \| Run Playwright smoke/e2e (auth/checkout/returns/claims) after above changes. \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| BUG-1527 | \| BUG-1527 \| ğŸŸ  High \| Souq fulfillment/pricing \| Still bypass shared rules (no `getSouqRuleConfig` usage), risking inconsistent return/fraud windows. \| ğŸ”´ TODO \| | action | #### Identified Bugs |
| LOGIC-020 | \| LOGIC-020 \| Souq rule consumption \| Missing central getter in fulfillment/pricing flows means overrides/telemetry not applied. \| Refactor to call `getSouqRuleConfig(orgId)` everywhere and delete local thresholds. \| ğŸ”´ TODO \| | action | #### Logic Errors |
| LOGIC-021 | \| LOGIC-021 \| Secrets guard scope \| `tests/unit/security/banned-literals.test.ts` ignores `docs/**`, leaving documented literals unsanitized. \| Add docs scrub task or broaden guard with a sanitized allowlist. \| ğŸ”´ TODO \| | action | #### Logic Errors |
| souq-rule-overrides-unit-integration-tests-for-override-vs-base-config-across-returns-claims-fulfillment-pricing-assert-telemetry-counters-p0-missing-missing-tests-docs-pending-master-md-10778 | \| Souq rule overrides \| Unit/integration tests for override vs base config across returns/claims/fulfillment/pricing; assert telemetry counters. \| P0 \| ğŸ”´ Missing \| | action | #### Missing Tests |
| env-guards-tests-for-aws-region-aws-s3-bucket-fail-fast-and-rotation-script-env-requirements-p1-missing-missing-tests-docs-pending-master-md-10779 | \| Env guards \| Tests for AWS_REGION/AWS_S3_BUCKET fail-fast and rotation script env requirements. \| P1 \| ğŸ”´ Missing \| | action | #### Missing Tests |
| secrets-gate-in-ci-ensure-banned-literals-test-is-wired-into-ci-and-extended-token-list-verified-p1-missing-missing-tests-docs-pending-master-md-10780 | \| Secrets gate in CI \| Ensure banned-literals test is wired into CI and extended token list verified. \| P1 \| ğŸ”´ Missing \| | action | #### Missing Tests |
| playwright-smoke-auth-checkout-returns-claims-after-rule-ui-config-rollout-p1-pending-next-steps-docs-pending-master-md-10781 | \| Playwright smoke \| Auth/checkout/returns/claims after rule UI + config rollout. \| P1 \| ğŸ”´ Pending \| | action | #### Missing Tests |
| env-readiness-enforcement-lib-config-constants-ts-24-47-now-throws-on-missing-aws-region-aws-s3-bucket-but-env-sample-docs-still-show-optional-s3-fields-add-documentation-gating-to-prevent-regressions-next-steps-lib-config-constants-ts-24-47 | **Env Readiness Enforcement** â€” `lib/config/constants.ts:24-47` now throws on missing AWS_REGION/AWS_S3_BUCKET, but env sample/docs still show optional S3 fields; add documentation gating to prevent regressions. | action | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| to-run-after-pending-changes-pnpm-typecheck-pnpm-lint-pnpm-test-feat-marketplace-api-tests-pnpm-test-e2e-playwright-smoke-for-auth-checkout-returns-claims-missing-tests-docs-pending-master-md-10791 | â³ To run after pending changes: `pnpm typecheck && pnpm lint && pnpm test` (feat/marketplace-api-tests), `pnpm test:e2e` (Playwright smoke for auth/checkout/returns/claims). | action | ### ğŸ§ª Verification |
| priority-task-status-next-steps-docs-pending-master-md-10823 | \| # \| Priority \| Task \| Status \| | action, effort | ### ğŸš§ Planned Next Steps |
| 1-p0-apply-auth-infra-aware-helper-to-20-routes-with-getsessionuser-catch-null-not-started-next-steps-docs-pending-master-md-10825 | \| 1 \| **P0** \| Apply auth infra-aware helper to 20+ routes with `getSessionUser(...).catch(() => null)` \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| 2-p1-commit-remaining-uncommitted-files-9-modified-4-new-test-files-not-started-missing-tests-docs-pending-master-md-10826 | \| 2 \| **P1** \| Commit remaining uncommitted files (9 modified, 4 new test files) \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 3-p1-add-missing-module-tests-souq-51-gap-admin-22-gap-fm-17-gap-not-started-missing-tests-docs-pending-master-md-10827 | \| 3 \| **P1** \| Add missing module tests (Souq 51 gap, Admin 22 gap, FM 17 gap) \| â³ Not Started \| | action | ### ğŸš§ Planned Next Steps |
| 4-p2-split-large-route-files-400-lines-auth-otp-send-payments-tap-webhook-search-not-started-next-steps-docs-pending-master-md-10828 | \| 4 \| **P2** \| Split large route files (>400 lines): auth/otp/send, payments/tap/webhook, search \| â³ Not Started \| | action, effort | ### ğŸš§ Planned Next Steps |
| BUG-006 | \| BUG-006 \| ğŸŸ  High \| 20+ routes \| `getSessionUser(...).catch(() => null)` masks auth infra failures as 401 \| ğŸ”´ TODO \| | action, effort | #### Identified Bugs |
| BUG-007 | \| BUG-007 \| ğŸŸ¡ Medium \| 9 uncommitted files \| Previous session changes not yet committed \| ğŸ”´ TODO \| | action, effort | #### Identified Bugs |
| LOGIC-005 | \| LOGIC-005 \| 20+ upload/help/onboarding routes \| Auth failure treated as 401 (masks 503 infra errors) \| Apply `getSessionOrError` wrapper \| ğŸ”´ TODO \| | action, effort | #### Logic Errors |
| auth-infra-auth-store-failure-503-for-routes-with-getsessionorerror-p1-todo-bugs-docs-pending-master-md-10856 | \| Auth-infra \| Auth store failure â†’ 503 for routes with `getSessionOrError` \| P1 \| ğŸ”´ TODO \| | action, effort | #### Missing Tests |
| P1-P2 | \| Module coverage \| 51 Souq routes, 22 Admin routes, 17 FM routes need tests \| P1-P2 \| ğŸ”´ TODO \| | action | #### Missing Tests |
| module-routes-estimated-tests-gap-missing-tests-docs-pending-master-md-10903 | \| Module \| Routes \| Estimated Tests \| Gap \| | action | #### Pattern 3: Test Coverage Gaps |
| located-master-pending-report-no-duplicates-and-reviewed-prior-hardening-work-safe-session-parser-rollouts-next-steps-docs-pending-master-md-10947 | Located Master Pending Report (no duplicates) and reviewed prior hardening work (safe session/parser rollouts). | action, effort | ### ğŸ“ Current Progress |
| identified-remaining-silent-auth-and-parse-fallback-hotspots-across-upload-help-onboarding-settings-routes-that-are-still-dirty-in-the-workspace-preventing-safe-edits-without-overwriting-in-progress-changes-next-steps-docs-pending-master-md-10948 | Identified remaining silent-auth and parse-fallback hotspots across upload/help/onboarding/settings routes that are still dirty in the workspace, preventing safe edits without overwriting in-progress changes. | action | ### ğŸ“ Current Progress |
| align-and-merge-local-changes-on-dirty-upload-help-onboarding-settings-files-then-apply-getsessionorerror-to-remove-getsessionuser-catch-null-fallbacks-bugs-docs-pending-master-md-10952 | Align and merge local changes on dirty upload/help/onboarding/settings files, then apply `getSessionOrError` to remove `getSessionUser(...).catch(() => null)` fallbacks. | action | ### ğŸš§ Planned Next Steps |
| extend-parsebodysafe-parsebody-to-remaining-upload-variants-scan-scan-status-verify-metadata-presign-siblings-and-keep-lint-json-fallbacks-clean-next-steps-docs-pending-master-md-10953 | Extend `parseBodySafe`/`parseBody` to remaining upload variants (`scan`, `scan-status`, `verify-metadata`, presign siblings) and keep `lint:json-fallbacks` clean. | action, effort | ### ğŸš§ Planned Next Steps |
| missing-tests-need-integration-tests-for-resume-download-storage-failure-403-503-paths-negative-path-tests-for-auth-infra-failures-on-upload-help-onboarding-settings-parser-failure-tests-on-remaining-upload-variants-missing-tests-docs-pending-master-md-10960 | **Missing tests**: Need integration tests for resume download storage failure/403/503 paths; negative-path tests for auth infra failures on upload/help/onboarding/settings; parser failure tests on remaining upload variants. | action | ### ğŸ§© Production-Readiness Enhancements |
| observability-gaps-av-scan-availability-is-not-reported-to-dashboards-auth-infra-failures-counted-only-in-logs-add-metrics-auth-infra-failure-av-scan-unavailable-and-alerts-to-catch-outages-early-next-steps-docs-pending-master-md-10965 | **Observability gaps**: AV scan availability is not reported to dashboards; auth infra failures counted only in logs. Add metrics (`auth_infra_failure`, `av_scan_unavailable`) and alerts to catch outages early. | action, effort | ### ğŸ” Deep-Dive Analysis |
| roll-the-telemetry-aware-session-helper-to-remaining-upload-help-onboarding-settings-routes-still-showing-silent-auth-fallbacks-in-git-status-next-steps-docs-pending-master-md-10976 | Roll the telemetry-aware session helper to remaining upload/help/onboarding/settings routes still showing silent auth fallbacks in git status. | action | ### ğŸš§ Planned Next Steps |
| extend-safe-parser-adoption-to-remaining-upload-scan-verify-metadata-routes-and-ensure-ci-lint-json-fallbacks-stays-clean-next-steps-docs-pending-master-md-10977 | Extend safe parser adoption to remaining upload/scan/verify-metadata routes and ensure CI `lint:json-fallbacks` stays clean. | action, effort | ### ğŸš§ Planned Next Steps |
| priority-task-next-steps-docs-pending-master-md-11000 | \| # \| Priority \| Task \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-roll-shared-json-parser-across-remaining-inline-fallbacks-help-list-context-aqar-listings-packages-fm-budgets-projects-test-api-upload-presign-variants-missing-tests-docs-pending-master-md-11002 | \| 1 \| **P0** \| Roll shared JSON parser across remaining inline fallbacks (help list/context, Aqar listings/packages, FM budgets, projects test API, upload presign variants). \| | action | ### ğŸ“‹ Planned Next Steps |
| 2-p0-apply-auth-infra-aware-helper-to-onboarding-upload-settings-logo-subscription-adjacent-routes-to-distinguish-503-vs-401-next-steps-docs-pending-master-md-11003 | \| 2 \| **P0** \| Apply auth infra-aware helper to onboarding/upload/settings logo/subscription-adjacent routes to distinguish 503 vs 401. \| | action | ### ğŸ“‹ Planned Next Steps |
| 3-p1-keep-lint-json-fallbacks-strict-in-ci-and-add-allowlist-only-where-absolutely-necessary-next-steps-docs-pending-master-md-11004 | \| 3 \| **P1** \| Keep `lint:json-fallbacks --strict` in CI and add allowlist only where absolutely necessary. \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 4-p1-add-alerts-dashboards-for-tenant-config-load-failure-trial-request-persist-failure-dlq-sends-and-auth-store-outage-503-events-next-steps-docs-pending-master-md-11005 | \| 4 \| **P1** \| Add alerts/dashboards for tenant_config_load_failure, trial_request_persist_failure/DLQ sends, and auth store outage (503) events. \| | action | ### ğŸ“‹ Planned Next Steps |
| 5-p2-extend-negative-path-tests-for-new-parser-auth-helper-coverage-malformed-json-auth-store-failures-dlq-webhook-failure-missing-tests-docs-pending-master-md-11006 | \| 5 \| **P2** \| Extend negative-path tests for new parser/auth helper coverage (malformed JSON, auth store failures, DLQ webhook failure). \| | action | ### ğŸ“‹ Planned Next Steps |
| tenant-config-callers-still-need-to-handle-thrown-errors-ensure-upstream-apis-map-to-503-or-explicit-tenant-missing-bugs-docs-pending-master-md-11020 | Tenant-config callers still need to handle thrown errors; ensure upstream APIs map to 503 or explicit tenant-missing. | action | ### ğŸ› ï¸ Enhancements for Production Readiness |
| health-hinted-503s-used-by-auth-test-session-trial-request-and-upload-scan-config-policy-failures-helper-tolerates-missing-nexturl-missing-tests-docs-pending-master-md-11049 | Health-hinted 503s used by auth test session, trial-request, and upload scan config/policy failures; helper tolerates missing `nextUrl`. | action | ### ğŸ“ Current Progress |
| priority-task-next-steps-docs-pending-master-md-11055 | \| # \| Priority \| Task \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-apply-health-hints-to-additional-503-surfaces-av-scan-downstream-errors-tenant-config-callers-fm-report-scan-paths-and-propagate-traceid-into-logs-bugs-docs-pending-master-md-11057 | \| 1 \| **P0** \| Apply health-hints to additional 503 surfaces (AV scan downstream errors, tenant-config callers, FM report scan paths) and propagate traceId into logs. \| | action | ### ğŸ“‹ Planned Next Steps |
| 2-p1-add-dashboards-alerts-for-tenant-config-load-failure-trial-request-persist-failure-dlq-failures-and-auth-store-503-spikes-next-steps-docs-pending-master-md-11058 | \| 2 \| **P1** \| Add dashboards/alerts for `tenant_config_load_failure`, `trial_request_persist_failure`, DLQ failures, and auth-store 503 spikes. \| | action | ### ğŸ“‹ Planned Next Steps |
| 3-p1-keep-lint-json-fallbacks-strict-enforced-add-allowlist-only-if-absolutely-needed-next-steps-docs-pending-master-md-11059 | \| 3 \| **P1** \| Keep `lint:json-fallbacks --strict` enforced; add allowlist only if absolutely needed. \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 4-p2-run-broader-suites-pnpm-test-or-focused-api-suites-to-validate-the-wider-surface-beyond-targeted-vitest-missing-tests-docs-pending-master-md-11060 | \| 4 \| **P2** \| Run broader suites (`pnpm test` or focused API suites) to validate the wider surface beyond targeted vitest. \| | action | ### ğŸ“‹ Planned Next Steps |
| none-new-primary-gap-is-missing-health-hints-alerts-on-other-503-surfaces-and-absent-dashboards-for-emitted-metrics-next-steps-docs-pending-master-md-11070 | None new; primary gap is missing health-hints/alerts on other 503 surfaces and absent dashboards for emitted metrics. | action, effort | ### ğŸ› ï¸ Enhancements for Production Readiness |
| health-hints-coverage-gap-only-auth-test-session-trial-request-and-upload-scan-config-policy-failures-emit-health-hinted-503s-apply-helper-to-other-infra-dependent-paths-tenant-config-consumers-av-scan-downstream-errors-fm-report-scan-paths-missing-tests-docs-pending-master-md-11082 | **Health hints coverage gap**: Only auth test session, trial-request, and upload scan config/policy failures emit health-hinted 503s. Apply helper to other infra-dependent paths (tenant-config consumers, AV scan downstream errors, FM report scan paths). | action | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| alerting-gap-metrics-exist-tenant-config-load-failure-trial-request-persist-failure-dlq-failures-auth-infra-failure-but-dashboards-alerts-are-missing-risk-of-silent-degradation-next-steps-docs-pending-master-md-11083 | **Alerting gap**: Metrics exist (`tenant_config_load_failure`, `trial_request_persist_failure`, DLQ failures, `auth_infra_failure`) but dashboards/alerts are missing; risk of silent degradation. | action | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| priority-task-next-steps-docs-pending-master-md-11101 | \| # \| Priority \| Task \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-finish-migrating-remaining-inline-json-fallbacks-help-list-context-aqar-listings-packages-fm-budgets-projects-test-api-remaining-upload-onboarding-routes-missing-tests-docs-pending-master-md-11103 | \| 1 \| **P0** \| Finish migrating remaining inline JSON fallbacks (help list/context, Aqar listings/packages, FM budgets, projects test API, remaining upload/onboarding routes). \| | action | ### ğŸ“‹ Planned Next Steps |
| 2-p0-apply-auth-infra-aware-helper-to-onboarding-settings-logo-and-remaining-upload-subscription-adjacent-routes-ensure-503-on-auth-store-outages-next-steps-docs-pending-master-md-11104 | \| 2 \| **P0** \| Apply auth infra-aware helper to onboarding, settings logo, and remaining upload/subscription-adjacent routes; ensure 503 on auth-store outages. \| | action | ### ğŸ“‹ Planned Next Steps |
| 3-p1-add-alerts-dashboards-for-tenant-config-load-failure-trial-request-persist-failure-dlq-send-file-write-failures-and-auth-store-503-events-next-steps-docs-pending-master-md-11105 | \| 3 \| **P1** \| Add alerts/dashboards for `tenant_config_load_failure`, `trial_request_persist_failure`, DLQ send/file write failures, and auth-store 503 events. \| | action | ### ğŸ“‹ Planned Next Steps |
| BUG-003 | \| BUG-003 \| ğŸŸ  High \| 20+ routes \| `.json().catch(() => ({}))` swallows parse errors \| ğŸ”´ TODO \| 2h \| | action | #### A. Known Bugs by Severity |
| BUG-005 | \| BUG-005 \| ğŸŸ¡ Medium \| `files/resumes/[file]/route.ts` \| Auth failure â†’ 401 (masks 503) \| ğŸ”´ TODO \| 30m \| | action | #### A. Known Bugs by Severity |
| module-routes-tests-coverage-gap-priority-missing-tests-docs-pending-master-md-11267 | \| Module \| Routes \| Tests \| Coverage \| Gap \| Priority \| | action | #### A. Coverage by Module |
| latest-commit-d7c82f309-uncommitted-pending-8-files-missing-tests-docs-pending-master-md-11391 | \| **Latest Commit** \| `d7c82f309` \| `<uncommitted>` \| ğŸ”„ Pending \| +8 files \| | action | ### ğŸ“ Current Progress Summary |
| open-prs-2-2-active-549-550-next-steps-docs-pending-master-md-11399 | \| **Open PRs** \| 2 \| 2 \| ğŸ”„ Active \| #549, #550 \| | action, effort | ### ğŸ“ Current Progress Summary |
| SILENT-HELP-JSON-001 | **SILENT-HELP-JSON-001 (Moderate)** â€” `app/api/help/escalate/route.ts`: Malformed JSON creates tickets with missing context and no logging. | action | ### 3) Bugs and Errors |
| error-rate-visibility-is-missing-add-counters-alerts-per-route-group-auth-upload-help-otp-av-and-structured-logs-status-reason-correlation-id-bugs-docs-pending-master-md-11422 | Error-rate visibility is missing; add counters/alerts per route group (auth/upload/help/OTP/AV) and structured logs (status, reason, correlation id). | action, effort | ### 3) Bugs and Errors |
| located-and-updated-the-master-pending-report-no-duplicate-file-documented-fresh-findings-from-repo-wide-ripgrep-of-silent-handlers-catch-null-undefined-false-next-steps-docs-pending-master-md-11444 | Located and updated the Master Pending Report (no duplicate file); documented fresh findings from repo-wide ripgrep of silent handlers (`catch(() => null\|{}\|undefined\|false)`). | action, effort | ### ğŸ“ Current Progress |
| replace-inline-getsessionuser-catch-null-usage-in-upload-help-onboarding-settings-subscription-resume-routes-with-a-shared-helper-that-logs-infra-failures-and-returns-503-preserving-401-for-real-auth-denials-next-steps-docs-pending-master-md-11449 | Replace inline `getSessionUser(...).catch(() => null)` usage in upload/help/onboarding/settings/subscription/resume routes with a shared helper that logs infra failures and returns 503, preserving 401 for real auth denials. | action | ### ğŸš§ Planned Next Steps |
| standardize-request-body-parsing-on-a-safe-parser-that-emits-400-422-with-telemetry-replace-req-json-catch-null-in-help-escalation-aqar-packages-listings-fm-budgets-patch-projects-test-api-upload-presign-missing-tests-req-json | Standardize request body parsing on a safe parser that emits 400/422 with telemetry (replace `req.json().catch(() => ({}\|null))` in help escalation, Aqar packages/listings, FM budgets PATCH, projects test API, upload presign). | action | ### ğŸš§ Planned Next Steps |
| missing-tests-missing-tests-docs-pending-master-md-11464 | **Missing tests** | action | ### ğŸ§© Production-Readiness Enhancements |
| P0-001 | \| P0-001 \| Security \| `assistant/query/route.ts:259` \| WorkOrder.find without orgId \| ğŸ”´ TODO \| Add tenant scoping \| | action | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| P0-002 | \| P0-002 \| Security \| `pm/plans/route.ts:42,68,189` \| FMPMPlan.find without orgId \| ğŸ”´ TODO \| Add tenant scoping \| | action | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| P0-003 | \| P0-003 \| Security \| `vendors/route.ts:214,218` \| Vendor.find/countDocuments missing orgId \| âš ï¸ Verify \| Check if scoped elsewhere \| | action | #### ğŸ”´ P0 â€” Critical (Security/Data Integrity) |
| P1-002 | \| P1-002 \| Reliability \| vendor/apply/route.ts \| Silent DB failure on apply \| ğŸ”´ TODO \| Return 503 on failure \| | action | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| P1-003 | \| P1-003 \| Reliability \| Multiple upload routes \| getSessionUser silent failures \| ğŸ”´ TODO \| Add telemetry wrapper \| | action | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| P1-004 | \| P1-004 \| Testing \| Souq module \| 51 routes missing tests \| ğŸŸ  Backlog \| Add test files \| | action | #### ğŸŸ  P1 â€” High Priority (Reliability) |
| P2-002 | \| P2-002 \| Validation \| ~118 routes \| Missing Zod validation \| ğŸŸ¡ Backlog \| Add schemas \| | action | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-003 | \| P2-003 \| Testing \| Aqar module \| 11 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | action | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-004 | \| P2-004 \| Testing \| FM module \| 17 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | action | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P2-005 | \| P2-005 \| Testing \| Admin module \| 23 routes missing tests \| ğŸŸ¡ Backlog \| Add test files \| | action | #### ğŸŸ¡ P2 â€” Medium Priority (Architecture/Efficiency) |
| P3-003 | \| P3-003 \| Documentation \| OpenAPI \| Spec needs updating \| ğŸŸ¢ Backlog \| Sync with routes \| | action, effort | #### ğŸŸ¢ P3 â€” Low Priority (Nice to Have) |
| module-routes-tests-coverage-gap-missing-tests-docs-pending-master-md-11596 | \| Module \| Routes \| Tests \| Coverage \| Gap \| | action | #### Pattern 4: Test Coverage Gaps |
| total-gap-102-next-steps-docs-pending-master-md-11602 | \| **Total Gap** \| â€” \| â€” \| â€” \| **102** \| | action, effort | #### Pattern 4: Test Coverage Gaps |
| priority-task-effort-status-next-steps-docs-pending-master-md-11608 | \| # \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-add-orgid-to-assistant-query-routes-30m-todo-next-steps-docs-pending-master-md-11610 | \| 1 \| **P0** \| Add orgId to assistant/query routes \| 30m \| ğŸ”´ TODO \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 2-p0-add-orgid-to-pm-plans-routes-30m-todo-next-steps-docs-pending-master-md-11611 | \| 2 \| **P0** \| Add orgId to pm/plans routes \| 30m \| ğŸ”´ TODO \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 3-p1-create-safeparsejson-utility-1h-todo-next-steps-docs-pending-master-md-11612 | \| 3 \| **P1** \| Create safeParseJSON utility \| 1h \| ğŸ”´ TODO \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 4-p1-fix-vendor-apply-silent-failure-30m-todo-next-steps-docs-pending-master-md-11613 | \| 4 \| **P1** \| Fix vendor/apply silent failure \| 30m \| ğŸ”´ TODO \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 5-p0-commit-push-current-changes-10m-ready-next-steps-docs-pending-master-md-11614 | \| 5 \| **P0** \| Commit & push current changes \| 10m \| ğŸ”„ Ready \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 6-p0-merge-prs-549-550-20m-ready-next-steps-docs-pending-master-md-11615 | \| 6 \| **P0** \| Merge PRs #549, #550 \| 20m \| ğŸ”„ Ready \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 7-p1-add-souq-module-tests-51-4h-backlog-missing-tests-docs-pending-master-md-11616 | \| 7 \| **P1** \| Add Souq module tests (51) \| 4h \| ğŸŸ  Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| 8-p2-split-large-route-files-5h-backlog-next-steps-docs-pending-master-md-11617 | \| 8 \| **P2** \| Split large route files \| 5h \| ğŸŸ¡ Backlog \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| centralized-souq-fraud-return-rule-windows-with-tenant-overrides-returns-claims-investigation-now-consume-the-shared-config-next-steps-docs-pending-master-md-11641 | Centralized Souq fraud/return rule windows with tenant overrides; returns + claims investigation now consume the shared config. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-rerun-playwright-e2e-when-runtime-allows-extend-banned-literal-list-if-new-sensitive-tokens-appear-ensure-pipelines-set-aws-envs-and-superadmin-secrets-before-rotation-next-steps-docs-pending-master-md-11643 | Next: rerun Playwright e2e when runtime allows; extend banned-literal list if new sensitive tokens appear; ensure pipelines set AWS envs and SuperAdmin secrets before rotation. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-souq-rule-overrides-tests-unit-services-souq-rules-config-test-ts-verifies-defaults-and-tenant-override-merge-missing-tests-tests-unit-services-souq-rules-config-test-ts | \| Missing Tests \| Souq rule overrides \| tests/unit/services/souq-rules-config.test.ts \| Verifies defaults and tenant override merge. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Production Readiness) |
| env-enforcement-s3-guard-now-fails-fast-in-prod-consider-similar-guards-for-other-critical-providers-email-sms-if-gaps-surface-bugs-docs-pending-master-md-11658 | Env enforcement: S3 guard now fails fast in prod; consider similar guards for other critical providers (email/SMS) if gaps surface. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| identified-additional-silent-failure-points-vendor-apply-submissions-upload-auth-session-cluster-otp-org-resolution-resume-download-fm-report-av-scan-not-covered-in-the-last-audit-next-steps-docs-pending-master-md-11666 | Identified additional silent-failure points (vendor apply submissions, upload/auth/session cluster, OTP org resolution, resume download, FM report AV scan) not covered in the last audit. | action, effort | ### ğŸ“ Current Progress & Next Steps |
| no-commands-executed-documentation-only-update-next-steps-docs-pending-master-md-11667 | No commands executed (documentation-only update). | action, effort | ### ğŸ“ Current Progress & Next Steps |
| SILENT-UPLOAD-AUTH-CLUSTER | \| SILENT-UPLOAD-AUTH-CLUSTER \| Reliability/Security \| app/api/upload/(presigned-url\|verify-metadata\|scan\|scan-status), app/api/settings/logo/route.ts, server/middleware/subscriptionCheck.ts \| `getSessionUser(...).catch(() => null)` converts auth datastore failures into 401 without telemetry; presign body parsing also falls back to `{}`. \| Outages appear as auth failures; missing orgId/authz misroutes uploads; no alerting. \| Create shared `getSessionUserWithTelemetry` that distinguishes auth vs infra and emits 503 + logs; replace inline catches and add tests for auth service failure and malformed body. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| SILENT-RESUME-DOWNLOAD-001 | \| SILENT-RESUME-DOWNLOAD-001 \| Reliability/Observability \| app/api/files/resumes/[file]/route.ts \| Auth retrieval and local file read both use `.catch(() => null)`, mapping infra errors to 401/404 with no logging. \| Resume downloads fail silently during auth store or filesystem/S3 issues; compliance download gaps go undetected. \| Log auth/storage errors, return 503 on IO failures, and add tests for auth provider outage and missing/locked files. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| superadmin-rotation-script-is-now-env-only-username-password-required-credential-echo-removed-and-banned-literal-guard-test-in-place-rotation-ready-once-secrets-are-set-missing-tests-docs-pending-master-md-11689 | SuperAdmin rotation script is now env-only (username/password required), credential echo removed, and banned-literal guard test in place; rotation ready once secrets are set. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| souq-fraud-return-rule-windows-centralized-with-tenant-overrides-returns-and-claims-flows-are-wired-to-the-shared-config-next-steps-docs-pending-master-md-11690 | Souq fraud/return rule windows centralized with tenant overrides; returns and claims flows are wired to the shared config. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-rerun-playwright-smoke-to-validate-auth-checkout-returns-extend-banned-literal-list-if-new-tokens-appear-and-ensure-deployment-pipelines-inject-aws-superadmin-secrets-before-rotation-next-steps-docs-pending-master-md-11692 | Next: rerun Playwright smoke to validate auth/checkout/returns, extend banned-literal list if new tokens appear, and ensure deployment pipelines inject AWS + SuperAdmin secrets before rotation. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-e2e-coverage-playwright-smoke-auth-checkout-returns-claims-rerun-and-stabilize-after-recent-config-changes-add-to-ci-as-a-short-smoke-missing-tests-docs-pending-master-md-11701 | \| Missing Tests \| E2E coverage \| Playwright smoke (auth, checkout, returns/claims) \| Rerun and stabilize after recent config changes; add to CI as a short smoke. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Production Readiness) |
| env-enforcement-gaps-s3-now-fails-fast-in-production-similar-guards-should-be-considered-for-email-sms-providers-to-avoid-silent-fallbacks-and-misroutes-bugs-docs-pending-master-md-11706 | Env enforcement gaps: S3 now fails fast in production; similar guards should be considered for email/SMS providers to avoid silent fallbacks and misroutes. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| latest-commit-6e3bb4b05-this-session-pending-1-missing-tests-docs-pending-master-md-11717 | \| **Latest Commit** \| `6e3bb4b05` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | action | ### ğŸ“ Current Progress Summary |
| open-prs-1-2-active-549-550-next-steps-docs-pending-master-md-11724 | \| **Open PRs** \| 1 \| **2** \| ğŸ”„ Active \| #549, #550 \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-prs-next-steps-docs-pending-master-md-11734 | **Open PRs**: | action, effort | #### âœ… Current State |
| pr-549-docs-pending-v59-souq-rules-config-5-new-tests-missing-tests-docs-pending-v59 | PR #549: `docs/pending-v59` â€” Souq rules-config + 5 new tests | action | #### âœ… Current State |
| P2-001 | \| P2-001 \| Testing \| Aqar module \| ~11 routes missing tests \| ğŸŸ¡ Backlog \| | action | #### ğŸŸ¡ P2 â€” Medium Priority (Backlog) |
| priority-task-effort-status-next-steps-docs-pending-master-md-11841 | \| # \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-review-and-merge-pr-549-10m-ready-next-steps-docs-pending-master-md-11843 | \| 1 \| **P0** \| Review and merge PR #549 \| 10m \| ğŸ”„ Ready \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 2-p0-review-and-merge-pr-550-10m-ready-next-steps-docs-pending-master-md-11844 | \| 2 \| **P0** \| Review and merge PR #550 \| 10m \| ğŸ”„ Ready \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 4-p0-fix-tenant-server-ts-silent-fallback-45m-todo-next-steps-tenant-server-ts | \| 4 \| **P0** \| Fix `tenant.server.ts` silent fallback \| 45m \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Planned Next Steps |
| 5-p1-add-remaining-souq-tests-46-routes-4h-planned-missing-tests-docs-pending-master-md-11847 | \| 5 \| **P1** \| Add remaining Souq tests (~46 routes) \| 4h \| ğŸŸ  Planned \| | action | ### ğŸ“‹ Planned Next Steps |
| 6-p2-add-aqar-module-tests-11-routes-2h-backlog-missing-tests-docs-pending-master-md-11848 | \| 6 \| **P2** \| Add Aqar module tests (~11 routes) \| 2h \| ğŸŸ¡ Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| 7-p2-add-fm-module-tests-17-routes-3h-backlog-missing-tests-docs-pending-master-md-11849 | \| 7 \| **P2** \| Add FM module tests (~17 routes) \| 3h \| ğŸŸ¡ Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| security-98-orgid-rate-limiting-2-silent-fail-fixes-pending-next-steps-docs-pending-master-md-11857 | \| **Security** \| 98% \| orgId âœ…, rate limiting âœ…, 2 silent-fail fixes pending \| | action, effort | ### ğŸ“ˆ Production Readiness Scorecard (v61.0) |
| priority-task-next-steps-docs-pending-master-md-11885 | \| # \| Priority \| Task \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 2-p0-add-auth-helper-that-distinguishes-infra-failure-503-vs-auth-failure-401-for-routes-using-getsessionuser-catch-null-onboarding-help-upload-settings-next-steps-docs-pending-master-md-11888 | \| 2 \| **P0** \| Add auth helper that distinguishes infra failure (503) vs auth failure (401) for routes using `getSessionUser(...).catch(() => null)` (onboarding/help/upload/settings). \| | action | ### ğŸ“‹ Planned Next Steps |
| 3-p1-add-ops-telemetry-tenant-config-load-failures-trial-request-persistence-failures-auth-test-session-503s-alert-on-spikes-missing-tests-docs-pending-master-md-11889 | \| 3 \| **P1** \| Add ops telemetry: tenant-config load failures, trial-request persistence failures, auth-test-session 503s; alert on spikes. \| | action | ### ğŸ“‹ Planned Next Steps |
| 4-p1-add-dlq-failover-or-queue-write-for-trial-request-ingestion-to-avoid-drops-during-db-outages-next-steps-docs-pending-master-md-11890 | \| 4 \| **P1** \| Add DLQ/failover or queue write for trial-request ingestion to avoid drops during DB outages. \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 5-p2-extend-negative-path-tests-to-remaining-json-parse-and-auth-infra-cases-billing-quote-fm-transitions-help-escalate-upload-presign-missing-tests-docs-pending-master-md-11891 | \| 5 \| **P2** \| Extend negative-path tests to remaining JSON-parse and auth-infra cases (billing quote, FM transitions, help escalate, upload presign). \| | action | ### ğŸ“‹ Planned Next Steps |
| defaulting-to-default-tenant-config-on-load-failure-previously-masked-tenant-issues-now-throws-but-callers-must-handle-and-surface-appropriate-503-tenant-missing-responses-next-steps-docs-pending-master-md-11904 | Defaulting to `DEFAULT_TENANT_CONFIG` on load failure previously masked tenant issues; now throws, but callers must handle and surface appropriate 503/tenant-missing responses. | action | ### ğŸ› ï¸ Enhancements for Production Readiness |
| latest-commit-37bd93d69-this-session-pending-1-missing-tests-docs-pending-master-md-11928 | \| **Latest Commit** \| `37bd93d69` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | action | ### ğŸ“ Current Progress Summary |
| open-prs-1-1-clean-549-active-next-steps-docs-pending-master-md-11935 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| #549 active \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-status-next-steps-docs-pending-master-md-11999 | \| # \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| 1-p0-merge-pr-549-v59-0-rules-config-5m-ready-next-steps-v59-0 | \| 1 \| **P0** \| Merge PR #549 (v59.0 rules-config) \| 5m \| ğŸ”„ Ready \| | action | ### ğŸ“‹ Planned Next Steps |
| 2-p1-add-remaining-souq-tests-46-4h-todo-missing-tests-docs-pending-master-md-12002 | \| 2 \| **P1** \| Add remaining Souq tests (+46) \| 4h \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Planned Next Steps |
| 3-p2-add-aqar-module-tests-11-2h-backlog-missing-tests-docs-pending-master-md-12003 | \| 3 \| **P2** \| Add Aqar module tests (+11) \| 2h \| ğŸŸ¡ Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| 4-p2-add-fm-module-tests-17-3h-backlog-missing-tests-docs-pending-master-md-12004 | \| 4 \| **P2** \| Add FM module tests (+17) \| 3h \| ğŸŸ¡ Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| 5-p3-e2e-playwright-tests-15h-backlog-missing-tests-docs-pending-master-md-12005 | \| 5 \| **P3** \| E2E Playwright tests \| 15h \| ğŸŸ¢ Backlog \| | action | ### ğŸ“‹ Planned Next Steps |
| 2-p0-add-hard-failure-structured-logging-to-lib-config-tenant-server-ts-so-tenant-load-errors-do-not-silently-fall-back-to-defaults-45m-todo-bugs-lib-config-tenant-server-ts | \| 2 \| **P0** \| Add hard failure + structured logging to `lib/config/tenant.server.ts` so tenant load errors do not silently fall back to defaults \| 45m \| ğŸ”´ TODO \| | action | ### ğŸ“ Current Progress & Plan |
| SOUQ-CLAIM-DBERR-001 | \| SOUQ-CLAIM-DBERR-001 \| Correctness \| `app/api/souq/claims/[id]/route.ts` \| Order/user lookups use `.catch(() => null)` and return 404 on any DB error. \| Operational errors become false "not found", hiding outages and blocking incident triage. \| Surface 500 on DB errors; keep 404 only for true missing documents; add tests for Mongo failure paths. \| | action | ### âš ï¸ Enhancements / Bugs / Test Gaps (Production Readiness) |
| latest-commit-5b7e425ac-this-session-pending-1-missing-tests-docs-pending-master-md-12067 | \| **Latest Commit** \| `5b7e425ac` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | action | ### ğŸ“ Current Progress Summary |
| open-prs-1-1-clean-548-active-next-steps-docs-pending-master-md-12074 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| #548 active \| | action, effort | ### ğŸ“ Current Progress Summary |
| module-routes-tests-coverage-gap-priority-missing-tests-docs-pending-master-md-12096 | \| Module \| Routes \| Tests \| Coverage \| Gap \| Priority \| | action | #### ğŸ§ª Test Coverage Analysis |
| priority-task-effort-status-next-steps-docs-pending-master-md-12124 | \| # \| Priority \| Task \| Effort \| Status \| | action, effort | #### ğŸ“‹ Planned Next Steps |
| 1-p1-souq-module-tests-56-6h-todo-missing-tests-docs-pending-master-md-12126 | \| 1 \| **P1** \| Souq module tests (+56) \| 6h \| ğŸ”´ TODO \| | action | #### ğŸ“‹ Planned Next Steps |
| 2-p1-aqar-module-tests-11-2h-todo-missing-tests-docs-pending-master-md-12127 | \| 2 \| **P1** \| Aqar module tests (+11) \| 2h \| ğŸ”´ TODO \| | action | #### ğŸ“‹ Planned Next Steps |
| 3-p2-fm-module-tests-17-3h-todo-missing-tests-docs-pending-master-md-12128 | \| 3 \| **P2** \| FM module tests (+17) \| 3h \| ğŸŸ¡ TODO \| | action | #### ğŸ“‹ Planned Next Steps |
| 4-p2-finance-module-tests-2-30m-todo-missing-tests-docs-pending-master-md-12129 | \| 4 \| **P2** \| Finance module tests (+2) \| 30m \| ğŸŸ¡ TODO \| | action | #### ğŸ“‹ Planned Next Steps |
| 5-p3-refactor-large-files-5-4h-backlog-efficiency-docs-pending-master-md-12130 | \| 5 \| **P3** \| Refactor large files (5) \| 4h \| ğŸŸ¢ Backlog \| | action, effort | #### ğŸ“‹ Planned Next Steps |
| 6-p3-e2e-playwright-tests-15h-backlog-missing-tests-docs-pending-master-md-12131 | \| 6 \| **P3** \| E2E Playwright tests \| 15h \| ğŸŸ¢ Backlog \| | action | #### ğŸ“‹ Planned Next Steps |
| 7-p3-performance-benchmarking-5h-backlog-efficiency-docs-pending-master-md-12132 | \| 7 \| **P3** \| Performance benchmarking \| 5h \| ğŸŸ¢ Backlog \| | action, effort | #### ğŸ“‹ Planned Next Steps |
| code-quality-100-17-justified-disables-0-todo-fixme-next-steps-docs-pending-master-md-12217 | \| **Code Quality** \| 100% \| âœ… \| 17 justified disables, 0 TODO/FIXME \| | action, effort | ### ğŸ“ˆ Production Readiness Scorecard v58.0 |
| latest-commit-4cc4726f3-this-session-pending-1-missing-tests-docs-pending-master-md-12253 | \| **Latest Commit** \| `4cc4726f3` \| `<this session>` \| ğŸ”„ Pending \| +1 \| | action | ### ğŸ“ Current Progress Summary |
| p1-souq-tests-56-6h-todo-missing-tests-docs-pending-master-md-12310 | \| **P1** \| Souq tests (+56) \| 6h \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Updated Action Plan |
| p1-aqar-tests-13-3h-todo-missing-tests-docs-pending-master-md-12311 | \| **P1** \| Aqar tests (+13) \| 3h \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Updated Action Plan |
| p2-fm-tests-17-3h-todo-missing-tests-docs-pending-master-md-12312 | \| **P2** \| FM tests (+17) \| 3h \| ğŸŸ¡ TODO \| | action | ### ğŸ“‹ Updated Action Plan |
| centralized-souq-fraud-return-windows-in-shared-config-with-tenant-overrides-services-wired-to-the-shared-getter-next-steps-docs-pending-master-md-12354 | Centralized Souq fraud/return windows in shared config with tenant overrides + services wired to the shared getter. | action | ### ğŸ“ Current Progress & Next Steps |
| verification-pnpm-typecheck-pnpm-lint-pnpm-test-ci-all-passing-full-vitest-suite-playwright-e2e-not-rerun-this-pass-previous-attempts-hit-timeout-missing-tests-docs-pending-master-md-12356 | Verification: `pnpm typecheck`, `pnpm lint`, `pnpm test:ci` all passing (full vitest suite). Playwright e2e not rerun this pass (previous attempts hit timeout). | action | ### ğŸ“ Current Progress & Next Steps |
| next-evaluate-existing-dirty-app-api-changes-user-owned-before-merging-optionally-rerun-playwright-once-environment-stabilizes-next-steps-docs-pending-master-md-12357 | Next: evaluate existing dirty app/api changes (user-owned) before merging; optionally rerun Playwright once environment stabilizes. | action | ### ğŸ“ Current Progress & Next Steps |
| env-enforcement-drift-s3-config-now-throws-in-production-when-missing-ensure-deployment-pipelines-set-aws-region-aws-s3-bucket-explicitly-validateawsconfig-guard-prevents-silent-fallbacks-next-steps-docs-pending-master-md-12371 | Env enforcement drift: S3 config now throws in production when missing; ensure deployment pipelines set AWS_REGION/AWS_S3_BUCKET explicitly. `validateAwsConfig` guard prevents silent fallbacks. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues Observed |
| ran-repo-wide-rg-n-hardcod-sweep-across-app-lib-scripts-docs-to-re-confirm-remaining-hardcoded-risks-no-new-code-changes-applied-next-steps-docs-pending-master-md-12384 | Ran repo-wide `rg -n "hardcod"` sweep across app/lib/scripts/docs to re-confirm remaining hardcoded risks; no new code changes applied. | action | ### ğŸ“ Current Progress & Next Steps |
| branch-feat-marketplace-api-tests-working-tree-already-dirty-from-prior-sessions-app-about-page-tsx-app-api-hr-leaves-route-ts-app-api-hr-payroll-runs-route-ts-app-api-souq-ads-clicks-route-ts-app-api-webhooks-taqnyat-route-ts-missing-tests-feat-marketplace-api-tests | Branch: `feat/marketplace-api-tests`; working tree already dirty from prior sessions (`app/about/page.tsx`, `app/api/hr/leaves/route.ts`, `app/api/hr/payroll/runs/route.ts`, `app/api/souq/ads/clicks/route.ts`, `app/api/webhooks/taqnyat/route.ts`). | action | ### ğŸ“ Current Progress & Next Steps |
| next-parameterize-residual-hardcoded-credentials-config-centralize-souq-rule-windows-enforce-env-driven-storage-config-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-12386 | Next: parameterize residual hardcoded credentials/config, centralize Souq rule windows, enforce env-driven storage config, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Next Steps |
| missing-tests-tenancy-auth-malformed-body-regressions-dirty-files-app-about-page-tsx-app-api-hr-leaves-route-ts-app-api-hr-payroll-runs-route-ts-app-api-souq-ads-clicks-route-ts-app-api-webhooks-taqnyat-route-ts-add-regression-tests-for-org-isolation-auth-400-on-bad-json-rerun-typecheck-lint-test-after-fixes-missing-tests-app-about-page-tsx | \| Missing Tests \| Tenancy/auth + malformed-body regressions (dirty files) \| app/about/page.tsx; app/api/hr/leaves/route.ts; app/api/hr/payroll/runs/route.ts; app/api/souq/ads/clicks/route.ts; app/api/webhooks/taqnyat/route.ts \| Add regression tests for org isolation/auth + 400-on-bad-json; rerun typecheck/lint/test after fixes. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| missing-tests-config-enforcement-for-hardcoded-sensitive-values-config-s3-souq-rule-config-credential-scripts-add-unit-tests-that-fail-when-default-fallback-values-are-used-in-prod-builds-and-when-credential-literals-are-present-missing-tests-docs-pending-master-md-12396 | \| Missing Tests \| Config enforcement for hardcoded-sensitive values \| config/s3, Souq rule config, credential scripts \| Add unit tests that fail when default/fallback values are used in prod builds and when credential literals are present. \| | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| 1-p1-validation-add-zod-schemas-to-10-routes-2h-todo-next-steps-docs-pending-master-md-12615 | \| 1 \| **P1** \| Validation \| Add Zod schemas to 10 routes \| 2h \| ğŸ”´ TODO \| | action, effort | ### ğŸ“‹ Deferred Items & Action Plan |
| 2-p1-tests-souq-module-coverage-56-tests-6h-todo-missing-tests-docs-pending-master-md-12616 | \| 2 \| **P1** \| Tests \| Souq module coverage (+56 tests) \| 6h \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Deferred Items & Action Plan |
| 3-p1-tests-aqar-module-coverage-13-tests-3h-todo-missing-tests-docs-pending-master-md-12617 | \| 3 \| **P1** \| Tests \| Aqar module coverage (+13 tests) \| 3h \| ğŸ”´ TODO \| | action | ### ğŸ“‹ Deferred Items & Action Plan |
| 4-p2-auth-add-api-key-to-3-cron-routes-1h-todo-next-steps-docs-pending-master-md-12618 | \| 4 \| **P2** \| Auth \| Add API key to 3 cron routes \| 1h \| ğŸŸ¡ TODO \| | action, effort | ### ğŸ“‹ Deferred Items & Action Plan |
| 5-p2-tests-fm-module-coverage-17-tests-3h-todo-missing-tests-docs-pending-master-md-12619 | \| 5 \| **P2** \| Tests \| FM module coverage (+17 tests) \| 3h \| ğŸŸ¡ TODO \| | action | ### ğŸ“‹ Deferred Items & Action Plan |
| 8-p3-a11y-add-missing-img-alt-attrs-5-30m-backlog-next-steps-docs-pending-master-md-12622 | \| 8 \| **P3** \| A11y \| Add missing img alt attrs (5) \| 30m \| ğŸŸ¢ Backlog \| | action, effort | ### ğŸ“‹ Deferred Items & Action Plan |
| open-prs-1-1-clean-stable-next-steps-docs-pending-master-md-12643 | \| **Open PRs** \| 1 \| 1 \| âœ… Clean \| Stable \| | action, effort | ### ğŸ“ Current Progress Summary |
| 539-docs-pending-update-pending-master-v17-0-paytabs-tap-cleanup-next-steps-v17-0 | #539: `docs(pending): Update PENDING_MASTER v17.0 - PayTabsâ†’TAP cleanup` | action | ### ğŸ“‹ Repository Cleanup |
| 540-docs-pending-update-pending-master-v18-0-system-wide-scan-next-steps-v18-0 | #540: `docs(pending): Update PENDING_MASTER v18.0 â€” System-Wide Scan` | action | ### ğŸ“‹ Repository Cleanup |
| open-prs-stale-drafts-10-10-cleanup-needed-next-steps-docs-pending-master-md-12893 | \| **Open PRs (Stale Drafts)** \| 10 \| 10 \| ğŸ”´ Cleanup Needed \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-blocker-next-steps-docs-pending-master-md-12916 | \| # \| Priority \| Task \| Effort \| Blocker \| | action, effort | #### ğŸ”„ Planned Next Steps |
| 3-p1-add-rate-limiting-to-3-legacy-routes-30m-verified-v54-0-next-steps-v54-0 | \| 3 \| ~~**P1**~~ \| ~~Add rate limiting to 3 legacy routes~~ \| ~~30m~~ \| âœ… Verified v54.0 \| | action | #### ğŸ”„ Planned Next Steps |
| 4-p2-add-souq-module-tests-21-dirs-75-routes-8h-in-progress-missing-tests-docs-pending-master-md-12921 | \| 4 \| **P2** \| Add Souq module tests (21 dirs, ~75 routes) \| 8h \| In Progress \| | action | #### ğŸ”„ Planned Next Steps |
| 5-p2-check-similar-ref-patterns-4-other-components-30m-potential-issues-next-steps-docs-pending-master-md-12922 | \| 5 \| **P2** \| Check similar ref patterns (4 other components) \| 30m \| Potential issues \| | action, effort | #### ğŸ”„ Planned Next Steps |
| close-9-stale-draft-prs-539-547-15m-next-steps-docs-pending-master-md-13161 | Close 9 stale draft PRs (#539-547) â€” 15m | action, effort | #### P0 â€” Critical (Next Session) |
| add-rate-limiting-to-3-legacy-routes-30m-next-steps-docs-pending-master-md-13162 | Add rate limiting to 3 legacy routes â€” 30m | effort | #### P0 â€” Critical (Next Session) |
| check-4-similar-ref-patterns-for-type-errors-30m-bugs-docs-pending-master-md-13165 | Check 4 similar ref patterns for type errors â€” 30m | action, effort | #### P1 â€” High Priority (Next 3 days) |
| merge-pr-548-after-approval-next-steps-docs-pending-master-md-13167 | Merge PR #548 after approval | action, effort | #### P1 â€” High Priority (Next 3 days) |
| review-similar-dynamic-require-patterns-30m-next-steps-docs-pending-master-md-13172 | Review similar dynamic require patterns â€” 30m | action, effort | #### P2 â€” Medium Priority (Next week) |
| open-prs-stale-drafts-6-10-cleanup-needed-4-next-steps-docs-pending-master-md-13208 | \| **Open PRs (Stale Drafts)** \| 6 \| 10 \| ğŸ”´ Cleanup Needed \| +4 \| | action, effort | ### ğŸ“ Current Progress Summary |
| todo-fixme-in-code-0-0-clean-next-steps-docs-pending-master-md-13209 | \| **TODO/FIXME in Code** \| 0 \| 0 \| âœ… Clean \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-blocker-next-steps-docs-pending-master-md-13229 | \| # \| Priority \| Task \| Effort \| Blocker \| | action, effort | #### ğŸ”„ Planned Next Steps |
| 1-p0-fix-20-failing-tests-8-files-2h-ci-blocker-missing-tests-docs-pending-master-md-13231 | \| 1 \| **P0** \| Fix 20 failing tests (8 files) \| 2h \| CI blocker \| | action | #### ğŸ”„ Planned Next Steps |
| 2-p1-close-10-stale-draft-prs-15m-repo-hygiene-next-steps-docs-pending-master-md-13232 | \| 2 \| **P1** \| Close 10 stale draft PRs \| 15m \| Repo hygiene \| | action, effort | #### ğŸ”„ Planned Next Steps |
| 3-p2-add-rate-limiting-to-9-remaining-routes-30m-next-steps-docs-pending-master-md-13233 | \| 3 \| **P2** \| Add rate limiting to 9 remaining routes \| 30m \| â€” \| | action, effort | #### ğŸ”„ Planned Next Steps |
| 4-p2-add-api-tests-for-souq-75-routes-0-tests-8h-coverage-gap-missing-tests-docs-pending-master-md-13234 | \| 4 \| **P2** \| Add API tests for Souq (75 routes, 0 tests) \| 8h \| Coverage gap \| | action | #### ğŸ”„ Planned Next Steps |
| 5-p3-review-17-eslint-disable-usages-1h-debt-audit-next-steps-docs-pending-master-md-13235 | \| 5 \| **P3** \| Review 17 eslint-disable usages \| 1h \| Debt audit \| | action, effort | #### ğŸ”„ Planned Next Steps |
| todo-fixme-markers-0-found-clean-codebase-next-steps-docs-pending-master-md-13341 | \| âœ… TODO/FIXME markers \| 0 found \| Clean codebase \| | action, effort | #### ğŸŸ¢ Category 5: Verified Production-Ready |
| app-api-souq-products-route-ts-e-commerce-needs-protection-next-steps-app-api-souq-products-route-ts | `app/api/souq/products/route.ts` â€” E-commerce, needs protection | action | #### Pattern 1: Missing Rate Limiting in Legacy Routes |
| close-9-stale-draft-prs-15m-next-steps-docs-pending-master-md-13433 | Close 9 stale draft PRs â€” 15m | action, effort | #### P0 â€” Critical (Next 24h) |
| add-rate-limiting-to-3-legacy-routes-30m-next-steps-docs-pending-master-md-13434 | Add rate limiting to 3 legacy routes â€” 30m | effort | #### P0 â€” Critical (Next 24h) |
| review-2-json-parse-locations-without-try-catch-30m-bugs-json-parse | Review 2 JSON.parse locations without try-catch â€” 30m | action | #### P1 â€” High Priority (Next 3 days) |
| merge-pr-548-after-approval-next-steps-docs-pending-master-md-13439 | Merge PR #548 after approval | action, effort | #### P1 â€” High Priority (Next 3 days) |
| audit-8-no-explicit-any-eslint-disable-usages-1h-next-steps-docs-pending-master-md-13444 | Audit 8 `no-explicit-any` eslint-disable usages â€” 1h | action, effort | #### P2 â€” Medium Priority (Next week) |
| add-request-id-correlation-next-steps-docs-pending-master-md-13448 | Add request ID correlation | effort | #### P3 â€” Nice to Have |
| add-apm-spans-for-critical-paths-next-steps-docs-pending-master-md-13449 | Add APM spans for critical paths | effort | #### P3 â€” Nice to Have |
| no-todo-fixme-in-api-routes-clean-zero-technical-debt-markers-next-steps-docs-pending-master-md-13542 | \| **No TODO/FIXME in API routes** \| âœ… Clean \| Zero technical debt markers \| | action, effort | #### âœ… Strengths Identified |
| 539-paytabs-tap-cleanup-docs-pending-report-update-draft-close-superseded-next-steps-docs-pending-report-update | \| #539 \| PayTabsâ†’TAP cleanup \| `docs/pending-report-update` \| Draft \| Close (superseded) \| | action | ### ğŸ“‹ Open Pull Requests (6 Stale Drafts) |
| commit-pending-test-files-missing-tests-docs-pending-master-md-13593 | Commit pending test files | action | #### Immediate (This Session) |
| push-changes-to-remote-next-steps-docs-pending-master-md-13594 | Push changes to remote | action, effort | #### Immediate (This Session) |
| close-6-stale-draft-prs-539-544-next-steps-docs-pending-master-md-13597 | Close 6 stale draft PRs (#539-544) | action, effort | #### P2 â€” Low Priority (Next Week) |
| add-zod-validation-to-remaining-routes-next-steps-docs-pending-master-md-13598 | Add Zod validation to remaining routes | effort | #### P2 â€” Low Priority (Next Week) |
| add-request-id-correlation-next-steps-docs-pending-master-md-13603 | Add request ID correlation | effort | #### P3 â€” Nice to Have |
| add-apm-spans-for-critical-paths-next-steps-docs-pending-master-md-13604 | Add APM spans for critical paths | effort | #### P3 â€” Nice to Have |
| add-audit-logging-for-sensitive-operations-next-steps-docs-pending-master-md-13605 | Add audit logging for sensitive operations | effort | #### P3 â€” Nice to Have |
| open-prs-stale-6-9-needs-cleanup-3-next-steps-docs-pending-master-md-13636 | \| **Open PRs (Stale)** \| 6 \| 9 \| ğŸ”´ Needs Cleanup \| +3 \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-dependencies-next-steps-docs-pending-master-md-13654 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 1-p0-fix-12-test-failures-2h-ci-cd-stability-none-missing-tests-docs-pending-master-md-13656 | \| 1 \| **P0** \| Fix 12 Test Failures \| 2h \| CI/CD stability \| None \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 2-p0-close-9-stale-prs-539-547-15m-repository-cleanup-none-next-steps-docs-pending-master-md-13657 | \| 2 \| **P0** \| Close 9 Stale PRs (#539-547) \| 15m \| Repository cleanup \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 3-p2-add-zod-validation-to-231-routes-6h-input-validation-next-steps-docs-pending-master-md-13658 | \| 3 \| **P2** \| Add Zod validation to 231 routes \| 6h \| Input validation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 3-tests-server-api-counters-contract-test-ts-1-missing-mock-export-missing-tests-tests-server-api-counters-contract-test-ts | \| 3 \| `tests/server/api/counters.contract.test.ts` \| 1 \| Missing mock export \| | action | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| 7-tests-unit-api-health-health-test-ts-5-rate-limit-mock-missing-missing-tests-tests-unit-api-health-health-test-ts | \| 7 \| `tests/unit/api/health/health.test.ts` \| 5 \| Rate limit mock missing \| | action | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| 8-tests-unit-api-marketplace-search-route-test-ts-4-missing-getclientip-mock-missing-tests-tests-unit-api-marketplace-search-route-test-ts | \| 8 \| `tests/unit/api/marketplace/search/route.test.ts` \| 4+ \| Missing `getClientIP` mock \| | action | #### Category 1: Test Failures (P0 - 12 Files, 28 Tests) |
| stale-prs-6-9-needs-cleanup-next-steps-docs-pending-master-md-13805 | \| **Stale PRs** \| 6 \| 9 \| ğŸ”´ Needs cleanup \| | action, effort | ### ğŸ“Š Production Readiness Score |
| missing-zod-validation-231-routes-p2-6h-next-steps-docs-pending-master-md-13817 | \| Missing Zod Validation \| 231 routes \| P2 \| 6h \| | action, effort | ### ğŸ¯ Summary of Findings |
| p1-add-zod-to-remaining-191-routes-pending-8h-next-steps-docs-pending-master-md-14005 | \| P1 \| Add Zod to remaining 191 routes \| ğŸŸ¡ Pending \| 8h \| | action, effort | ### ğŸ“‹ Remaining P0-P1 Tasks |
| security-layer-implemented-missing-coverage-priority-missing-tests-docs-pending-master-md-14137 | \| Security Layer \| Implemented \| Missing \| Coverage \| Priority \| | action | #### ğŸ“Š API Route Security & Validation Coverage |
| error-boundaries-38-45-modules-84-missing-only-in-minor-routes-bugs-docs-pending-master-md-14241 | \| **Error Boundaries** \| âœ… 38/45 modules (84%) \| Missing only in minor routes \| | action, effort | #### ğŸŸ¢ Strengths Identified |
| assets-routes-1-test-needs-4-more-missing-tests-docs-pending-master-md-14288 | âŒ Assets routes: 1 test (needs 4 more) | action | ### ğŸ§ª Test Coverage Analysis |
| onboarding-flow-partial-coverage-needs-integration-tests-missing-tests-docs-pending-master-md-14290 | âŒ Onboarding flow: Partial coverage (needs integration tests) | action | ### ğŸ§ª Test Coverage Analysis |
| testing-80-285-tests-good-security-coverage-api-gaps-in-marketplace-assets-missing-tests-docs-pending-master-md-14304 | \| **Testing** \| 80% \| 285 tests, good security coverage, API gaps in Marketplace/Assets \| | action | ### ğŸ“ˆ Production Readiness Scorecard |
| add-zod-validation-to-remaining-191-routes-8h-next-steps-docs-pending-master-md-14329 | **Add Zod validation to remaining 191 routes** - 8h | action, effort | #### P2 â€” Medium Priority (Next week) |
| add-rate-limiting-to-assets-cms-others-90-routes-4h-next-steps-docs-pending-master-md-14330 | **Add rate limiting to Assets, CMS, Others** (90 routes) - 4h | action, effort | #### P2 â€” Medium Priority (Next week) |
| add-api-tests-for-assets-cms-6-tests-2h-missing-tests-docs-pending-master-md-14331 | **Add API tests for Assets & CMS** (6 tests) - 2h | action | #### P2 â€” Medium Priority (Next week) |
| query-optimization-identify-and-fix-n-1-queries-3h-next-steps-docs-pending-master-md-14332 | **Query optimization**: Identify and fix N+1 queries - 3h | action, effort | #### P2 â€” Medium Priority (Next week) |
| performance-monitoring-add-apm-spans-to-critical-paths-2h-efficiency-docs-pending-master-md-14333 | **Performance monitoring**: Add APM spans to critical paths - 2h | action, effort | #### P2 â€” Medium Priority (Next week) |
| e3-centralize-session-guard-helper-2h-next-steps-docs-pending-master-md-14336 | **E3**: Centralize session guard helper - 2h | action, effort | #### P3 â€” Nice to Have |
| e4-create-shared-rate-limit-helper-with-decorators-1h-next-steps-docs-pending-master-md-14337 | **E4**: Create shared rate limit helper with decorators - 1h | action, effort | #### P3 â€” Nice to Have |
| o1-generate-openapi-specs-for-all-routes-4h-next-steps-docs-pending-master-md-14338 | **O1**: Generate OpenAPI specs for all routes - 4h | action | #### P3 â€” Nice to Have |
| o2-add-sentry-apm-spans-3h-next-steps-docs-pending-master-md-14339 | **O2**: Add Sentry APM spans - 3h | action, effort | #### P3 â€” Nice to Have |
| o3-request-id-correlation-2h-next-steps-docs-pending-master-md-14340 | **O3**: Request ID correlation - 2h | action, effort | #### P3 â€” Nice to Have |
| o4-comprehensive-audit-logging-4h-next-steps-docs-pending-master-md-14341 | **O4**: Comprehensive audit logging - 4h | action, effort | #### P3 â€” Nice to Have |
| metric-current-target-gap-eta-next-steps-docs-pending-master-md-14427 | \| Metric \| Current \| Target \| Gap \| ETA \| | action, effort | ### ğŸ¯ Key Metrics Summary |
| p0-fix-9-test-failures-pending-2h-missing-tests-docs-pending-master-md-14506 | \| P0 \| Fix 9 test failures \| ğŸ”´ Pending \| 2h \| | action | ### ğŸ“‹ Remaining Work |
| open-prs-stale-6-6-needs-cleanup-next-steps-docs-pending-master-md-14531 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸ”´ Needs Cleanup \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-dependencies-next-steps-docs-pending-master-md-14550 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 1-p0-fix-9-test-failures-2h-ci-cd-stability-none-missing-tests-docs-pending-master-md-14552 | \| 1 \| **P0** \| Fix 9 Test Failures \| 2h \| CI/CD stability \| None \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 2-p0-close-6-stale-prs-539-544-10m-repository-cleanup-none-next-steps-docs-pending-master-md-14553 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 3-p1-fix-65-unprotected-request-json-2h-crash-prevention-none-bugs-request-json | \| 3 \| **P1** \| Fix 65 Unprotected request.json() \| 2h \| Crash prevention \| None \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 4-p2-add-zod-validation-to-232-routes-6h-input-validation-next-steps-docs-pending-master-md-14555 | \| 4 \| **P2** \| Add Zod validation to 232 routes \| 6h \| Input validation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| stale-prs-6-6-needs-cleanup-next-steps-docs-pending-master-md-14745 | \| **Stale PRs** \| 6 \| 6 \| ğŸ”´ Needs cleanup \| | action, effort | ### ğŸ“Š Production Readiness Score |
| missing-zod-validation-232-routes-p2-6h-next-steps-docs-pending-master-md-14758 | \| Missing Zod Validation \| 232 routes \| P2 \| 6h \| | action, effort | ### ğŸ¯ Summary of Findings |
| test-suite-275-284-pass-9-failures-needs-fix-missing-tests-docs-pending-master-md-14894 | \| **Test Suite** \| â€” \| 275/284 pass \| ğŸŸ¡ 9 Failures \| Needs Fix \| | action | ### ğŸ“ Current Progress Summary |
| zod-validation-33-34-121-352-needs-work-next-steps-docs-pending-master-md-14896 | \| **Zod Validation** \| 33% \| 34% (121/352) \| ğŸŸ¡ Needs Work \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| rate-limiting-100-87-308-352-44-missing-regression-next-steps-docs-pending-master-md-14897 | \| **Rate Limiting** \| 100% \| 87% (308/352) \| ğŸŸ¡ 44 Missing \| Regression \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-prs-stale-6-6-cleanup-next-steps-docs-pending-master-md-14898 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸ”´ Cleanup \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-dependencies-next-steps-docs-pending-master-md-14917 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 1-p0-fix-9-test-failures-2h-ci-cd-stability-none-missing-tests-docs-pending-master-md-14919 | \| 1 \| **P0** \| Fix 9 Test Failures \| 2h \| CI/CD stability \| None \| | action | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 2-p0-close-6-stale-prs-539-544-10m-repository-cleanup-none-next-steps-docs-pending-master-md-14920 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 3-p1-add-rate-limiting-to-44-routes-1h-security-none-next-steps-docs-pending-master-md-14921 | \| 3 \| **P1** \| Add Rate Limiting to 44 Routes \| 1h \| Security \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 5-p2-add-zod-validation-to-231-routes-6h-input-validation-next-steps-docs-pending-master-md-14923 | \| 5 \| **P2** \| Add Zod validation to 231 routes \| 6h \| Input validation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 6-p3-remove-29-todo-fixme-comments-1h-code-cleanup-next-steps-docs-pending-master-md-14924 | \| 6 \| **P3** \| Remove 29 TODO/FIXME comments \| 1h \| Code cleanup \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| stale-prs-6-6-needs-cleanup-next-steps-docs-pending-master-md-15160 | \| **Stale PRs** \| 6 \| 6 \| ğŸ”´ Needs cleanup \| | action, effort | ### ğŸ“Š Production Readiness Score |
| properties-resolver-was-todo-at-line-943-next-steps-docs-pending-master-md-15258 | **`properties` resolver** (was TODO at line ~943): | action, effort | #### Fix 3: GraphQL TODO Stubs Implementation |
| invoice-resolver-was-todo-at-line-987-next-steps-docs-pending-master-md-15274 | **`invoice` resolver** (was TODO at line ~987): | action, effort | #### Fix 3: GraphQL TODO Stubs Implementation |
| both-resolvers-require-ctx-orgid-returns-empty-null-if-missing-next-steps-ctx-orgid | Both resolvers require `ctx.orgId` (returns empty/null if missing) | action | #### Fix 3: GraphQL TODO Stubs Implementation |
| 5-add-graphql-resolver-tests-2h-test-coverage-missing-org-required-guard-tests-missing-tests-docs-pending-master-md-15317 | \| 5 \| Add GraphQL resolver tests \| 2h \| Test coverage \| Missing org-required guard tests \| | action | #### ğŸŸ¡ Remaining (P2) |
| graphql-completeness-80-100-all-todo-stubs-implemented-next-steps-docs-pending-master-md-15332 | \| **GraphQL Completeness** \| 80% \| **100%** \| All TODO stubs implemented \| | action, effort | ### ğŸ“Š Production Readiness Score |
| priority-task-effort-impact-dependencies-next-steps-docs-pending-master-md-15394 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 1-p0-verify-vercel-deployment-succeeds-5m-build-stability-awaiting-vercel-next-steps-docs-pending-master-md-15396 | \| 1 \| **P0** \| Verify Vercel deployment succeeds \| 5m \| Build stability \| Awaiting Vercel \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 2-p0-close-6-stale-prs-539-544-10m-repository-cleanup-none-next-steps-docs-pending-master-md-15397 | \| 2 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 3-p1-create-update-pr-for-current-branch-5m-merge-readiness-close-stale-prs-next-steps-docs-pending-master-md-15398 | \| 3 \| **P1** \| Create/Update PR for current branch \| 5m \| Merge readiness \| Close stale PRs \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 5-p2-add-zod-validation-to-236-routes-4h-input-validation-next-steps-docs-pending-master-md-15400 | \| 5 \| **P2** \| Add Zod validation to 236 routes \| 4h \| Input validation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 6-p2-graphql-org-guard-enforcement-1h-tenant-isolation-next-steps-docs-pending-master-md-15401 | \| 6 \| **P2** \| GraphQL org guard enforcement \| 1h \| Tenant isolation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| VAL-001 | \| VAL-001 \| Input Validation \| 236 routes \| Missing Zod validation schemas \| 4h \| | action, effort | #### Medium Priority (P2) |
| GQL-001 | \| GQL-001 \| Tenant Isolation \| 3 resolvers \| GraphQL Query org guard gaps \| 1h \| | action, effort | #### Medium Priority (P2) |
| GQL-002 | \| GQL-002 \| Incomplete \| 2 resolvers \| TODO stubs in property/invoice \| 30m \| | action | #### Medium Priority (P2) |
| PR-001 | \| PR-001 \| Stale PRs \| 6 \| ğŸŸ¡ Needs cleanup \| | action, effort | #### Low Priority (P3) - Technical Debt |
| security-xss-95-1-file-needs-review-next-steps-docs-pending-master-md-15442 | \| **Security (XSS)** \| 95% \| 1 file needs review \| | action, effort | ### ğŸ“Š Production Readiness Score |
| routes-with-zod-validation-116-352-33-116-352-33-needs-work-next-steps-docs-pending-master-md-15463 | \| **Routes With Zod Validation** \| ~116/352 (33%) \| ~116/352 (33%) \| ğŸŸ¡ Needs Work \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-prs-stale-6-6-cleanup-needed-next-steps-docs-pending-master-md-15465 | \| **Open PRs (Stale)** \| 6 \| 6 \| ğŸŸ¡ Cleanup Needed \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-dependencies-next-steps-docs-pending-master-md-15485 | \| # \| Priority \| Task \| Effort \| Impact \| Dependencies \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 1-p0-close-6-stale-prs-539-544-10m-repository-cleanup-none-next-steps-docs-pending-master-md-15487 | \| 1 \| **P0** \| Close 6 Stale PRs (#539-544) \| 10m \| Repository cleanup \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 2-p0-create-pr-for-current-branch-5m-merge-readiness-close-stale-prs-next-steps-docs-pending-master-md-15488 | \| 2 \| **P0** \| Create PR for current branch \| 5m \| Merge readiness \| Close stale PRs \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 4-p1-verify-careers-page-xss-safety-15m-security-none-next-steps-docs-pending-master-md-15490 | \| 4 \| **P1** \| Verify careers page XSS safety \| 15m \| Security \| None \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 5-p2-add-zod-validation-to-236-routes-4h-input-validation-next-steps-docs-pending-master-md-15491 | \| 5 \| **P2** \| Add Zod validation to 236 routes \| 4h \| Input validation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 6-p2-graphql-org-guard-enforcement-1h-tenant-isolation-next-steps-docs-pending-master-md-15492 | \| 6 \| **P2** \| GraphQL org guard enforcement \| 1h \| Tenant isolation \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| 7-p3-remove-graphql-todo-stubs-30m-code-cleanup-next-steps-docs-pending-master-md-15493 | \| 7 \| **P3** \| Remove GraphQL TODO stubs \| 30m \| Code cleanup \| â€” \| | action, effort | ### ğŸ“‹ Planned Next Steps (Priority Order) |
| properties-has-org-guard-but-todo-stub-next-steps-docs-pending-master-md-15539 | `properties` - ğŸŸ¡ Has org guard but TODO stub | action, effort | #### Category 3: GraphQL Tenant Isolation Gaps |
| invoice-has-org-guard-but-todo-stub-next-steps-docs-pending-master-md-15540 | `invoice` - ğŸŸ¡ Has org guard but TODO stub | action, effort | #### Category 3: GraphQL Tenant Isolation Gaps |
| area-current-target-gap-next-steps-docs-pending-master-md-15569 | \| Area \| Current \| Target \| Gap \| | action, effort | #### Category 5: Missing Test Coverage |
| creategraphqlhandler-disabled-deps-missing-branches-next-steps-docs-pending-master-md-15581 | `createGraphQLHandler` disabled/deps-missing branches | action, effort | #### Category 5: Missing Test Coverage |
| properties-invoice-have-guards-but-todo-stubs-next-steps-docs-pending-master-md-15615 | `properties`, `invoice` - ğŸŸ¡ Have guards but TODO stubs | action, effort | #### Pattern 2: GraphQL Org/Tenant Fallback (Consistent Risk) |
| input-validation-zod-33-33-80-gap-47-next-steps-docs-pending-master-md-15665 | \| **Input Validation (Zod)** \| 33% \| 33% \| 80% \| ğŸŸ¡ Gap: 47% \| | action, effort | ### ğŸ“Š Production Readiness Score |
| error-boundaries-84-84-95-gap-11-bugs-docs-pending-master-md-15666 | \| Error Boundaries \| 84% \| 84% \| 95% \| ğŸŸ¡ Gap: 11% \| | action, effort | ### ğŸ“Š Production Readiness Score |
| json-parse-safety-80-80-100-gap-20-next-steps-docs-pending-master-md-15669 | \| JSON Parse Safety \| 80% \| 80% \| 100% \| ğŸŸ¡ Gap: 20% \| | action, effort | ### ğŸ“Š Production Readiness Score |
| 01-25-graphql-review-todo-stubs-identified-next-steps-docs-pending-master-md-15695 | \| 01:25 \| GraphQL review \| TODO stubs identified \| | action, effort | ### ğŸ“ Session Activity Log |
| latest-commit-717df925c-pending-ready-1-commit-missing-tests-docs-pending-master-md-15710 | \| **Latest Commit** \| `717df925c` \| Pending \| ğŸŸ¡ Ready \| +1 commit \| | action | ### ğŸ“ Current Progress Summary |
| open-prs-6-6-stale-cleanup-needed-next-steps-docs-pending-master-md-15720 | \| **Open PRs** \| 6 \| 6 \| ğŸŸ¡ Stale \| Cleanup needed \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-next-steps-docs-pending-master-md-15828 | \| # \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 1-p1-close-6-stale-prs-539-544-10m-cleanup-next-steps-docs-pending-master-md-15830 | \| 1 \| P1 \| Close 6 stale PRs (#539-544) \| 10m \| Cleanup \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 2-p1-create-pr-for-current-branch-5m-merge-readiness-next-steps-docs-pending-master-md-15831 | \| 2 \| P1 \| Create PR for current branch \| 5m \| Merge readiness \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 4-p2-verify-careers-page-xss-safety-15m-security-next-steps-docs-pending-master-md-15833 | \| 4 \| P2 \| Verify careers page XSS safety \| 15m \| Security \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 5-p3-add-zod-validation-to-remaining-routes-2h-robustness-next-steps-docs-pending-master-md-15834 | \| 5 \| P3 \| Add Zod validation to remaining routes \| 2h \| Robustness \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| identified-graphql-query-resolver-gaps-orgid-fallback-to-userid-missing-tenant-audit-context-on-reads-sequential-db-calls-in-workorders-next-steps-docs-pending-master-md-15883 | Identified GraphQL Query resolver gaps: orgId fallback to userId, missing tenant/audit context on reads, sequential DB calls in workOrders. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| plan-enforce-required-org-context-for-all-query-resolvers-wrap-reads-with-tenant-audit-context-normalize-org-once-parallelize-workorders-find-count-add-unit-tests-for-org-less-requests-creategraphqlhandler-disabled-deps-missing-branches-and-rate-limit-wrapper-in-app-api-graphql-route-ts-missing-tests-app-api-graphql-route-ts | Plan: enforce required org context for all Query resolvers, wrap reads with tenant/audit context, normalize org once, parallelize workOrders find/count; add unit tests for org-less requests, `createGraphQLHandler` disabled/deps-missing branches, and rate-limit wrapper in `app/api/graphql/route.ts`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| verification-pending-rerun-pnpm-typecheck-pnpm-lint-pnpm-test-after-implementing-changes-missing-tests-docs-pending-master-md-15885 | Verification pending: rerun `pnpm typecheck && pnpm lint && pnpm test` after implementing changes. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| isolation-missing-tenant-audit-context-on-reads-workorders-workorder-dashboardstats-organization-property-properties-and-invoice-resolvers-do-not-set-tenant-audit-context-bypassing-tenant-isolation-on-read-paths-next-steps-docs-pending-master-md-15889 | **Isolation \| Missing tenant/audit context on reads**: workOrders, workOrder, dashboardStats, organization, property/properties, and invoice resolvers do not set tenant/audit context, bypassing tenant isolation on read paths. | action, effort | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| tenant-context-missing-uniformly-on-reads-unlike-mutations-no-query-resolver-wraps-db-access-with-tenant-audit-context-so-isolation-plugins-are-skipped-everywhere-on-reads-apply-the-same-context-setup-teardown-pattern-used-in-mutations-to-all-read-paths-next-steps-docs-pending-master-md-15896 | **Tenant context missing uniformly on reads**: Unlike Mutations, no Query resolver wraps DB access with tenant/audit context, so isolation plugins are skipped everywhere on reads. Apply the same context setup/teardown pattern used in mutations to all read paths. | action, effort | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| confirmed-auto-monitor-health-checks-running-while-logged-out-spamming-api-help-articles-api-notifications-api-qa-health-api-qa-reconnect-api-qa-alert-with-401-403-responses-next-steps-api-help-articles | Confirmed auto-monitor/health checks running while logged out, spamming `/api/help/articles`, `/api/notifications`, `/api/qa/health`, `/api/qa/reconnect`, `/api/qa/alert` with 401/403 responses. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| otp-send-and-forgot-password-flows-returning-500-password-reset-also-logs-a-stub-warning-in-the-console-next-steps-docs-pending-master-md-15902 | OTP send and forgot-password flows returning 500; password reset also logs a â€œstubâ€ warning in the console. | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| plan-gate-auto-monitor-startup-on-authenticated-session-and-ssr-feature-flag-disable-the-constructor-auto-start-add-exponential-backoff-and-dedupe-and-only-post-qa-alerts-when-auth-session-present-fix-otp-and-forgot-password-handlers-and-add-regression-tests-missing-tests-docs-pending-master-md-15903 | Plan: gate auto-monitor startup on authenticated session (and SSR/feature flag), disable the constructor auto-start, add exponential backoff and dedupe, and only post QA alerts when auth/session present. Fix OTP and forgot-password handlers and add regression tests. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-add-coverage-for-auth-gated-monitoring-start-backoff-alert-posting-and-for-otp-forgot-password-happy-error-paths-missing-tests-docs-pending-master-md-15908 | **Missing Tests**: Add coverage for auth-gated monitoring start/backoff/alert posting, and for OTP/forgot-password happy/error paths. | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| auth-flows-failing-together-both-otp-send-and-forgot-password-endpoints-return-500-indicating-a-shared-backend-config-gap-fix-once-and-add-tests-to-prevent-repeat-failures-across-auth-flows-missing-tests-docs-pending-master-md-15914 | **Auth flows failing together**: Both OTP send and forgot-password endpoints return 500, indicating a shared backend/config gap; fix once and add tests to prevent repeat failures across auth flows. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| post-api-auth-otp-send-returning-500-post-api-auth-forgot-password-returning-500-password-reset-stub-warning-next-steps-post-api-auth-otp-send | `POST /api/auth/otp/send` returning 500; `POST /api/auth/forgot-password` returning 500 (password reset stub warning). | action | ### ğŸ“ Current Progress & Planned Next Steps |
| plan-gate-auto-monitoring-health-checks-on-authenticated-session-ssr-make-monitor-init-a-no-op-when-logged-out-fix-otp-forgot-password-handlers-and-add-tests-missing-tests-docs-pending-master-md-15921 | Plan: gate auto-monitoring/health checks on authenticated session/SSR; make monitor init a no-op when logged out; fix OTP/forgot-password handlers and add tests. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| bugs-logic-auto-monitor-unauthorized-calls-otp-send-and-forgot-password-500s-health-monitoring-without-auth-error-handling-gaps-bugs-docs-pending-master-md-15925 | Bugs/logic: auto-monitor unauthorized calls; OTP send and forgot password 500s; health monitoring without auth; error handling gaps. | action, effort | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| missing-tests-auth-gated-monitoring-error-handling-otp-forgot-password-flows-qa-reconnect-alert-guard-missing-tests-docs-pending-master-md-15926 | Missing tests: auth-gated monitoring, error handling, OTP/forgot-password flows, QA reconnect/alert guard. | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| auto-monitor-pattern-reused-across-components-triggering-unauthenticated-loops-needs-centralized-guard-next-steps-docs-pending-master-md-15930 | Auto-monitor pattern reused across components triggering unauthenticated loops; needs centralized guard. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| typescript-errors-36-blocking-session-middleware-typings-missing-model-helper-types-rate-limit-helper-missing-bugs-docs-pending-master-md-15941 | \| **TypeScript Errors** \| 36 blocking \| Session middleware typings, missing model helper types, rate-limit helper missing \| | action, effort | ### ğŸ“ Current Progress Summary |
| item-status-planned-next-step-next-steps-docs-pending-master-md-15948 | \| # \| Item \| Status \| Planned Next Step \| | action, effort | ### ğŸ¯ Current Progress & Planned Next Steps |
| 1-session-middleware-regressions-in-admin-support-user-apis-blocking-replace-nextmiddleware-user-usages-with-session-user-derivation-via-withauthrbac-auth-and-update-handlers-in-app-api-admin-notifications-config-test-app-api-admin-users-route-ts-app-api-support-impersonation-route-ts-app-api-user-preferences-route-ts-missing-tests-app-api-admin-notifications-config-test | \| 1 \| Session middleware regressions in admin/support/user APIs \| ğŸ”´ Blocking \| Replace `NextMiddleware.user` usages with session/user derivation via `withAuthRbac`/`auth()` and update handlers in `app/api/admin/notifications/config\|test`, `app/api/admin/users/route.ts`, `app/api/support/impersonation/route.ts`, `app/api/user/preferences/route.ts`. \| | action | ### ğŸ¯ Current Progress & Planned Next Steps |
| 2-missing-model-helper-types-employeemutable-employeedoclike-usermutable-hydrateddocument-blocking-restore-declarations-likely-from-types-mongoose-encrypted-d-ts-removal-or-adjust-imports-in-server-models-hr-models-ts-and-server-models-user-ts-re-run-pnpm-typecheck-next-steps-types-mongoose-encrypted-d-ts | \| 2 \| Missing model helper types (`EmployeeMutable`, `EmployeeDocLike`, `UserMutable`, `HydratedDocument`) \| ğŸ”´ Blocking \| Restore declarations (likely from `types/mongoose-encrypted.d.ts` removal) or adjust imports in `server/models/hr.models.ts` and `server/models/User.ts`; re-run `pnpm typecheck`. \| | action | ### ğŸ¯ Current Progress & Planned Next Steps |
| 4-rate-limit-helper-missing-high-export-or-replace-applyratelimitbatch-usage-in-app-api-billing-upgrade-route-ts-with-existing-helper-add-coverage-missing-tests-app-api-billing-upgrade-route-ts | \| 4 \| Rate limit helper missing \| ğŸŸ  High \| Export or replace `applyRateLimitBatch` usage in `app/api/billing/upgrade/route.ts` with existing helper; add coverage. \| | action | ### ğŸ¯ Current Progress & Planned Next Steps |
| 5-lint-cleanup-low-remove-or-use-handleapierror-in-app-api-public-footer-page-route-ts-rerun-pnpm-lint-bugs-app-api-public-footer-page-route-ts | \| 5 \| Lint cleanup \| ğŸŸ¢ Low \| Remove or use `handleApiError` in `app/api/public/footer/[page]/route.ts`; rerun `pnpm lint`. \| | action | ### ğŸ¯ Current Progress & Planned Next Steps |
| missing-tests-no-coverage-for-admin-notification-config-test-routes-or-support-impersonation-auth-path-medium-add-unit-tests-validating-auth-paths-rate-limiting-and-happy-path-responses-for-these-endpoints-missing-tests-docs-pending-master-md-15963 | \| Missing Tests \| No coverage for admin notification config/test routes or support impersonation auth path \| ğŸŸ¡ Medium \| Add unit tests validating auth paths, rate limiting, and happy-path responses for these endpoints. \| | action | ### ğŸš€ Enhancements & Gaps (Production Readiness) |
| routes-needing-rate-limiting-40-40-pending-next-steps-docs-pending-master-md-15989 | \| **Routes Needing Rate Limiting** \| 40 \| 40 \| ğŸŸ¡ Pending \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-prs-unknown-6-stale-cleanup-needed-next-steps-docs-pending-master-md-15992 | \| **Open PRs** \| Unknown \| 6 \| ğŸŸ¡ Stale \| Cleanup needed \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-next-steps-docs-pending-master-md-16159 | \| # \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 1-p1-close-6-stale-prs-539-544-10m-cleanup-next-steps-docs-pending-master-md-16161 | \| 1 \| P1 \| Close 6 stale PRs (#539-544) \| 10m \| Cleanup \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 2-p1-create-pr-for-current-branch-5m-merge-readiness-next-steps-docs-pending-master-md-16162 | \| 2 \| P1 \| Create PR for current branch \| 5m \| Merge readiness \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 3-p1-add-rate-limiting-to-40-routes-2h-security-next-steps-docs-pending-master-md-16163 | \| 3 \| P1 \| Add rate limiting to 40 routes \| 2h \| Security \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 5-p2-verify-careers-page-xss-safety-15m-security-next-steps-docs-pending-master-md-16165 | \| 5 \| P2 \| Verify careers page XSS safety \| 15m \| Security \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| tests-e2e-auth-spec-ts-multiple-missing-env-vars-expected-missing-tests-tests-e2e-auth-spec-ts | \| `tests/e2e/auth.spec.ts` (multiple) \| Missing env vars \| âœ… Expected \| | action | #### 2. Skipped Tests (14 total) |
| priority-task-effort-impact-next-steps-docs-pending-master-md-16439 | \| # \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 1-p1-add-rate-limiting-to-remaining-40-routes-2h-high-security-next-steps-docs-pending-master-md-16441 | \| 1 \| P1 \| Add rate limiting to remaining 40 routes \| 2h \| High (security) \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 3-p2-add-zod-validation-to-20-more-routes-4h-medium-reliability-next-steps-docs-pending-master-md-16443 | \| 3 \| P2 \| Add Zod validation to 20% more routes \| 4h \| Medium (reliability) \| | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| 4-p3-document-rate-limit-configurations-1h-low-maintainability-next-steps-docs-pending-master-md-16444 | \| 4 \| P3 \| Document rate limit configurations \| 1h \| Low (maintainability) \| | action | ### ğŸ“‹ Next Steps (Priority Order) |
| 5-p3-create-pr-for-v39-0-changes-15m-next-steps-v39-0 | \| 5 \| P3 \| Create PR for v39.0 changes \| 15m \| â€” \| | action | ### ğŸ“‹ Next Steps (Priority Order) |
| routes-with-rate-limiting-147-352-42-in-progress-next-steps-docs-pending-master-md-16531 | \| **Routes With Rate Limiting** \| 147/352 (42%) \| ğŸŸ¡ In Progress \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| app-aqar-filters-page-tsx-121-json-parse-raw-medium-client-side-needs-try-catch-next-steps-app-aqar-filters-page-tsx | \| `app/aqar/filters/page.tsx` \| 121 \| `JSON.parse(raw)` \| ğŸŸ¡ Medium - Client-side, needs try/catch \| | action | #### 2. Unsafe JSON.parse Patterns |
| rate-limiting-69-42-recalculated-needs-work-next-steps-docs-pending-master-md-16736 | \| Rate Limiting \| 69% \| 42% (recalculated) \| ğŸ”´ Needs work \| | action, effort | ### ğŸ“Š Production Readiness Score Update |
| p0-review-graphql-todo-stubs-decide-if-full-implementation-needed-or-remove-next-steps-docs-pending-master-md-16750 | **P0**: Review GraphQL TODO stubs - Decide if full implementation needed or remove | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| p1-add-rate-limiting-to-auth-routes-12-routes-prevent-brute-force-next-steps-docs-pending-master-md-16751 | **P1**: Add rate limiting to auth routes (12 routes) - Prevent brute force | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| p1-add-rate-limiting-to-payments-routes-4-routes-critical-for-billing-next-steps-docs-pending-master-md-16752 | **P1**: Add rate limiting to payments routes (4 routes) - Critical for billing | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| p1-add-rate-limiting-to-finance-routes-10-routes-protect-sensitive-data-next-steps-docs-pending-master-md-16753 | **P1**: Add rate limiting to finance routes (10 routes) - Protect sensitive data | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| p2-verify-test-imports-in-2-potentially-stale-test-files-missing-tests-docs-pending-master-md-16755 | **P2**: Verify test imports in 2 potentially stale test files | action | ### ğŸ“‹ Next Steps (Priority Order) |
| p3-add-rate-limiting-to-remaining-modules-marketplace-copilot-ats-next-steps-docs-pending-master-md-16756 | **P3**: Add rate limiting to remaining modules (marketplace, copilot, ats) | action, effort | ### ğŸ“‹ Next Steps (Priority Order) |
| rate-limited-routes-139-352-39-in-progress-44-this-branch-next-steps-docs-pending-master-md-16927 | \| **Rate-Limited Routes** \| 139/352 (39%) \| ğŸŸ¡ In Progress \| +44 this branch \| | action, effort | ### ğŸ“ Current Progress Summary |
| unprotected-routes-213-352-61-needs-work-next-steps-docs-pending-master-md-16928 | \| **Unprotected Routes** \| 213/352 (61%) \| ğŸ”´ Needs Work \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-draft-prs-6-cleanup-needed-next-steps-docs-pending-master-md-16930 | \| **Open Draft PRs** \| 6 \| ğŸŸ¡ Cleanup needed \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| todo-fixme-comments-29-review-needed-next-steps-docs-pending-master-md-16931 | \| **TODO/FIXME Comments** \| 29 \| ğŸŸ¡ Review needed \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| module-api-routes-test-files-gap-priority-missing-tests-docs-pending-master-md-16963 | \| Module \| API Routes \| Test Files \| Gap \| Priority \| | action | #### ğŸ§ª Test Coverage Gaps (Critical) |
| copilot-chat-route-ts-117-medium-needs-try-catch-next-steps-copilot-chat-route-ts | \| `copilot/chat/route.ts` \| 117 \| Medium \| Needs try-catch \| | action | #### âš ï¸ JSON.parse Safety Audit |
| projects-route-ts-72-medium-needs-try-catch-next-steps-projects-route-ts | \| `projects/route.ts` \| 72 \| Medium \| Needs try-catch \| | action | #### âš ï¸ JSON.parse Safety Audit |
| priority-task-effort-impact-status-next-steps-docs-pending-master-md-17013 | \| Priority \| Task \| Effort \| Impact \| Status \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-close-stale-draft-prs-539-544-10-min-cleanup-todo-next-steps-docs-pending-master-md-17016 | \| ğŸ”´ P0 \| Close stale draft PRs (539-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-payments-4-routes-15-min-critical-security-todo-next-steps-docs-pending-master-md-17017 | \| ğŸ”´ P1 \| Rate limiting: Payments (4 routes) \| 15 min \| Critical security \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-auth-12-routes-30-min-critical-security-todo-next-steps-docs-pending-master-md-17018 | \| ğŸ”´ P1 \| Rate limiting: Auth (12 routes) \| 30 min \| Critical security \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-aqar-15-routes-30-min-high-traffic-module-todo-next-steps-docs-pending-master-md-17019 | \| ğŸ”´ P1 \| Rate limiting: Aqar (15 routes) \| 30 min \| High traffic module \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-rate-limiting-finance-11-routes-30-min-financial-data-todo-next-steps-docs-pending-master-md-17020 | \| ğŸŸ¡ P2 \| Rate limiting: Finance (11 routes) \| 30 min \| Financial data \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-api-tests-aqar-module-16-routes-2-hrs-test-coverage-todo-missing-tests-docs-pending-master-md-17022 | \| ğŸŸ¡ P2 \| API tests: Aqar module (16 routes) \| 2 hrs \| Test coverage \| ğŸ”² TODO \| | action | ### ğŸ”² Planned Next Steps |
| p2-api-tests-hr-module-7-routes-1-hr-test-coverage-todo-missing-tests-docs-pending-master-md-17023 | \| ğŸŸ¡ P2 \| API tests: HR module (7 routes) \| 1 hr \| Test coverage \| ğŸ”² TODO \| | action | ### ğŸ”² Planned Next Steps |
| p3-rate-limiting-pm-vendors-metrics-30-min-low-priority-deferred-next-steps-docs-pending-master-md-17024 | \| ğŸŸ¢ P3 \| Rate limiting: PM, Vendors, Metrics \| 30 min \| Low priority \| ğŸ”² Deferred \| | action, effort | ### ğŸ”² Planned Next Steps |
| p3-review-29-todo-fixme-comments-1-hr-code-quality-deferred-next-steps-docs-pending-master-md-17025 | \| ğŸŸ¢ P3 \| Review 29 TODO/FIXME comments \| 1 hr \| Code quality \| ğŸ”² Deferred \| | action, effort | ### ğŸ”² Planned Next Steps |
| module-total-protected-gap-priority-action-next-steps-docs-pending-master-md-17033 | \| Module \| Total \| Protected \| Gap \| Priority \| Action \| | action, effort | #### ğŸ”´ HIGH PRIORITY â€” Rate Limiting Gaps (213 routes remaining) |
| todo-fixme-comments-29-review-may-contain-valid-work-items-next-steps-docs-pending-master-md-17094 | \| TODO/FIXME comments \| 29 \| ğŸŸ¡ Review \| May contain valid work items \| | action, effort | #### ğŸŸ¢ LOW PRIORITY â€” Code Quality |
| priority-task-effort-impact-status-next-steps-docs-pending-master-md-17235 | \| Priority \| Task \| Effort \| Impact \| Status \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-commit-push-p1-rate-limiting-5-min-44-routes-protected-todo-next-steps-docs-pending-master-md-17237 | \| ğŸ”´ P0 \| Commit & push P1 rate limiting \| 5 min \| 44 routes protected \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-close-stale-draft-prs-539-544-10-min-cleanup-todo-next-steps-docs-pending-master-md-17239 | \| ğŸ”´ P0 \| Close stale draft PRs (539-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p3-rate-limiting-crud-factory-pattern-2-hrs-20-routes-deferred-next-steps-docs-pending-master-md-17240 | \| ğŸŸ¢ P3 \| Rate limiting: crud-factory pattern \| 2 hrs \| ~20 routes \| ğŸ”² Deferred \| | action, effort | ### ğŸ”² Planned Next Steps |
| p3-error-boundaries-for-deep-subpages-2-hrs-100-directories-deferred-bugs-docs-pending-master-md-17241 | \| ğŸŸ¢ P3 \| Error boundaries for deep subpages \| 2 hrs \| ~100 directories \| ğŸ”² Deferred \| | action, effort | ### ğŸ”² Planned Next Steps |
| module-total-protected-gap-priority-next-steps-docs-pending-master-md-17249 | \| Module \| Total \| Protected \| Gap \| Priority \| | action, effort | #### ğŸ”´ HIGH PRIORITY â€” Rate Limiting Gaps (86 routes remaining) |
| missing-error-boundaries-100-deferred-core-routes-covered-30-bugs-docs-pending-master-md-17273 | \| Missing error boundaries \| ~100 \| ğŸŸ¢ Deferred \| Core routes covered (30) \| | action, effort | #### ğŸŸ¡ MEDIUM PRIORITY â€” Validation & Quality |
| rate-limited-routes-51-352-14-gap-301-unprotected-next-steps-docs-pending-master-md-17507 | \| **Rate-Limited Routes** \| 51/352 (14%) \| ğŸ”´ Gap \| 301 unprotected \| | action, effort | ### ğŸ“ Current Progress Summary |
| zod-validated-routes-111-352-32-needs-work-241-remaining-next-steps-docs-pending-master-md-17508 | \| **Zod-Validated Routes** \| 111/352 (32%) \| ğŸŸ¡ Needs work \| 241 remaining \| | action, effort | ### ğŸ“ Current Progress Summary |
| error-boundaries-30-core-covered-some-subpages-missing-bugs-docs-pending-master-md-17509 | \| **Error Boundaries** \| 30 \| âœ… Core covered \| Some subpages missing \| | action, effort | ### ğŸ“ Current Progress Summary |
| open-prs-5-all-draft-cleanup-needed-next-steps-docs-pending-master-md-17510 | \| **Open PRs** \| 5 (all draft) \| ğŸŸ¡ Cleanup needed \| â€” \| | action, effort | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-status-next-steps-docs-pending-master-md-17516 | \| Priority \| Task \| Effort \| Impact \| Status \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-close-stale-draft-prs-540-544-10-min-cleanup-todo-next-steps-docs-pending-master-md-17519 | \| ğŸ”´ P0 \| Close stale draft PRs (540-544) \| 10 min \| Cleanup \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-souq-module-2-hrs-69-routes-need-protection-todo-next-steps-docs-pending-master-md-17520 | \| ğŸŸ¡ P1 \| Rate limiting: Souq module \| 2 hrs \| 69 routes need protection \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-fm-module-1-hr-19-routes-need-protection-todo-next-steps-docs-pending-master-md-17521 | \| ğŸŸ¡ P1 \| Rate limiting: FM module \| 1 hr \| 19 routes need protection \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-rate-limiting-admin-module-1-hr-14-routes-need-protection-todo-next-steps-docs-pending-master-md-17522 | \| ğŸŸ¡ P1 \| Rate limiting: Admin module \| 1 hr \| 14 routes need protection \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-zod-validation-expansion-4-hrs-241-routes-need-schemas-todo-next-steps-docs-pending-master-md-17523 | \| ğŸŸ¡ P2 \| Zod validation expansion \| 4 hrs \| 241 routes need schemas \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p3-error-boundaries-for-subpages-2-hrs-25-subpages-todo-bugs-docs-pending-master-md-17524 | \| ğŸŸ¢ P3 \| Error boundaries for subpages \| 2 hrs \| 25+ subpages \| ğŸ”² TODO \| | action, effort | ### ğŸ”² Planned Next Steps |
| p3-remaining-service-tests-3-hrs-5-services-todo-missing-tests-docs-pending-master-md-17525 | \| ğŸŸ¢ P3 \| Remaining service tests \| 3 hrs \| 5 services \| ğŸ”² TODO \| | action | ### ğŸ”² Planned Next Steps |
| module-total-routes-protected-gap-priority-next-steps-docs-pending-master-md-17533 | \| Module \| Total Routes \| Protected \| Gap \| Priority \| | action, effort | #### ğŸ”´ HIGH PRIORITY â€” Security & Rate Limiting Gaps |
| souq-fm-mostly-missing-add-immediately-next-steps-docs-pending-master-md-17597 | \| Souq, FM \| Mostly missing \| ğŸ”´ Add immediately \| | action, effort | #### Pattern 1: Rate Limiting Implementation |
| various-aggregation-pipelines-missing-limit-stage-next-steps-docs-pending-master-md-17620 | Various aggregation pipelines missing $limit stage | action, effort | #### Pattern 2: Unbounded Database Queries |
| codebase-security-scan-identified-rate-limiting-gaps-next-steps-docs-pending-master-md-17666 | \| Codebase security scan \| Identified rate limiting gaps \| âœ… \| | action, effort | #### Completed This Session |
| error-boundary-audit-30-core-25-missing-subpages-bugs-docs-pending-master-md-17667 | \| Error boundary audit \| 30 core + 25 missing subpages \| âœ… \| | action, effort | #### Completed This Session |
| service-test-gap-analysis-5-services-need-tests-missing-tests-docs-pending-master-md-17668 | \| Service test gap analysis \| 5 services need tests \| âœ… \| | action | #### Completed This Session |
| security-rate-limiting-14-coverage-needs-work-missing-tests-docs-pending-master-md-17694 | \| Security - Rate Limiting \| ğŸ”´ \| 14% coverage - needs work \| | action | ### ğŸ¯ Production Readiness Checklist |
| ux-error-boundaries-core-covered-subpages-pending-bugs-docs-pending-master-md-17698 | \| UX - Error Boundaries \| ğŸŸ¡ \| Core covered, subpages pending \| | action, effort | ### ğŸ¯ Production Readiness Checklist |
| graphql-security-gaps-1-0-1-next-steps-docs-pending-master-md-17812 | \| GraphQL Security Gaps \| 1 \| 0 \| -1 \| | action, effort | ### ğŸ“ˆ Updated Metrics |
| zod-validated-routes-119-352-34-needs-work-233-remaining-next-steps-docs-pending-master-md-17843 | \| **Zod-Validated Routes** \| 119/352 (34%) \| ğŸŸ¡ Needs work \| 233 remaining \| | action, effort | ### ğŸ“ Current Progress Summary |
| services-without-tests-11-gap-see-details-below-missing-tests-docs-pending-master-md-17846 | \| **Services Without Tests** \| 11 \| ğŸŸ¡ Gap \| See details below \| | action | ### ğŸ“ Current Progress Summary |
| priority-task-effort-impact-next-steps-docs-pending-master-md-17852 | \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-add-zod-validation-to-finance-get-routes-1-hr-8-routes-need-schemas-next-steps-docs-pending-master-md-17855 | \| ğŸŸ¡ P1 \| Add Zod validation to Finance GET routes \| 1 hr \| 8 routes need schemas \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-add-rate-limiting-to-souq-module-2-hrs-55-routes-unprotected-next-steps-docs-pending-master-md-17856 | \| ğŸŸ¡ P1 \| Add rate limiting to Souq module \| 2 hrs \| 55+ routes unprotected \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-add-missing-service-tests-3-hrs-11-services-need-tests-missing-tests-docs-pending-master-md-17857 | \| ğŸŸ¡ P2 \| Add missing service tests \| 3 hrs \| 11 services need tests \| | action | ### ğŸ”² Planned Next Steps |
| p3-add-error-boundaries-to-20-modules-2-hrs-ux-improvement-bugs-docs-pending-master-md-17858 | \| ğŸŸ¢ P3 \| Add error boundaries to 20+ modules \| 2 hrs \| UX improvement \| | action, effort | ### ğŸ”² Planned Next Steps |
| missing-service-tests-server-services-testing-11-services-lack-unit-tests-missing-tests-server-services | \| Missing service tests \| `server/services/**` \| Testing \| 11 services lack unit tests \| | action | #### ğŸŸ¡ MEDIUM PRIORITY â€” Efficiency & Reliability |
| missing-error-boundaries-app-ux-20-top-level-routes-lack-error-tsx-bugs-app | \| Missing error boundaries \| `app/*/` \| UX \| 20 top-level routes lack error.tsx \| | action | #### ğŸŸ¡ MEDIUM PRIORITY â€” Efficiency & Reliability |
| module-total-routes-protected-gap-priority-next-steps-docs-pending-master-md-17896 | \| Module \| Total Routes \| Protected \| Gap \| Priority \| | action, effort | #### Rate Limiting Coverage |
| module-total-routes-validated-gap-priority-next-steps-docs-pending-master-md-17909 | \| Module \| Total Routes \| Validated \| Gap \| Priority \| | action, effort | #### Zod Validation Coverage |
| missing-error-boundary-risk-bugs-docs-pending-master-md-17992 | \| Missing Error Boundary \| Risk \| | action, effort | #### Pattern 5: Missing Error Boundaries |
| priority-task-effort-notes-next-steps-docs-pending-master-md-18154 | \| Priority \| Task \| Effort \| Notes \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-expand-rate-limiting-to-215-remaining-routes-4-hrs-focus-hr-crm-finance-modules-next-steps-docs-pending-master-md-18157 | \| ğŸŸ¡ P1 \| Expand rate limiting to 215 remaining routes \| 4 hrs \| Focus: HR, CRM, Finance modules \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-add-try-catch-to-8-routes-without-error-handling-30-min-see-list-below-bugs-docs-pending-master-md-18158 | \| ğŸŸ¡ P1 \| Add try-catch to 8 routes without error handling \| 30 min \| See list below \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-expand-zod-validation-to-240-remaining-routes-6-hrs-focus-mutation-routes-next-steps-docs-pending-master-md-18159 | \| ğŸŸ¡ P1 \| Expand Zod validation to 240 remaining routes \| 6 hrs \| Focus: mutation routes \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-i18n-hardcoded-strings-cleanup-2-hrs-optional-next-steps-docs-pending-master-md-18160 | \| ğŸŸ¢ P2 \| i18n hardcoded strings cleanup \| 2 hrs \| Optional \| | action, effort | ### ğŸ”² Planned Next Steps |
| module-routes-rate-limited-gap-next-steps-docs-pending-master-md-18181 | \| Module \| Routes \| Rate-Limited \| Gap \| | action, effort | #### Rate Limiting Gaps by Module |
| task-effort-priority-status-next-steps-docs-pending-master-md-18335 | \| # \| Task \| Effort \| Priority \| Status \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 1-commit-22-uncommitted-files-5-min-p0-ready-next-steps-docs-pending-master-md-18337 | \| 1 \| Commit 22 uncommitted files \| 5 min \| ğŸ”´ P0 \| â³ Ready \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 2-push-to-remote-2-min-p0-ready-next-steps-docs-pending-master-md-18338 | \| 2 \| Push to remote \| 2 min \| ğŸ”´ P0 \| â³ Ready \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 3-add-zod-to-52-remaining-routes-4-6-hrs-p2-todo-next-steps-docs-pending-master-md-18339 | \| 3 \| Add Zod to 52 remaining routes \| 4-6 hrs \| ğŸŸ¡ P2 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 4-add-try-catch-to-8-routes-1-hr-p2-todo-next-steps-docs-pending-master-md-18340 | \| 4 \| Add try-catch to 8 routes \| 1 hr \| ğŸŸ¡ P2 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 5-fix-graphql-orgid-isolation-2-hrs-p1-todo-next-steps-docs-pending-master-md-18341 | \| 5 \| Fix GraphQL orgId isolation \| 2 hrs \| ğŸ”´ P1 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 6-add-tests-for-6-services-3-4-hrs-p3-todo-missing-tests-docs-pending-master-md-18342 | \| 6 \| Add tests for 6 services \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | action | ### ğŸ“‹ PLANNED NEXT STEPS |
| 7-expand-rate-limiting-to-60-3-4-hrs-p3-todo-next-steps-docs-pending-master-md-18343 | \| 7 \| Expand rate limiting to 60% \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| service-module-path-lines-priority-gap-next-steps-docs-pending-master-md-18370 | \| Service/Module \| Path \| Lines \| Priority \| Gap \| | action, effort | #### C. Missing Tests (Production Readiness) |
| service-critical-functions-test-gap-missing-tests-docs-pending-master-md-18443 | \| Service \| Critical Functions \| Test Gap \| | action | #### Pattern 5: Services Without Unit Tests |
| category-current-target-gap-next-steps-docs-pending-master-md-18454 | \| Category \| Current \| Target \| Gap \| | action, effort | ### ğŸ“Š SUMMARY METRICS |
| missing-email-tocontain-invalid-input-next-steps-docs-pending-master-md-18509 | Missing email: `toContain("Invalid input")` | action, effort | #### 3. `tests/unit/api/auth/forgot-password.test.ts` |
| pr-ready-to-commit-and-merge-next-steps-docs-pending-master-md-18531 | PR: Ready to commit and merge | action, effort | #### Verification Gates |
| priority-task-effort-notes-next-steps-docs-pending-master-md-18550 | \| Priority \| Task \| Effort \| Notes \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-commit-22-files-5-min-stage-and-commit-all-changes-next-steps-docs-pending-master-md-18552 | \| ğŸ”´ P0 \| Commit 22 files \| 5 min \| Stage and commit all changes \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-push-to-origin-2-min-update-remote-branch-next-steps-docs-pending-master-md-18553 | \| ğŸ”´ P0 \| Push to origin \| 2 min \| Update remote branch \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-merge-pr-5-min-ready-for-review-next-steps-docs-pending-master-md-18554 | \| ğŸŸ¡ P1 \| Merge PR \| 5 min \| Ready for review \| | action, effort | ### ğŸ”² Planned Next Steps |
| p1-expand-rate-limiting-to-hr-crm-2-hrs-100-gap-in-hr-crm-modules-next-steps-docs-pending-master-md-18555 | \| ğŸŸ¡ P1 \| Expand rate limiting to HR/CRM \| 2 hrs \| 100% gap in HR, CRM modules \| | action, effort | ### ğŸ”² Planned Next Steps |
| missing-required-field-invalid-input-expected-x-received-undefined-next-steps-docs-pending-master-md-18575 | Missing required field: `"Invalid input: expected X, received undefined"` | action, effort | #### Pattern: Zod Validation Error Messages |
| metric-value-status-next-steps-docs-pending-master-md-18585 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-orgid-isolation-across-graphql-souq-reviews-aqar-listings-packages-favorites-in-review-next-steps-docs-pending-master-md-18589 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-18590 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-master-pending-report-updated-with-latest-orgid-audit-cataloged-user-id-fallbacks-and-missing-tenant-context-across-graphql-souq-and-aqar-flows-missing-tests-docs-pending-master-md-18592 | Progress: Master Pending Report updated with latest orgId audit; cataloged user-id fallbacks and missing tenant context across GraphQL, Souq, and Aqar flows. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-enforce-orgid-tenant-audit-context-on-graphql-reads-writes-remove-user-id-fallbacks-in-souq-aqar-writes-add-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-18593 | Next steps: Enforce orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| efficiency-short-circuit-graphql-reads-when-orgid-missing-todo-fail-fast-for-dashboard-workorder-properties-invoice-to-avoid-orgless-scans-efficiency-docs-pending-master-md-18600 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast for dashboard/workOrder/properties/invoice to avoid orgless scans. \| | action, effort | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-graphql-org-enforcement-tenant-audit-context-missing-add-org-required-orgless-rejection-coverage-for-queries-mutations-missing-tests-docs-pending-master-md-18606 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-souq-review-post-org-requirement-missing-api-test-to-enforce-session-orgid-and-stored-org-matches-tenant-missing-tests-docs-pending-master-md-18607 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-aqar-listing-package-favorites-org-enforcement-missing-ensure-writes-fail-without-orgid-and-persist-correct-tenant-org-missing-tests-docs-pending-master-md-18608 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| uncommitted-changes-10-files-staged-unstaged-pending-commit-next-steps-docs-pending-master-md-18631 | \| **Uncommitted Changes** \| ~10 files (staged + unstaged) \| âš ï¸ Pending commit \| | action, effort | ### ğŸ“ Current Progress & Session Summary |
| priority-task-effort-notes-next-steps-docs-pending-master-md-18647 | \| Priority \| Task \| Effort \| Notes \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-commit-staged-changes-5-min-10-files-with-security-improvements-next-steps-docs-pending-master-md-18649 | \| ğŸ”´ P0 \| Commit staged changes \| 5 min \| ~10 files with security improvements \| | action, effort | ### ğŸ”² Planned Next Steps |
| p0-run-full-test-suite-10-min-pnpm-test-to-validate-all-changes-missing-tests-docs-pending-master-md-18650 | \| ğŸ”´ P0 \| Run full test suite \| 10 min \| `pnpm test` to validate all changes \| | action | ### ğŸ”² Planned Next Steps |
| p1-expand-rate-limiting-to-remaining-215-routes-4-hrs-focus-hr-0-crm-0-finance-1-19-next-steps-docs-pending-master-md-18652 | \| ğŸŸ¡ P1 \| Expand rate limiting to remaining 215 routes \| 4 hrs \| Focus: HR (0%), CRM (0%), Finance (1/19) \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-hardcoded-strings-i18n-2-hrs-deferred-optional-next-steps-docs-pending-master-md-18654 | \| ğŸŸ¢ P2 \| Hardcoded strings â†’ i18n \| 2 hrs \| Deferred (optional) \| | action, effort | ### ğŸ”² Planned Next Steps |
| p2-remove-unused-exports-1-hr-deferred-optional-next-steps-docs-pending-master-md-18655 | \| ğŸŸ¢ P2 \| Remove unused exports \| 1 hr \| Deferred (optional) \| | action, effort | ### ğŸ”² Planned Next Steps |
| area-gap-priority-next-steps-docs-pending-master-md-18681 | \| Area \| Gap \| Priority \| | action, effort | #### C. Missing Tests |
| module-routes-rate-limited-gap-next-steps-docs-pending-master-md-18715 | \| Module \| Routes \| Rate-Limited \| Gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| hr-7-0-100-gap-next-steps-docs-pending-master-md-18717 | \| HR \| 7 \| 0 \| 100% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| crm-4-0-100-gap-next-steps-docs-pending-master-md-18718 | \| CRM \| 4 \| 0 \| 100% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| finance-19-1-95-gap-next-steps-docs-pending-master-md-18719 | \| Finance \| 19 \| 1 \| 95% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| souq-75-3-96-gap-next-steps-docs-pending-master-md-18720 | \| Souq \| 75 \| 3 \| 96% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| aqar-25-4-84-gap-next-steps-docs-pending-master-md-18721 | \| Aqar \| 25 \| 4 \| 84% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| admin-15-9-40-gap-next-steps-docs-pending-master-md-18722 | \| Admin \| 15 \| 9 \| 40% gap \| | action, effort | #### Pattern 3: Rate Limit Gaps by Module |
| lint-not-yet-run-next-steps-docs-pending-master-md-18730 | Lint: Not yet run | action, effort | ### ğŸ“‹ Verification Checklist |
| tests-not-yet-run-missing-tests-docs-pending-master-md-18731 | Tests: Not yet run | action | ### ğŸ“‹ Verification Checklist |
| pr-ready-to-merge-after-tests-pass-missing-tests-docs-pending-master-md-18734 | PR: Ready to merge after tests pass | action | ### ğŸ“‹ Verification Checklist |
| metric-value-status-next-steps-docs-pending-master-md-18742 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-orgid-isolation-across-graphql-souq-reviews-aqar-listings-packages-favorites-in-review-next-steps-docs-pending-master-md-18746 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-18747 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-master-pending-report-refreshed-with-latest-orgid-audit-cataloged-cross-module-user-id-fallbacks-and-missing-tenant-context-on-graphql-reads-writes-missing-tests-docs-pending-master-md-18749 | Progress: Master Pending Report refreshed with latest orgId audit; cataloged cross-module user-id fallbacks and missing tenant context on GraphQL reads/writes. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-enforce-orgid-tenant-audit-context-on-graphql-resolvers-remove-user-id-fallbacks-in-souq-aqar-writes-add-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-18750 | Next steps: Enforce orgId + tenant/audit context on GraphQL resolvers, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| efficiency-short-circuit-graphql-reads-when-orgid-missing-todo-fail-fast-for-dashboard-workorder-properties-invoice-to-avoid-orgless-scans-efficiency-docs-pending-master-md-18757 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast for dashboard/workOrder/properties/invoice to avoid orgless scans. \| | action, effort | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-graphql-org-enforcement-tenant-audit-context-missing-add-org-required-orgless-rejection-coverage-for-queries-mutations-missing-tests-docs-pending-master-md-18763 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-souq-review-post-org-requirement-missing-api-test-to-enforce-session-orgid-and-stored-org-matches-tenant-missing-tests-docs-pending-master-md-18764 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-aqar-listing-package-favorites-org-enforcement-missing-ensure-writes-fail-without-orgid-and-persist-correct-tenant-org-missing-tests-docs-pending-master-md-18765 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| category-current-target-gap-next-steps-docs-pending-master-md-18810 | \| Category \| Current \| Target \| Gap \| | action, effort | #### Security Coverage |
| task-time-est-priority-status-next-steps-docs-pending-master-md-18938 | \| # \| Task \| Time Est. \| Priority \| Status \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 1-run-pnpm-typecheck-pnpm-lint-pnpm-test-10-min-p0-pending-missing-tests-docs-pending-master-md-18940 | \| 1 \| Run `pnpm typecheck && pnpm lint && pnpm test` \| 10 min \| ğŸ”´ P0 \| â³ Pending \| | action | ### ğŸ“‹ PLANNED NEXT STEPS |
| 2-commit-staged-changes-5-min-p0-pending-next-steps-docs-pending-master-md-18941 | \| 2 \| Commit staged changes \| 5 min \| ğŸ”´ P0 \| â³ Pending \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 3-add-zod-validation-to-52-routes-4-6-hrs-p2-todo-next-steps-docs-pending-master-md-18942 | \| 3 \| Add Zod validation to 52 routes \| 4-6 hrs \| ğŸ”´ P2 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 4-add-try-catch-to-5-routes-1-hr-p2-todo-next-steps-docs-pending-master-md-18943 | \| 4 \| Add try-catch to 5 routes \| 1 hr \| ğŸ”´ P2 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 5-fix-graphql-orgid-isolation-2-hrs-p2-todo-next-steps-docs-pending-master-md-18944 | \| 5 \| Fix GraphQL orgId isolation \| 2 hrs \| ğŸ”´ P2 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 6-add-tests-for-6-services-3-4-hrs-p3-todo-missing-tests-docs-pending-master-md-18945 | \| 6 \| Add tests for 6 services \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | action | ### ğŸ“‹ PLANNED NEXT STEPS |
| 7-add-error-boundaries-8-dirs-2-hrs-p3-todo-bugs-docs-pending-master-md-18946 | \| 7 \| Add error boundaries (+8 dirs) \| 2 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| 8-expand-rate-limiting-to-60-3-4-hrs-p3-todo-next-steps-docs-pending-master-md-18947 | \| 8 \| Expand rate limiting to 60% \| 3-4 hrs \| ğŸŸ¡ P3 \| ğŸ”² TODO \| | action, effort | ### ğŸ“‹ PLANNED NEXT STEPS |
| tests-not-run-pending-missing-tests-docs-pending-master-md-18960 | \| Tests \| Not run (pending) \| â³ \| | action | ## ğŸ—“ï¸ 2025-12-12T20:01+03:00 â€” Security Backlog v28.0 |
| metric-value-status-next-steps-docs-pending-master-md-18983 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-orgid-isolation-across-graphql-souq-aqar-writes-in-review-next-steps-docs-pending-master-md-18987 | \| Scope \| OrgId isolation across GraphQL + Souq + Aqar writes \| âœ… In review \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-18988 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-master-pending-report-located-and-updated-with-orgid-audit-expanded-review-across-graphql-queries-mutations-and-souq-aqar-routes-that-fall-back-to-user-ids-next-steps-docs-pending-master-md-18990 | Progress: Master Pending Report located and updated with orgId audit; expanded review across GraphQL queries/mutations and Souq/Aqar routes that fall back to user ids. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-enforce-required-orgid-tenant-audit-context-on-graphql-reads-writes-remove-user-id-fallbacks-in-souq-aqar-routes-add-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-18991 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar routes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| efficiency-short-circuit-graphql-reads-when-orgid-missing-todo-fail-fast-before-db-work-for-dashboard-workorder-properties-invoice-to-prevent-orgless-scans-efficiency-docs-pending-master-md-18998 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Fail fast before DB work for dashboard/workOrder/properties/invoice to prevent orgless scans. \| | action, effort | ### ğŸ”§ Enhancements & Production Readiness |
| bugs-logic-aqar-listing-creation-stores-orgid-user-orgid-user-id-open-app-api-aqar-listings-route-ts-99-138-mixes-org-user-ids-in-listings-collection-bugs-user-orgid | \| Bugs/Logic \| Aqar listing creation stores `orgId = user.orgId \|\| user.id` \| ğŸ”´ Open \| app/api/aqar/listings/route.ts:99-138 â€” mixes org/user ids in listings collection. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-graphql-org-enforcement-tenant-audit-context-missing-add-tests-for-org-required-context-set-cleared-and-orgless-rejections-missing-tests-docs-pending-master-md-19006 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add tests for org-required, context set/cleared, and orgless rejections. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-souq-review-creation-org-requirement-missing-api-test-to-enforce-session-orgid-and-validate-stored-org-matches-tenant-missing-tests-docs-pending-master-md-19007 | \| Missing Tests \| Souq review creation org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and validate stored org matches tenant. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-aqar-listing-package-favorites-org-enforcement-missing-ensure-writes-fail-without-orgid-and-persist-correct-tenant-org-missing-tests-docs-pending-master-md-19008 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Ensure writes fail without orgId and persist correct tenant org. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| metric-value-status-next-steps-docs-pending-master-md-19021 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| scope-orgid-isolation-across-graphql-souq-reviews-aqar-listings-packages-favorites-in-review-next-steps-docs-pending-master-md-19025 | \| Scope \| OrgId isolation across GraphQL, Souq reviews, Aqar listings/packages/favorites \| âœ… In review \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| typecheck-lint-tests-not-run-docs-only-update-pending-missing-tests-docs-pending-master-md-19026 | \| Typecheck/Lint/Tests \| Not run (docs-only update) \| â³ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| progress-master-pending-report-updated-with-latest-orgid-audit-risks-cataloged-across-graphql-read-write-paths-and-souq-aqar-routes-using-user-id-fallbacks-missing-tests-docs-pending-master-md-19028 | Progress: Master Pending Report updated with latest orgId audit; risks cataloged across GraphQL read/write paths and Souq/Aqar routes using user-id fallbacks. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-steps-enforce-required-orgid-tenant-audit-context-on-graphql-reads-writes-remove-user-id-fallbacks-in-souq-aqar-writes-add-regression-tests-then-run-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-19029 | Next steps: Enforce required orgId + tenant/audit context on GraphQL reads/writes, remove user-id fallbacks in Souq/Aqar writes, add regression tests, then run `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| efficiency-short-circuit-graphql-reads-when-orgid-missing-todo-return-auth-error-before-db-calls-for-dashboard-workorder-properties-invoice-bugs-docs-pending-master-md-19036 | \| Efficiency \| Short-circuit GraphQL reads when orgId missing \| ğŸ”² TODO \| Return auth error before DB calls for dashboard/workOrder/properties/invoice. \| | action, effort | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-graphql-org-enforcement-tenant-audit-context-missing-add-org-required-orgless-rejection-coverage-for-queries-mutations-missing-tests-docs-pending-master-md-19042 | \| Missing Tests \| GraphQL org enforcement + tenant/audit context \| ğŸŸ  Missing \| Add org-required + orgless rejection coverage for queries/mutations. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-souq-review-post-org-requirement-missing-api-test-to-enforce-session-orgid-and-stored-org-matches-tenant-missing-tests-docs-pending-master-md-19043 | \| Missing Tests \| Souq review POST org requirement \| ğŸŸ  Missing \| API test to enforce session orgId and stored org matches tenant. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-aqar-listing-package-favorites-org-enforcement-missing-assert-writes-fail-without-orgid-and-persist-correct-tenant-org-missing-tests-docs-pending-master-md-19044 | \| Missing Tests \| Aqar listing/package/favorites org enforcement \| ğŸŸ  Missing \| Assert writes fail without orgId and persist correct tenant org. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| rate-limited-routes-117-352-33-needs-expansion-next-steps-docs-pending-master-md-19064 | \| **Rate-Limited Routes** \| 117/352 (33%) \| âš ï¸ Needs expansion \| | action, effort | ### ğŸ“ Current Progress & Session Summary |
| priority-task-effort-status-blocker-next-steps-docs-pending-master-md-19085 | \| Priority \| Task \| Effort \| Status \| Blocker \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| P0-2 | \| ğŸ”´ P0-2 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ \| DevOps access \| | action | ### ğŸ¯ PLANNED NEXT STEPS |
| P1-1 | \| ğŸŸ¡ P1-1 \| Add Zod validation to 59 remaining routes \| 4 hrs \| ğŸ”² \| None \| | action | ### ğŸ¯ PLANNED NEXT STEPS |
| P1-2 | \| ğŸŸ¡ P1-2 \| Expand rate limiting (HR: 0/7, CRM: 0/4, Finance: 1/19) \| 2 hrs \| ğŸ”² \| None \| | action | ### ğŸ¯ PLANNED NEXT STEPS |
| P1-3 | \| ğŸŸ¡ P1-3 \| Add try-catch to 8 routes without error handling \| 30 min \| ğŸ”² \| None \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| P2-1 | \| ğŸŸ¢ P2-1 \| P3-002 Hardcoded strings â†’ i18n \| 2 hrs \| ğŸ”² DEFERRED \| Optional \| | action | ### ğŸ¯ PLANNED NEXT STEPS |
| P2-2 | \| ğŸŸ¢ P2-2 \| P3-004 Unused exports cleanup \| 1 hr \| ğŸ”² DEFERRED \| Optional \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| properties-route-ts-verify-re-export-or-needs-wrapper-next-steps-properties-route-ts | \| `properties/route.ts` \| ğŸ”² VERIFY \| Re-export or needs wrapper \| | action | #### C. Routes Without Try-Catch (8 Total) |
| pricing-ts-lib-finance-medium-needs-unit-tests-missing-tests-pricing-ts | \| `pricing.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| ğŸ”² Needs unit tests \| | action | #### E. Missing Tests (Production Readiness) |
| metric-value-status-next-steps-docs-pending-master-md-19446 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| latest-command-pnpm-typecheck-0-errors-clean-missing-tests-docs-pending-master-md-19449 | \| Latest Command \| `pnpm typecheck` \| âœ… 0 errors (clean) \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| lint-not-run-this-session-pending-next-steps-docs-pending-master-md-19450 | \| Lint \| Not run this session \| â¸ï¸ Pending \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-not-run-this-session-pending-missing-tests-docs-pending-master-md-19451 | \| Tests \| Not run this session \| â¸ï¸ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-missing-tests-docs-pending-master-md-19470 | **Missing tests** | action | ### ğŸ› ï¸ Enhancements Needed (Production Readiness) |
| metric-value-status-next-steps-docs-pending-master-md-19483 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| latest-command-pnpm-typecheck-2-errors-ts-zod-missing-tests-docs-pending-master-md-19486 | \| Latest Command \| `pnpm typecheck` \| âŒ 2 errors (TS/Zod) \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| lint-not-run-this-session-pending-next-steps-docs-pending-master-md-19487 | \| Lint \| Not run this session \| â¸ï¸ Pending \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-not-run-this-session-pending-missing-tests-docs-pending-master-md-19488 | \| Tests \| Not run this session \| â¸ï¸ Pending \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| next-fix-zod-record-signature-in-transition-route-widen-error-path-typing-in-work-order-creation-then-rerun-pnpm-typecheck-pnpm-lint-pnpm-test-missing-tests-docs-pending-master-md-19490 | Next: fix Zod record signature in transition route, widen error path typing in work-order creation, then rerun `pnpm typecheck && pnpm lint && pnpm test`. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| missing-tests-add-negative-cases-for-invalid-metadata-non-object-non-string-keys-invalid-transition-status-empty-comment-text-attachments-payloads-and-regression-tests-asserting-error-response-shape-and-http-status-400-missing-tests-docs-pending-master-md-19503 | **Missing Tests:** Add negative cases for invalid metadata (non-object, non-string keys), invalid transition status, empty comment text/attachments payloads, and regression tests asserting error response shape and HTTP status (400). | action | ### ğŸ› ï¸ Enhancements, Bugs, Logic, Missing Tests (Production Readiness) |
| P2-10 | \| ğŸŸ¢ P2-10 \| Increase rate limiting coverage (34% â†’ 60%) \| ğŸ”² TODO \| 2 hrs \| | action | ### ğŸ¯ REMAINING ITEMS |
| P2-11 | \| ğŸŸ¢ P2-11 \| Audit 21 console statements \| ğŸ”² TODO \| 30 min \| | action, effort | ### ğŸ¯ REMAINING ITEMS |
| priority-task-effort-status-blocker-next-steps-docs-pending-master-md-19720 | \| Priority \| Task \| Effort \| Status \| Blocker \| | action, effort | ### ğŸ¯ Planned Next Steps |
| P0-1 | \| ğŸ”´ P0-1 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ \| DevOps access \| | action | ### ğŸ¯ Planned Next Steps |
| priority-task-effort-status-next-steps-docs-pending-master-md-19891 | \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p0-push-local-commit-70fab2816-1-min-pending-next-steps-docs-pending-master-md-19893 | \| ğŸ”´ P0 \| Push local commit `70fab2816` \| 1 min \| â³ Pending \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-rate-limiting-to-6-auth-routes-1-hr-todo-next-steps-docs-pending-master-md-19895 | \| ğŸŸ¡ P1 \| Add rate limiting to 6 auth routes \| 1 hr \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-dompurify-to-8-dangerouslysetinnerhtml-2-are-json-stringify-safe-1-hr-todo-next-steps-json-stringify | \| ğŸŸ¡ P1 \| Add DOMPurify to 8 dangerouslySetInnerHTML (2 are JSON.stringify - safe) \| 1 hr \| ğŸ”² TODO \| | action | ### ğŸ¯ Planned Next Steps |
| p2-expand-rate-limit-coverage-to-50-4-hrs-todo-missing-tests-docs-pending-master-md-19898 | \| ğŸŸ¢ P2 \| Expand rate limit coverage to 50%+ \| 4 hrs \| ğŸ”² TODO \| | action | ### ğŸ¯ Planned Next Steps |
| rate-limit-coverage-121-352-34-needs-improvement-missing-tests-docs-pending-master-md-20002 | \| **Rate Limit Coverage** \| 121/352 (34%) \| âš ï¸ Needs improvement \| | action | ### ğŸ“ Current Progress & Status |
| priority-task-effort-status-next-steps-docs-pending-master-md-20016 | \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p0-configure-taqnyat-env-vars-in-vercel-15-min-devops-next-steps-docs-pending-master-md-20018 | \| ğŸ”´ P0 \| Configure Taqnyat env vars in Vercel \| 15 min \| â³ DevOps \| | action | ### ğŸ¯ Planned Next Steps |
| p1-add-dompurify-to-8-dangerouslysetinnerhtml-2-hrs-todo-next-steps-docs-pending-master-md-20020 | \| ğŸŸ¡ P1 \| Add DOMPurify to 8 dangerouslySetInnerHTML \| 2 hrs \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-rate-limiting-to-auth-routes-1-hr-todo-next-steps-docs-pending-master-md-20021 | \| ğŸŸ¡ P1 \| Add rate limiting to auth routes \| 1 hr \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p2-add-tests-for-9-services-without-coverage-4-hrs-todo-missing-tests-docs-pending-master-md-20023 | \| ğŸŸ¢ P2 \| Add tests for 9 services without coverage \| 4 hrs \| ğŸ”² TODO \| | action | ### ğŸ¯ Planned Next Steps |
| p2-audit-unprotected-async-void-operations-1-hr-todo-next-steps-docs-pending-master-md-20024 | \| ğŸŸ¢ P2 \| Audit unprotected async void operations \| 1 hr \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Planned Next Steps |
| app-api-projects-route-ts-72-needs-verification-next-steps-app-api-projects-route-ts-72 | `app/api/projects/route.ts:72` (needs verification) | action | #### Pattern 3: JSON.parse Without Protection in Webhooks |
| rate-limiting-34-coverage-needs-improvement-missing-tests-docs-pending-master-md-20187 | \| **Rate limiting** \| âš ï¸ 34% coverage \| Needs improvement \| | action | ### ğŸ“Š Production Readiness Summary |
| merge-comprehensive-type-safety-and-test-coverage-improvements-missing-tests-docs-pending-master-md-20267 | **Merge** comprehensive type safety and test coverage improvements | action | ### ğŸ¯ Planned Next Steps |
| deploy-to-staging-for-e2e-validation-next-steps-docs-pending-master-md-20268 | **Deploy** to staging for E2E validation | action, effort | ### ğŸ¯ Planned Next Steps |
| priority-task-effort-status-next-steps-docs-pending-master-md-20316 | \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| pricinginsights-ts-lib-aqar-medium-0-pending-next-steps-pricinginsights-ts | \| `pricingInsights.ts` \| lib/aqar/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| recommendation-ts-lib-aqar-medium-0-pending-next-steps-recommendation-ts | \| `recommendation.ts` \| lib/aqar/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| decimal-ts-lib-finance-medium-0-pending-missing-tests-decimal-ts | \| `decimal.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| provision-ts-lib-finance-medium-0-pending-next-steps-provision-ts | \| `provision.ts` \| lib/finance/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| onboardingentities-ts-server-services-medium-0-pending-next-steps-onboardingentities-ts | \| `onboardingEntities.ts` \| server/services/ \| ğŸŸ¡ MEDIUM \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| onboardingkpi-service-ts-server-services-low-0-pending-next-steps-onboardingkpi-service-ts | \| `onboardingKpi.service.ts` \| server/services/ \| ğŸŸ¢ LOW \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| subscriptionseatservice-ts-server-services-low-0-pending-missing-tests-subscriptionseatservice-ts | \| `subscriptionSeatService.ts` \| server/services/ \| ğŸŸ¢ LOW \| 0 \| ğŸ”² Pending \| | action | #### C. Missing Tests (Production Readiness) |
| investigate-playwright-timeout-issues-unrelated-to-production-code-next-steps-docs-pending-master-md-20632 | Investigate Playwright timeout issues (unrelated to production code) | effort | ### ğŸš€ Production Readiness Assessment |
| priority-task-effort-status-next-steps-docs-pending-master-md-20706 | \| Priority \| Task \| Effort \| Status \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| P2-3 | \| ğŸŸ¢ P2-3 \| Replace 13 console statements with logger \| 1 hr \| ğŸ”² Not started \| | action, effort | ### ğŸ¯ PLANNED NEXT STEPS |
| re-ran-pnpm-test-e2e-with-extended-timeout-suite-still-timed-out-copilot-isolation-flow-still-running-typecheck-lint-remain-clean-models-tests-already-green-missing-tests-docs-pending-master-md-20816 | Re-ran `pnpm test:e2e` with extended timeout; suite still timed out (Copilot isolation flow still running). Typecheck/lint remain clean; models tests already green. | action | ### Progress & Planned Next Steps |
| missing-tests-new-coverage-for-checkout-happy-quote-error-tap-client-still-needs-additional-negative-refund-webhook-parsing-cases-full-playwright-still-pending-completion-missing-tests-docs-pending-master-md-20823 | Missing Tests: New coverage for checkout happy/quote/error; TAP client still needs additional negative/refund/webhook parsing cases; full Playwright still pending completion. | action | ### Enhancements (Production Readiness) |
| verification-pnpm-typecheck-pnpm-lint-pnpm-test-models-pnpm-test-e2e-timed-out-10m-copilot-suite-still-running-missing-tests-docs-pending-master-md-20834 | Verification: `pnpm typecheck` âœ…, `pnpm lint` âœ…, `pnpm test:models` âœ…, `pnpm test:e2e` âš ï¸ timed out (~10m, Copilot suite still running). | action | ### Progress & Planned Next Steps |
| priority-task-effort-blocker-next-steps-docs-pending-master-md-20873 | \| Priority \| Task \| Effort \| Blocker \| | action, effort | ### ğŸ¯ Planned Next Steps |
| sms-otp-needs-env-vars-yes-next-steps-docs-pending-master-md-21093 | \| SMS/OTP \| â³ Needs env vars \| **Yes** \| | action | ### ğŸ“‹ PRODUCTION READINESS CHECKLIST |
| pending-p1-add-unit-tests-for-11-services-without-coverage-keep-lint-typecheck-test-gates-green-missing-tests-docs-pending-master-md-21287 | Pending P1: Add unit tests for 11 services without coverage; keep lint/typecheck/test gates green. | action | ### âœ… Current Progress & Next Steps |
| pending-p2-replace-remaining-12-console-usages-with-logger-calls-next-steps-docs-pending-master-md-21288 | Pending P2: Replace remaining 12 console usages with `logger` calls. | action, effort | ### âœ… Current Progress & Next Steps |
| planned-actions-re-run-pnpm-lint-pnpm-test-after-upcoming-changes-keep-staging-release-gate-ready-missing-tests-docs-pending-master-md-21289 | Planned actions: Re-run `pnpm lint && pnpm test` after upcoming changes; keep staging release-gate ready. | action | ### âœ… Current Progress & Next Steps |
| bugs-logic-gh-envs-for-release-gate-open-ensure-github-environments-staging-production-approval-production-exist-to-silence-workflow-warnings-bugs-docs-pending-master-md-21297 | \| Bugs/Logic \| GH envs for release-gate \| Open \| Ensure GitHub environments `staging`, `production-approval`, `production` exist to silence workflow warnings. \| | action | ### ğŸ“‹ Enhancements & Production-Readiness Items (Open) |
| type-safety-in-mongoose-hooks-repeated-as-any-usage-stems-from-missing-hook-generics-centralizing-hook-type-helpers-will-eliminate-all-13-instances-and-reduce-runtime-casting-risks-next-steps-docs-pending-master-md-21303 | Type safety in Mongoose hooks: Repeated `as any` usage stems from missing hook generics; centralizing hook type helpers will eliminate all 13 instances and reduce runtime casting risks. | action, effort | ### ğŸ” Deep-Dive: Similar Issue Patterns |
| pr-541-open-mergeable-changes-requested-next-steps-docs-pending-master-md-21315 | \| **PR #541** \| ğŸŸ¡ OPEN \| Mergeable, changes requested \| | action, effort | ### ğŸ“Œ Current Progress Summary |
| priority-task-effort-impact-next-steps-docs-pending-master-md-21323 | \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p0-merge-pr-541-after-review-approval-5-min-unblock-deployment-next-steps-docs-pending-master-md-21325 | \| ğŸ”´ P0 \| Merge PR #541 after review approval \| 5 min \| Unblock deployment \| | action, effort | ### ğŸ¯ Planned Next Steps |
| p1-add-tests-for-11-services-without-coverage-4-hrs-test-coverage-missing-tests-docs-pending-master-md-21328 | \| ğŸŸ¡ P1 \| Add tests for 11 services without coverage \| 4 hrs \| Test coverage \| | action | ### ğŸ¯ Planned Next Steps |
| p2-replace-12-console-statements-with-structured-logging-1-hr-code-quality-next-steps-docs-pending-master-md-21329 | \| ğŸŸ¢ P2 \| Replace 12 console statements with structured logging \| 1 hr \| Code quality \| | action, effort | ### ğŸ¯ Planned Next Steps |
| todo-fixme-7-low-priority-in-graphql-stubs-next-steps-docs-pending-master-md-21341 | \| **TODO/FIXME** \| 7 \| ğŸŸ¡ \| Low priority, in GraphQL stubs \| | action, effort | ### ğŸ“Š Codebase Metrics (Fresh Scan) |
| module-api-routes-test-files-coverage-gap-missing-tests-docs-pending-master-md-21348 | \| Module \| API Routes \| Test Files \| Coverage % \| Gap \| | action | ### ğŸ” Test Coverage Analysis by Module |
| app-api-fm-needs-verification-next-steps-app-api-fm | `app/api/fm/` â€” Needs verification | action | #### Pattern 1: Missing Error Handling in Work Orders API |
| sms-otp-needs-env-vars-yes-login-next-steps-docs-pending-master-md-21463 | \| SMS/OTP \| ğŸŸ¡ Needs env vars \| Yes (login) \| | action | ### ğŸ“‹ Production Readiness Checklist |
| error-handling-coverage-10-routes-missing-no-missing-tests-docs-pending-master-md-21464 | \| Error handling coverage \| ğŸŸ¡ 10 routes missing \| No \| | action | ### ğŸ“‹ Production Readiness Checklist |
| todo-fixme-7-remaining-low-priority-next-steps-docs-pending-master-md-21550 | \| **TODO/FIXME** \| 7 remaining \| ğŸŸ¡ Low priority \| | action, effort | ### ğŸ“Š Current Codebase Metrics |
| module-api-routes-test-files-coverage-gap-missing-tests-docs-pending-master-md-21557 | \| Module \| API Routes \| Test Files \| Coverage Gap \| | action | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| souq-75-routes-0-tests-critical-gap-missing-tests-docs-pending-master-md-21559 | \| **Souq** \| 75 routes \| 0 tests \| âŒ Critical gap \| | action | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| finance-19-routes-3-tests-84-gap-missing-tests-docs-pending-master-md-21560 | \| **Finance** \| 19 routes \| 3 tests \| ğŸŸ¡ 84% gap \| | action | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| fm-25-routes-3-tests-88-gap-missing-tests-docs-pending-master-md-21561 | \| **FM** \| 25 routes \| 3 tests \| ğŸŸ¡ 88% gap \| | action | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| hr-7-routes-1-test-86-gap-missing-tests-docs-pending-master-md-21562 | \| **HR** \| 7 routes \| 1 test \| ğŸŸ¡ 86% gap \| | action | ### ğŸ” Deep-Dive Analysis: Test Coverage Gaps |
| SENTRY-001 | \| SENTRY-001 \| Add Sentry context to FM/Souq modules \| ğŸ”² TODO \| | action, effort | #### Priority 3: Infrastructure |
| medium-add-sentry-context-to-fm-souq-modules-todo-next-steps-docs-pending-master-md-21652 | \| ğŸŸ¡ MEDIUM \| Add Sentry context to FM/Souq modules \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Outstanding Items (Unchanged from Previous Report) |
| api-routes-without-try-catch-20-routes-error-handling-gap-bugs-docs-pending-master-md-21677 | \| **API Routes without try-catch** \| 20+ routes \| ğŸŸ¡ Error handling gap \| | action, effort | ### ğŸ“Š Codebase Metrics |
| priority-task-category-effort-status-next-steps-docs-pending-master-md-21683 | \| Priority \| Task \| Category \| Effort \| Status \| | action, effort | ### ğŸ¯ Planned Next Steps (Priority Order) |
| high-add-try-catch-to-critical-api-routes-reliability-2-hrs-todo-next-steps-docs-pending-master-md-21686 | \| ğŸ”´ HIGH \| Add try-catch to critical API routes \| Reliability \| 2 hrs \| ğŸ”² TODO \| | action, effort | ### ğŸ¯ Planned Next Steps (Priority Order) |
| medium-add-tests-for-ip-reputation-ts-testing-30-min-todo-missing-tests-ip-reputation-ts | \| ğŸŸ¡ MEDIUM \| Add tests for ip-reputation.ts \| Testing \| 30 min \| ğŸ”² TODO \| | action | ### ğŸ¯ Planned Next Steps (Priority Order) |
| ENH-LP-007 | \| ğŸŸ¡ MEDIUM \| ENH-LP-007: Sentry.setContext() for FM/Souq \| Observability \| 30 min \| âš ï¸ PARTIAL \| | action | ### ğŸ¯ Planned Next Steps (Priority Order) |
| low-review-dangerouslysetinnerhtml-usages-security-30-min-backlog-next-steps-docs-pending-master-md-21691 | \| ğŸŸ¢ LOW \| Review dangerouslySetInnerHTML usages \| Security \| 30 min \| ğŸ”² BACKLOG \| | action, effort | ### ğŸ¯ Planned Next Steps (Priority Order) |
| confirmed-new-stack-drift-sql-prisma-instrumentation-pulled-via-sentry-opentelemetry-and-prisma-instrumentation-in-pnpm-lock-yaml-next-steps-sentry-opentelemetry | Confirmed new stack drift: SQL/Prisma instrumentation pulled via `@sentry/opentelemetry` and `@prisma/instrumentation` in `pnpm-lock.yaml`. | action | ### ğŸ“ˆ Progress & Planned Next Steps |
| identified-tenancy-scope-regression-tenant-filter-uses-tenant-id-user-id-hr-payroll-role-bleed-to-finance-and-18-finance-hr-routes-using-raw-req-json-next-steps-user-id | Identified tenancy scope regression (tenant filter uses `tenant_id = user.id`), HR payroll role bleed to Finance, and 18 finance/HR routes using raw `req.json()`. | action | ### ğŸ“ˆ Progress & Planned Next Steps |
| next-regenerate-lockfile-without-sql-prisma-knex-pg-mysql-instrumentations-fix-tenant-scope-to-org-id-unit-id-gate-payroll-to-hr-only-add-safe-json-parser-across-finance-hr-routes-rerun-pnpm-typecheck-pnpm-lint-pnpm-test-after-fixes-missing-tests-docs-pending-master-md-21835 | Next: regenerate lockfile without SQL/Prisma/knex/pg/mysql instrumentations; fix tenant scope to `{ org_id, unit_id }`; gate payroll to HR-only; add safe JSON parser across finance/HR routes; rerun `pnpm typecheck && pnpm lint && pnpm test` after fixes. | action | ### ğŸ“ˆ Progress & Planned Next Steps |
| missing-tests-add-negative-invalid-json-tests-for-finance-hr-routes-add-payroll-rbac-tests-hr-only-add-lockfile-guard-to-prevent-sql-prisma-deps-extend-tap-payments-tests-to-cover-lastchargeid-path-and-failure-handling-missing-tests-docs-pending-master-md-21844 | **Missing Tests:** Add negative/invalid-JSON tests for finance/HR routes; add payroll RBAC tests (HR-only); add lockfile guard to prevent SQL/Prisma deps; extend TAP payments tests to cover `lastChargeId` path and failure handling. | action | ### ğŸ§© Enhancements / Bugs / Logic / Missing Tests (Prod Readiness) |
| priority-task-effort-impact-next-steps-docs-pending-master-md-21872 | \| Priority \| Task \| Effort \| Impact \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| medium-create-tests-for-escalation-service-ts-170-loc-1-hr-sla-compliance-missing-tests-escalation-service-ts | \| ğŸŸ§ MEDIUM \| Create tests for `escalation.service.ts` (170 LOC) \| 1 hr \| SLA compliance \| | action | ### ğŸ“‹ Planned Next Steps |
| low-remove-7-todo-comments-in-lib-graphql-1-2-hrs-code-cleanup-next-steps-docs-pending-master-md-21878 | \| ğŸŸ¨ LOW \| Remove 7 TODO comments in lib/graphql \| 1-2 hrs \| Code cleanup \| | action, effort | ### ğŸ“‹ Planned Next Steps |
| todo-fixme-7-low-well-maintained-next-steps-docs-pending-master-md-21890 | \| TODO/FIXME \| 7 \| âœ… Low - well maintained \| | action, effort | #### ğŸ“ˆ Metrics Overview |
| lib-logger-ts-250-logger-utility-needs-generic-error-handling-bugs-lib-logger-ts-250 | `lib/logger.ts:250` â€” Logger utility needs generic error handling | action | #### ğŸŸ¡ Pattern Issue #2: TypeScript `any` Usage (28 instances) |
| details-todo-fetch-from-database-when-multi-tenant-is-implemented-next-steps-todo-fetch-from-database-when-multi-tenant-is-implemented | **Details:** `// TODO: Fetch from database when multi-tenant is implemented` | action | #### Issue #2: Multi-tenant TODO |
| TODO-001 | \| TODO-001 \| Cleanup \| ğŸŸ© Minor \| â³ Open \| 7 TODO comments in lib/graphql \| | action, effort | ### ğŸ“ Issues Register Update |
| restrict-hr-payroll-routes-to-hr-roles-optionally-corporate-admin-per-sot-and-remove-finance-role-access-next-steps-docs-pending-master-md-22236 | Restrict HR payroll routes to HR roles (optionally Corporate Admin per SoT) and remove Finance role access. | action, effort | ### 2) Planned Next Steps (Severity-Ordered) |
| reconcile-docs-categorized-tasks-list-md-status-with-context-anchors-either-revive-or-update-anchors-to-point-to-docs-pending-master-md-next-steps-docs-categorized-tasks-list-md | Reconcile `docs/CATEGORIZED_TASKS_LIST.md` status with context anchors (either revive or update anchors to point to `docs/PENDING_MASTER.md`). | action | ### 2) Planned Next Steps (Severity-Ordered) |
| new-hr-payroll-role-bleed-to-finance-next-steps-docs-pending-master-md-22242 | **ğŸ”´ New HR payroll role bleed to Finance** | action, effort | #### ğŸ”´ Security & RBAC |
| new-tenant-scope-uses-tenant-id-userid-no-org-unit-enforcement-next-steps-docs-pending-master-md-22256 | **ğŸ”´ New Tenant scope uses tenant_id=userId (no org/unit enforcement)** | action, effort | #### ğŸ”´ Multi-Tenancy & Data Scoping |
| new-sql-prisma-instrumentation-present-in-lockfile-next-steps-docs-pending-master-md-22264 | **ğŸ”´ New SQL/Prisma instrumentation present in lockfile** | action, effort | #### ğŸ”´ Stack/Architecture Violations |
| new-task-source-drift-categorized-tasks-list-deprecated-next-steps-docs-pending-master-md-22278 | **ğŸŸ¡ New Task source drift (CATEGORIZED_TASKS_LIST deprecated)** | action, effort | #### ğŸŸ¢ Cleanup & Governance |
| metric-value-status-next-steps-docs-pending-master-md-22369 | \| Metric \| Value \| Status \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| typescript-0-errors-pnpm-typecheck-bugs-docs-pending-master-md-22373 | \| TypeScript \| 0 errors (`pnpm typecheck`) \| âœ… \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| eslint-0-errors-pnpm-lint-bugs-docs-pending-master-md-22374 | \| ESLint \| 0 errors (`pnpm lint`) \| âœ… \| | action, effort | ### ğŸ“ Current Progress & Planned Next Steps |
| tests-pnpm-vitest-run-tests-unit-lib-graphql-index-test-ts-targeted-missing-tests-pnpm-vitest-run-tests-unit-lib-graphql-index-test-ts | \| Tests \| `pnpm vitest run tests/unit/lib/graphql/index.test.ts` \| âœ… Targeted \| | action | ### ğŸ“ Current Progress & Planned Next Steps |
| planned-next-steps-reuse-rest-zod-schemas-for-graphql-inputs-add-integration-tests-pagination-auth-error-payloads-under-the-feature-flag-and-extract-shared-mapping-helpers-id-tenant-address-status-to-prevent-drift-missing-tests-docs-pending-master-md-22378 | Planned next steps: Reuse REST Zod schemas for GraphQL inputs, add integration tests (pagination/auth/error payloads) under the feature flag, and extract shared mapping helpers (ID/tenant/address/status) to prevent drift. | action | ### ğŸ“ Current Progress & Planned Next Steps |
| efficiency-shared-mapper-util-module-id-tenant-address-enum-mapping-todo-extract-helpers-used-across-graphql-to-avoid-duplication-efficiency-docs-pending-master-md-22384 | \| Efficiency \| Shared mapper/util module (ID, tenant, address, enum mapping) \| ğŸ”² TODO \| Extract helpers used across GraphQL to avoid duplication. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| bugs-validation-parity-gap-todo-apply-rest-zod-schemas-to-graphql-create-update-work-orders-to-block-unsafe-payloads-bugs-docs-pending-master-md-22386 | \| Bugs \| Validation parity gap \| ğŸ”² TODO \| Apply REST Zod schemas to GraphQL create/update work orders to block unsafe payloads. \| | action, effort | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-integration-feature-flagged-handler-todo-add-handler-tests-for-pagination-cursors-auth-failures-and-error-shapes-missing-tests-docs-pending-master-md-22389 | \| Missing Tests \| Integration (feature-flagged handler) \| ğŸ”² TODO \| Add handler tests for pagination cursors, auth failures, and error shapes. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| missing-tests-negative-mutation-cases-todo-add-invalid-id-vendor-status-priority-tests-mirroring-rest-coverage-missing-tests-docs-pending-master-md-22390 | \| Missing Tests \| Negative mutation cases \| ğŸ”² TODO \| Add invalid ID/vendor/status/priority tests mirroring REST coverage. \| | action | ### ğŸ”§ Enhancements & Production Readiness |
| validation-gaps-graphql-currently-accepts-broad-inputs-while-rest-uses-zod-reusing-schemas-closes-bypass-paths-and-aligns-error-payloads-applies-to-future-graphql-mutations-properties-invoices-too-bugs-docs-pending-master-md-22396 | **Validation gaps**: GraphQL currently accepts broad inputs while REST uses Zod; reusing schemas closes bypass paths and aligns error payloadsâ€”applies to future GraphQL mutations (properties/invoices) too. | action, effort | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| soft-delete-tenant-guards-previously-missing-in-graphql-now-applied-any-new-resolvers-should-inherit-the-guard-helper-to-match-rest-isolation-fm-finance-models-especially-next-steps-docs-pending-master-md-22397 | **Soft-delete/tenant guards**: Previously missing in GraphQL; now applied. Any new resolvers should inherit the guard helper to match REST isolation (FM/finance models especially). | action, effort | ### ğŸ” Deep-Dive: Similar/Identical Issue Patterns |
| finished-wiring-all-graphql-resolver-todos-auth-context-extraction-session-bearer-me-user-lookup-work-order-list-detail-pagination-dashboard-stats-via-shared-query-helpers-and-creation-with-sla-audit-tenant-context-next-steps-docs-pending-master-md-22402 | Finished wiring all GraphQL resolver TODOs: auth context extraction (session/bearer), `me` user lookup, work order list/detail pagination, dashboard stats via shared query helpers, and creation with SLA/audit/tenant context. | action, effort | ### Progress & Planned Next Steps |
| tenant-config-now-loads-from-organizations-tenants-collections-with-cache-default-fallback-still-serves-defaults-if-db-unreachable-next-steps-docs-pending-master-md-22403 | Tenant config now loads from `organizations`/`tenants` collections with cache + default fallback; still serves defaults if DB unreachable. | action | ### Progress & Planned Next Steps |
| verification-this-session-pnpm-typecheck-pnpm-lint-pnpm-test-models-pnpm-test-e2e-timed-out-10m-next-rerun-playwright-with-higher-timeout-ci-gate-to-confirm-full-pass-missing-tests-docs-pending-master-md-22404 | Verification this session: `pnpm typecheck` âœ…, `pnpm lint` âœ…, `pnpm test:models` âœ…, `pnpm test:e2e` âš ï¸ timed out (~10m). Next: rerun Playwright with higher timeout/CI gate to confirm full pass. | action | ### Progress & Planned Next Steps |
| souq-ad-click-handler-hardened-timestamp-parsed-once-to-number-before-signature-verification-to-satisfy-type-guard-and-avoid-silent-coercion-issues-next-steps-docs-pending-master-md-22405 | Souq ad click handler hardened: timestamp parsed once to number before signature verification to satisfy type guard and avoid silent coercion issues. | action, effort | ### Progress & Planned Next Steps |
| missing-tests-graphql-resolvers-context-building-pagination-creation-errors-tenant-config-db-backed-path-souq-ad-click-negative-cases-and-a-rerun-of-playwright-suite-after-timeout-missing-tests-docs-pending-master-md-22413 | Missing tests: GraphQL resolvers (context building, pagination, creation errors), tenant config DB-backed path, Souq ad click negative cases, and a rerun of Playwright suite after timeout. | action | ### Enhancements / Production Readiness (Efficiency, Bugs, Logic, Missing Tests) |
| test-coverage-gap-pattern-feature-flagged-graphql-surface-still-lacks-unit-integration-tests-apply-the-same-coverage-model-used-for-rest-work-orders-pagination-filters-authorization-to-prevent-regressions-when-the-flag-is-enabled-missing-tests-docs-pending-master-md-22418 | Test coverage gap pattern: feature-flagged GraphQL surface still lacks unit/integration tests; apply the same coverage model used for REST work orders (pagination, filters, authorization) to prevent regressions when the flag is enabled. | action | ### Deep-Dive: Similar/Identical Patterns to Address |
| planned-next-steps-rerun-playwright-with-higher-timeout-add-unit-integration-tests-for-graphql-resolvers-context-pagination-creation-validation-and-tenant-config-db-path-add-negative-tests-for-souq-ad-click-signature-timestamp-align-graphql-creation-validation-with-rest-schema-document-tenant-offline-fallback-behavior-missing-tests-docs-pending-master-md-22424 | Planned next steps: rerun Playwright with higher timeout; add unit/integration tests for GraphQL resolvers (context, pagination, creation validation) and tenant config DB path; add negative tests for Souq ad click signature/timestamp; align GraphQL creation validation with REST schema; document tenant offline fallback behavior. | action | ### Progress & Planned Next Steps |
| priority-id-task-effort-next-steps-docs-pending-master-md-22467 | \| Priority \| ID \| Task \| Effort \| | action, effort | ### ğŸš€ Planned Next Steps |
| TEST-FIX | \| ğŸŸ¡ HIGH \| TEST-FIX \| Fix 21 failing tests in new test files \| 2h \| | action | ### ğŸš€ Planned Next Steps |
| TEST-COV | \| ğŸŸ¢ MEDIUM \| TEST-COV \| Continue API route test coverage expansion \| 4h \| | action | ### ğŸš€ Planned Next Steps |
| tests-api-hr-employees-directory-created-pending-missing-tests-tests-api-hr-employees | \| `tests/api/hr/employees/` \| (directory created) \| - \| â³ Pending \| | action | ### ğŸ“‹ New Test Files Added |
| fm-work-orders-tests-missing-requirefmability-mock-configuration-missing-tests-docs-pending-master-md-22498 | FM work-orders tests: Missing `requireFmAbility` mock configuration | action | ### ğŸ” Test Failure Analysis |
| coverage-ratio-65-needs-verification-missing-tests-docs-pending-master-md-22536 | Coverage Ratio: ~65% (needs verification) | action | #### Pattern 3: Test Coverage Gaps |
| total-pending-36-no-change-from-last-session-next-steps-docs-pending-master-md-22551 | \| **TOTAL PENDING** \| **36** \| No change from last session \| | action, effort | ### ğŸ“Š Issue Count Summary |
| total-pending-40-36-4-next-steps-docs-pending-master-md-22609 | \| Total Pending \| 40 \| 36 \| -4 \| | action, effort | ### ğŸ“Š Issue Count Update |
| api-routes-352-total-64-coverage-gap-missing-tests-docs-pending-master-md-22621 | API routes: **352 total** (64% coverage gap) | action | ### ğŸ“ˆ Current Progress |
| priority-id-task-effort-next-steps-docs-pending-master-md-22631 | \| Priority \| ID \| Task \| Effort \| | action, effort | ### ğŸš€ Planned Next Steps |
| TEST-IP | \| ğŸŸ¢ MEDIUM \| TEST-IP \| Add tests for `lib/security/ip-reputation.ts` \| 1h \| | action | ### ğŸš€ Planned Next Steps |
| TEST-TAQNYAT | \| ğŸŸ¢ MEDIUM \| TEST-TAQNYAT \| Add tests for `lib/sms-providers/taqnyat.ts` \| 1h \| | action | ### ğŸš€ Planned Next Steps |
| E2E-TIMEOUT | \| ğŸŸ¢ MEDIUM \| E2E-TIMEOUT \| Rerun Playwright with extended timeout \| 30min \| | action, effort | ### ğŸš€ Planned Next Steps |
| TEST-API-GAP | \| TEST-API-GAP \| 127 API routes without dedicated tests \| â³ Coverage gap \| | action | #### Missing Tests |
| total-pending-40-next-steps-docs-pending-master-md-22681 | \| **TOTAL PENDING** \| **40** \| | action, effort | ### ğŸ“Š Status Summary |
| missing-tests-prod-readiness-missing-tests-docs-pending-master-md-22712 | **Missing Tests (prod readiness)** | action | ### Comprehensive Enhancements / Bugs / Missing Tests (production focus) |
| total-pending-50-41-9-next-steps-docs-pending-master-md-22786 | \| Total Pending \| 50 \| 41 \| -9 \| | action, effort | ### ğŸ“Š Issue Count Update |
| total-pending-57-50-7-next-steps-docs-pending-master-md-22817 | \| Total Pending \| 57 \| 50 \| -7 \| | action, effort | ### ğŸ“Š Issue Count Update |
| missing-tests-prod-readiness-missing-tests-docs-pending-master-md-22854 | **Missing Tests (prod readiness)** | action | ### Comprehensive Enhancements / Bugs / Missing Tests (production focus) |
| typecheck-currently-failing-at-lib-finance-checkout-ts-171-itapinfo-missing-chargeid-lint-unchanged-tests-above-passing-missing-tests-lib-finance-checkout-ts-171 | Typecheck currently failing at `lib/finance/checkout.ts:171` (ITapInfo missing `chargeId`); lint unchanged; tests above passing. | action | ### Progress (current session) |
| area-gap-priority-status-next-steps-docs-pending-master-md-22903 | \| Area \| Gap \| Priority \| Status \| | action, effort | #### Missing Tests (production readiness) |
| payments-tap-tap-payments-ts-core-gateway-checkout-ts-validation-critical-todo-next-steps-tap-payments-ts | \| Payments/TAP \| tap-payments.ts core gateway + checkout.ts validation \| ğŸ”´ CRITICAL \| â³ TODO \| | action | #### Missing Tests (production readiness) |
| auth-api-remaining-routes-signup-refresh-session-edge-cases-beyond-new-otp-post-login-forgot-reset-coverage-high-in-progress-missing-tests-docs-pending-master-md-22906 | \| Auth/API \| Remaining routes (signup/refresh/session edge cases) beyond new OTP/post-login/forgot/reset coverage \| ğŸŸ¡ HIGH \| ğŸš§ In progress \| | action | #### Missing Tests (production readiness) |
| marketplace-souq-settlements-seller-lifecycle-beyond-new-escrow-payout-tests-high-todo-missing-tests-docs-pending-master-md-22907 | \| Marketplace/Souq \| Settlements seller lifecycle beyond new escrow/payout tests \| ğŸŸ¡ HIGH \| â³ TODO \| | action | #### Missing Tests (production readiness) |
| billing-subscriptionbillingservice-recurring-charges-critical-todo-next-steps-docs-pending-master-md-22908 | \| Billing \| subscriptionBillingService recurring charges \| ğŸ”´ CRITICAL \| â³ TODO \| | action, effort | #### Missing Tests (production readiness) |
| environment-setup-gaps-release-gate-and-related-workflows-reference-missing-github-environments-same-fix-create-envs-resolves-all-three-workflow-warnings-next-steps-docs-pending-master-md-22914 | **Environment setup gaps**: release-gate and related workflows reference missing GitHub environments; same fix (create envs) resolves all three workflow warnings. | action | ### Deep-Dive: Similar Issues Found Elsewhere |
| id-task-priority-effort-owner-next-steps-docs-pending-master-md-22976 | \| ID \| Task \| Priority \| Effort \| Owner \| | action, effort | ### ğŸš€ Planned Next Steps |
| GH-ENV | \| GH-ENV \| Create GitHub environments (staging, production-approval, production) \| ğŸŸ¡ HIGH \| 15min \| DevOps \| | action | ### ğŸš€ Planned Next Steps |
| SEC-005 | \| SEC-005 \| Rate limiting gaps \| auth/otp routes \| âœ… FALSE POSITIVE \| - \| | action, effort | #### ğŸ›¡ï¸ Security Items |
| total-open-issues-57-57-0-no-change-next-steps-docs-pending-master-md-23038 | \| Total Open Issues \| 57 \| 57 \| 0 (no change) \| | action, effort | ### ğŸ“Š Session Status Changes |
| pending-counts-adjusted-5-items-after-test-coverage-full-recount-pending-for-json-protection-backlog-missing-tests-docs-pending-master-md-23105 | Pending counts adjusted (-5 items) after test coverage; full recount pending for JSON-protection backlog. | action | ### ğŸ” Notes |
| id-task-effort-owner-next-steps-docs-pending-master-md-23182 | \| # \| ID \| Task \| Effort \| Owner \| | action, effort | #### ğŸ¯ Planned Next Steps (Priority Order) |
| ERR-BOUND | \| 4 \| **ERR-BOUND** \| Add missing error.tsx to 6 modules \| 1h \| Agent \| | action | #### ğŸ¯ Planned Next Steps (Priority Order) |
| AUDIT-LOG | \| 5 \| **AUDIT-LOG** \| Fix 9 non-null assertions in server/audit-log.ts \| 30m \| Agent \| | action | #### ğŸ¯ Planned Next Steps (Priority Order) |
| RATE-LIMIT | \| 6 \| **RATE-LIMIT** \| Apply rate limiting to public marketplace APIs \| 2h \| Agent \| | action, effort | #### ğŸ¯ Planned Next Steps (Priority Order) |
| master-pending-report-located-and-updated-as-the-single-source-of-truth-no-duplicate-files-created-next-steps-docs-pending-master-md-23284 | Master Pending Report located and updated as the single source of truth (no duplicate files created). | action, effort | ### ğŸ“Œ Progress & Planned Next Steps |
| billing-finance-routes-reviewed-for-parsing-auth-gaps-payment-create-auth-ordering-issue-identified-next-steps-docs-pending-master-md-23285 | Billing/finance routes reviewed for parsing/auth gaps; payment create/auth ordering issue identified. | action, effort | ### ğŸ“Œ Progress & Planned Next Steps |
| next-steps-next-steps-docs-pending-master-md-23286 | Next steps: | action, effort | ### ğŸ“Œ Progress & Planned Next Steps |
| FIN-TEST-001 | \| FIN-TEST-001 \| Missing Tests \| Billing/Finance payments stack \| No coverage for billing/quote, payments/create, payments/tap/checkout, finance accounts/expenses/journals \| Regressions in auth/validation/parsing go undetected \| Add Vitest route tests mirroring billing/subscribe: auth fail, invalid JSON, validation errors, happy path \| | action | ### ğŸš€ Production-Readiness Enhancements (New) |
| coverage-gap-existing-billing-tests-cover-subscribe-upgrade-history-only-finance-coverage-is-limited-to-payments-invoices-happy-paths-no-tests-for-quote-tap-checkout-accounts-expenses-journals-or-json-error-unauth-flows-add-route-tests-before-refactors-to-lock-behavior-missing-tests-docs-pending-master-md-23303 | **Coverage gap**: Existing billing tests cover subscribe/upgrade/history only. Finance coverage is limited to payments/invoices happy paths; no tests for quote, Tap checkout, accounts/expenses/journals, or JSON-error/unauth flows. Add route tests before refactors to lock behavior. | action | ### ğŸ” Deep-Dive: Similar/Identical Issues |
| progress-scoped-review-of-otp-webhook-pm-plan-apis-to-capture-production-readiness-gaps-no-code-changes-or-commands-executed-in-this-session-next-steps-docs-pending-master-md-23308 | Progress: Scoped review of OTP/webhook + PM plan APIs to capture production-readiness gaps; no code changes or commands executed in this session. | action, effort | ### ğŸ“ˆ Progress & Planned Next Steps |
| next-steps-next-steps-docs-pending-master-md-23309 | Next steps: | action, effort | ### ğŸ“ˆ Progress & Planned Next Steps |
| missing-tests-missing-tests-docs-pending-master-md-23322 | Missing Tests: | action | ### ğŸš€ Enhancements / Issues (Production Readiness) |
| progress-config-resolveauthsecret-now-aliases-auth-secret-nextauth-secret-before-validation-no-additional-crash-paths-found-in-auth-routes-health-checks-tests-scripts-all-already-use-nextauth-secret-auth-secret-or-throw-with-guidance-missing-tests-docs-pending-master-md-23335 | Progress: Config `resolveAuthSecret()` now aliases `AUTH_SECRET â†’ NEXTAUTH_SECRET` before validation; no additional crash paths found in auth routes/health checks/tests/scripts (all already use `NEXTAUTH_SECRET \|\| AUTH_SECRET` or throw with guidance). | action | ### Progress & Planned Next Steps |
| progress-master-report-updated-single-source-of-truth-no-duplicate-files-created-next-steps-docs-pending-master-md-23336 | Progress: Master report updated (single source of truth) â€” no duplicate files created. | action, effort | ### Progress & Planned Next Steps |
| next-steps-next-steps-docs-pending-master-md-23337 | Next steps: | action, effort | ### Progress & Planned Next Steps |
| AUTH-BUG-001 | \| AUTH-BUG-001 \| Bug \| ğŸŸ  Pending \| Runtime/console crash if neither secret is set (observed in SW logs). Mitigate by setting real secret everywhere. \| | action | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| AUTH-OPS-002 | \| AUTH-OPS-002 \| DevOps \| ğŸŸ  Pending \| Enforce identical secrets across Vercel/preview/local; add secret checks in CI/CD; rotate placeholders. \| | action | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| AUTH-LOGIC-001 | \| AUTH-LOGIC-001 \| Logic \| ğŸŸ  Pending \| Align auth routes/services to consume `Config.auth.secret` where possible to avoid divergent env access. \| | action | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| AUTH-TEST-002 | \| AUTH-TEST-002 \| Tests \| ğŸŸ¡ Pending \| Add unit/integration coverage for `resolveAuthSecret()` + `/api/health/auth` healthy state when either secret present. \| | action | ### Enhancements / Bugs / Logic / Missing Tests (Prod Readiness Focus) |
| monitoring-assets-unvalidated-grafana-alerts-dashboards-mirror-the-missing-gate-issue-seen-with-translation-ts-prune-add-a-generic-lint-validate-step-to-avoid-silent-drift-next-steps-docs-pending-master-md-23391 | **Monitoring assets unvalidated** (Grafana alerts/dashboards) mirror the missing gate issue seen with translation/ts-prune; add a generic lint/validate step to avoid silent drift. | action, effort | ### Deep-Dive: Similar Issues Patterning |
| open-prs-2-540-this-539-paytabs-cleanup-next-steps-docs-pending-master-md-23405 | \| **Open PRs** \| 2 \| #540 (this), #539 (PayTabs cleanup) \| | action, effort | ### ğŸ“ˆ Current Progress |
| id-task-priority-owner-effort-next-steps-docs-pending-master-md-23411 | \| # \| ID \| Task \| Priority \| Owner \| Effort \| | action, effort | ### ğŸ¯ Planned Next Steps (Priority Order) |
| EFF-005 | \| EFF-005 \| Hooks in wrong directories \| lib/fm/use*.ts, components/**/use*.tsx \| Inconsistent organization \| Move to hooks/ directory \| â³ TODO \| | action, effort | #### A) EFFICIENCY IMPROVEMENTS |
| BUG-004 | \| BUG-004 \| Global interval without cleanup \| lib/otp-store-redis.ts \| ğŸŸ¢ Low \| No graceful shutdown \| Store interval ID, export cleanup \| â³ TODO \| | action | #### B) BUGS/LOGIC ERRORS |
| id-component-file-lines-gap-priority-next-steps-docs-pending-master-md-23447 | \| ID \| Component \| File \| Lines \| Gap \| Priority \| | action, effort | #### C) MISSING TESTS (Production Readiness) |
| PERF-003 | \| PERF-003 \| N+1 in claim escalation \| services/souq/returns/claim-service.ts \| 100 claims = 100 round trips \| Use updateMany() \| â³ TODO \| | action | #### D) PERFORMANCE ISSUES |
| PERF-004 | \| PERF-004 \| Sequential notifications \| app/api/admin/notifications/send/route.ts \| 1000Ã—3 = 3000 API calls \| Use batch APIs, queue with BullMQ \| â³ TODO \| | action | #### D) PERFORMANCE ISSUES |
| testing-gaps-45-missing-tests-docs-pending-master-md-23583 | **Testing Gaps**: 45 | action | ### ğŸ“ˆ Progress Summary |
| TEST-001-007 | **TEST-001-007**: Add payment/billing test coverage (CRITICAL) | action | ### ğŸ¯ Current Status & Next Steps (Top 5) |
| id-component-function-file-gap-priority-next-steps-docs-pending-master-md-23629 | \| ID \| Component/Function \| File \| Gap \| Priority \| | action, effort | #### Missing Tests |
| 1-taqnyat-api-credentials-missing-invalid-check-vercel-env-vars-todo-next-steps-docs-pending-master-md-23750 | \| 1 \| **Taqnyat API credentials missing/invalid** \| Check Vercel env vars \| â³ TODO \| | action | #### ğŸ” Potential Root Causes |
| 2-sender-id-not-registered-with-citc-verify-sender-name-with-taqnyat-todo-next-steps-docs-pending-master-md-23751 | \| 2 \| **Sender ID not registered with CITC** \| Verify sender name with Taqnyat \| â³ TODO \| | action, effort | #### ğŸ” Potential Root Causes |
| 3-phone-number-format-incorrect-should-be-966xxxxxxxxx-no-00-todo-next-steps-docs-pending-master-md-23752 | \| 3 \| **Phone number format incorrect** \| Should be `966XXXXXXXXX` (no +/00) \| â³ TODO \| | action, effort | #### ğŸ” Potential Root Causes |
| 4-taqnyat-service-outage-check-status-taqnyat-sa-todo-next-steps-status-taqnyat-sa | \| 4 \| **Taqnyat service outage** \| Check status.taqnyat.sa \| â³ TODO \| | action | #### ğŸ” Potential Root Causes |
| 5-rate-limiting-hit-check-taqnyat-dashboard-todo-next-steps-docs-pending-master-md-23754 | \| 5 \| **Rate limiting hit** \| Check Taqnyat dashboard \| â³ TODO \| | action, effort | #### ğŸ” Potential Root Causes |
| 6-otp-not-being-stored-check-redis-memory-store-todo-next-steps-docs-pending-master-md-23755 | \| 6 \| **OTP not being stored** \| Check Redis/memory store \| â³ TODO \| | action, effort | #### ğŸ” Potential Root Causes |
| 7-api-route-error-check-vercel-logs-for-api-auth-todo-bugs-api-auth | \| 7 \| **API route error** \| Check Vercel logs for `/api/auth/*` \| â³ TODO \| | action | #### ğŸ” Potential Root Causes |
| 5-test-across-all-pages-30m-p2-footer-smoke-hydration-check-broader-regression-pending-missing-tests-docs-pending-master-md-23833 | \| 5 \| Test across all pages \| 30m \| ğŸŸ¡ P2 \| âœ… Footer smoke + hydration check; broader regression pending \| | action | #### ğŸ“‹ ACTION PLAN: Theme Toggle |
| GH-QUOTA | \| 4 \| **GH-QUOTA** \| Resolve GitHub Actions quota \| DevOps \| â³ Pending \| | action, effort | #### ğŸŸ¡ HIGH â€” DevOps Actions |
| GH-ENVS | \| 5 \| **GH-ENVS** \| Create GitHub Environments \| DevOps \| â³ Pending \| | action | #### ğŸŸ¡ HIGH â€” DevOps Actions |
| comments-and-documentation-references-next-steps-docs-pending-master-md-24108 | Comments and documentation references | action, effort | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| environment-variable-documentation-next-steps-docs-pending-master-md-24109 | Environment variable documentation | action | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| test-file-references-missing-tests-docs-pending-master-md-24110 | Test file references | action | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| schema-type-definitions-next-steps-docs-pending-master-md-24111 | Schema/type definitions | action, effort | ### ğŸ¯ NEXT STEPS â€” PayTabs Cleanup Phase 2 |
| open-prs-0-next-steps-docs-pending-master-md-24158 | \| Open PRs \| 0 \| | action, effort | ### âœ… VERIFICATION RESULTS |
| open-prs-1-537-1-537-ready-for-merge-next-steps-docs-pending-master-md-24173 | \| **Open PRs** \| 1 (#537) \| 1 (#537) \| Ready for merge \| | action, effort | ### ğŸ“Š PROGRESS SINCE LAST UPDATE |
| PR-537 | \| 1 \| **PR-537** \| Merge PayTabs cleanup docs PR \| User \| â³ Open \| 1m \| `gh pr merge 537 --squash --delete-branch` \| | action, effort | #### ğŸ”´ REQUIRED â€” Blocking Items |
| open-prs-1-537-1-537-no-change-next-steps-docs-pending-master-md-24280 | \| **Open PRs** \| 1 (#537) \| 1 (#537) \| No change \| | action, effort | ### ğŸ“Š PROGRESS SINCE LAST UPDATE |
