(()=>{var e={};e.id=536,e.ids=[536],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),a(9473),a(1203),a(5866);var s=a(3191),n=a(8716),i=a(7922),r=a.n(i),c=a(5231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);a.d(t,l);let o=["",{children:["finance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9473)),"C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\finance\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1203)),"C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\finance\\page.tsx"],u="/finance/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/finance/page",pathname:"/finance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8567:(e,t,a)=>{Promise.resolve().then(a.bind(a,6375))},6375:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(326),n=a(8399),i=a(7577),r=a(772),c=a(2643),l=a(4432),o=a(2288),d=a(5226),u="horizontal",x=["horizontal","vertical"],p=i.forwardRef((e,t)=>{let{decorative:a,orientation:n=u,...i}=e,r=x.includes(n)?n:u;return(0,s.jsx)(d.WV.div,{"data-orientation":r,...a?{role:"none"}:{"aria-orientation":"vertical"===r?r:void 0,role:"separator"},...i,ref:t})});p.displayName="Separator";var m=a(7863);let h=i.forwardRef(({className:e,orientation:t="horizontal",decorative:a=!0,...n},i)=>s.jsx(p,{ref:i,decorative:a,orientation:t,className:(0,m.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...n}));h.displayName=p.displayName;let v=e=>fetch(e,{headers:{"x-tenant-id":"demo-tenant"}}).then(e=>e.json());function g(){let[e,t]=(0,i.useState)(""),{data:a,mutate:o}=(0,n.ZP)(`/api/finance/invoices?q=${encodeURIComponent(e)}`,v),d=a?.data??[];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Finance — Invoices"}),s.jsx(f,{onCreated:()=>o()})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(l.I,{placeholder:"Search by number/customer",value:e,onChange:e=>t(e.target.value)}),s.jsx(r.z,{onClick:()=>o(),children:"Search"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>s.jsx(c.Zb,{children:(0,s.jsxs)(c.aY,{className:"p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-semibold",children:e.number}),s.jsx("span",{className:"text-xs rounded-full px-2 py-1 border",children:e.status})]}),(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:["Issue: ",new Date(e.issueDate).toLocaleDateString()," • Due: ",new Date(e.dueDate).toLocaleDateString()]}),s.jsx(h,{}),(0,s.jsxs)("div",{className:"text-sm",children:["Total: ",e.total," ",e.currency," (VAT ",e.vatAmount,")"]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[s.jsx(j,{id:e.id,action:"POST",disabled:"DRAFT"!==e.status,onDone:()=>o()}),s.jsx(j,{id:e.id,action:"VOID",disabled:"VOID"===e.status,onDone:()=>o()})]})]})},e.id))})]})}function j({id:e,action:t,disabled:a,onDone:n}){async function i(){await fetch(`/api/finance/invoices/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-tenant-id":"demo-tenant","x-user-id":"demo-user"},body:JSON.stringify({action:t})}),n()}return s.jsx(r.z,{variant:"secondary",disabled:a,onClick:i,children:t})}function f({onCreated:e}){let[t,a]=(0,i.useState)(!1),[n,c]=(0,i.useState)(new Date().toISOString().slice(0,10)),[d,u]=(0,i.useState)(new Date(Date.now()+7*864e5).toISOString().slice(0,10)),[x,p]=(0,i.useState)([{description:"Maintenance Service",qty:1,unitPrice:100,vatRate:15}]);function m(e,t,a){p(s=>s.map((s,n)=>n===e?{...s,[t]:"description"===t?a:Number(a)}:s))}async function v(){await fetch("/api/finance/invoices",{method:"POST",headers:{"Content-Type":"application/json","x-tenant-id":"demo-tenant","x-user-id":"demo-user"},body:JSON.stringify({issueDate:n,dueDate:d,currency:"SAR",lines:x})}),a(!1),e()}return(0,s.jsxs)(o.Vq,{open:t,onOpenChange:a,children:[s.jsx(o.hg,{asChild:!0,children:s.jsx(r.z,{children:"New Invoice"})}),(0,s.jsxs)(o.cZ,{className:"max-w-2xl",children:[s.jsx(o.fK,{children:s.jsx(o.$N,{children:"Create Invoice"})}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs",children:"Issue Date"}),s.jsx(l.I,{type:"date",value:n,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs",children:"Due Date"}),s.jsx(l.I,{type:"date",value:d,onChange:e=>u(e.target.value)})]})]}),s.jsx(h,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"font-medium",children:"Lines"}),s.jsx(r.z,{variant:"secondary",onClick:()=>p(e=>[...e,{description:"",qty:1,unitPrice:0,vatRate:15}]),children:"Add Line"})]}),x.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[s.jsx("div",{className:"col-span-5",children:s.jsx(l.I,{placeholder:"Description",value:e.description,onChange:e=>m(t,"description",e.target.value)})}),s.jsx("div",{className:"col-span-2",children:s.jsx(l.I,{type:"number",placeholder:"Qty",value:e.qty,onChange:e=>m(t,"qty",e.target.value)})}),s.jsx("div",{className:"col-span-2",children:s.jsx(l.I,{type:"number",placeholder:"Unit Price",value:e.unitPrice,onChange:e=>m(t,"unitPrice",e.target.value)})}),s.jsx("div",{className:"col-span-2",children:s.jsx(l.I,{type:"number",placeholder:"VAT %",value:e.vatRate,onChange:e=>m(t,"vatRate",e.target.value)})}),s.jsx("div",{className:"col-span-1 text-right text-sm",children:(e.qty*e.unitPrice*(1+e.vatRate/100)).toFixed(2)})]},t))]}),s.jsx(h,{}),s.jsx(r.z,{onClick:v,disabled:!x.length||x.some(e=>!e.description),children:"Create"})]})]})]})}},9473:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>c});var s=a(8570);let n=(0,s.createProxy)(String.raw`C:\Users\Geekay\OneDrive\Documents\GitHub\Fixzit-1\app\finance\page.tsx`),{__esModule:i,$$typeof:r}=n;n.default;let c=(0,s.createProxy)(String.raw`C:\Users\Geekay\OneDrive\Documents\GitHub\Fixzit-1\app\finance\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,121,577,834],()=>a(9086));module.exports=s})();