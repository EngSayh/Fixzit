(()=>{var e={};e.id=69,e.ids=[69],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6475:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(305),r(1203),r(5866);var s=r(3191),n=r(8716),i=r(7922),a=r.n(i),o=r(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["work-orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,305)),"C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\work-orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1203)),"C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Geekay\\OneDrive\\Documents\\GitHub\\Fixzit-1\\app\\work-orders\\page.tsx"],u="/work-orders/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/work-orders/page",pathname:"/work-orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8189:(e,t,r)=>{Promise.resolve().then(r.bind(r,6545))},6545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(326),n=r(8399),i=r(7577),a=r(772),o=r(2643),d=r(4432),l=r(9360),c=r(7863);let u=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x({className:e,variant:t,...r}){return s.jsx("div",{className:(0,c.cn)(u({variant:t}),e),...r})}var p=r(2288);let g=i.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));g.displayName="Textarea";let m=e=>fetch(e,{headers:{"x-tenant-id":"demo-tenant"}}).then(e=>e.json());function h(){let[e,t]=(0,i.useState)(""),{data:r,mutate:l,isLoading:c}=(0,n.ZP)(`/api/work-orders?q=${encodeURIComponent(e)}`,m),u=r?.data??[];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Work Orders"}),s.jsx(v,{onCreated:()=>l()})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(d.I,{placeholder:"Search title/description",value:e,onChange:e=>t(e.target.value)}),s.jsx(a.z,{onClick:()=>l(),children:"Search"})]}),c?s.jsx("p",{children:"Loading..."}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(e=>s.jsx(o.Zb,{children:(0,s.jsxs)(o.aY,{className:"p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[e.code," — ",e.title]}),s.jsx(x,{variant:"outline",children:e.status})]}),s.jsx("p",{className:"text-sm text-slate-600 line-clamp-3",children:e.description}),(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:["Priority: ",e.priority," • SLA: ",e.slaHours,"h"]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[s.jsx(f,{id:e.id,to:"ASSIGNED",onDone:()=>l(),disabled:"NEW"!==e.status}),s.jsx(f,{id:e.id,to:"IN_PROGRESS",onDone:()=>l(),disabled:!["ASSIGNED","ON_HOLD"].includes(e.status)}),s.jsx(f,{id:e.id,to:"COMPLETED",onDone:()=>l(),disabled:!["IN_PROGRESS"].includes(e.status)})]})]})},e.id))})]})}function f({id:e,to:t,onDone:r,disabled:n}){async function i(){await fetch(`/api/work-orders/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-tenant-id":"demo-tenant"},body:JSON.stringify({status:t})}),r()}return s.jsx(a.z,{variant:"secondary",disabled:n,onClick:i,children:t})}function v({onCreated:e}){let[t,r]=(0,i.useState)(!1),[n,o]=(0,i.useState)(""),[l,c]=(0,i.useState)("");async function u(){await fetch("/api/work-orders",{method:"POST",headers:{"Content-Type":"application/json","x-tenant-id":"demo-tenant","x-user-id":"demo-user"},body:JSON.stringify({title:n,description:l,priority:"MEDIUM",slaHours:72})}),r(!1),o(""),c(""),e()}return(0,s.jsxs)(p.Vq,{open:t,onOpenChange:r,children:[s.jsx(p.hg,{asChild:!0,children:s.jsx(a.z,{children:"New Work Order"})}),(0,s.jsxs)(p.cZ,{children:[s.jsx(p.fK,{children:s.jsx(p.$N,{children:"Create Work Order"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx(d.I,{placeholder:"Title",value:n,onChange:e=>o(e.target.value)}),s.jsx(g,{placeholder:"Description",value:l,onChange:e=>c(e.target.value)}),s.jsx(a.z,{onClick:u,disabled:!n||!l,children:"Create"})]})]})]})}},305:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});var s=r(8570);let n=(0,s.createProxy)(String.raw`C:\Users\Geekay\OneDrive\Documents\GitHub\Fixzit-1\app\work-orders\page.tsx`),{__esModule:i,$$typeof:a}=n;n.default;let o=(0,s.createProxy)(String.raw`C:\Users\Geekay\OneDrive\Documents\GitHub\Fixzit-1\app\work-orders\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,121,577,834],()=>r(6475));module.exports=s})();