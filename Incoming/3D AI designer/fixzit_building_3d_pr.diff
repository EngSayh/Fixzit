diff --git a/app/api/properties/[id]/building-model/publish/route.ts b/app/api/properties/[id]/building-model/publish/route.ts
new file mode 100644
index 0000000..963ce46
--- /dev/null
+++ b/app/api/properties/[id]/building-model/publish/route.ts
@@ -0,0 +1,14 @@
+import { NextRequest, NextResponse } from 'next/server'
+import { prisma } from '@/lib/db'
+import { withAudit } from '@/lib/withAudit'
+
+export const POST = withAudit(
+  async (_req: NextRequest, { params }: { params: { id: string } }) => {
+    const record = await prisma.buildingModel.findFirst({ where: { propertyId: params.id }, orderBy: { version: 'desc' } })
+    if (!record) return NextResponse.json({ error: 'No building model found' }, { status: 404 })
+
+    const updated = await prisma.buildingModel.update({ where: { id: record.id }, data: { status: 'Published' } })
+    return NextResponse.json(updated)
+  },
+  { action: 'BUILDING_MODEL_PUBLISH' },
+)
diff --git a/app/api/properties/[id]/building-model/route.ts b/app/api/properties/[id]/building-model/route.ts
new file mode 100644
index 0000000..b4024bf
--- /dev/null
+++ b/app/api/properties/[id]/building-model/route.ts
@@ -0,0 +1,118 @@
+import { NextRequest, NextResponse } from 'next/server'
+import { z } from 'zod'
+import { prisma } from '@/lib/db'
+import { withAudit } from '@/lib/withAudit'
+import { BuildingGenSpecSchema, generateBuildingModel, type BuildingModel } from '@/lib/buildingModel'
+
+export const GET = async (_req: NextRequest, { params }: { params: { id: string } }) => {
+  const property = await prisma.property.findUnique({ where: { id: params.id }, select: { id: true } })
+  if (!property) return NextResponse.json({ error: 'Property not found' }, { status: 404 })
+
+  const buildingModel = await prisma.buildingModel.findFirst({ where: { propertyId: params.id }, orderBy: { version: 'desc' } })
+  const units = await prisma.unit.findMany({ where: { propertyId: params.id }, orderBy: [{ floor: 'asc' }, { name: 'asc' }] })
+
+  return NextResponse.json({ buildingModel, units })
+}
+
+const BuildingModelPostSchema = z
+  .object({
+    spec: BuildingGenSpecSchema,
+    /** When true: create/update Unit records using the generated model's unit keys. */
+    syncUnits: z.boolean().optional(),
+  })
+  .strict()
+
+function attachUnitDbIds(model: BuildingModel, units: Array<{ id: string; designKey: string | null; electricityMeter: string | null; waterMeter: string | null }>): BuildingModel {
+  const map = new Map<string, { id: string; electricityMeter: string | null; waterMeter: string | null }>()
+  for (const u of units) {
+    if (!u.designKey) continue
+    map.set(u.designKey, { id: u.id, electricityMeter: u.electricityMeter, waterMeter: u.waterMeter })
+  }
+  const clone: BuildingModel = JSON.parse(JSON.stringify(model)) as BuildingModel
+  for (const f of clone.floors) {
+    for (const unit of f.units) {
+      const hit = map.get(unit.key)
+      if (!hit) continue
+      unit.metadata.unitDbId = hit.id
+      if (hit.electricityMeter) unit.metadata.electricityMeter = hit.electricityMeter
+      if (hit.waterMeter) unit.metadata.waterMeter = hit.waterMeter
+    }
+  }
+  return clone
+}
+
+export const POST = withAudit(
+  async (req: NextRequest, { params }: { params: { id: string } }) => {
+    const body = BuildingModelPostSchema.parse(await req.json())
+    const property = await prisma.property.findUnique({ where: { id: params.id }, select: { id: true } })
+    if (!property) return NextResponse.json({ error: 'Property not found' }, { status: 404 })
+
+    const generated = generateBuildingModel(body.spec)
+    const syncUnits = body.syncUnits === true
+
+    if (syncUnits) {
+      for (const floor of generated.floors) {
+        for (const u of floor.units) {
+          const existing = await prisma.unit.findFirst({ where: { propertyId: params.id, designKey: u.key } })
+          if (existing) {
+            await prisma.unit.update({
+              where: { id: existing.id },
+              data: {
+                // Preserve existing values if the user already set them.
+                floor: existing.floor ?? String(floor.index + 1),
+                sizeSqm: existing.sizeSqm ?? u.metadata.areaSqm,
+                unitNumber: existing.unitNumber ?? u.metadata.unitNumber,
+                bedrooms: existing.bedrooms ?? u.metadata.bedrooms,
+                bathrooms: existing.bathrooms ?? u.metadata.bathrooms,
+                halls: existing.halls ?? u.metadata.halls,
+              },
+            })
+          } else {
+            await prisma.unit.create({
+              data: {
+                propertyId: params.id,
+                name: `A-${u.metadata.unitNumber}`,
+                floor: String(floor.index + 1),
+                sizeSqm: u.metadata.areaSqm,
+                designKey: u.key,
+                unitNumber: u.metadata.unitNumber,
+                bedrooms: u.metadata.bedrooms,
+                bathrooms: u.metadata.bathrooms,
+                halls: u.metadata.halls,
+              },
+            })
+          }
+        }
+      }
+    }
+
+    const units = await prisma.unit.findMany({
+      where: { propertyId: params.id },
+      select: { id: true, designKey: true, electricityMeter: true, waterMeter: true, floor: true, name: true, sizeSqm: true, unitNumber: true, bedrooms: true, bathrooms: true, halls: true },
+      orderBy: [{ floor: 'asc' }, { name: 'asc' }],
+    })
+
+    const hydratedModel = attachUnitDbIds(generated, units)
+
+    const record = await prisma.buildingModel.upsert({
+      where: { propertyId_version: { propertyId: params.id, version: 1 } },
+      create: {
+        propertyId: params.id,
+        version: 1,
+        status: 'Draft',
+        generator: 'procedural',
+        input: body.spec,
+        model: hydratedModel as unknown as object,
+      },
+      update: {
+        status: 'Draft',
+        generator: 'procedural',
+        input: body.spec,
+        model: hydratedModel as unknown as object,
+      },
+    })
+
+    return NextResponse.json({ buildingModel: record, units })
+  },
+  { action: 'BUILDING_MODEL_GENERATE' },
+)
diff --git a/app/api/units/[id]/route.ts b/app/api/units/[id]/route.ts
new file mode 100644
index 0000000..05016cd
--- /dev/null
+++ b/app/api/units/[id]/route.ts
@@ -0,0 +1,56 @@
+import { NextRequest, NextResponse } from 'next/server'
+import { z } from 'zod'
+import { prisma } from '@/lib/db'
+import { withAudit } from '@/lib/withAudit'
+
+export const GET = async (_req: NextRequest, { params }: { params: { id: string } }) => {
+  const unit = await prisma.unit.findUnique({ where: { id: params.id } })
+  if (!unit) return NextResponse.json({ error: 'Not found' }, { status: 404 })
+  return NextResponse.json(unit)
+}
+
+const UnitPatchSchema = z
+  .object({
+    name: z.string().min(1).optional(),
+    floor: z.string().nullable().optional(),
+    sizeSqm: z.number().int().nullable().optional(),
+    designKey: z.string().nullable().optional(),
+    unitNumber: z.string().nullable().optional(),
+    bedrooms: z.number().int().nullable().optional(),
+    bathrooms: z.number().int().nullable().optional(),
+    halls: z.number().int().nullable().optional(),
+    electricityMeter: z.string().nullable().optional(),
+    waterMeter: z.string().nullable().optional(),
+  })
+  .strict()
+
+export const PATCH = withAudit(
+  async (req: NextRequest, { params }: { params: { id: string } }) => {
+    const body = UnitPatchSchema.parse(await req.json())
+    const updated = await prisma.unit.update({
+      where: { id: params.id },
+      data: {
+        name: body.name,
+        floor: body.floor === null ? null : body.floor,
+        sizeSqm: body.sizeSqm === null ? null : body.sizeSqm,
+        designKey: body.designKey === null ? null : body.designKey,
+        unitNumber: body.unitNumber === null ? null : body.unitNumber,
+        bedrooms: body.bedrooms === null ? null : body.bedrooms,
+        bathrooms: body.bathrooms === null ? null : body.bathrooms,
+        halls: body.halls === null ? null : body.halls,
+        electricityMeter: body.electricityMeter === null ? null : body.electricityMeter,
+        waterMeter: body.waterMeter === null ? null : body.waterMeter,
+      },
+    })
+    return NextResponse.json(updated)
+  },
+  { action: 'UNIT_UPDATE' },
+)
+
+export const DELETE = withAudit(
+  async (_req: NextRequest, { params }: { params: { id: string } }) => {
+    await prisma.unit.delete({ where: { id: params.id } })
+    return NextResponse.json({ ok: true })
+  },
+  { action: 'UNIT_DELETE' },
+)
diff --git a/app/api/units/route.ts b/app/api/units/route.ts
index a84b7d7..d1d4e55 100644
--- a/app/api/units/route.ts
+++ b/app/api/units/route.ts
@@ -1,10 +1,54 @@
 
 import { NextRequest, NextResponse } from 'next/server'
+import { z } from 'zod'
 import { prisma } from '@/lib/db'
+import { withAudit } from '@/lib/withAudit'
+
 export const GET = async (req: NextRequest) => {
   const { searchParams } = new URL(req.url)
   const propertyId = searchParams.get('propertyId')
-  if(!propertyId) return NextResponse.json({ error: 'propertyId required' }, { status: 400 })
-  const items = await prisma.unit.findMany({ where: { propertyId }, orderBy: { name: 'asc' } })
+  if (!propertyId) return NextResponse.json({ error: 'propertyId required' }, { status: 400 })
+
+  const items = await prisma.unit.findMany({
+    where: { propertyId },
+    orderBy: [{ floor: 'asc' }, { name: 'asc' }],
+  })
+
   return NextResponse.json({ items })
 }
+
+const UnitCreateSchema = z
+  .object({
+    propertyId: z.string().min(1),
+    name: z.string().min(1),
+    floor: z.string().optional().nullable(),
+    sizeSqm: z.number().int().optional().nullable(),
+    designKey: z.string().optional().nullable(),
+    unitNumber: z.string().optional().nullable(),
+    bedrooms: z.number().int().optional().nullable(),
+    bathrooms: z.number().int().optional().nullable(),
+    halls: z.number().int().optional().nullable(),
+    electricityMeter: z.string().optional().nullable(),
+    waterMeter: z.string().optional().nullable(),
+  })
+  .strict()
+
+export const POST = withAudit(async (req: NextRequest) => {
+  const body = UnitCreateSchema.parse(await req.json())
+  const created = await prisma.unit.create({
+    data: {
+      propertyId: body.propertyId,
+      name: body.name,
+      floor: body.floor ?? undefined,
+      sizeSqm: body.sizeSqm ?? undefined,
+      designKey: body.designKey ?? undefined,
+      unitNumber: body.unitNumber ?? undefined,
+      bedrooms: body.bedrooms ?? undefined,
+      bathrooms: body.bathrooms ?? undefined,
+      halls: body.halls ?? undefined,
+      electricityMeter: body.electricityMeter ?? undefined,
+      waterMeter: body.waterMeter ?? undefined,
+    },
+  })
+  return NextResponse.json(created)
+}, { action: 'UNIT_CREATE' })
diff --git a/app/components/building3d/BuildingTourClient.tsx b/app/components/building3d/BuildingTourClient.tsx
new file mode 100644
index 0000000..68710a7
--- /dev/null
+++ b/app/components/building3d/BuildingTourClient.tsx
@@ -0,0 +1,150 @@
+'use client'
+
+import dynamic from 'next/dynamic'
+import { useMemo, useState } from 'react'
+import type { Unit } from '@prisma/client'
+import type { BuildingModel } from '@/lib/buildingModel'
+import type { BuildingSelection, BuildingViewerOptions } from './BuildingViewer'
+
+const BuildingViewer = dynamic(() => import('./BuildingViewer'), {
+  ssr: false,
+  loading: () => <div className="h-[560px] w-full rounded-xl border bg-white flex items-center justify-center text-sm text-gray-500">Loading 3D Viewer…</div>,
+})
+
+function safeParseModel(payload: unknown): BuildingModel | null {
+  if (!payload || typeof payload !== 'object') return null
+  const anyObj = payload as { schemaVersion?: unknown }
+  if (anyObj.schemaVersion !== 1) return null
+  return payload as BuildingModel
+}
+
+export default function BuildingTourClient({
+  propertyId,
+  buildingModel,
+  units,
+}: {
+  propertyId: string
+  buildingModel: unknown | null
+  units: Unit[]
+}) {
+  const model = useMemo(() => safeParseModel(buildingModel), [buildingModel])
+  const [selection, setSelection] = useState<BuildingSelection>(null)
+
+  const viewerOptions: BuildingViewerOptions = useMemo(
+    () => ({ showRooms: true, exploded: true, focusFloor: null, showLabels: true }),
+    [],
+  )
+
+  const selectedUnitKey = useMemo(() => (selection ? selection.unitKey : null), [selection])
+  const selectedUnitDb = useMemo(() => {
+    if (!selectedUnitKey) return null
+    return units.find((u) => u.designKey === selectedUnitKey) ?? null
+  }, [selectedUnitKey, units])
+
+  const selectedUnitModel = useMemo(() => {
+    if (!model || !selectedUnitKey) return null
+    for (const f of model.floors) {
+      const hit = f.units.find((u) => u.key === selectedUnitKey)
+      if (hit) return hit
+    }
+    return null
+  }, [model, selectedUnitKey])
+
+  if (!model) {
+    return (
+      <div className="h-[560px] w-full rounded-xl border bg-white flex flex-col items-center justify-center text-sm text-gray-600 p-6 text-center">
+        <div className="font-semibold text-gray-900 mb-2">No 3D model is published yet</div>
+        <div className="max-w-sm">Ask the property manager to generate and publish the 3D building model.</div>
+      </div>
+    )
+  }
+
+  return (
+    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
+      <div className="lg:col-span-8 rounded-xl border bg-white p-3">
+        <div className="h-[560px] w-full">
+          <BuildingViewer model={model} selection={selection} onSelect={setSelection} options={viewerOptions} />
+        </div>
+      </div>
+
+      <div className="lg:col-span-4 space-y-4">
+        <div className="rounded-xl border bg-white p-4 space-y-2">
+          <div className="font-semibold text-gray-900">Selected</div>
+          {!selectedUnitKey ? (
+            <div className="text-sm text-gray-600">Click an apartment or room in the 3D model.</div>
+          ) : (
+            <div className="text-sm text-gray-700 space-y-1">
+              <div>
+                <span className="text-gray-500">Node:</span> <span className="font-semibold">{selectedUnitKey}</span>
+              </div>
+              {selection?.kind === 'room' && (
+                <div>
+                  <span className="text-gray-500">Room:</span> <span className="font-semibold">{selection.roomId}</span>
+                </div>
+              )}
+            </div>
+          )}
+        </div>
+
+        {selectedUnitModel && (
+          <div className="rounded-xl border bg-white p-4 space-y-3">
+            <div className="font-semibold text-gray-900">Apartment Details</div>
+            <div className="grid grid-cols-2 gap-3 text-sm text-gray-700">
+              <div>
+                <div className="text-xs text-gray-500">Apartment</div>
+                <div className="font-semibold">{selectedUnitDb?.name ?? selectedUnitModel.label}</div>
+              </div>
+              <div>
+                <div className="text-xs text-gray-500">Unit Number</div>
+                <div className="font-semibold">{selectedUnitDb?.unitNumber ?? selectedUnitModel.metadata.unitNumber}</div>
+              </div>
+              <div>
+                <div className="text-xs text-gray-500">Bedrooms</div>
+                <div className="font-semibold">{selectedUnitDb?.bedrooms ?? selectedUnitModel.metadata.bedrooms}</div>
+              </div>
+              <div>
+                <div className="text-xs text-gray-500">Bathrooms</div>
+                <div className="font-semibold">{selectedUnitDb?.bathrooms ?? selectedUnitModel.metadata.bathrooms}</div>
+              </div>
+              <div>
+                <div className="text-xs text-gray-500">Area</div>
+                <div className="font-semibold">{selectedUnitDb?.sizeSqm ?? selectedUnitModel.metadata.areaSqm} sqm</div>
+              </div>
+            </div>
+            <div className="text-xs text-gray-500">(Meter numbers are private and may not be shown in public tours.)</div>
+          </div>
+        )}
+
+        <div className="rounded-xl border bg-white p-4 space-y-3">
+          <div className="font-semibold text-gray-900">Units</div>
+          <div className="max-h-[240px] overflow-auto border rounded-lg">
+            {units.map((u) => (
+              <button
+                key={u.id}
+                onClick={() => u.designKey && setSelection({ kind: 'unit', unitKey: u.designKey })}
+                className="w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-50"
+              >
+                <div className="text-left">
+                  <div className="font-medium text-gray-900">{u.name}</div>
+                  <div className="text-xs text-gray-500">
+                    Floor {u.floor ?? '—'} · {u.sizeSqm ?? '—'} sqm
+                  </div>
+                </div>
+                <div className="text-xs text-gray-500">{u.unitNumber ?? ''}</div>
+              </button>
+            ))}
+          </div>
+        </div>
+
+        <div className="rounded-xl border bg-white p-4 text-xs text-gray-500">
+          <div>
+            <span className="text-gray-500">Property:</span> {propertyId}
+          </div>
+          <div>
+            <span className="text-gray-500">Floors:</span> {model.spec.floors} · <span className="text-gray-500">Apts/Floor:</span> {model.spec.apartmentsPerFloor}
+          </div>
+        </div>
+      </div>
+    </div>
+  )
+}
diff --git a/app/components/building3d/BuildingViewer.tsx b/app/components/building3d/BuildingViewer.tsx
new file mode 100644
index 0000000..1755174
--- /dev/null
+++ b/app/components/building3d/BuildingViewer.tsx
@@ -0,0 +1,282 @@
+'use client'
+
+import { useMemo, useState } from 'react'
+import { Canvas } from '@react-three/fiber'
+import { Grid, Html, OrbitControls } from '@react-three/drei'
+import * as THREE from 'three'
+import type { BuildingModel, RoomModel, RoomKind, UnitModel } from '@/lib/buildingModel'
+
+export type BuildingSelection =
+  | { kind: 'unit'; unitKey: string }
+  | { kind: 'room'; unitKey: string; roomId: string }
+  | null
+
+export type BuildingViewerOptions = {
+  showRooms: boolean
+  exploded: boolean
+  focusFloor: number | null
+  showLabels: boolean
+}
+
+type Props = {
+  model: BuildingModel
+  selection: BuildingSelection
+  onSelect: (sel: BuildingSelection) => void
+  options: BuildingViewerOptions
+}
+
+function makeMaterial(color: string, opts?: { transparent?: boolean; opacity?: number; emissive?: string }): THREE.MeshStandardMaterial {
+  return new THREE.MeshStandardMaterial({
+    color,
+    transparent: opts?.transparent,
+    opacity: opts?.opacity,
+    emissive: opts?.emissive ?? '#000000',
+    roughness: 0.75,
+    metalness: 0.05,
+  })
+}
+
+function unitIsSelected(selection: BuildingSelection, unitKey: string): boolean {
+  if (!selection) return false
+  if (selection.kind === 'unit') return selection.unitKey === unitKey
+  return selection.unitKey === unitKey
+}
+
+function roomIsSelected(selection: BuildingSelection, unitKey: string, roomId: string): boolean {
+  if (!selection) return false
+  return selection.kind === 'room' && selection.unitKey === unitKey && selection.roomId === roomId
+}
+
+function RoomMesh({
+  unit,
+  room,
+  floorY,
+  color,
+  selected,
+  onSelect,
+  showLabels,
+}: {
+  unit: UnitModel
+  room: RoomModel
+  floorY: number
+  color: string
+  selected: boolean
+  onSelect: () => void
+  showLabels: boolean
+}) {
+  const height = 0.08
+  const x = unit.position.x + room.rect.x + room.rect.width / 2
+  const z = unit.position.z + room.rect.z + room.rect.depth / 2
+  const y = floorY + height / 2
+
+  return (
+    <mesh
+      position={[x, y, z]}
+      onPointerDown={(e) => {
+        e.stopPropagation()
+        onSelect()
+      }}
+    >
+      <boxGeometry args={[room.rect.width, height, room.rect.depth]} />
+      <meshStandardMaterial color={color} transparent opacity={selected ? 0.95 : 0.75} emissive={selected ? '#ffffff' : '#000000'} />
+      {showLabels && (
+        <Html position={[0, 0.08, 0]} center distanceFactor={16} style={{ pointerEvents: 'none' }}>
+          <div className="rounded bg-white/90 px-2 py-0.5 text-[10px] text-gray-900 shadow">{room.label}</div>
+        </Html>
+      )}
+    </mesh>
+  )
+}
+
+function UnitMesh({
+  unit,
+  floorY,
+  baseColor,
+  accentColor,
+  selection,
+  onSelectUnit,
+  showRooms,
+  showLabels,
+}: {
+  unit: UnitModel
+  floorY: number
+  baseColor: string
+  accentColor: string
+  selection: BuildingSelection
+  onSelectUnit: () => void
+  showRooms: boolean
+  showLabels: boolean
+}) {
+  const isUnitSelected = unitIsSelected(selection, unit.key)
+
+  const unitOpacity = showRooms ? 0.35 : 0.9
+  const unitColor = isUnitSelected ? accentColor : baseColor
+
+  const cx = unit.position.x
+  const cz = unit.position.z
+  const cy = floorY + unit.size.height / 2
+
+  return (
+    <group>
+      <mesh
+        position={[cx, cy, cz]}
+        onPointerDown={(e) => {
+          e.stopPropagation()
+          onSelectUnit()
+        }}
+      >
+        <boxGeometry args={[unit.size.width, unit.size.height, unit.size.depth]} />
+        <meshStandardMaterial color={unitColor} transparent opacity={unitOpacity} emissive={isUnitSelected ? '#222222' : '#000000'} />
+        {showLabels && (
+          <Html position={[0, unit.size.height / 2 + 0.2, 0]} center distanceFactor={18} style={{ pointerEvents: 'none' }}>
+            <div className="rounded bg-white/90 px-2 py-0.5 text-[10px] text-gray-900 shadow">{unit.metadata.unitNumber}</div>
+          </Html>
+        )}
+      </mesh>
+    </group>
+  )
+}
+
+export default function BuildingViewer({ model, selection, onSelect, options }: Props) {
+  const [hovered, setHovered] = useState<{ kind: 'unit'; unitKey: string } | { kind: 'room'; unitKey: string; roomId: string } | null>(null)
+
+  const materials = useMemo(() => {
+    const cache = new Map<string, THREE.MeshStandardMaterial>()
+    const get = (key: string, build: () => THREE.MeshStandardMaterial) => {
+      const hit = cache.get(key)
+      if (hit) return hit
+      const m = build()
+      cache.set(key, m)
+      return m
+    }
+    return { get }
+  }, [])
+
+  const visibleFloors = useMemo(() => {
+    if (options.focusFloor === null) return model.floors
+    return model.floors.filter((f) => f.index === options.focusFloor)
+  }, [model.floors, options.focusFloor])
+
+  const explodedGap = model.spec.floorHeightM * 0.55
+
+  const hoverLabel = useMemo(() => {
+    if (!hovered) return null
+    if (hovered.kind === 'unit') return `Unit ${hovered.unitKey}`
+    return `Room ${hovered.roomId}`
+  }, [hovered])
+
+  return (
+    <div className="relative w-full h-full">
+      <Canvas camera={{ position: [model.bounds.width * 0.8, model.bounds.height * 0.6 + 6, model.bounds.depth * 0.9], fov: 55 }}>
+        <ambientLight intensity={0.55} />
+        <directionalLight position={[12, 18, 8]} intensity={0.95} />
+        <directionalLight position={[-10, 14, -10]} intensity={0.35} />
+
+        <Grid args={[model.bounds.width * 2, model.bounds.depth * 2]} cellSize={1} cellThickness={1} sectionSize={5} sectionThickness={1.5} fadeDistance={70} />
+        <OrbitControls makeDefault enableDamping dampingFactor={0.12} />
+
+        {/* Root */}
+        <group
+          onPointerMissed={() => {
+            onSelect(null)
+          }}
+        >
+          {visibleFloors.map((floor) => {
+            const y = floor.elevationM + (options.exploded ? floor.index * explodedGap : 0)
+            const slabY = y + floor.slab.thickness / 2
+            const unitFloorY = y + floor.slab.thickness
+
+            const slabMaterial = materials.get(`slab:${floor.index}`, () => makeMaterial('#e5e7eb'))
+
+            return (
+              <group key={floor.index}>
+                <mesh position={[0, slabY, 0]}>
+                  <boxGeometry args={[floor.slab.width, floor.slab.thickness, floor.slab.depth]} />
+                  <primitive object={slabMaterial} attach="material" />
+                </mesh>
+
+                {floor.units.map((unit) => {
+                  return (
+                    <group
+                      key={unit.key}
+                      onPointerOver={() => setHovered({ kind: 'unit', unitKey: unit.key })}
+                      onPointerOut={() => setHovered(null)}
+                    >
+                      <UnitMesh
+                        unit={unit}
+                        floorY={unitFloorY}
+                        baseColor={floor.theme.baseColor}
+                        accentColor={floor.theme.accentColor}
+                        selection={selection}
+                        onSelectUnit={() => onSelect({ kind: 'unit', unitKey: unit.key })}
+                        showRooms={options.showRooms}
+                        showLabels={options.showLabels}
+                      />
+
+                      {/* Optional room meshes (only visible when enabled) */}
+                      {options.showRooms &&
+                        unit.rooms.map((room) => {
+                          const roomSelected = roomIsSelected(selection, unit.key, room.id)
+                          const color = floor.theme.roomColors[room.kind]
+                          return (
+                            <group
+                              key={`${unit.key}:${room.id}`}
+                              onPointerOver={() => setHovered({ kind: 'room', unitKey: unit.key, roomId: room.id })}
+                              onPointerOut={() => setHovered(null)}
+                            >
+                              <RoomMesh
+                                unit={unit}
+                                room={room}
+                                floorY={unitFloorY}
+                                color={color}
+                                selected={roomSelected}
+                                showLabels={options.showLabels}
+                                onSelect={() => onSelect({ kind: 'room', unitKey: unit.key, roomId: room.id })}
+                              />
+                            </group>
+                          )
+                        })}
+                    </group>
+                  )
+                })}
+
+                {options.showLabels && (
+                  <Html position={[0, y + floor.slab.thickness + 0.2, -floor.slab.depth / 2 - 0.6]} center distanceFactor={18} style={{ pointerEvents: 'none' }}>
+                    <div className="rounded bg-white/90 px-2 py-0.5 text-[10px] text-gray-900 shadow">{floor.label}</div>
+                  </Html>
+                )}
+              </group>
+            )
+          })}
+        </group>
+      </Canvas>
+
+      {/* Hover legend (DOM overlay) */}
+      {hoverLabel && (
+        <div className="pointer-events-none absolute left-2 top-2 inline-flex items-center gap-2 rounded-md bg-white/90 px-2 py-1 text-xs text-gray-900 shadow">
+          {hoverLabel}
+        </div>
+      )}
+
+      {/* Room legend (DOM overlay) */}
+      {options.showRooms && (
+        <div className="mt-2 flex flex-wrap gap-2 text-xs">
+          {(
+            [
+              ['living', 'Living'],
+              ['bedroom', 'Bedroom'],
+              ['bathroom', 'Bathroom'],
+              ['kitchen', 'Kitchen'],
+              ['hall', 'Hall'],
+            ] as Array<[RoomKind, string]>
+          ).map(([k, label]) => (
+            <div key={k} className="inline-flex items-center gap-2 rounded border bg-white px-2 py-1">
+              <span className="inline-block h-3 w-3 rounded" style={{ background: model.floors[0]?.theme.roomColors[k] ?? '#999' }} />
+              <span>{label}</span>
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  )
+}
diff --git a/app/components/navigation/TopMenuBar.tsx b/app/components/navigation/TopMenuBar.tsx
index 6576290..31d9567 100644
--- a/app/components/navigation/TopMenuBar.tsx
+++ b/app/components/navigation/TopMenuBar.tsx
@@ -35,7 +35,7 @@ export default function TopMenuBar(){
               </div>
             )}
           </div>
-          <button onClick={()=>setLang(lang==='en'?'ar':'en')} className="px-2 py-1 text-xs border rounded-md">{lang=='en' and 'EN' or 'AR'}</button>
+          <button onClick={()=>setLang(lang==='en'?'ar':'en')} className="px-2 py-1 text-xs border rounded-md">{lang==='en' ? 'EN' : 'AR'}</button>
           <button onClick={()=>setHidden(true)} className="px-2 py-1 text-xs border rounded-md">Hide <ChevronUp className="inline h-3 w-3"/></button>
         </nav>
       </div>
diff --git a/app/components/properties/PropertyDetailView.tsx b/app/components/properties/PropertyDetailView.tsx
index a9a7be8..7b4744c 100644
--- a/app/components/properties/PropertyDetailView.tsx
+++ b/app/components/properties/PropertyDetailView.tsx
@@ -1,14 +1,16 @@
 
 'use client'
 import { useState } from 'react'
-import { Building, FileText, Wrench, DollarSign, MessageSquare, Files } from 'lucide-react'
+import { Building, FileText, Wrench, DollarSign, MessageSquare, Files, Cuboid } from 'lucide-react'
 import { LeasesTab } from './tabs/LeasesTab'
 import { WorkOrdersTab } from './tabs/WorkOrdersTab'
 import { FinancialsTab } from './tabs/FinancialsTab'
 import { UnitsTab } from './tabs/UnitsTab'
+import { BuildingModelTab } from './tabs/BuildingModelTab'
 const TABS = [
   { id: 'overview', label: 'Overview', icon: Building },
   { id: 'units', label: 'Units', icon: Files },
+  { id: 'building_model', label: '3D Building', icon: Cuboid },
   { id: 'leases', label: 'Leases', icon: FileText },
   { id: 'work_orders', label: 'Work Orders', icon: Wrench },
   { id: 'financials', label: 'Financials', icon: DollarSign },
@@ -22,6 +24,7 @@ export function PropertyDetailView({ property }: { property: { id: string; name:
       case 'work_orders': return <WorkOrdersTab propertyId={property.id} />
       case 'financials': return <FinancialsTab propertyId={property.id} />
       case 'units': return <UnitsTab propertyId={property.id} />
+      case 'building_model': return <BuildingModelTab propertyId={property.id} />
       default:
         return <div className="p-6 space-y-4"><h3 className="text-lg font-semibold text-gray-800">Property Details</h3><p className="text-sm text-gray-500">{property.address}</p></div>
     }
diff --git a/app/components/properties/tabs/BuildingModelTab.tsx b/app/components/properties/tabs/BuildingModelTab.tsx
new file mode 100644
index 0000000..76674a0
--- /dev/null
+++ b/app/components/properties/tabs/BuildingModelTab.tsx
@@ -0,0 +1,692 @@
+'use client'
+
+import dynamic from 'next/dynamic'
+import { useCallback, useEffect, useMemo, useState } from 'react'
+import type { Unit } from '@prisma/client'
+import { BuildingGenSpecSchema, type BuildingGenSpec, type BuildingModel } from '@/lib/buildingModel'
+import type { BuildingSelection, BuildingViewerOptions } from '@/app/components/building3d/BuildingViewer'
+
+const BuildingViewer = dynamic(() => import('@/app/components/building3d/BuildingViewer'), {
+  ssr: false,
+  loading: () => <div className="h-[520px] w-full rounded-xl border bg-white flex items-center justify-center text-sm text-gray-500">Loading 3D Viewer…</div>,
+})
+
+type BuildingModelRecord = {
+  id: string
+  propertyId: string
+  version: number
+  status: string
+  generator: string | null
+  input: unknown
+  model: unknown
+  createdAt: string
+  updatedAt: string
+}
+
+type GetResponse = {
+  buildingModel: BuildingModelRecord | null
+  units: Unit[]
+}
+
+type PostResponse = {
+  buildingModel: BuildingModelRecord
+  units: Array<Pick<Unit, 'id' | 'propertyId' | 'name' | 'floor' | 'sizeSqm' | 'designKey' | 'unitNumber' | 'bedrooms' | 'bathrooms' | 'halls' | 'electricityMeter' | 'waterMeter'>>
+}
+
+function safeParseModel(payload: unknown): BuildingModel | null {
+  // We intentionally avoid a strict zod schema for the full model to keep the client light.
+  // We only ensure it looks like our shape.
+  if (!payload || typeof payload !== 'object') return null
+  const anyObj = payload as { schemaVersion?: unknown }
+  if (anyObj.schemaVersion !== 1) return null
+  return payload as BuildingModel
+}
+
+const SpecFormSchema = BuildingGenSpecSchema
+
+const DEFAULT_SPEC: BuildingGenSpec = {
+  floors: 3,
+  apartmentsPerFloor: 4,
+  layout: 'grid',
+  floorHeightM: 3,
+  unitWidthM: 10,
+  unitDepthM: 8,
+  gapM: 1.2,
+  slabThicknessM: 0.15,
+  template: '2br',
+  prompt: 'Modern, neutral palette. Simple corridor access. Family-friendly 2BR units.',
+}
+
+export function BuildingModelTab({ propertyId }: { propertyId: string }) {
+  const [spec, setSpec] = useState<BuildingGenSpec>(DEFAULT_SPEC)
+  const [syncUnits, setSyncUnits] = useState(true)
+
+  const [model, setModel] = useState<BuildingModel | null>(null)
+  const [record, setRecord] = useState<BuildingModelRecord | null>(null)
+  const [units, setUnits] = useState<Unit[]>([])
+
+  const [selection, setSelection] = useState<BuildingSelection>(null)
+  const [loading, setLoading] = useState(true)
+  const [generating, setGenerating] = useState(false)
+  const [savingUnit, setSavingUnit] = useState(false)
+  const [publishing, setPublishing] = useState(false)
+  const [error, setError] = useState<string | null>(null)
+
+  const [viewerOptions, setViewerOptions] = useState<BuildingViewerOptions>({
+    showRooms: true,
+    exploded: true,
+    focusFloor: null,
+    showLabels: true,
+  })
+
+  const unitsByDesignKey = useMemo(() => {
+    const map = new Map<string, Unit>()
+    for (const u of units) {
+      if (u.designKey) map.set(u.designKey, u)
+    }
+    return map
+  }, [units])
+
+  const selectedUnitKey = useMemo(() => {
+    if (!selection) return null
+    return selection.unitKey
+  }, [selection])
+
+  const selectedUnitDb = useMemo(() => {
+    if (!selectedUnitKey) return null
+    return unitsByDesignKey.get(selectedUnitKey) ?? null
+  }, [selectedUnitKey, unitsByDesignKey])
+
+  const selectedUnitFromModel = useMemo(() => {
+    if (!model || !selectedUnitKey) return null
+    for (const f of model.floors) {
+      const hit = f.units.find((u) => u.key === selectedUnitKey)
+      if (hit) return hit
+    }
+    return null
+  }, [model, selectedUnitKey])
+
+  const load = useCallback(async () => {
+    setLoading(true)
+    setError(null)
+    try {
+      const res = await fetch(`/api/properties/${propertyId}/building-model`, { cache: 'no-store' })
+      if (!res.ok) throw new Error(`Failed to load model (HTTP ${res.status})`)
+      const data: GetResponse = (await res.json()) as GetResponse
+      setUnits(data.units)
+      setRecord(data.buildingModel)
+
+      if (data.buildingModel?.input) {
+        const parsed = SpecFormSchema.safeParse(data.buildingModel.input)
+        if (parsed.success) setSpec(parsed.data)
+      }
+      if (data.buildingModel?.model) {
+        const parsedModel = safeParseModel(data.buildingModel.model)
+        setModel(parsedModel)
+      } else {
+        setModel(null)
+      }
+    } catch (e) {
+      setError(e instanceof Error ? e.message : 'Unknown error')
+    } finally {
+      setLoading(false)
+    }
+  }, [propertyId])
+
+  useEffect(() => {
+    void load()
+  }, [load])
+
+  const generate = async () => {
+    setGenerating(true)
+    setError(null)
+    try {
+      const validated = SpecFormSchema.parse(spec)
+      const res = await fetch(`/api/properties/${propertyId}/building-model`, {
+        method: 'POST',
+        headers: { 'Content-Type': 'application/json' },
+        body: JSON.stringify({ spec: validated, syncUnits }),
+      })
+      if (!res.ok) {
+        const text = await res.text()
+        throw new Error(`Generate failed (HTTP ${res.status}): ${text}`)
+      }
+      const data: PostResponse = (await res.json()) as PostResponse
+      setUnits(data.units as unknown as Unit[])
+      setModel(safeParseModel(data.buildingModel.model))
+      setRecord(data.buildingModel)
+      // Keep selection stable if possible.
+      if (selection && selection.kind === 'unit') {
+        const exists = (safeParseModel(data.buildingModel.model)?.floors ?? []).some((f) => f.units.some((u) => u.key === selection.unitKey))
+        if (!exists) setSelection(null)
+      }
+    } catch (e) {
+      setError(e instanceof Error ? e.message : 'Unknown error')
+    } finally {
+      setGenerating(false)
+    }
+  }
+
+  const [unitForm, setUnitForm] = useState({
+    unitNumber: '',
+    bedrooms: 0,
+    bathrooms: 0,
+    halls: 0,
+    sizeSqm: 0,
+    electricityMeter: '',
+    waterMeter: '',
+  })
+
+  useEffect(() => {
+    if (!selectedUnitKey) return
+
+    const fallback = selectedUnitFromModel?.metadata
+    setUnitForm({
+      unitNumber: selectedUnitDb?.unitNumber ?? fallback?.unitNumber ?? '',
+      bedrooms: selectedUnitDb?.bedrooms ?? fallback?.bedrooms ?? 0,
+      bathrooms: selectedUnitDb?.bathrooms ?? fallback?.bathrooms ?? 0,
+      halls: selectedUnitDb?.halls ?? fallback?.halls ?? 0,
+      sizeSqm: selectedUnitDb?.sizeSqm ?? fallback?.areaSqm ?? 0,
+      electricityMeter: selectedUnitDb?.electricityMeter ?? fallback?.electricityMeter ?? '',
+      waterMeter: selectedUnitDb?.waterMeter ?? fallback?.waterMeter ?? '',
+    })
+  }, [selectedUnitKey, selectedUnitDb, selectedUnitFromModel])
+
+  const saveUnit = async () => {
+    if (!selectedUnitKey) return
+    if (!selectedUnitFromModel) return
+    setSavingUnit(true)
+    setError(null)
+    try {
+      const payload = {
+        unitNumber: unitForm.unitNumber,
+        bedrooms: unitForm.bedrooms,
+        bathrooms: unitForm.bathrooms,
+        halls: unitForm.halls,
+        sizeSqm: unitForm.sizeSqm,
+        electricityMeter: unitForm.electricityMeter,
+        waterMeter: unitForm.waterMeter,
+      }
+
+      if (selectedUnitDb) {
+        const res = await fetch(`/api/units/${selectedUnitDb.id}`, {
+          method: 'PATCH',
+          headers: { 'Content-Type': 'application/json' },
+          body: JSON.stringify(payload),
+        })
+        if (!res.ok) throw new Error(`Unit save failed (HTTP ${res.status})`)
+      } else {
+        const createPayload = {
+          propertyId,
+          name: `A-${payload.unitNumber || selectedUnitFromModel.metadata.unitNumber}`,
+          floor: String(selectedUnitFromModel.floorIndex + 1),
+          sizeSqm: payload.sizeSqm,
+          designKey: selectedUnitKey,
+          unitNumber: payload.unitNumber || selectedUnitFromModel.metadata.unitNumber,
+          bedrooms: payload.bedrooms,
+          bathrooms: payload.bathrooms,
+          halls: payload.halls,
+          electricityMeter: payload.electricityMeter,
+          waterMeter: payload.waterMeter,
+        }
+        const res = await fetch(`/api/units`, {
+          method: 'POST',
+          headers: { 'Content-Type': 'application/json' },
+          body: JSON.stringify(createPayload),
+        })
+        if (!res.ok) throw new Error(`Unit create failed (HTTP ${res.status})`)
+      }
+
+      await load()
+    } catch (e) {
+      setError(e instanceof Error ? e.message : 'Unknown error')
+    } finally {
+      setSavingUnit(false)
+    }
+  }
+
+  const publish = async () => {
+    setPublishing(true)
+    setError(null)
+    try {
+      const res = await fetch(`/api/properties/${propertyId}/building-model/publish`, { method: 'POST' })
+      if (!res.ok) throw new Error(`Publish failed (HTTP ${res.status})`)
+      const updated = (await res.json()) as BuildingModelRecord
+      setRecord(updated)
+    } catch (e) {
+      setError(e instanceof Error ? e.message : 'Unknown error')
+    } finally {
+      setPublishing(false)
+    }
+  }
+
+  const specErrors = useMemo(() => {
+    const parsed = SpecFormSchema.safeParse(spec)
+    return parsed.success ? [] : parsed.error.issues.map((i) => i.message)
+  }, [spec])
+
+  const floorsList = useMemo(() => {
+    if (!model) return []
+    return model.floors.map((f) => ({ index: f.index, label: f.label }))
+  }, [model])
+
+  return (
+    <div className="p-6 space-y-6">
+      <div className="flex flex-col gap-2">
+        <div className="flex items-center justify-between gap-4">
+          <h3 className="text-lg font-semibold text-gray-900">3D Building Designer</h3>
+          <a href={`/properties/${propertyId}/tour`} className="px-3 py-2 rounded-lg border bg-white hover:bg-gray-50 text-sm">
+            Open 3D Tour
+          </a>
+        </div>
+        <p className="text-sm text-gray-600">
+          Generate a 3D building model per floor and apartment. Select a unit in the model to edit its metadata (unit number, meters, bedrooms, bathrooms, area). Publish the model to expose it via the public 3D Tour.
+        </p>
+      </div>
+
+      {error && (
+        <div className="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700">{error}</div>
+      )}
+
+      <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
+        {/* Left: Generator */}
+        <div className="lg:col-span-4 space-y-4">
+          <div className="rounded-xl border bg-white p-4 space-y-4">
+            <div className="flex items-center justify-between">
+              <div className="space-y-1">
+                <div className="font-semibold text-gray-900">Generator</div>
+                <div className="text-xs text-gray-500">
+                  Status:{' '}
+                  <span
+                    className={`font-semibold ${record?.status === 'Published' ? 'text-emerald-700' : record?.status === 'Draft' ? 'text-amber-700' : 'text-gray-600'}`}
+                  >
+                    {record?.status ?? '—'}
+                  </span>
+                </div>
+              </div>
+              <div className="flex items-center gap-2">
+                <button
+                  onClick={generate}
+                  disabled={generating || specErrors.length > 0}
+                  className="px-3 py-1.5 rounded-lg bg-blue-600 text-white text-sm font-semibold disabled:opacity-50"
+                >
+                  {generating ? 'Generating…' : 'Generate'}
+                </button>
+                <button
+                  onClick={publish}
+                  disabled={!model || publishing || record?.status === 'Published'}
+                  className="px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm font-semibold disabled:opacity-50"
+                >
+                  {publishing ? 'Publishing…' : record?.status === 'Published' ? 'Published' : 'Publish'}
+                </button>
+              </div>
+            </div>
+
+            <div className="grid grid-cols-2 gap-3">
+              <label className="text-xs text-gray-600">
+                Floors
+                <input
+                  type="number"
+                  min={1}
+                  max={120}
+                  value={spec.floors}
+                  onChange={(e) => setSpec((s) => ({ ...s, floors: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Apartments / Floor
+                <input
+                  type="number"
+                  min={1}
+                  max={200}
+                  value={spec.apartmentsPerFloor}
+                  onChange={(e) => setSpec((s) => ({ ...s, apartmentsPerFloor: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Floor Height (m)
+                <input
+                  type="number"
+                  min={2.2}
+                  max={6}
+                  step={0.1}
+                  value={spec.floorHeightM}
+                  onChange={(e) => setSpec((s) => ({ ...s, floorHeightM: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Slab (m)
+                <input
+                  type="number"
+                  min={0.05}
+                  max={0.6}
+                  step={0.01}
+                  value={spec.slabThicknessM}
+                  onChange={(e) => setSpec((s) => ({ ...s, slabThicknessM: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Unit Width (m)
+                <input
+                  type="number"
+                  min={4}
+                  max={30}
+                  step={0.5}
+                  value={spec.unitWidthM}
+                  onChange={(e) => setSpec((s) => ({ ...s, unitWidthM: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Unit Depth (m)
+                <input
+                  type="number"
+                  min={4}
+                  max={30}
+                  step={0.5}
+                  value={spec.unitDepthM}
+                  onChange={(e) => setSpec((s) => ({ ...s, unitDepthM: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+              <label className="text-xs text-gray-600">
+                Gap (m)
+                <input
+                  type="number"
+                  min={0.1}
+                  max={10}
+                  step={0.1}
+                  value={spec.gapM}
+                  onChange={(e) => setSpec((s) => ({ ...s, gapM: Number(e.target.value) }))}
+                  className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                />
+              </label>
+            </div>
+
+            <label className="text-xs text-gray-600">
+              Unit Template
+              <select
+                value={spec.template}
+                onChange={(e) => setSpec((s) => ({ ...s, template: e.target.value as BuildingGenSpec['template'] }))}
+                className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+              >
+                <option value="studio">Studio</option>
+                <option value="1br">1 Bedroom</option>
+                <option value="2br">2 Bedrooms</option>
+                <option value="3br">3 Bedrooms</option>
+                <option value="mixed">Mixed</option>
+              </select>
+            </label>
+
+            <label className="text-xs text-gray-600">
+              Designer Prompt (optional)
+              <textarea
+                value={spec.prompt ?? ''}
+                onChange={(e) => setSpec((s) => ({ ...s, prompt: e.target.value }))}
+                className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                rows={4}
+                placeholder="e.g., 6 floors, 4 apartments per floor, modern neutral palette, family-friendly layout…"
+              />
+            </label>
+
+            <label className="flex items-center gap-2 text-sm">
+              <input type="checkbox" checked={syncUnits} onChange={(e) => setSyncUnits(e.target.checked)} />
+              <span>Sync apartments as Units in the system</span>
+            </label>
+
+            {specErrors.length > 0 && (
+              <div className="rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-800">
+                <div className="font-semibold mb-1">Fix generator inputs:</div>
+                <ul className="list-disc pl-5 space-y-1">
+                  {specErrors.map((m) => (
+                    <li key={m}>{m}</li>
+                  ))}
+                </ul>
+              </div>
+            )}
+          </div>
+
+          {/* Viewer options */}
+          <div className="rounded-xl border bg-white p-4 space-y-3">
+            <div className="font-semibold text-gray-900">Viewer</div>
+            <div className="grid grid-cols-2 gap-2">
+              <label className="flex items-center gap-2 text-sm">
+                <input
+                  type="checkbox"
+                  checked={viewerOptions.showRooms}
+                  onChange={(e) => setViewerOptions((v) => ({ ...v, showRooms: e.target.checked }))}
+                />
+                <span>Show Rooms</span>
+              </label>
+              <label className="flex items-center gap-2 text-sm">
+                <input
+                  type="checkbox"
+                  checked={viewerOptions.exploded}
+                  onChange={(e) => setViewerOptions((v) => ({ ...v, exploded: e.target.checked }))}
+                />
+                <span>Exploded Floors</span>
+              </label>
+              <label className="flex items-center gap-2 text-sm">
+                <input
+                  type="checkbox"
+                  checked={viewerOptions.showLabels}
+                  onChange={(e) => setViewerOptions((v) => ({ ...v, showLabels: e.target.checked }))}
+                />
+                <span>Show Labels</span>
+              </label>
+            </div>
+
+            <label className="text-xs text-gray-600">
+              Focus Floor
+              <select
+                value={viewerOptions.focusFloor === null ? 'all' : String(viewerOptions.focusFloor)}
+                onChange={(e) => {
+                  const val = e.target.value
+                  setViewerOptions((v) => ({ ...v, focusFloor: val === 'all' ? null : Number(val) }))
+                }}
+                className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+              >
+                <option value="all">All Floors</option>
+                {floorsList.map((f) => (
+                  <option key={f.index} value={String(f.index)}>
+                    {f.label}
+                  </option>
+                ))}
+              </select>
+            </label>
+
+            <button onClick={load} className="w-full px-3 py-2 rounded-lg border text-sm hover:bg-gray-50" disabled={loading}>
+              {loading ? 'Refreshing…' : 'Refresh from Server'}
+            </button>
+          </div>
+        </div>
+
+        {/* Middle: 3D Viewer */}
+        <div className="lg:col-span-5">
+          {loading && !model ? (
+            <div className="h-[520px] w-full rounded-xl border bg-white flex items-center justify-center text-sm text-gray-500">Loading…</div>
+          ) : model ? (
+            <div className="rounded-xl border bg-white p-3">
+              <div className="h-[520px] w-full">
+                <BuildingViewer model={model} selection={selection} onSelect={setSelection} options={viewerOptions} />
+              </div>
+            </div>
+          ) : (
+            <div className="h-[520px] w-full rounded-xl border bg-white flex flex-col items-center justify-center text-sm text-gray-600 p-6 text-center">
+              <div className="font-semibold text-gray-900 mb-2">No 3D model yet</div>
+              <div className="max-w-sm">Set floors and apartments per floor, then click <span className="font-semibold">Generate Model</span>.</div>
+            </div>
+          )}
+        </div>
+
+        {/* Right: Unit metadata panel */}
+        <div className="lg:col-span-3 space-y-4">
+          <div className="rounded-xl border bg-white p-4 space-y-3">
+            <div className="font-semibold text-gray-900">Selected</div>
+            {!selectedUnitKey ? (
+              <div className="text-sm text-gray-600">Click an apartment (or room) in the 3D model.</div>
+            ) : (
+              <div className="space-y-2">
+                <div className="text-sm">
+                  <span className="text-gray-500">Node:</span> <span className="font-semibold">{selectedUnitKey}</span>
+                </div>
+                {selection?.kind === 'room' && (
+                  <div className="text-sm">
+                    <span className="text-gray-500">Room:</span> <span className="font-semibold">{selection.roomId}</span>
+                  </div>
+                )}
+                <div className="text-xs text-gray-500">Units are editable fields; rooms are view-only.</div>
+              </div>
+            )}
+          </div>
+
+          <div className="rounded-xl border bg-white p-4 space-y-4">
+            <div className="flex items-center justify-between">
+              <div className="font-semibold text-gray-900">Unit Metadata</div>
+              <button
+                onClick={saveUnit}
+                disabled={!selectedUnitKey || !selectedUnitFromModel || savingUnit}
+                className="px-3 py-1.5 rounded-lg bg-emerald-600 text-white text-sm font-semibold disabled:opacity-50"
+              >
+                {savingUnit ? 'Saving…' : selectedUnitDb ? 'Save' : 'Create'}
+              </button>
+            </div>
+
+            {!selectedUnitKey || !selectedUnitFromModel ? (
+              <div className="text-sm text-gray-600">Select a unit to edit.</div>
+            ) : (
+              <div className="grid grid-cols-2 gap-3">
+                <label className="text-xs text-gray-600">
+                  Unit Number
+                  <input
+                    value={unitForm.unitNumber}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, unitNumber: e.target.value }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                    placeholder={selectedUnitFromModel.metadata.unitNumber}
+                  />
+                </label>
+                <label className="text-xs text-gray-600">
+                  Area (sqm)
+                  <input
+                    type="number"
+                    value={unitForm.sizeSqm}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, sizeSqm: Number(e.target.value) }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                  />
+                </label>
+                <label className="text-xs text-gray-600">
+                  Bedrooms
+                  <input
+                    type="number"
+                    min={0}
+                    value={unitForm.bedrooms}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, bedrooms: Number(e.target.value) }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                  />
+                </label>
+                <label className="text-xs text-gray-600">
+                  Bathrooms
+                  <input
+                    type="number"
+                    min={0}
+                    value={unitForm.bathrooms}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, bathrooms: Number(e.target.value) }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                  />
+                </label>
+                <label className="text-xs text-gray-600">
+                  Hall / Living
+                  <input
+                    type="number"
+                    min={0}
+                    value={unitForm.halls}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, halls: Number(e.target.value) }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                  />
+                </label>
+                <div />
+                <label className="text-xs text-gray-600 col-span-2">
+                  Electricity Meter
+                  <input
+                    value={unitForm.electricityMeter}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, electricityMeter: e.target.value }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                    placeholder="e.g., SEC meter #"
+                  />
+                </label>
+                <label className="text-xs text-gray-600 col-span-2">
+                  Water Meter
+                  <input
+                    value={unitForm.waterMeter}
+                    onChange={(e) => setUnitForm((u) => ({ ...u, waterMeter: e.target.value }))}
+                    className="mt-1 w-full rounded-md border px-3 py-2 text-sm"
+                    placeholder="e.g., NWC meter #"
+                  />
+                </label>
+              </div>
+            )}
+
+            {selectedUnitDb && (
+              <div className="rounded-lg border bg-gray-50 p-3 text-xs text-gray-600">
+                <div className="font-semibold text-gray-800 mb-1">DB Record</div>
+                <div>
+                  <span className="text-gray-500">Unit ID:</span> {selectedUnitDb.id}
+                </div>
+              </div>
+            )}
+          </div>
+
+          {/* Quick list */}
+          <div className="rounded-xl border bg-white p-4 space-y-3">
+            <div className="font-semibold text-gray-900">Units</div>
+            {units.length === 0 ? (
+              <div className="text-sm text-gray-600">No units found.</div>
+            ) : (
+              <div className="max-h-[220px] overflow-auto border rounded-lg">
+                {units.map((u) => (
+                  <button
+                    key={u.id}
+                    onClick={() => u.designKey && setSelection({ kind: 'unit', unitKey: u.designKey })}
+                    className="w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-50"
+                  >
+                    <div className="text-left">
+                      <div className="font-medium text-gray-900">{u.name}</div>
+                      <div className="text-xs text-gray-500">
+                        Floor {u.floor ?? '—'} · {u.sizeSqm ?? '—'} sqm
+                      </div>
+                    </div>
+                    <div className="text-xs text-gray-500">{u.designKey ?? ''}</div>
+                  </button>
+                ))}
+              </div>
+            )}
+          </div>
+        </div>
+      </div>
+
+      {/* Build info */}
+      {model && (
+        <div className="rounded-xl border bg-white p-4 text-xs text-gray-600">
+          <div className="flex flex-wrap gap-x-6 gap-y-2">
+            <div>
+              <span className="text-gray-500">Floors:</span> {model.spec.floors}
+            </div>
+            <div>
+              <span className="text-gray-500">Apts/Floor:</span> {model.spec.apartmentsPerFloor}
+            </div>
+            <div>
+              <span className="text-gray-500">Template:</span> {model.spec.template}
+            </div>
+            <div>
+              <span className="text-gray-500">Bounds:</span> {Math.round(model.bounds.width)}m × {Math.round(model.bounds.depth)}m × {Math.round(model.bounds.height)}m
+            </div>
+          </div>
+        </div>
+      )}
+    </div>
+  )
+}
diff --git a/app/components/properties/tabs/FinancialsTab.tsx b/app/components/properties/tabs/FinancialsTab.tsx
index b873009..4c01580 100644
--- a/app/components/properties/tabs/FinancialsTab.tsx
+++ b/app/components/properties/tabs/FinancialsTab.tsx
@@ -44,7 +44,20 @@ export function FinancialsTab({ propertyId }: { propertyId: string }){
               <div className="p-2 bg-gray-100 rounded-lg"><FileText className="h-6 w-6 text-gray-500"/></div>
               <div><p className="font-semibold">{inv.number} — {inv.tenantName}</p><p className="text-sm text-gray-500">Issued {inv.issueDate} • Due {inv.dueDate}</p></div>
             </div>
-            <div className="flex items-center gap-3"><span className="text-sm font-semibold">{inv.amount.toLocaleString()}</span><span className={`px-2.5 py-1 text-xs font-medium rounded-full ${inv.status==='Paid' and 'bg-green-100 text-green-800' or inv.status==='Overdue' and 'bg-red-100 text-red-800' or 'bg-gray-100 text-gray-700'}`}>{inv.status}</span></div>
+            <div className="flex items-center gap-3">
+              <span className="text-sm font-semibold">{inv.amount.toLocaleString()}</span>
+              <span
+                className={`px-2.5 py-1 text-xs font-medium rounded-full ${
+                  inv.status === 'Paid'
+                    ? 'bg-green-100 text-green-800'
+                    : inv.status === 'Overdue'
+                      ? 'bg-red-100 text-red-800'
+                      : 'bg-gray-100 text-gray-700'
+                }`}
+              >
+                {inv.status}
+              </span>
+            </div>
           </div>
         )) : <div className="py-12 text-center text-gray-500">No invoices.</div>}
       </div>
diff --git a/app/components/properties/tabs/UnitsTab.tsx b/app/components/properties/tabs/UnitsTab.tsx
index 2357f8c..183b4b1 100644
--- a/app/components/properties/tabs/UnitsTab.tsx
+++ b/app/components/properties/tabs/UnitsTab.tsx
@@ -15,7 +15,7 @@ export function UnitsTab({ propertyId }: { propertyId: string }){
             <div className="p-2 bg-gray-100 rounded-lg"><DoorOpen className="h-6 w-6 text-gray-500"/></div>
             <div>
               <p className="font-semibold">{u.name}</p>
-              <p className="text-xs text-gray-500">Floor {u.floor or ''} • {u.sizeSqm or 0} m²</p>
+              <p className="text-xs text-gray-500">Floor {u.floor ?? ''} • {u.sizeSqm ?? 0} m²</p>
             </div>
             <div className="ml-auto">
               <a href={`/work-orders?unitId=${u.id}`} className="text-sm text-blue-600 underline">New Work Order</a>
diff --git a/app/properties/[id]/tour/page.tsx b/app/properties/[id]/tour/page.tsx
new file mode 100644
index 0000000..e0cde0d
--- /dev/null
+++ b/app/properties/[id]/tour/page.tsx
@@ -0,0 +1,29 @@
+import Link from 'next/link'
+import { prisma } from '@/lib/db'
+import BuildingTourClient from '@/app/components/building3d/BuildingTourClient'
+
+export default async function PropertyTourPage({ params }: { params: { id: string } }) {
+  const property = await prisma.property.findUnique({ where: { id: params.id }, select: { id: true, name: true, address: true } })
+  if (!property) {
+    return <div className="p-6">Property not found.</div>
+  }
+
+  const buildingModel = await prisma.buildingModel.findFirst({ where: { propertyId: params.id, status: 'Published' }, orderBy: { version: 'desc' } })
+  const units = await prisma.unit.findMany({ where: { propertyId: params.id }, orderBy: [{ floor: 'asc' }, { name: 'asc' }] })
+
+  return (
+    <div className="space-y-4">
+      <div className="flex items-center justify-between">
+        <div>
+          <h1 className="text-2xl font-bold text-gray-900">{property.name} — 3D Tour</h1>
+          <p className="text-sm text-gray-600">{property.address}</p>
+        </div>
+        <Link href={`/properties/${property.id}`} className="px-3 py-2 rounded-lg border bg-white hover:bg-gray-50 text-sm">
+          Back to Property
+        </Link>
+      </div>
+
+      <BuildingTourClient propertyId={property.id} buildingModel={buildingModel?.model ?? null} units={units} />
+    </div>
+  )
+}
diff --git a/db/schema.prisma b/db/schema.prisma
index e604191..c8d7078 100644
--- a/db/schema.prisma
+++ b/db/schema.prisma
@@ -8,6 +8,7 @@ model Property {
   name      String
   address   String
   units     Unit[]
+  buildingModels BuildingModel[]
   leases    Lease[]
   workOrders WorkOrder[]
   invoices  Invoice[]
@@ -21,9 +22,42 @@ model Unit {
   name        String
   floor       String?
   sizeSqm     Int?
+
+  /// Maps this unit to a generated 3D building model node (e.g., "F3-A12").
+  /// This enables stable selection in the 3D viewer and sync between 3D model and Unit records.
+  designKey        String?
+  unitNumber       String?
+  bedrooms         Int?
+  bathrooms        Int?
+  halls            Int?
+  electricityMeter String?
+  waterMeter       String?
+
   leases      Lease[]
   workOrders  WorkOrder[]
   property    Property @relation(fields: [propertyId], references: [id])
+
+  @@index([propertyId, floor])
+  @@unique([propertyId, designKey])
+}
+
+enum BuildingModelStatus { Draft Published Archived }
+
+model BuildingModel {
+  id         String  @id @default(cuid())
+  propertyId String
+  version    Int     @default(1)
+  status     BuildingModelStatus @default(Draft)
+  generator  String?
+  input      Json
+  model      Json
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
+
+  property   Property @relation(fields: [propertyId], references: [id])
+
+  @@index([propertyId])
+  @@unique([propertyId, version])
 }
 
 model Tenant {
diff --git a/lib/buildingModel.ts b/lib/buildingModel.ts
new file mode 100644
index 0000000..1c2f301
--- /dev/null
+++ b/lib/buildingModel.ts
@@ -0,0 +1,404 @@
+import { z } from 'zod'
+
+/**
+ * Building Model (3D) — data contracts & procedural generator.
+ *
+ * This module is intentionally provider-agnostic:
+ * - Today: deterministic procedural generation (fast, offline, no external APIs)
+ * - Tomorrow: swap generator implementation to an LLM-backed "AI" generator without changing UI contracts.
+ */
+
+export const BuildingLayoutSchema = z.enum(['grid', 'corridor'])
+export type BuildingLayout = z.infer<typeof BuildingLayoutSchema>
+
+export const RoomKindSchema = z.enum(['living', 'bedroom', 'bathroom', 'kitchen', 'hall'])
+export type RoomKind = z.infer<typeof RoomKindSchema>
+
+export const UnitTemplateSchema = z.enum(['studio', '1br', '2br', '3br', 'mixed'])
+export type UnitTemplate = z.infer<typeof UnitTemplateSchema>
+
+export const BuildingGenSpecSchema = z
+  .object({
+    floors: z.number().int().min(1).max(120),
+    apartmentsPerFloor: z.number().int().min(1).max(200),
+    layout: BuildingLayoutSchema.default('grid'),
+
+    /** Meter-based scale (in meters) */
+    floorHeightM: z.number().min(2.2).max(6).default(3),
+    unitWidthM: z.number().min(4).max(30).default(10),
+    unitDepthM: z.number().min(4).max(30).default(8),
+    gapM: z.number().min(0.1).max(10).default(1.2),
+    slabThicknessM: z.number().min(0.05).max(0.6).default(0.15),
+
+    /** Heuristic for internal room partitioning */
+    template: UnitTemplateSchema.default('2br'),
+
+    /** Optional designer prompt (stored & shown in UI; generator can ignore or use). */
+    prompt: z.string().max(2000).optional(),
+
+    /** Determinism seed. If omitted, a stable seed is derived from floors/apartments. */
+    seed: z.string().max(128).optional(),
+  })
+  .strict()
+
+export type BuildingGenSpec = z.infer<typeof BuildingGenSpecSchema>
+
+export type RoomRect = {
+  x: number
+  z: number
+  width: number
+  depth: number
+}
+
+export type RoomModel = {
+  id: string
+  kind: RoomKind
+  label: string
+  rect: RoomRect
+}
+
+export type UnitMetadata = {
+  unitNumber: string
+  bedrooms: number
+  bathrooms: number
+  halls: number
+  areaSqm: number
+  /** When synced to DB, this is the Unit.id */
+  unitDbId?: string
+  electricityMeter?: string
+  waterMeter?: string
+}
+
+export type UnitModel = {
+  key: string
+  label: string
+  floorIndex: number
+  position: { x: number; y: number; z: number }
+  size: { width: number; height: number; depth: number }
+  metadata: UnitMetadata
+  rooms: RoomModel[]
+}
+
+export type FloorTheme = {
+  baseColor: string
+  accentColor: string
+  roomColors: Record<RoomKind, string>
+}
+
+export type FloorModel = {
+  index: number
+  label: string
+  elevationM: number
+  theme: FloorTheme
+  slab: { width: number; depth: number; thickness: number }
+  units: UnitModel[]
+}
+
+export type BuildingModel = {
+  schemaVersion: 1
+  generatedAt: string
+  spec: BuildingGenSpec
+  bounds: { width: number; depth: number; height: number }
+  floors: FloorModel[]
+}
+
+function hashStringToUint32(input: string): number {
+  // FNV-1a 32-bit
+  let h = 0x811c9dc5
+  for (let i = 0; i < input.length; i += 1) {
+    h ^= input.charCodeAt(i)
+    h = Math.imul(h, 0x01000193)
+  }
+  return h >>> 0
+}
+
+function mulberry32(seed: number): () => number {
+  // Deterministic PRNG. Returns [0,1).
+  return function () {
+    let t = (seed += 0x6d2b79f5)
+    t = Math.imul(t ^ (t >>> 15), t | 1)
+    t ^= t + Math.imul(t ^ (t >>> 7), t | 61)
+    return ((t ^ (t >>> 14)) >>> 0) / 4294967296
+  }
+}
+
+function clamp(n: number, min: number, max: number): number {
+  return Math.max(min, Math.min(max, n))
+}
+
+function hslToHex(h: number, s: number, l: number): string {
+  // h: 0..360
+  // s/l: 0..100
+  const _h = ((h % 360) + 360) % 360
+  const _s = clamp(s, 0, 100) / 100
+  const _l = clamp(l, 0, 100) / 100
+
+  const c = (1 - Math.abs(2 * _l - 1)) * _s
+  const x = c * (1 - Math.abs(((_h / 60) % 2) - 1))
+  const m = _l - c / 2
+
+  let r = 0,
+    g = 0,
+    b = 0
+  if (_h < 60) {
+    r = c
+    g = x
+  } else if (_h < 120) {
+    r = x
+    g = c
+  } else if (_h < 180) {
+    g = c
+    b = x
+  } else if (_h < 240) {
+    g = x
+    b = c
+  } else if (_h < 300) {
+    r = x
+    b = c
+  } else {
+    r = c
+    b = x
+  }
+
+  const toHex = (v: number) => {
+    const hv = Math.round((v + m) * 255)
+    return hv.toString(16).padStart(2, '0')
+  }
+
+  return `#${toHex(r)}${toHex(g)}${toHex(b)}`
+}
+
+function makeFloorTheme(floorIndex: number): FloorTheme {
+  // Align with Fixzit core palette but keep distinct per floor.
+  // Base hues roughly: Blue ~ 205, Green ~ 145, Yellow ~ 45
+  const hue = 205 + floorIndex * 9
+  const baseColor = hslToHex(hue, 65, 45)
+  const accentColor = hslToHex(hue + 25, 70, 50)
+
+  const roomColors: Record<RoomKind, string> = {
+    living: hslToHex(hue, 55, 65),
+    bedroom: hslToHex(hue + 20, 45, 62),
+    bathroom: hslToHex(hue + 40, 30, 70),
+    kitchen: hslToHex(hue + 10, 35, 68),
+    hall: hslToHex(hue - 15, 30, 72),
+  }
+  return { baseColor, accentColor, roomColors }
+}
+
+function buildUnitNumber(floorIndex: number, unitIndexOnFloor: number): string {
+  const floorNo = floorIndex + 1
+  const unitNo = unitIndexOnFloor + 1
+  // 101, 102 ... 201, 202 ...
+  const num = floorNo * 100 + unitNo
+  return String(num)
+}
+
+function computeTemplateCounts(template: UnitTemplate, rnd: () => number): { bedrooms: number; bathrooms: number; halls: number } {
+  if (template === 'studio') return { bedrooms: 0, bathrooms: 1, halls: 1 }
+  if (template === '1br') return { bedrooms: 1, bathrooms: 1, halls: 1 }
+  if (template === '2br') return { bedrooms: 2, bathrooms: 2, halls: 1 }
+  if (template === '3br') return { bedrooms: 3, bathrooms: 2, halls: 1 }
+  // mixed
+  const roll = rnd()
+  if (roll < 0.2) return { bedrooms: 0, bathrooms: 1, halls: 1 }
+  if (roll < 0.55) return { bedrooms: 1, bathrooms: 1, halls: 1 }
+  if (roll < 0.85) return { bedrooms: 2, bathrooms: 2, halls: 1 }
+  return { bedrooms: 3, bathrooms: 2, halls: 1 }
+}
+
+function generateRooms(width: number, depth: number, counts: { bedrooms: number; bathrooms: number; halls: number }): RoomModel[] {
+  // Very simple deterministic partitioning (rectangles on a 2D plane).
+  // Coordinate system: local unit center at (0,0). Rooms define their bottom-left corner relative to unit center.
+  const rooms: RoomModel[] = []
+  const id = (suffix: string) => suffix
+
+  const frontDepth = depth * 0.45
+  const backDepth = depth - frontDepth
+  const corridorWidth = Math.max(1.2, width * 0.18)
+
+  // Living area (front)
+  rooms.push({
+    id: id('living'),
+    kind: 'living',
+    label: 'Living',
+    rect: {
+      x: -width / 2,
+      z: -depth / 2,
+      width,
+      depth: frontDepth,
+    },
+  })
+
+  // Hall / circulation strip (middle)
+  rooms.push({
+    id: id('hall'),
+    kind: 'hall',
+    label: 'Hall',
+    rect: {
+      x: -corridorWidth / 2,
+      z: -depth / 2 + frontDepth,
+      width: corridorWidth,
+      depth: backDepth,
+    },
+  })
+
+  // Kitchen (front side)
+  rooms.push({
+    id: id('kitchen'),
+    kind: 'kitchen',
+    label: 'Kitchen',
+    rect: {
+      x: -width / 2,
+      z: -depth / 2 + frontDepth,
+      width: (width - corridorWidth) / 2,
+      depth: Math.max(2.2, backDepth * 0.45),
+    },
+  })
+
+  // Bathrooms (back side, near hall)
+  const baths = Math.max(1, counts.bathrooms)
+  const bathDepth = backDepth / baths
+  const bathWidth = Math.max(1.8, (width - corridorWidth) / 2)
+  for (let i = 0; i < baths; i += 1) {
+    rooms.push({
+      id: id(`bathroom_${i + 1}`),
+      kind: 'bathroom',
+      label: `Bathroom ${i + 1}`,
+      rect: {
+        x: corridorWidth / 2,
+        z: -depth / 2 + frontDepth + i * bathDepth,
+        width: bathWidth,
+        depth: bathDepth,
+      },
+    })
+  }
+
+  // Bedrooms (back corners)
+  const beds = Math.max(0, counts.bedrooms)
+  if (beds === 0) {
+    // Studio: reuse bedroom area as "Sleeping" zone within living (visual only)
+    rooms.push({
+      id: id('sleeping'),
+      kind: 'bedroom',
+      label: 'Sleeping',
+      rect: {
+        x: -width / 2,
+        z: -depth / 2 + frontDepth * 0.2,
+        width: width * 0.45,
+        depth: frontDepth * 0.55,
+      },
+    })
+    return rooms
+  }
+
+  const bedAreaWidth = (width - corridorWidth) / 2
+  const bedDepth = backDepth / Math.min(2, beds)
+  let placed = 0
+  // Left column beds
+  for (let r = 0; r < 2 && placed < beds; r += 1) {
+    rooms.push({
+      id: id(`bedroom_${placed + 1}`),
+      kind: 'bedroom',
+      label: `Bedroom ${placed + 1}`,
+      rect: {
+        x: -width / 2,
+        z: -depth / 2 + frontDepth + r * bedDepth,
+        width: bedAreaWidth,
+        depth: bedDepth,
+      },
+    })
+    placed += 1
+  }
+  // Right column beds (above bathrooms region)
+  for (let r = 0; r < 2 && placed < beds; r += 1) {
+    rooms.push({
+      id: id(`bedroom_${placed + 1}`),
+      kind: 'bedroom',
+      label: `Bedroom ${placed + 1}`,
+      rect: {
+        x: corridorWidth / 2,
+        z: -depth / 2 + frontDepth + r * bedDepth,
+        width: bedAreaWidth,
+        depth: bedDepth,
+      },
+    })
+    placed += 1
+  }
+
+  return rooms
+}
+
+export function generateBuildingModel(input: BuildingGenSpec): BuildingModel {
+  const parsed = BuildingGenSpecSchema.parse(input)
+  const seedStr = parsed.seed ?? `floors:${parsed.floors}|apts:${parsed.apartmentsPerFloor}|layout:${parsed.layout}|tpl:${parsed.template}`
+  const rnd = mulberry32(hashStringToUint32(seedStr))
+
+  const unitW = parsed.unitWidthM
+  const unitD = parsed.unitDepthM
+  const gap = parsed.gapM
+  const slabT = parsed.slabThicknessM
+  const floorH = parsed.floorHeightM
+
+  const cols = Math.ceil(Math.sqrt(parsed.apartmentsPerFloor))
+  const rows = Math.ceil(parsed.apartmentsPerFloor / cols)
+
+  const footprintWidth = cols * unitW + (cols - 1) * gap
+  const footprintDepth = rows * unitD + (rows - 1) * gap
+  const totalHeight = parsed.floors * floorH
+
+  const floors: FloorModel[] = []
+
+  for (let f = 0; f < parsed.floors; f += 1) {
+    const theme = makeFloorTheme(f)
+    const elevationM = f * floorH
+    const units: UnitModel[] = []
+
+    for (let i = 0; i < parsed.apartmentsPerFloor; i += 1) {
+      const col = i % cols
+      const row = Math.floor(i / cols)
+      const x = col * (unitW + gap) - (footprintWidth - unitW) / 2
+      const z = row * (unitD + gap) - (footprintDepth - unitD) / 2
+
+      const counts = computeTemplateCounts(parsed.template, rnd)
+      const rooms = generateRooms(unitW, unitD, counts)
+      const unitNumber = buildUnitNumber(f, i)
+      const areaSqm = Math.round(unitW * unitD)
+
+      const key = `F${f + 1}-A${i + 1}`
+      const label = `Apartment ${unitNumber}`
+
+      units.push({
+        key,
+        label,
+        floorIndex: f,
+        position: { x, y: elevationM + slabT, z },
+        size: { width: unitW, height: floorH - slabT, depth: unitD },
+        metadata: {
+          unitNumber,
+          bedrooms: counts.bedrooms,
+          bathrooms: counts.bathrooms,
+          halls: counts.halls,
+          areaSqm,
+        },
+        rooms,
+      })
+    }
+
+    floors.push({
+      index: f,
+      label: `Floor ${f + 1}`,
+      elevationM,
+      theme,
+      slab: { width: footprintWidth + gap, depth: footprintDepth + gap, thickness: slabT },
+      units,
+    })
+  }
+
+  return {
+    schemaVersion: 1,
+    generatedAt: new Date().toISOString(),
+    spec: parsed,
+    bounds: { width: footprintWidth, depth: footprintDepth, height: totalHeight },
+    floors,
+  }
+}
diff --git a/package.json b/package.json
index 008b9f3..0d02c98 100644
--- a/package.json
+++ b/package.json
@@ -14,11 +14,14 @@
   "dependencies": {
     "@hello-pangea/dnd": "^16.5.0",
     "@prisma/client": "^5.16.1",
+    "@react-three/drei": "^9.122.0",
+    "@react-three/fiber": "^8.17.10",
     "lucide-react": "^0.453.0",
     "next": "14.2.5",
     "react": "18.3.1",
     "react-dom": "18.3.1",
     "recharts": "^2.12.7",
+    "three": "^0.165.0",
     "zod": "^3.23.8"
   },
   "devDependencies": {
