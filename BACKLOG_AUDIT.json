{
  "timestamp": "2025-12-16T19:35:00+03:00",
  "source": "docs/PENDING_MASTER.md + code-review:2025-12-16",
  "branch": "main",
  "commit": "524b35ce5",
  "issues": [
    {
      "key": "WORKFLOW-001",
      "externalId": "WORKFLOW-001",
      "title": "GitHub Actions build-sourcemaps.yml: pnpm setup after node setup causes cache failure",
      "category": "bug",
      "priority": "P2",
      "status": "resolved",
      "location": ".github/workflows/build-sourcemaps.yml",
      "sourcePath": "code-review",
      "sourceRef": "code-review:.github/workflows/build-sourcemaps.yml:43-50",
      "evidenceSnippet": "Setup Node.js with cache: pnpm runs before pnpm/action-setup causing Unable to locate executable file: pnpm",
      "impact": "Workflow fails on every run; cannot cache dependencies; build fails before code is tested",
      "rootCause": "Incorrect step ordering: setup-node@v4 attempts to use pnpm for cache detection before pnpm is installed",
      "proposedFix": "Move pnpm/action-setup@v2 step BEFORE setup-node@v4 step",
      "effort": "XS",
      "riskTags": ["REGRESSION"],
      "resolution": {
        "status": "resolved",
        "resolvedAt": "2025-12-16T19:05:00+03:00",
        "resolvedBy": "eng.sultan",
        "commitHash": "pending-push",
        "notes": "Reordered steps: pnpm setup now runs before Node.js setup. Validation: cat .github/workflows/build-sourcemaps.yml confirmed correct order."
      }
    },
    {
      "key": "WORKFLOW-002",
      "externalId": "WORKFLOW-002",
      "title": "GitHub Actions pr_agent.yml: action reference 'qodo-ai/pr-agent@v0.9' not found",
      "category": "bug",
      "priority": "P2",
      "status": "resolved",
      "location": ".github/workflows/pr_agent.yml",
      "sourcePath": "code-review",
      "sourceRef": "code-review:.github/workflows/pr_agent.yml:46",
      "evidenceSnippet": "Unable to resolve action qodo-ai/pr-agent@main, repository or version not found",
      "impact": "PR Agent workflow fails; no automated PR reviews; loses AI-assisted code quality checks",
      "rootCause": "Action repository renamed/moved from qodo-ai to Codium-ai organization; version tag format incorrect",
      "proposedFix": "Update action reference from 'qodo-ai/pr-agent@v0.9' to 'Codium-ai/pr-agent@main'",
      "effort": "XS",
      "riskTags": ["REGRESSION"],
      "resolution": {
        "status": "resolved",
        "resolvedAt": "2025-12-16T19:05:00+03:00",
        "resolvedBy": "eng.sultan",
        "commitHash": "pending-push",
        "notes": "Updated action reference to Codium-ai/pr-agent@main. Qodo AI rebranded to Codium-ai."
      }
    },
    {
      "key": "REF-001",
      "externalId": "REF-001",
      "title": "Create CRM route handler unit tests",
      "category": "missing_test",
      "priority": "P2",
      "status": "open",
      "location": "tests/unit/api/crm/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "CRM route handlers lack unit tests for business logic validation separate from integration tests",
      "impact": "Missing unit test coverage for CRM handler logic; harder to isolate business logic bugs",
      "effort": "M",
      "riskTags": ["TEST_GAP"]
    },
    {
      "key": "DOC-101",
      "externalId": "DOC-101",
      "title": "Add JSDoc to 7 undocumented API route handlers",
      "category": "documentation",
      "priority": "P2",
      "status": "open",
      "location": "app/api/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "Seven API route handlers missing JSDoc comments for parameters, return types, and error codes",
      "impact": "Harder for developers to understand API contracts; increases onboarding time",
      "effort": "S"
    },
    {
      "key": "DOC-102",
      "externalId": "DOC-102",
      "title": "Add JSDoc to 51 lib utility modules (P1 priority)",
      "category": "documentation",
      "priority": "P2",
      "status": "open",
      "location": "lib/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "Fifty-one utility modules in lib/ lack comprehensive JSDoc for function signatures and usage patterns",
      "impact": "Code reusability suffers; utility functions used incorrectly; duplicated logic",
      "effort": "M"
    },
    {
      "key": "DOC-103",
      "externalId": "DOC-103",
      "title": "Add JSDoc to 124 Mongoose schemas",
      "category": "documentation",
      "priority": "P2",
      "status": "open",
      "location": "server/models/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "One hundred twenty-four Mongoose model schemas missing JSDoc for field validation, indexes, and usage",
      "impact": "Schema changes risky; field constraints unclear; harder to maintain data integrity",
      "effort": "L"
    },
    {
      "key": "PERF-002",
      "externalId": "PERF-002",
      "title": "Sequential updates in fulfillment/claims services",
      "category": "efficiency",
      "priority": "P3",
      "status": "open",
      "location": "services/fulfillment/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "Fulfillment and claims services perform sequential database updates that could be parallelized with Promise.all",
      "impact": "Slower order processing; increased latency for high-volume operations",
      "effort": "M",
      "riskTags": ["PERFORMANCE"]
    },
    {
      "key": "TEST-001",
      "externalId": "TEST-001",
      "title": "Souq marketplace test coverage",
      "category": "missing_test",
      "priority": "P3",
      "status": "open",
      "location": "tests/api/souq/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "Souq marketplace module lacks comprehensive API test coverage for product/order/vendor endpoints",
      "impact": "Marketplace regressions harder to catch; risky to refactor Souq code",
      "effort": "XL",
      "riskTags": ["TEST_GAP"]
    },
    {
      "key": "TEST-005",
      "externalId": "TEST-005",
      "title": "Aqar real estate test coverage (in progress)",
      "category": "missing_test",
      "priority": "P3",
      "status": "in_progress",
      "location": "tests/api/aqar/",
      "sourcePath": "audit",
      "sourceRef": "PENDING_MASTER:2025-12-17-session",
      "evidenceSnippet": "Aqar real estate module partially covered; property listing and inquiry endpoints need test expansion",
      "impact": "Real estate feature changes risky; limited regression detection",
      "effort": "S",
      "riskTags": ["TEST_GAP"]
    }
  ]
}
