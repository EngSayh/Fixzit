{
  "batchId": "TODO-SCAN-2026-01-02",
  "source": "automated_scan",
  "scanDate": "2026-01-02T10:00:00+03:00",
  "agentToken": "[AGENT-001-A]",
  "issues": [
    {
      "title": "Runtime 501 stub: route.ts line 78 returns Not Implemented",
      "description": "API route returns HTTP 501 Not Implemented. Production users hitting this endpoint will see an error. Must implement actual functionality or remove endpoint.",
      "category": "bug",
      "priority": "P1",
      "effort": "M",
      "module": "api",
      "location": { "filePath": "app/api/route.ts", "lineStart": 78 },
      "action": "Implement the missing functionality or deprecate endpoint",
      "definitionOfDone": "Endpoint returns valid response or is removed from API",
      "riskTags": ["SECURITY", "DATA_INTEGRITY"],
      "labels": ["runtime-stub", "501-error", "production-impact"]
    },
    {
      "title": "Runtime 501 stub: route.ts line 315 returns Not Implemented",
      "description": "API route returns HTTP 501 Not Implemented at line 315. Users encountering this path will receive an error.",
      "category": "bug",
      "priority": "P1",
      "effort": "M",
      "module": "api",
      "location": { "filePath": "app/api/route.ts", "lineStart": 315 },
      "action": "Implement the missing functionality or remove dead code path",
      "definitionOfDone": "Endpoint returns valid response with proper error handling",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["runtime-stub", "501-error"]
    },
    {
      "title": "Runtime 501 stub: route.ts line 379 returns Not Implemented",
      "description": "API route returns HTTP 501 Not Implemented at line 379.",
      "category": "bug",
      "priority": "P1",
      "effort": "M",
      "module": "api",
      "location": { "filePath": "app/api/route.ts", "lineStart": 379 },
      "action": "Implement or deprecate",
      "definitionOfDone": "Endpoint functional or removed",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["runtime-stub", "501-error"]
    },
    {
      "title": "PII Encryption NOT IMPLEMENTED in Employee.ts",
      "description": "Employee model at line 38 has comment indicating PII encryption is not implemented. This is a compliance risk for PDPL/GDPR.",
      "category": "security",
      "priority": "P0",
      "effort": "L",
      "module": "hr",
      "location": { "filePath": "server/models/Employee.ts", "lineStart": 38 },
      "action": "Implement field-level encryption for PII fields (nationalId, bankAccount, etc.)",
      "definitionOfDone": "PII fields encrypted at rest with key rotation support",
      "riskTags": ["SECURITY", "DATA_INTEGRITY"],
      "labels": ["compliance", "pdpl", "encryption", "pii"]
    },
    {
      "title": "PDPL erasure not implemented - pdpl-service.ts line 337",
      "description": "Data subject erasure request handler has TODO for actual deletion logic. PDPL compliance requires functional erasure within 30 days.",
      "category": "security",
      "priority": "P0",
      "effort": "L",
      "module": "compliance",
      "location": { "filePath": "services/compliance/pdpl-service.ts", "lineStart": 337 },
      "action": "Implement cascade deletion logic for data subject erasure requests",
      "definitionOfDone": "Erasure request triggers full data removal across all collections with audit trail",
      "riskTags": ["SECURITY", "DATA_INTEGRITY"],
      "labels": ["compliance", "pdpl", "gdpr", "erasure"]
    },
    {
      "title": "PDPL erasure warning at line 353 - not implemented",
      "description": "Service logs warning that erasure is requested but not implemented. This violates data protection regulations.",
      "category": "security",
      "priority": "P0",
      "effort": "M",
      "module": "compliance",
      "location": { "filePath": "services/compliance/pdpl-service.ts", "lineStart": 353 },
      "action": "Complete erasure implementation",
      "definitionOfDone": "No warning logged; erasure executes successfully",
      "riskTags": ["SECURITY"],
      "labels": ["compliance", "pdpl"]
    },
    {
      "title": "SADAD/SPAN live mode not implemented - payout-processor.ts",
      "description": "Payment processor at line 599 logs that live mode is requested but not implemented. Production payouts cannot be processed.",
      "category": "bug",
      "priority": "P0",
      "effort": "XL",
      "module": "finance",
      "location": { "filePath": "services/finance/payout-processor.ts", "lineStart": 599 },
      "action": "Implement SADAD/SPAN live mode integration with Saudi payment rails",
      "definitionOfDone": "Live payouts execute successfully with proper audit trail",
      "riskTags": ["FINANCIAL", "INTEGRATION"],
      "labels": ["payments", "sadad", "span", "saudi-integration"]
    },
    {
      "title": "Payout live mode stub at line 611 - not implemented",
      "description": "Second payout live mode log at line 611 confirms live payouts are stubbed.",
      "category": "bug",
      "priority": "P0",
      "effort": "M",
      "module": "finance",
      "location": { "filePath": "services/finance/payout-processor.ts", "lineStart": 611 },
      "action": "Complete payout live mode implementation",
      "definitionOfDone": "Live payouts functional end-to-end",
      "riskTags": ["FINANCIAL"],
      "labels": ["payments", "live-mode"]
    },
    {
      "title": "Vendor fraud detection stubs - vendor-intelligence.ts lines 817-863",
      "description": "Multiple fraud detection functions are deprecated STUBs not implemented for production: activity spike detection (818), duplicate listings (834), price manipulation (849), fake review detection (864).",
      "category": "feature",
      "priority": "P1",
      "effort": "XL",
      "module": "souq",
      "location": { "filePath": "services/souq/vendor-intelligence.ts", "lineStart": 817 },
      "action": "Implement ML-based fraud detection algorithms for marketplace integrity",
      "definitionOfDone": "All 4 fraud detection methods return real analysis results",
      "riskTags": ["SECURITY", "DATA_INTEGRITY"],
      "labels": ["fraud-detection", "marketplace", "ml"]
    },
    {
      "title": "Login analytics query TODO - vendor-intelligence.ts line 780",
      "description": "TODO to query actual login data from analytics. Currently using placeholder data.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "souq",
      "location": { "filePath": "services/souq/vendor-intelligence.ts", "lineStart": 780 },
      "action": "Integrate with analytics service for real login data",
      "definitionOfDone": "Login analytics pulled from actual data source",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["analytics", "marketplace"]
    },
    {
      "title": "Ejar API call TODO - lease-service.ts line 1028",
      "description": "Lease service has TODO to implement actual Ejar API integration for Saudi rental contracts.",
      "category": "feature",
      "priority": "P1",
      "effort": "L",
      "module": "aqar",
      "location": { "filePath": "services/aqar/lease-service.ts", "lineStart": 1028 },
      "action": "Implement Ejar API integration for contract registration",
      "definitionOfDone": "Contracts successfully registered with Ejar platform",
      "riskTags": ["INTEGRATION"],
      "labels": ["ejar", "saudi-integration", "aqar"]
    },
    {
      "title": "Tenant notification TODO - inspection-service.ts line 504",
      "description": "TODO to send notification to tenant if requested during inspection scheduling.",
      "category": "feature",
      "priority": "P2",
      "effort": "S",
      "module": "fm",
      "location": { "filePath": "services/fm/inspection-service.ts", "lineStart": 504 },
      "action": "Implement tenant notification via notification-engine service",
      "definitionOfDone": "Tenant receives email/SMS when inspection is scheduled",
      "riskTags": [],
      "labels": ["notifications", "fm", "inspection"]
    },
    {
      "title": "Report generation integration TODO - inspection-service.ts line 754",
      "description": "TODO to integrate inspection service with report generation service.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "fm",
      "location": { "filePath": "services/fm/inspection-service.ts", "lineStart": 754 },
      "action": "Integrate with automated-reports service for inspection report generation",
      "definitionOfDone": "Inspection completion triggers PDF report generation",
      "riskTags": [],
      "labels": ["reports", "fm", "inspection"]
    },
    {
      "title": "BI Dashboard hardcoded KPIs - bi-dashboard.ts lines 535-873",
      "description": "Multiple hardcoded KPI placeholders: cashFlow estimate (535), expenseRatio (538), firstTimeFixRate (653), trainingHours (873).",
      "category": "bug",
      "priority": "P2",
      "effort": "M",
      "module": "reports",
      "location": { "filePath": "services/reports/bi-dashboard.ts", "lineStart": 535 },
      "action": "Replace hardcoded values with actual data queries",
      "definitionOfDone": "All KPIs calculated from real data",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["bi", "dashboard", "kpi"]
    },
    {
      "title": "Customer trend calculation TODO - customer-insights.ts line 1090",
      "description": "TODO to implement real trend calculation in customer insights service.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "crm",
      "location": { "filePath": "services/crm/customer-insights.ts", "lineStart": 1090 },
      "action": "Implement statistical trend analysis for customer metrics",
      "definitionOfDone": "Trend data reflects actual customer behavior patterns",
      "riskTags": [],
      "labels": ["crm", "analytics", "trends"]
    },
    {
      "title": "Subscription plan change flow TODO - page.tsx line 816 (FIXZIT-SUB-001)",
      "description": "TODO FIXZIT-SUB-001: Plan change flow not implemented in subscription management UI.",
      "category": "feature",
      "priority": "P2",
      "effort": "L",
      "module": "billing",
      "location": { "filePath": "app/page.tsx", "lineStart": 816 },
      "action": "Implement plan upgrade/downgrade UI flow with proration",
      "definitionOfDone": "Users can change subscription plans with prorated billing",
      "riskTags": ["FINANCIAL"],
      "labels": ["subscriptions", "billing", "ui"]
    },
    {
      "title": "Subscription cancellation flow TODO - page.tsx line 820 (FIXZIT-SUB-002)",
      "description": "TODO FIXZIT-SUB-002: Cancellation flow not implemented in subscription management UI.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "billing",
      "location": { "filePath": "app/page.tsx", "lineStart": 820 },
      "action": "Implement subscription cancellation with retention offers",
      "definitionOfDone": "Users can cancel subscription with proper offboarding flow",
      "riskTags": ["FINANCIAL"],
      "labels": ["subscriptions", "billing", "ui"]
    },
    {
      "title": "Ticketing system integration TODO - route.ts line 32",
      "description": "TODO to integrate with ticketing system in API route.",
      "category": "feature",
      "priority": "P3",
      "effort": "M",
      "module": "support",
      "location": { "filePath": "app/api/route.ts", "lineStart": 32 },
      "action": "Integrate with ticketing service for support workflow",
      "definitionOfDone": "API creates/updates tickets in support system",
      "riskTags": [],
      "labels": ["support", "integration"]
    },
    {
      "title": "Mock data replacement TODO - route.ts line 60",
      "description": "TODO to replace mock data with actual DB queries.",
      "category": "bug",
      "priority": "P2",
      "effort": "S",
      "module": "api",
      "location": { "filePath": "app/api/route.ts", "lineStart": 60 },
      "action": "Replace mock data with MongoDB queries",
      "definitionOfDone": "API returns real data from database",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["mock-data", "database"]
    },
    {
      "title": "Redis pub/sub scaling TODO - route.ts line 133",
      "description": "TODO to publish events to Redis for horizontal scaling.",
      "category": "feature",
      "priority": "P3",
      "effort": "M",
      "module": "infrastructure",
      "location": { "filePath": "app/api/route.ts", "lineStart": 133 },
      "action": "Implement Redis pub/sub for event distribution",
      "definitionOfDone": "Events distributed across instances via Redis",
      "riskTags": ["PERFORMANCE"],
      "labels": ["redis", "scaling", "infrastructure"]
    },
    {
      "title": "Health monitoring integration TODO - route.ts line 221",
      "description": "TODO to integrate Datadog/Prometheus/NewRelic health data.",
      "category": "feature",
      "priority": "P3",
      "effort": "M",
      "module": "monitoring",
      "location": { "filePath": "app/api/route.ts", "lineStart": 221 },
      "action": "Integrate with observability platform for real health metrics",
      "definitionOfDone": "Health endpoint returns actual monitoring data",
      "riskTags": [],
      "labels": ["monitoring", "observability"]
    },
    {
      "title": "AI building model generation TODO - buildingModel.ts line 471",
      "description": "TODO for AI-powered building model generation using LLM.",
      "category": "feature",
      "priority": "P3",
      "effort": "XL",
      "module": "aqar",
      "location": { "filePath": "lib/buildingModel.ts", "lineStart": 471 },
      "action": "Implement LLM-based building model generation",
      "definitionOfDone": "LLM generates building models from descriptions",
      "riskTags": [],
      "labels": ["ai", "llm", "aqar"]
    },
    {
      "title": "MFA approval system integration TODO - mfaService.ts line 399",
      "description": "TODO for centralized approval system integration in MFA service.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "auth",
      "location": { "filePath": "lib/mfaService.ts", "lineStart": 399 },
      "action": "Integrate MFA with centralized approval workflow",
      "definitionOfDone": "MFA approval requests routed to approval system",
      "riskTags": ["SECURITY"],
      "labels": ["mfa", "auth", "approval"]
    },
    {
      "title": "Superadmin notification badge TODO - SuperadminHeader.tsx line 212",
      "description": "TODO to add notification count badge when API is available.",
      "category": "feature",
      "priority": "P3",
      "effort": "S",
      "module": "ui",
      "location": { "filePath": "components/SuperadminHeader.tsx", "lineStart": 212 },
      "action": "Add notification badge with count from notifications API",
      "definitionOfDone": "Badge displays unread notification count",
      "riskTags": [],
      "labels": ["ui", "notifications", "superadmin"]
    },
    {
      "title": "OTP bypass blocking TODO - instrumentation-node.ts line 66",
      "description": "TODO to re-enable blocking once OTP bypass detection is fixed. Security feature disabled.",
      "category": "security",
      "priority": "P1",
      "effort": "M",
      "module": "auth",
      "location": { "filePath": "instrumentation-node.ts", "lineStart": 66 },
      "action": "Fix OTP bypass detection and re-enable blocking",
      "definitionOfDone": "OTP bypass attempts are blocked with proper logging",
      "riskTags": ["SECURITY"],
      "labels": ["security", "otp", "auth"]
    },
    {
      "title": "Comments API not implemented - page.tsx line 313",
      "description": "UI displays 'comments API not implemented yet' to users.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "ui",
      "location": { "filePath": "app/page.tsx", "lineStart": 313 },
      "action": "Implement comments API and remove placeholder text",
      "definitionOfDone": "Comments feature fully functional",
      "riskTags": [],
      "labels": ["comments", "api", "ui"]
    },
    {
      "title": "Session termination not implemented - page.tsx line 891",
      "description": "UI indicates session termination feature is not implemented.",
      "category": "feature",
      "priority": "P2",
      "effort": "M",
      "module": "auth",
      "location": { "filePath": "app/page.tsx", "lineStart": 891 },
      "action": "Implement session termination with token invalidation",
      "definitionOfDone": "Admin can terminate user sessions remotely",
      "riskTags": ["SECURITY"],
      "labels": ["auth", "sessions", "security"]
    },
    {
      "title": "DEFERRED: FM Properties schema mismatch - Property.ts line 8 (TODO-002)",
      "description": "Schema mismatch between FM and Aqar Property models. Marked as DEFERRED.",
      "category": "refactor",
      "priority": "P3",
      "effort": "L",
      "module": "fm",
      "location": { "filePath": "server/models/Property.ts", "lineStart": 8 },
      "action": "Align Property schemas between FM and Aqar domains",
      "definitionOfDone": "Single unified Property schema or clear mapping",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["schema", "deferred", "refactor"]
    },
    {
      "title": "BLOCKED: Souq Orders mismatch - ClaimsOrder.ts line 16 (TODO-001)",
      "description": "Souq Orders schema mismatch. Marked as BLOCKED pending dependency.",
      "category": "refactor",
      "priority": "P3",
      "effort": "M",
      "module": "souq",
      "location": { "filePath": "server/models/ClaimsOrder.ts", "lineStart": 16 },
      "action": "Resolve orders schema mismatch with claims system",
      "definitionOfDone": "Orders and claims schemas aligned",
      "riskTags": ["DATA_INTEGRITY"],
      "labels": ["schema", "blocked", "refactor"]
    },
    {
      "title": "Test mock setup incomplete - TG-005 batch (orders/send/import tests)",
      "description": "Multiple test files have TODO(TG-005) for incomplete mock setup: orders.route.test.ts (lines 149, 177, 193, 209), send.test.ts (163), issues-import.route.test.ts (195, 227, 238, 250).",
      "category": "missing_test",
      "priority": "P2",
      "effort": "L",
      "module": "tests",
      "location": { "filePath": "tests/api/souq/orders.route.test.ts", "lineStart": 149 },
      "action": "Complete mock setup for all TG-005 marked tests",
      "definitionOfDone": "All TG-005 tests pass with proper mocks",
      "riskTags": ["TEST_GAP"],
      "labels": ["tests", "mocks", "tg-005"]
    },
    {
      "title": "Vitest multi-project migration TODO - vitest.config.ts line 57",
      "description": "TODO to migrate vitest to multi-project structure for better test organization.",
      "category": "refactor",
      "priority": "P3",
      "effort": "M",
      "module": "tests",
      "location": { "filePath": "vitest.config.ts", "lineStart": 57 },
      "action": "Migrate to vitest workspaces/projects structure",
      "definitionOfDone": "Tests organized by project with proper isolation",
      "riskTags": [],
      "labels": ["tests", "vitest", "refactor"]
    },
    {
      "title": "TBD placeholders in issue-log.ts - lines 225, 242, 272, 343, 518",
      "description": "Multiple 'TBD' file path defaults in issue logging utility.",
      "category": "bug",
      "priority": "P3",
      "effort": "S",
      "module": "tools",
      "location": { "filePath": "issue-tracker/scripts/issue-log.ts", "lineStart": 225 },
      "action": "Replace TBD placeholders with proper defaults or require explicit values",
      "definitionOfDone": "No TBD values in production logs",
      "riskTags": [],
      "labels": ["placeholder", "issue-tracker"]
    }
  ]
}
