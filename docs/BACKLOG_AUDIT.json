{
  "extracted_at": "2025-12-14T20:15:00+0300",
  "source_file": "docs/PENDING_MASTER.md",
  "counts": {
    "total": 12,
    "pending": 11,
    "resolved": 1,
    "by_priority": { "P0": 1, "P1": 2, "P2": 4, "P3": 5 },
    "by_category": { "security": 2, "bug": 3, "efficiency": 2, "missing_tests": 5 }
  },
  "issues": [
    {
      "key": "SEC-002",
      "externalId": "SEC-002",
      "category": "security",
      "priority": "P1",
      "status": "open",
      "title": "Tenant scope missing across DB queries",
      "location": "app/api/**/route.ts",
      "sourceRef": "docs/PENDING_MASTER.md:44-48",
      "evidenceSnippet": "SEC-002 | P1 | 50+ DB queries missing tenant scope validation | app/api/**/route.ts | Potential cross-tenant data leaks (IDOR)",
      "riskTags": ["MULTI_TENANT"],
      "effort": "L"
    },
    {
      "key": "BUG-001",
      "externalId": "BUG-001",
      "category": "bug",
      "priority": "P1",
      "status": "open",
      "title": "process.env used directly in client code",
      "location": "app/**/*.tsx",
      "sourceRef": "docs/PENDING_MASTER.md:44-49",
      "evidenceSnippet": "BUG-001 | P1 | 40+ direct process.env accesses in client code | app/**/*.tsx | SSR/hydration breaks, secret exposure risk",
      "riskTags": ["CONFIG", "SECURITY"],
      "effort": "M"
    },
    {
      "key": "JSON-PARSE",
      "externalId": "JSON-PARSE",
      "category": "bug",
      "priority": "P0",
      "status": "open",
      "title": "request.json without guard across 66 routes",
      "location": "app/api/**",
      "sourceRef": "docs/PENDING_MASTER.md:4575-4593",
      "evidenceSnippet": "JSON-PARSE | request.json() without try/catch (66 routes) | app/api/** | Critical | Pending",
      "riskTags": ["SECURITY", "REGRESSION"],
      "effort": "M"
    },
    {
      "key": "PERF-001",
      "externalId": "PERF-001",
      "category": "efficiency",
      "priority": "P2",
      "status": "open",
      "title": "N+1 BuyBoxService calls in auto-repricer",
      "location": "services/souq/pricing/auto-repricer.ts",
      "sourceRef": "docs/PENDING_MASTER.md:4575-4587",
      "evidenceSnippet": "PERF-001 | N+1 in auto-repricer (BuyBoxService in loop) | services/souq/pricing/auto-repricer.ts | High latency/DB churn | Pending",
      "riskTags": ["PERFORMANCE"],
      "effort": "M"
    },
    {
      "key": "PERF-002",
      "externalId": "PERF-002",
      "category": "efficiency",
      "priority": "P3",
      "status": "open",
      "title": "Sequential updates in fulfillment/claims",
      "location": "services/souq/fulfillment-service.ts; services/souq/returns/claim-service.ts",
      "sourceRef": "docs/PENDING_MASTER.md:16760-16765",
      "evidenceSnippet": "PERF-002 | Sequential updates in fulfillment/claims | services/souq/fulfillment-service.ts, services/souq/returns/claim-service.ts | Latency, DB load | Pending",
      "riskTags": ["PERFORMANCE"],
      "effort": "M"
    },
    {
      "key": "TEST-001",
      "externalId": "TEST-001",
      "category": "missing_tests",
      "priority": "P3",
      "status": "open",
      "title": "Increase Souq test coverage (checkout, fulfillment, repricer)",
      "location": "tests/api/souq/*",
      "sourceRef": "docs/PENDING_MASTER.md:960-966",
      "evidenceSnippet": "TEST-001 | souq | 75 | 26 | 49 | P2 — checkout, fulfillment, repricer",
      "riskTags": ["TEST-GAP"],
      "effort": "XL"
    },
    {
      "key": "TEST-002",
      "externalId": "TEST-002",
      "category": "missing_tests",
      "priority": "P2",
      "status": "open",
      "title": "Create HR module tests (employees CRUD, payroll)",
      "location": "tests/api/hr/*",
      "sourceRef": "docs/PENDING_MASTER.md:153-156",
      "evidenceSnippet": "TEST-002 — Create HR module tests (employees CRUD, payroll) [P2, M effort]",
      "riskTags": ["TEST-GAP"],
      "effort": "M"
    },
    {
      "key": "TEST-003",
      "externalId": "TEST-003",
      "category": "missing_tests",
      "priority": "P2",
      "status": "open",
      "title": "Create Finance module tests (invoices, payments, billing)",
      "location": "tests/api/finance/*",
      "sourceRef": "docs/PENDING_MASTER.md:153-156",
      "evidenceSnippet": "TEST-003 — Create Finance module tests (invoices, payments, billing) [P2, L effort]",
      "riskTags": ["TEST-GAP", "FINANCIAL"],
      "effort": "L"
    },
    {
      "key": "TEST-004",
      "externalId": "TEST-004",
      "category": "missing_tests",
      "priority": "P3",
      "status": "open",
      "title": "Increase CRM module test coverage",
      "location": "tests/api/crm/*",
      "sourceRef": "docs/PENDING_MASTER.md:960-966",
      "evidenceSnippet": "TEST-004 | crm | 4 | 1 | 3 | P3 — leads, contacts, activities",
      "riskTags": ["TEST-GAP"],
      "effort": "M"
    },
    {
      "key": "TEST-005",
      "externalId": "TEST-005",
      "category": "missing_tests",
      "priority": "P3",
      "status": "open",
      "title": "Increase Aqar module test coverage",
      "location": "tests/api/aqar/*",
      "sourceRef": "docs/PENDING_MASTER.md:960-966",
      "evidenceSnippet": "TEST-005 | aqar | 16 | 12 | 4 | P3 — property listings",
      "riskTags": ["TEST-GAP"],
      "effort": "S"
    },
    {
      "key": "BUG-011",
      "externalId": "BUG-011",
      "category": "bug",
      "priority": "P3",
      "status": "open",
      "title": "Add .catch() to notification chains",
      "location": "lib/notifications/*",
      "sourceRef": "docs/PENDING_MASTER.md:896-901",
      "evidenceSnippet": "BUG-011 | Add .catch() to notification .then() chains | Pending",
      "riskTags": [],
      "effort": "S"
    },
    {
      "key": "BUG-012",
      "externalId": "BUG-012",
      "category": "bug",
      "priority": "P2",
      "status": "resolved",
      "title": "MongoDB localhost SSL enforcement breaks local development",
      "location": "lib/mongo.ts",
      "sourceRef": "code-review:lib/mongo.ts:219-232",
      "evidenceSnippet": "enforceTls blocked localhost MongoDB; added isLocalhost detection to disable SSL for local dev",
      "riskTags": ["CONFIG", "DEV-EXPERIENCE"],
      "effort": "S",
      "resolution": {
        "resolvedAt": "2025-12-14T20:15:00+0300",
        "commit": "uncommitted",
        "description": "Added localhost detection (127.0.0.1, localhost) to skip TLS enforcement. Production/Atlas connections still enforce TLS by default.",
        "files": ["lib/mongo.ts"]
      }
    }
  ]
}
